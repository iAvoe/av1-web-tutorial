<!DOCTYPE html>
<html lang='zh-hans'>
	<head>
        <meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- JS Codes -->
        <script src="./files/tutorial.js" defer></script>
        <!-- MathJax JS -->
        <script src="./files/mathJax3-tex-svg.js" defer></script>
        <!-- Custom CSS -->
        <link rel="preload" href="./files/tutorial.css" as="style">
        <link rel="stylesheet" href="./files/tutorial.css">
        <!-- highlight JS & CSS (language-cpp, language-bash, language-powershell) -->
        <link rel="stylesheet" href="./files/docco.min.css">
        <script src="./files/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
        <title>AV1 编码教程 HTML 版</title>
	</head>
	<body class="text-gray-main">
        <div class="container-title">
            <h1>AV1 编码教程 <span class="text-blue-emph">HTML 版</span></h1>
            <p>欢迎阅读！若有任何问题，请加入 QQ 群<a href='https://jq.qq.com/?_wv=1027&k=5YJFXyf'>691892901</a>。本教程虽然相对于 x264、x265 教程严谨，并提供了测试数据提高严谨性，但仍仅具备业余参考价值。本文省略了 x264、x265 教程中出现过的内容，查阅本文要求读者已经明晰视频编码器的基本原理和一定细节。</p>
            <!-- x264 教程副本，更改需手动同步 ! 未同步 ! 未同步 ! 未同步 { -->
            <h2 class="my-3">地图</h2>
            <ol class="font-monospace">
                <li><a href="../../x264-web-tutorial/HTML/index.html">x264 教程网页版</a></li>
                <li><a href="../../x265-web-tutorial/HTML/index.html">x265 教程网页版</a></li>
                <li><a href="../../av1-web-tutorial/HTML/index.html" class="disabled">AV1 教程网页版（你在这里）</a>
                    <ul class="text-xs">
                        <li>概览：
                            <a class="toSelf" href="#h2-1">视频的压制</a>
                            <a class="toSelf" href="#h2-2">流结构</a>
                            <a class="toSelf" href="#h2-3">图片结构</a>
                        </li>
                        <li>编码：
                            <a class="toSelf" href="#h2-4">变换</a>
                            <a class="toSelf" href="#h2-5">前瞻</a>
                            <a class="toSelf" href="#h2-6">帧间预测</a>
                            <a class="toSelf" href="#h2-7">帧内预测</a>
                            <a class="toSelf" href="#h2-8">量化</a>
                            <a class="toSelf" href="#h2-9">熵编码</a>
                            <a class="toSelf" href="#h2-10">模式决策</a>
                            <a class="toSelf" href="#h2-11">环路滤镜</a>
                        </li>
                        <li>参数：
                            <a class="toSelf" href="#h2-13">SVT-AV1 参数与预设</a>
                            <a class="toSelf" href="#h2-14">SVT-AV1 报错与警告</a>
                            <!--本教程在设计上考虑了多编码器的参数、报错说明，但由于测试工作量远超预期，所以最终只完成了一个编码器
                            <a class="toSelf disabled" href="#h2-15">某编码器 参数与预设</a>
                            <a class="toSelf disabled" href="#h2-16">某编码器 报错与警告</a>-->
                        </li>
                        <li>附录：
                            <a class="toSelf" href="#h2-17">画质指标</a>
                            <a class="toSelf" href="#h2-18">编码测试</a>
                            <a class="toSelf" href="#h2-19">软件下载</a>
                            <a class="toSelf" href="#h2-20">参考文献</a>
                        </li>
                    </ul>
                </li>
                <li>附录：
                    <a href="https://www.nazorip.site/archives/44/">QAAC 音频压缩教程</a> 或
                    <a href="https://github.com/iAvoe/QAAC-Tutorial-Standalone/blob/master/%E6%95%99%E7%A8%8B.md">Github 副本</a>
                </li>
                <li>附录：<a href="https://nazorip.site/archives/334/">x264，libx264，x265，libx265 压制教程急用版</a></li>
                <li>附录：<a href="https://nazorip.site/archives/169/">ffprobe 教程</a> 或
                    <a href="https://github.com/iAvoe/FFprobe-Tutorial-Standalone/blob/master/%E6%95%99%E7%A8%8B.md">Github 副本</a>
                </li>
                <li>附录：<a href="https://nazorip.site/archives/1068/">ffprobe+Excel 可视化视频流分析</a></li>
                <li>附录：<a href="../../deint-ivtc-web-tutorial/HTML/index.html">交错转逐行与 IVTC 处理</a></li>
                <li>附录：<a href="../../img-sequence-enc-web-tutorial/HTML/index.html">图像序列的处理</a></li>
                <li>相关：<a href="https://nazorip.site/archives/1052/">mpv 视频播放器的安装与设置</a></li>
            </ol>
            <h3>打印支持（点击以下按钮）</h3>
            <button type="button" class="border-main rounded-3 ms-1 px-1" onclick="toggleCollapseAll()">1/5. 同步展开/折叠所有内容</button>
            <button type="button" class="border-main rounded-3 ms-1 px-1" onclick="printMode()">2. 进入打印模式排版</button>
            <button type="button" class="border-main rounded-3 ms-1 px-1" onclick="window.print()">3. 打印</button>
            <button type="button" class="border-main rounded-3 ms-1 px-1" onclick="printModeOff()">4. 退出打印排版</button>
            <p class="font-monospace px-1 text-smaller">推荐设置：彩色模式、不打印背景、0.04 英寸边距、打印页眉页脚</p>
            <!-- } -->
            <h3>移动端支持</h3>
            <p>点击图片即可轮询 3 种图片大小。窗口宽度大于窗口高度则切换到宽屏/桌面端/平板电脑排版，否则切换到窄屏/移动端排版。</p>
        </div>
        <div class="container-mobile rounded-9 border-main">
            <h3>SVT-AV1 测试总结简述</h3>
            <p>测试结果及隐藏规律见测试版块。SVT-AV1 在测试中展现出了显著的性能优势：Preset 3，CRF 30 在压缩率与编码速度上均较 x265 veryslow CRF 18 约提升 2 倍；在一般场景有着接近和超越 x265 的播放与暂停画质，并且在高复杂度和分辨率的视频中产生了速度、画质、压缩率完胜的结果。x265 得到的码率均 2 倍于 SVT-AV1，因而产生了纵观上的画质领先。</p>
            <p>SVT-AV1 的缺点在于导致失真的机制复杂，以目前的结果只能推测是默认使用单值量化，且在编码各阶段实施了多种“类去块机制”而产生观众可能不适应的某种涂抹失真（失真图案相比 x265 更明显、可能类似于平滑块失真致其面积外溢），使得低对比度或帧间连贯性差的场景出现播放可见的涂抹。不过，只要给予合理的 CRF、Tune、自适应量化方差、开启量化矩阵、以及对有噪声素材启用高强度 FGS 分离即可将失真最小化。</p>
            <p>由于 FGS 只能复现同类噪声，所以尽管强度越高则观感越像，但对画质指标来说区别也越大，因此画质指标均会失效。</p>
            <p>产品设计有“性能”与“体验”两方可选：高端相机有注重延迟、精度、后期和专注便携、易用、好玩之分；高端外设领域有低延迟轻量化和人体工学优先之分；高端轿车有性能车与豪华车之分。虽然 SVT-AV1 速度更快、压缩率更高、极限场景领先、具备胶片颗粒合成能力，是性能之选；在用户体验层面，x265 用码率换来高画质、失真图案更接近原画、在普通场景仍能够提供不错的压缩率、导致失真的机制和预防更直白，在注重画质稳定性的编码上更加可靠，是体验之选。</p>
            <p>测试信息来自于 SVT-AV1 v3.0.0、x265 v4.0；SVT-AV1 若有大版本更新，则以上结论可能会部分失效。</p>
            
            <h2 id="h2-1">视频的压制</h2>
            <ol>
                <li><b>打开编码器</b>
                    <ul>
                        <li>如果编码器内置了如 Lavf 的解封装和解码动态链接库，则编码器可以自动解封装、解码和封装视频文件：
                            <ul class="text-smaller">
                                <li>GUI 软件通过发送 CLI 命令，或者使用像 Bash/CMD 这样的 CLI 工具来打开编码器程序。</li>
                                <li>编码器通常根据输出文件的后缀名自动封装视频文件。</li>
                            </ul>
                        </li>
                        <li>如果编码器没有内置解封装解码功能，则：
                            <ul class="text-smaller">
                                <li>使用 ffmpeg、VapourSynth、avs2yuv 通过 pipe 传输流到编码器</li>
                                <li>调用 ffmpeg、Premiere、Final Cut Pro X 等软件内置的编码器动态链接库</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><b>解封装和解码</b>
                    <ul>
                        <li>解封装解码工具将已解压缩的 YUV for MPEG 或 RAW 格式视频流传递给编码器，编码器得到输入信号</li>
                    </ul>
                </li>
                <li><b>编码过程</b>
                    <ul>
                        <li>“<b>前瞻进程</b>”：
                            <ol class="text-smaller">
                                <li>完成时域依赖性建模 TPL</li>
                                <li>判断是否使用录屏特化编码功能</li>
                                <li>完成时域降噪过滤</li>
                                <li>判断拆分 GOP 的分层预测结构到 mini-GOP（SVT-AV1）</li>
                            </ol>
                        </li>
                        <li><b>分帧/帧类型决策</b>：
                            <ul class="text-smaller">
                                <li>据前瞻进程结果、关键帧间隔、转场检测而设置：
                                    <ul>
                                        <li>关键帧</li>
                                        <li>完全帧内编码帧</li>
                                        <li>单帧参考帧</li>
                                        <li>混合参考帧</li>
                                    </ul>
                                </li>
                                <li>据时域降噪过滤的结果设置：
                                    <ul>
                                        <li>支线被参考帧</li>
                                        <li>叠加帧</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><b>粗分块</b>：
                            <ul class="text-smaller">
                                <li>据用户设置分为 128x128 或 64x64 的 Superblock</li>
                            </ul>
                        </li>
                        <li><b>帧间预测</b>：
                            <ol class="text-smaller">
                                <li>当前帧针对 DRL 中的被参考帧进行动态搜索，得到一系列动态信息方案</li>
                                <li>由向量规划预测查找和整理出预测量</li>
                                <li>由动态规划筛选出最适合某帧的预测量</li>
                                <li>由运动补偿提高动态向量的精度</li>
                                <li>拼合混合参考块所用的 2 项参考源或 2 种动态补偿</li>
                            </ol>
                        </li>
                        <li><b>细分块</b>：
                            <ul class="text-smaller"><li>根据帧间预测进一步细分宏块或编码树单元到最小的 4x4 编码块</li></ul>
                        </li>
                        <li><b>帧间残差编码</b>：
                            <ol class="text-smaller">
                                <li>对比实际画面与动态搜索与补偿后所得的图像，得到残差</li>
                                <li>对残差进行变换和量化，存储到 P-B 帧上，在解码时与 I 帧叠加以得到原始画面</li>
                            </ol>
                        </li>
                        <li><b>帧内预测</b>：
                            <ol class="text-smaller">
                                <li>补全参考源序列</li>
                                <li>选择使用夹角、平滑、递归、CFL、IBC、调色板等模式编码关键帧</li>
                            </ol>
                        </li>
                        <li><b>帧内残差编码</b></li>
                        <li><b>跳过块编码</b></li>
                        <li><b>变换</b>：
                            <ul class="text-smaller">
                                <li>组合使用以下 3 种变换：
                                    <ul>
                                        <li>横/纵向 DCT-2/DCT</li>
                                        <li>横/纵向 DST-7/ADST</li>
                                        <li>横/纵向 FLIPADST（ADST 反方向）</li>
                                    </ul>
                                </li>
                                <li>或者使用 IDT/IDTX</li>
                            </ul>
                        </li>
                        <li><b>量化</b>：
                            <ul class="text-smaller">
                                <li>根据选择的率控制模式得到每帧 QP</li>
                                <li>根据 TPL 将 QP 精确到粗分块级别</li>
                                <li>使用 VAQ 将 QP 精确到细分块级别</li>
                                <li>将 QP 转换为 QIndex，并应用 QIndex 偏移</li>
                                <li>根据设定选择是否使用量化矩阵</li>
                            </ul>
                        </li>
                        <li><b>熵编码/文本编码</b>
                            <ul class="text-smaller">
                                <li>使用 CDF 统计出字概率</li>
                                <li>使用 CABAC 转换量化后的数据</li>
                                <li>使用客制化整数 AC 处理语法元素</li>
                            </ul>
                        </li>
                        <li><b>环路滤镜</b>：
                            <ol class="text-smaller">
                                <li>去块滤镜</li>
                                <li>CDEF</li>
                                <li>参考缩放环路</li>
                                <li>超分辨率环路</li>
                                <li>环路还原滤镜：
                                    <ul>
                                        <li>分区到 RU</li>
                                        <li>可拆分对称维纳滤镜 SSW</li>
                                        <li>子空间投影回归制导滤镜 SGR</li>
                                        <li>跳过</li>
                                    </ul>
                                </li>
                                <li>胶片颗粒编码滤镜 FGS</li>
                            </ol>
                        </li>
                    </ul>
                </li>
                <li><b>生成视频流</b>
                    <ul>
                        <li>编码器将生成的数据流逐 GOP 打包，并附加元数据，得到视频流。</li>
                    </ul>
                </li>
                <li><b>封装视频流</b>
                    <ul>
                        <li>用户可以通过多种方法将视频流封装为 .mp4、.mkv、.mov 等格式：
                            <ul class="text-smaller">
                                <li>如果编码器内置了像 Lavf 的解封装解码动态链接库，编码器可以根据输出命令行的文件后缀名自动完成。</li>
                                <li>如果编码器没有内置解封装解码功能，则通常会使用 ffmpeg 内部的编码器和解封装工具，使编码完成后自动封装。</li>
                                <li>可以使用工具如 <a href="http://ffmpeg.org/download.html">ffmpeg</a>、<a href="https://www.videohelp.com/software/MP4Box">MP4Box</a>，<a href="https://mkvtoolnix.download/">MKVToolNix</a> 等来进行封装。</li>
                            </ul>
                        </li>
                        <li>此处包括了封装音频，字幕和字体文件</li>
                    </ul>
                </li>
            </ol>
            <div class="align-items-center">
                <img loading="lazy" src="files/av1-decoder-block-diagram.svg" alt="imageR" class="img-medium">
                <p class="text-gray-side mt-0">图：AV1 的简化流程步骤，见 <a href="https://en.wikipedia.org/wiki/AV1">维基百科 - AV1</a></p>
            </div>

            <h2 id="h2-2">流结构</h2>

            <h3>流结构——色彩空间</h3>
            <p>此处列出 2024 年 7 月的 ITU-T <a href="https://www.itu.int/rec/T-REC-H.273-202407-I">H.273 | ISO/IEC 23091-2</a> 色彩空间配置表。该表对于转译多种编码器的播放用矩阵格式/系数指标、传输特质、三原色及白点、 <code>--master-display</code> 等参数设定起到辅助作用。</p>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：H.273 Table 2</button>
            <div class="coll-content">
                <table class="table-center mt-3">
                    <thead class="thead-no-border">
                        <tr class="t-invert-dark">
                            <th class="px-1">值</th>
                            <th class="px-1">原色</th>
                            <th class="px-1"></th>
                            <th class="px-1"></th>
                            <th class="px-1">提议方与标准</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-bottom">
                            <th class="px-1 t-invert-light">0</th>
                            <td class="px-1">保留值</td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1">ITU‑T | ISO/IEC 占位留用</td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">1</th>
                            <th class="px-1">BT.709</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">ITU-R BT.709-6</td>
                        </tr> 
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1"><span style="color:lime">绿</span></td>
                            <td class="px-1 t-light-gray">0.3</td>
                            <td class="px-1 t-light-gray">0.6</td>
                            <td class="px-1">ITU-R BT.1361-0 常规与扩展色域色系</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1"><span style="color:blue">蓝</span></td>
                            <td class="px-1 t-light-gray">0.15</td>
                            <td class="px-1 t-light-gray">0.06</td>
                            <td class="px-1">IEC 61966-2-1 sRGB 或 sYCC</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1"><span style="color:red">红</span></td>
                            <td class="px-1 t-light-gray">0.64</td>
                            <td class="px-1 t-light-gray">0.33</td>
                            <td class="px-1">IEC 61966-2-4</td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点 D65</td>
                            <td class="px-1 t-light-gray">0.3127</td>
                            <td class="px-1 t-light-gray">0.329</td>
                            <td class="px-1">SMPTE RP 177 (1993) Annex B</td>
                        </tr>

                        <tr class="border-bottom">
                            <th class="px-1 t-invert-light">2</th>
                            <td class="px-1">留空</td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1">不指定三原色，由视频播放器默认决定</td>
                        </tr>

                        <tr class="border-bottom">
                            <th class="px-1 t-invert-light">3</th>
                            <td class="px-1">保留值</td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1">ITU‑T | ISO/IEC 占位留用</td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">4</th>
                            <th class="px-1">BT.470M</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">ITU‑R BT.470‑6 System M（历史遗留）</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">绿</td>
                            <td class="px-1 t-light-gray">0.21</td>
                            <td class="px-1 t-light-gray">0.71</td>
                            <td class="px-1">美国国家电视系统委员会（1953）</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">蓝</td>
                            <td class="px-1 t-light-gray">0.14</td>
                            <td class="px-1 t-light-gray">0.08</td>
                            <td class="px-1">美国联邦通信委员会（2003）</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">红</td>
                            <td class="px-1 t-light-gray">0.67</td>
                            <td class="px-1 t-light-gray">0.33</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点 C</td>
                            <td class="px-1 t-light-gray">0.31</td>
                            <td class="px-1 t-light-gray">0.316</td>
                            <td class="px-1"> </td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">5</th>
                            <th class="px-1">BT.470B, G</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">ITU‑R BT.470‑6 System B，G（历史遗留）</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">绿</td>
                            <td class="px-1 t-light-gray">0.29</td>
                            <td class="px-1 t-light-gray">0.6</td>
                            <td class="px-1">ITU‑R BT.601‑6 625</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">蓝</td>
                            <td class="px-1 t-light-gray">0.15</td>
                            <td class="px-1 t-light-gray">0.06</td>
                            <td class="px-1">ITU‑R BT.1358 625</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">红</td>
                            <td class="px-1 t-light-gray">0.64</td>
                            <td class="px-1 t-light-gray">0.33</td>
                            <td class="px-1">ITU‑R BT.1700 625 PAL, 625 SECAM</td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点 D65</td>
                            <td class="px-1 t-light-gray">0.3127</td>
                            <td class="px-1 t-light-gray">0.329</td>
                            <td class="px-1"> </td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">6</th>
                            <th class="px-1">BT.601</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">ITU‑R BT.601‑6 525</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">绿</td>
                            <td class="px-1 t-light-gray">0.31</td>
                            <td class="px-1 t-light-gray">0.595</td>
                            <td class="px-1">ITU‑R BT.1358 525</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">蓝</td>
                            <td class="px-1 t-light-gray">0.155</td>
                            <td class="px-1 t-light-gray">0.07</td>
                            <td class="px-1">ITU‑R BT.1700 NTSC</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">红</td>
                            <td class="px-1 t-light-gray">0.63</td>
                            <td class="px-1 t-light-gray">0.34</td>
                            <td class="px-1">SMPTE 170M (2004)</td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点 D65</td>
                            <td class="px-1 t-light-gray">0.3127</td>
                            <td class="px-1 t-light-gray">0.329</td>
                            <td class="px-1">（功能与值 7 所同）</td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">7</th>
                            <th class="px-1">SMPTE 240</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">SMPTE ST 240 (1999)</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">绿</td>
                            <td class="px-1 t-light-gray">0.31</td>
                            <td class="px-1 t-light-gray">0.595</td>
                            <td class="px-1">（功能与值 6 所同）</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">蓝</td>
                            <td class="px-1 t-light-gray">0.155</td>
                            <td class="px-1 t-light-gray">0.07</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">红</td>
                            <td class="px-1 t-light-gray">0.63</td>
                            <td class="px-1 t-light-gray">0.34</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点 D65</td>
                            <td class="px-1 t-light-gray">0.3127</td>
                            <td class="px-1 t-light-gray">0.329</td>
                            <td class="px-1"> </td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">8</th>
                            <th class="px-1">Generic film</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">普通胶片电影（CIE 光源 C 滤镜）</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">绿（Wratten 58）</td>
                            <td class="px-1 t-light-gray">0.243</td>
                            <td class="px-1 t-light-gray">0.692</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">蓝（Wratten 47）</td>
                            <td class="px-1 t-light-gray">0.145</td>
                            <td class="px-1 t-light-gray">0.049</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">红（Wratten 25）</td>
                            <td class="px-1 t-light-gray">0.681</td>
                            <td class="px-1 t-light-gray">0.319</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点 C</td>
                            <td class="px-1 t-light-gray">0.31</td>
                            <td class="px-1 t-light-gray">0.316</td>
                            <td class="px-1"> </td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">9</th>
                            <th class="px-1">BT.2020</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">ITU‑R BT.2020-2</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">绿</td>
                            <td class="px-1 t-light-gray">0.71</td>
                            <td class="px-1 t-light-gray">0.797</td>
                            <td class="px-1">ITU-R BT.2100-2</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">蓝</td>
                            <td class="px-1 t-light-gray">0.131</td>
                            <td class="px-1 t-light-gray">0.046</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">红</td>
                            <td class="px-1 t-light-gray">0.708</td>
                            <td class="px-1 t-light-gray">0.292</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点 D65</td>
                            <td class="px-1 t-light-gray">0.3127</td>
                            <td class="px-1 t-light-gray">0.329</td>
                            <td class="px-1"> </td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">10</th>
                            <th class="px-1">SMPTE 428</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">SMPTE ST 428-1</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">Y</td>
                            <td class="t-light-gray"><div class="align-items-center">0</div></td>
                            <td class="t-light-gray"><div class="align-items-center">1</div></td>
                            <td class="px-1">CIE 1931 XYZ</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">Z</td>
                            <td class="t-light-gray"><div class="align-items-center">0</div></td>
                            <td class="t-light-gray"><div class="align-items-center">0</div></td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">X</td>
                            <td class="t-light-gray"><div class="align-items-center">1</div></td>
                            <td class="t-light-gray"><div class="align-items-center">0</div></td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">中心白点</td>
                            <td class="t-light-gray"><div class="align-items-center">1÷3</div></td>
                            <td class="t-light-gray"><div class="align-items-center">1÷3</div></td>
                            <td class="px-1"> </td>
                        </tr>
                        
                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">11</th>
                            <th class="px-1">SMPTE 431</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">SMPTE RP 431-2</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">绿</td>
                            <td class="px-1 t-light-gray">0.265</td>
                            <td class="px-1 t-light-gray">0.69</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">蓝</td>
                            <td class="px-1 t-light-gray">0.15</td>
                            <td class="px-1 t-light-gray">0.06</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">红</td>
                            <td class="px-1 t-light-gray">0.68</td>
                            <td class="px-1 t-light-gray">0.32</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点</td>
                            <td class="px-1 t-light-gray">0.314</td>
                            <td class="px-1 t-light-gray">0.351</td>
                            <td class="px-1"> </td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">12</th>
                            <th class="px-1">SMPTE 432</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">SMPTE EG 432-1</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">绿</td>
                            <td class="px-1 t-light-gray">0.265</td>
                            <td class="px-1 t-light-gray">0.69</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">蓝</td>
                            <td class="px-1 t-light-gray">0.150</td>
                            <td class="px-1 t-light-gray">0.060</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">红</td>
                            <td class="px-1 t-light-gray">0.68</td>
                            <td class="px-1 t-light-gray">0.32</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点 D65</td>
                            <td class="px-1 t-light-gray">0.3127</td>
                            <td class="px-1 t-light-gray">0.329</td>
                            <td class="px-1"> </td>
                        </tr>

                        <tr class="border-bottom">
                            <th class="px-1 t-invert-light">13~21</th>
                            <td class="px-1">保留值</td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1">ITU‑T | ISO/IEC 占位留用</td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light" rowspan="5">22</th>
                            <th class="px-1">EBU 3213</th>
                            <th class="px-1 t-light-gray">x</th>
                            <th class="px-1 t-light-gray">y</th>
                            <td class="px-1">EBU Tech. 3213-E</td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">绿</td>
                            <td class="px-1 t-light-gray">0.295</td>
                            <td class="px-1 t-light-gray">0.605</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">蓝</td>
                            <td class="px-1 t-light-gray">0.155</td>
                            <td class="px-1 t-light-gray">0.077</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr>
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">红</td>
                            <td class="px-1 t-light-gray">0.63</td>
                            <td class="px-1 t-light-gray">0.34</td>
                            <td class="px-1"> </td>
                        </tr>
                        <tr class="border-bottom">
                            <!--<td class="px-1 t-invert-light"> </td>-->
                            <td class="px-1">白点 D65</td>
                            <td class="px-1 t-light-gray">0.3127</td>
                            <td class="px-1 t-light-gray">0.329</td>
                            <td class="px-1"> </td>
                        </tr>

                        <tr>
                            <th class="px-1 t-invert-light">23~255</th>
                            <td class="px-1">保留值 Reserved</td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1 t-light-gray"> </td>
                            <td class="px-1">ITU‑T | ISO/IEC 占位留用</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>流结构——数据包/封包格式</h3>
            <p>与封装为文件的格式不同，封包格式需要在网络传输的过程中播放，而不是先拷贝文件到本地（如 HTTP、BT、USB 2.0 等）再打开，因此需要视频标准阶段设计和推广。</p>
            <ul>
                <li>不是所有封装格式都支持封包，如 Matroska Video / MKV</li>
                <li>网络数据包主要由标识头（Header）和内容负载（Payload）组成</li>
                <li>AVC/HEVC 使用 NALU，AV1 使用 OBU</li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）网络抽象层单元 NALU</button>
            <div class="coll-content">
                <h4>（1/2）网络抽象层单元 Network Abstract Layer Unit / NAL Unit / NALU</h4>
                <p>AVC，HEVC 等视频编码支持的封包格式：</p>
                <table class="table-center">
                    <thead>
                        <tr>
                            <th>标识</th>
                            <th>占位</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="t-light-gray">
                            <td class="px-3">校验符/禁止位 Forbidden zero bit</td>
                            <td class="px-3">1</td>
                            <td class="px-3">数据完整性校验，必须为 0</td>
                        </tr>
                        <tr>
                            <td class="px-3">单元重要性 NAL reference indicator（NRI）</td>
                            <td class="px-3">2</td>
                            <td class="px-3">单元对视频流的关键程度，按照参考解码的优先级等规则排序</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">单元分类 NALU type</td>
                            <td class="px-3">5~6</td>
                            <td class="px-3">单元对视频流起到的作用，如分片，序列/图片参数集等</td>
                        </tr>
                        <tr>
                            <td class="px-3">空域层级 Layer ID（HEVC）</td>
                            <td class="px-3">6</td>
                            <td class="px-3">兼容 SVC</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">时域层级 Temporal ID（TID，HEVC）</td>
                            <td class="px-3">3</td>
                            <td class="px-3">兼容 SVC</td>
                        </tr>
                        <tr>
                            <td class="px-3">原始数据负载 Raw byte sequence payload（RBSP）</td>
                            <td class="px-3">不定</td>
                            <td class="px-3">视频数据</td>
                        </tr>
                    </tbody>
                </table>
                
                <p><i>部分</i>常见的 NALU 有：</p>
                <ol class="text-smaller">
                    <li><b>分片数据 Coded Slices NALU（Type 1~5）</b>
                        <ul><li>IDR，I，P，B，b 种类的分片</li></ul>
                    </li>
                    <li><b>SEI, SPS, PPS NALU (Type 6~8)</b></li>
                    <li><b>访问分隔符 Access Unit Delimiter NALU（Type 9）</b><ul>
                        <li>遵循显示顺序，标记图片序列（如 GOP）的边界，类似于 IDR 帧的划界作用</li>
                    </ul></li>
                    <li><b>占位对齐符 Filler Data NALU（Type 12）</b><ul>
                        <li>起到数据包之间的对齐作用</li>
                    </ul></li>
                    <li><b>序列完 End of Sequence NALU（Type 10）</b></li>
                    <li><b>视频完/流文件完 End of Stream NALU（Type 11）</b></li>
                </ol>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）开源比特流单元 OBU</button>
            <div class="coll-content">
                <h4>（2/2）开源比特流单元 Open bitstream unit / OBU</h4>
                <p>由 AV1 的视频流格式和 AOMedia Immersive Audio Model（一种新型 3D 沉浸音频流格式）标准所采用。在 AV1 中的 OBU 含有以下标识头：</p>

                <table class="table-center">
                    <thead>
                        <tr>
                            <th>标识</th>
                            <th>占位</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="t-light-gray">
                            <td class="px-3">校验符/禁止位 Forbidden zero bit</td>
                            <td class="px-3">1</td>
                            <td class="px-3">数据完整性校验，必须为 0</td>
                        </tr>
                        <tr>
                            <td class="px-3">单元分类 OBU type</td>
                            <td class="px-3">4</td>
                            <td class="px-3">当前单元起到的作用，如时域分隔符，帧标识头，瓦分组</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">标识头扩展旗标 OBU extension flag</td>
                            <td class="px-3">1</td>
                            <td class="px-3">兼容 SVC，即是否额外读取空域层级、时域层级开关</td>
                        </tr>
                        <tr>
                            <td class="px-3">是否含负载标识 Has size field</td>
                            <td class="px-3">1</td>
                            <td class="px-3">无负载时为 0</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">单元大小 OBU Size</td>
                            <td class="px-3">不定</td>
                            <td class="px-3">即封装数据的大小，用于配置内存空间</td>
                        </tr>
                        <tr>
                            <td class="px-3">原始数据负载 OBU payload</td>
                            <td class="px-3">不定</td>
                            <td class="px-3">视频数据</td>
                        </tr>
                    </tbody>
                </table>

                <p><i>部分</i>常见的 OBU 有：</p>
                <ol class="text-smaller">
                    <li><b>时域分隔符 Temporal delimiter OBU</b>
                        <ul>
                            <li>遵循显示顺序，标记图片序列（如 GOP）的边界，类似于 IDR 帧的划界作用</li>
                            <li>标识头仅显示属性为 Temporal Delimiter；无内容负载</li>
                        </ul>
                    </li>
                    <li><b>帧标识头 Frame header OBU</b>
                        <ul>
                            <li>解码帧所需的元数据</li>
                            <li>标识头可能含 Extension flag，以表示额外的帧信息</li>
                            <li><b>负载</b>：帧类型（宽，高，关键帧，参考帧等），环路滤镜，量化，分块方案等参数</li>
                        </ul>
                    </li>
                    <li><b>瓦分组 Tile group OBU</b>
                        <ul>
                            <li>用于每个瓦片的独立解码和显示，而不是先拼为帧再显示</li>
                            <li>标识头可能含 Extension flag</li>
                            <li><b>负载</b>：可解码的一组瓦片</li>
                        </ul>
                    </li>
                    <li><b>帧 Frame OBU</b>
                        <ul>
                            <li>与帧标识头和瓦分组 OBU 类似，区别是不变更配置，解码部分画面所需的准备更少，性质类似于 IDR 帧和 I 帧中的后者</li>
                            <li>标识头可能含 Extension flag，Has size field</li>
                            <li><b>负载</b>：帧标识头与瓦分组</li>
                        </ul>
                    </li>
                    <li><b>元数据 Metadata OBU</b>
                        <ul>
                            <li>元数据以及一些 AV1 编码的特性</li>
                            <li>标识头含 OBU Type</li>
                            <li><b>负载</b>：VUI，HDR，SEI 等</li>
                        </ul>
                    </li>
                    <li><b>瓦列表 Tile list OBU</b>
                        <ul>
                            <li>与瓦分组 OBU 类似，支持指定用于非完整解码（例如可视窗口渲染）的瓦列表</li>
                            <li>标识头可能含 Extension flag</li>
                            <li>区别是额外给每个瓦附加了标识头</li>
                            <li><b>负载</b>：一系列瓦的时域空域位置，解码顺序，对应被参考帧的索引号等</li>
                        </ul>
                    </li>
                </ol>
                <div class="align-items-center mt-3">
                    <img loading="lazy" src="files/obu-vui-sei/obu_header.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：OBU 数据包的标识头语法结构，见 <a href="https://norkin.org/research/av1_decoder_model/index.html">norkin.org</a></p>
                    <img loading="lazy" src="files/obu-vui-sei/obu_orders.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：OBU 数据包的时间单位 Temporal unit 排列，见 <a href="https://norkin.org/research/av1_decoder_model/index.html">norkin.org</a></p>
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：参数集/控制集 SCS、PCS</button>
            <div class="coll-content">
                <h3>流结构——SCS、PCS</h3>
                <h4>（1/2）序列控制集 Sequence control set (SCS)</h4>
                <p>功效同 AVC、HEVC 的 SPS。</p>
                <table class="table-center">
                    <thead>
                        <tr>
                            <th><b>控制参数</b></th>
                            <th><b>作用</b></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="t-light-gray">
                            <td class="px-3"><code>max_input_luma_width</code></td>
                            <td class="px-3">图片宽</td>
                        </tr>
                        <tr>
                            <td class="px-3"><code>max_input_luma_height</code></td>
                            <td class="px-3">图片高</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3"><code>profile_idc</code></td>
                            <td class="px-3">规格 Profile</td>
                        </tr>
                        <tr>
                            <td class="px-3"><code>level_idc</code></td>
                            <td class="px-3">级别 Level</td>
                        </tr>
                    </tbody>
                </table>

                <h4>（2/2）图片控制集 Picture control set (PCS)</h4>
                <p>功效同 AVC、HEVC 的 PPS。</p>
                <table class="table-center">
                    <thead>
                        <tr>
                            <th><b>控制参数</b></th>
                            <th><b>作用</b></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="t-light-gray">
                            <td class="px-3"><code>av1_frame_type</code></td>
                            <td class="px-3">帧类型标记（SVT-AV1 中为 <code>slice_type</code>）</td>
                        </tr>
                        <tr>
                            <td class="px-3"><code>show_frame</code></td>
                            <td class="px-3">标记可见或隐藏</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3"><code>is_skip_mode_allowed</code></td>
                            <td class="px-3">检查跳过模式可行性开关</td>
                        </tr>
                        <tr>
                            <td class="px-3"><code>allow_high_precision_mv</code></td>
                            <td class="px-3"><span class="text-blue-math">\(\frac{1}{8}\)</span> 像素精度动态向量开关</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3"><code>base_qindex</code></td>
                            <td class="px-3">基础量化值索引</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>流结构/帧间预测——被参考帧列表 Dynamic Reference List（DRL）</h3>
            <p>VP9 与 AV1 中的帧间参考源缓存，长 8 帧，同时作用于编码和解码两端。编码时，编码器中的解码功能将帧内/帧间预测的结果帧更新到该列表中，以供当前正在进行帧间预测编码的帧参考。Open GOP 中的 DRL 更新顺序与视频帧显示顺序高度一致，Closed GOP 下则不会。VP9 中，当前编码帧可以选择其中的 3 帧作为其帧间参考源。这三帧因相对于当前编码帧的位置，而被冠名：<code class="code-bold">LAST_FRAME</code>、<code class="code-bold">GOLDEN_FRAME</code>、<code class="code-bold">ALTREF_FRAME</code>。</p>
            <p class="text-gray-side">注：SVT-AV1 中称为 Decoded picture buffer（DPB）</p>

            <h4>（1/3）支线被参考帧 Alternate Reference Frame（ALTREF）</h4>
            <p>VP8 中，位于当前帧间编码帧“之外”（视频播放器内看不到），图片序列（GOP）中显示顺序靠后或末尾，但解码顺序中靠前的“帧”。ALTREF 的内容由时域降噪过滤 Temporal filtering（TF）进程识别当前图片序列中的运动轨迹合成，以实现类似于 I 帧的被参考帧，之后被 VP9 和 AV1 沿用。这种拆分方法利用了 TF 适用于分离时域不相关信息——噪声，从而得到噪声被削弱的被参考帧，相比 x264、x265 的前瞻进程（Lookahead）压缩率更高，但最终的画质也更差。</p>
            <p>时域降噪过滤处理的说明见下方的前瞻进程——时域降噪过滤。</p>

            <h4>（2/3）金帧/远距离过去帧 Golden Frame</h4>
            <p>VP3 中的“Last intra frame”，于当前帧间编码帧之前。在 VP6 中改为允许任意帧间参考帧，并重定义为“远距离过去帧 Distant past”，相对于 <code class="code-bold">LAST_FRAME</code> 的“Near past”。会被关键帧刷新掉，功能上非常类似于 I 帧，之后被 VP7，8，9 和 AV1 沿用。</p>
            <p class="text-gray-side">注：称呼为“Golden”的原因不明。</p>

            <h4>（3/3）上帧 Last Frame</h4>
            <p>功能上非常类似于 P 帧，于当前帧间编码帧之前。</p>

            <p>AV1 在此之上扩充了：</p>
            <ul>
                <li><code class="code-bold">LAST2_FRAME</code>：位于当前帧间编码帧之前</li>
                <li><code class="code-bold">LAST3_FRAME</code>：位于当前帧间编码帧之前，距离当前帧间编码帧最远</li>
                <li><code class="code-bold">ALTREF2_FRAME</code>：位于当前帧间编码帧之前或之后</li>
                <li><code class="code-bold">BWDREF_FRAME</code>：类似于支线被参考帧，但未经过 TF 处理（噪声与微小细节被保留），所以比 ALTREF 更适合向其之前的帧提供参考</li>
                <li><code class="code-bold">OVERLAY_FRAME</code>：时域降噪过滤处理任意位于分层预测结构底部的帧（SVT-AV1 中仅代表支线被参考帧）时可能会生成的叠加帧。此叠加图片对应于相同的原始源图片，但仅使用源图片的时间滤波版本作为参考来重建原始图片。，以及重建环路的参考</li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：DRL 内帧的更迭，解码的顺序</button>
            <div class="coll-content">
                <p>此外，被参考帧列表中还为帧内编码帧 <code class="code-bold">INTRA_FRAME</code> 留了一个位子，所以共长 8 帧。编码时，VP9 与 AV1 会选择这 8 帧中的任意帧。如 AV1 的帧内帧间混合模式（Interintra）中，这个分块的参考帧列表可能会是 <code class="code-bold">RefFrame[0] = LAST_FRAME; RefFrame[1] = INTRA_FRAME;</code>。</p>
                <p>在当前编码帧选择并完成了帧间预测后，其帧间预测的结果可以选择替换掉被参考帧列表中的任意帧，包括刷新清空该列表；跳过、替换、刷新操作与播放视频的过程一致。解码顺序<i>大致为</i>：</p>
                <ol>
                    <li><code class="code-bold">GOLDEN</code></li>
                    <li><code class="code-bold">ALTREF，ALTREF2</code></li>
                    <li><code class="code-bold">BWDREF</code></li>
                    <li><code class="code-bold">LAST / LAST2 / LAST3</code></li>
                    <li>其它</li>
                </ol>
                <div class="align-items-center">
                    <img loading="lazy" src="files/rate-control/golden-frame-group.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：从关键帧或金帧/远距离过去帧开始的显示（先后）与解码（序号）顺序，以及参考溯帧方向（箭头）</p>
                </div>
            </div>

            <h3>流结构/帧间预测——参考帧 Reference Frame</h3>
            <p>相对于被参考帧，有类似 P 帧的单帧参考帧 <code class="code-bold">SINGLE_REFERENCE</code>，支持被参考帧列表中的 7 帧：</p>
            <ul>
                <li><code class="code-bold">ALTREF2_FRAME</code></li>
                <li><code class="code-bold">BWDREF_FRAME</code></li>
                <li><code class="code-bold">ALTREF_FRAME</code></li>
                <li><code class="code-bold">GOLDEN_FRAME</code></li>
                <li><code class="code-bold">LAST3_FRAME</code></li>
                <li><code class="code-bold">LAST2_FRAME</code></li>
                <li><code class="code-bold">LAST_FRAME</code></li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）单向混合参考帧 UNIDIR</button>
            <div class="coll-content">
                <p>与类似 B 帧，但仍然属于单向参考的混合参考帧 <code class="code-bold">COMPOUND_REFERENCE</code>。混合参考帧下分为单向混合溯帧 <code>UNIDIR_COMP_REFERENCE</code>（前—前—，—后—后）：</p>
                <ul>
                    <li><code class="code-bold">BWDREF_FRAME</code>，<code class="code-bold">ALTREF_FRAME</code></li>
                    <li><code class="code-bold">LAST_FRAME</code>，<code class="code-bold">GOLDEN_FRAME</code></li>
                    <li><code class="code-bold">LAST_FRAME</code>，<code class="code-bold">LAST3_FRAME</code></li>
                    <li><code class="code-bold">LAST_FRAME</code>，<code class="code-bold">LAST2_FRAME</code></li>
                </ul>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）双向混合参考帧 BIDIR</button>
            <div class="coll-content">
                <h4>（2/2）双向混合参考帧</h4>
                <p>以及更类似 B 帧的双向混合参考帧 <code class="code-bold">BIDIR_COMP_REFERENCE</code>（前— —后）。</p>
                <ul class="text-smaller">
                    <li><code class="code-bold">LAST2_FRAME</code>，<code class="code-bold">ALTREF2_FRAME</code></li>
                    <li><code class="code-bold">LAST2_FRAME</code>，<code class="code-bold">BWDREF_FRAME</code></li>
                    <li><code class="code-bold">LAST2_FRAME</code>，<code class="code-bold">ALTREF_FRAME</code></li>
                    <li><code class="code-bold">LAST_FRAME</code>，<code class="code-bold">ALTREF2_FRAME</code></li>
                    <li><code class="code-bold">LAST_FRAME</code>，<code class="code-bold">BWDREF_FRAME</code></li>
                    <li><code class="code-bold">LAST_FRAME</code>，<code class="code-bold">ALTREF_FRAME</code></li>
                    <li><code class="code-bold">GOLDEN_FRAME</code>，<code class="code-bold">ALTREF2_FRAME</code></li>
                    <li><code class="code-bold">GOLDEN_FRAME</code>，<code class="code-bold">BWDREF_FRAME</code></li>
                    <li><code class="code-bold">GOLDEN_FRAME</code>，<code class="code-bold">ALTREF_FRAME</code></li>
                    <li><code class="code-bold">LAST3_FRAME</code>，<code class="code-bold">ALTREF2_FRAME</code></li>
                    <li><code class="code-bold">LAST3_FRAME</code>，<code class="code-bold">BWDREF_FRAME</code></li>
                    <li><code class="code-bold">LAST3_FRAME</code>，<code class="code-bold">ALTREF_FRAME</code></li>
                </ul>
                <p>以帧分瓣格式（Frame segment）编码时，位于分瓣边界的混合参考块需要重设为单帧参考块。</p>
            </div>
            <div class="align-items-center mt-3">
                <img loading="lazy" src="files/inter-prediction/interprediction-mind-map.png" alt="imageR" class="img-medium">
                <p class="text-gray-side mt-0">图：参考帧选取思维导图。见 <a href="https://wikidocs.net/79849">Wikidocs - Reference frame</a></p>
            </div>

            <h3>流结构——图片组 GOP</h3>
            <p>与 AVC、HEVC 中的意义相同，此处不再赘述。</p>

            <h3>流结构——分层预测结构/帧间参考层级 Hierarchical levels/时间层 Temporal layers</h3>
            <p>代表支撑每项 GOP 的帧间关系，每个参考帧都只在每个方向上引用一帧被参考帧。而分层预测结构的分层可以理解为 AVC、HEVC 中的尖塔 B 帧（B-Pyramid）参考结构，决定了量化强度精确到帧类型的分配。</p>
            <div class="align-items-center mt-3">
                <img loading="lazy" src="files/lookahead/interprediction-hierarchical-structure.svg" alt="imageR" class="img-medium">
                <p class="text-gray-side mt-0">图：5 层 GOP 情况下的分层预测结构，见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/svt-av1-encoder-design.md">SVT-AV1 Docs</a></p>
            </div>
            <p>解码出第 1 号帧时，所需的解码顺序大致为分层预测结构底层（0，16）→中层（8，4）→高层（2，1）。如果第 16 号帧为附有叠加帧 <code>OVERLAY</code> 的支线被参考帧 <code>ALTREF</code>，则可以理解为解码的总帧数 +1。这种解码顺序</p>

            <h3>流结构——Mini-GOP（SVT-AV1）</h3>
            <p>根据画面变化拆分原本的固定长度 GOP，以适应一些复杂帧间场景的编码机制（类似于 x264/5 的转场检测）。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）前期动态分析</button>
            <div class="coll-content">
                <h4>（1/2）前期动态分析</h4>
                <p>GOP 和 mini-GOP 的“模式决策”发生在帧类型判断以及动态搜索之前，但决定使用 mini-GOP 要用到动态搜索，因此 SVT-AV1 使用了 1/16 分辨率的原画帧作为参考帧、仅对潜在分层预测结构/时间层中的基础层进行分析，且每帧仅参考相邻的过去参考帧（Closest past reference）进行简化的搜索。得到：</p>
                <ul>
                    <li>基本单位化的失真</li>
                    <li>时域复杂 SB 占比</li>
                    <li>动态向量非 0 SB（活跃块）占比</li>
                    <!--<li>帧间（离帧）动态向量占比（离÷存）</li>-->
                </ul>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）预测结构选择</button>
            <div class="coll-content">
                <h4>（2/2）预测结构选择</h4>
                <p>首先根据层级范围决定计算量。见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-Dynamic-Mini-GoP.md?ref_type=heads">SVT-AV1 Docs</a>：</p>
                <table class="table-center">
                    <thead>
                        <tr>
                            <th class="px-3">预测结构分层</th>
                            <th class="px-3">每 6 层的前期动态搜索量</th>
                            <th class="px-3">基础层与参考帧的动态搜索配对</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-bottom">
                            <td class="px-3">6/5</td>
                            <td class="px-3">首次判断保持 6 层、其它次判断拆为 5 层，共 1+2 次</td>
                            <td class="px-3">尾→首 (31,0)、半→首 (15,0)+尾→半 (31, 15)</td>
                        </tr>
                        <tr class="border-bottom">
                            <td class="px-3">6/5/4</td>
                            <td class="px-3">1 + 2 + 4 次</td>
                            <td class="px-3">...</td>
                        </tr>
                        <tr>
                            <td class="px-3">6/5/4/3</td>
                            <td class="px-3">1 + 2 + 4 + 8 次</td>
                            <td class="px-3">...</td>
                        </tr>
                    </tbody>
                </table>
                <p>其次，设“不拆分”为上层 GOP、“拆分”为下层 GOP，根据情况决定是否拆分：</p>
                <ul>
                    <li><b>拆分会减少失真</b>：下层 GOP 的平均失真（对比原画）小于上层 GOP（并算进上层 GOP 的码率优势）</li>
                    <li><b>拆分会减少分块</b>：下层 GOP 的复杂 SB 占比低，而上层 GOP 的复杂 SB 占比高</li>
                    <li><b>拆分会减少时域复杂度</b>：上层 GOP 的活跃块占比高，且下层 GOP 复现了这种动态信息</li>
                    <li><b>检测到画面缩小场景</b>：下层 GOP 的缩小活动性（Zoom out activity）高</li>
                </ul>
                <p>拆分的步骤会重复进行到设定最低的分层预测结构，或判断为“不拆分”为止。</p>
            </div>

            <h2 id="h2-3">图片结构</h2>

            <h3>图片结构——帧 Frame</h3>
            <p>由帧间编码帧在被参考帧列表 DRL 中匹配。其组合后的架构除了非显示帧以外，与 AVC 的结构差不多，参考帧的搜索范围类似于 x264/5 的 <code>&#45;&#45;ref 4</code>。</p>
            <ul class="text-smaller">
                <li><b>关键帧 Golden frame</b>：类似于 I 帧</li>
                <li><b>单帧参考帧 Single reference frame</b>：类似于 P 帧，支持<i>前←，→后</i>的 1 帧</li>
                <li><b>混合参考帧 Compound reference frame</b>：类似于 B 帧，支持<i>前← →后，前←前←，→后→后</i>的 2 帧</li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：图片结构——瓦片 Tile</button>
            <div class="coll-content">
                <h3>图片结构——瓦片 Tile</h3>
                <p>继承自 VP9 的帧下级结构，仅用于提高软件解码器效率。AV1 中，最小的瓦片可以由一个粗分块构成，一帧最多可含 512 片，但级别 Level 6.3——7680x4320@120 限制到最高 128 片。</p>
                <p>AV1 支持非对等大小瓦片（non-uniform tiles），并兼容了 VP9 的对等大小瓦片（uniform tiles）配置。理论上可以使每片瓦的码率分配，或算力分配（如桌面端与移动端处理器的 P-E 核架构）更合理，但最终优化程度取决于开发者。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/1）基于瓦片的多线程优化</button>
            <div class="coll-content">
                <h4>（1/1）基于瓦片的多线程优化</h4>
                <p>作为一种分区方法，瓦片自然也可以用于拆分压制任务。这种方法的缺点是会干扰到视频编码依赖于帧间 + 帧内的二维冗余，导致编码效率或画质降低，类似于 x264 编码器曾尝试并弃用的“基于分片的多线程优化”。SVT-AV1 支持基于瓦片的多线程优化，但默认关闭。</p>
                <p class="text-gray-side">注：AV1 中已经使用了分瓣（Tile Segment）来根据画面内容而划区分配码率</p>
                <p class="text-gray-side">注：虽然 x264 证明了“将帧分为条带来提升多线程优化”的上下文损失极高，但随着硬件编码技术的改进，以及视频分辨率的增加，瓦片的大小可能会变得形同 x264 最初设计应对的分辨率，如 768x512 的一组视频，因此如果被优化到位，则这种调度说不定会变得可行</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：图片结构——分瓣 Frame segment</button>
            <div class="coll-content">
                <h3>图片结构——分瓣 Frame segment</h3>
                <p>继承自 VP9，独立于瓦片 tile 的划分结构。最多支持 8 瓣，每个块独立选择归纳为其中一瓣，以将一些编码信息分组，有提升熵编码/文本编码压缩率。主要由帧标识头 Frame header 配置和更新以下关键设定：</p>
                <ul class="text-smaller">
                    <li>量化强度偏移设定</li>
                    <li>环路滤镜设定</li>
                    <li>被参考帧设定</li>
                    <li>编码跳过设定</li>
                </ul>
                <p>分瓣与 AVC 的分段编码 Segment based encoding 不同，前者相当于时域加空域分割（Temporal + spatial segmentation），后者只有时域分割。</p>
            </div>

            <h3>图片结构——粗分块/特大块 Superblock</h3>
            <p>AV1 支持最大 128x128 与兼容 VP9 的 64x64 亮度 SB。为适配当前市面上的硬件编解码器，128x128 的块会以逻辑上的 64x64 块编解码（类似于将一纸数字横竖各切一刀，再重排顺序）</p>
            <div class="align-items-center">
                <img loading="lazy" src="files/block-splitting/micol-mirow-order.png" alt="imageR" class="img-medium">
                <p class="text-gray-side mt-0">图：按 MiRow、MiCol（Marcoblock Index）行、列顺序解码的 SB，见 <a href="https://wikidocs.net/70813">Wikidocs - Superblock and block</a> </p>
            </div>
            <p>MiRow、MiCol 为细分块提供了帧内大致位置，从而可以获取一些算法需要的空域权重/缩放值。</p>

            <h3>图片结构——细分块</h3>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/3）细分块大小</button>
            <div class="coll-content">
                <h4>（1/3）细分块大小</h4>
                <p>虽然这里也有 128x128 的块大小，但这是经过检查，判断为“不分块”的结果，所以也算作细分块。</p>
                <ul>
                    <li><code class="code-bold">BLOCK_4X4</code>，<code class="code-bold">BLOCK_4X8</code>，<code class="code-bold">BLOCK_8X4</code></li>
                    <li><code class="code-bold">BLOCK_8X8</code>，<code class="code-bold">BLOCK_8X16</code>，<code class="code-bold">BLOCK_16X8</code></li>
                    <li><code class="code-bold">BLOCK_16X16</code>，<code class="code-bold">BLOCK_16X32</code>，<code class="code-bold">BLOCK_32X16</code></li>
                    <li><code class="code-bold">BLOCK_32X32</code>，<code class="code-bold">BLOCK_32X64</code>，<code class="code-bold">BLOCK_64X32</code></li>
                    <li><code class="code-bold">BLOCK_64X64</code>，<code class="code-bold">BLOCK_64X128</code>，<code class="code-bold">BLOCK_128X64</code></li>
                    <li><code class="code-bold">BLOCK_128X128</code></li>
                    <li><code class="code-bold">BLOCK_4X16</code>，<code class="code-bold">BLOCK_16X4</code></li>
                    <li><code class="code-bold">BLOCK_8X32</code>，<code class="code-bold">BLOCK_32X8</code></li>
                    <li><code class="code-bold">BLOCK_16X64</code>，<code class="code-bold">BLOCK_64X16</code></li>
                    <li><code class="code-bold">BLOCK_32X128</code>，<code class="code-bold">BLOCK_128X32</code></li>
                </ul>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/3）细分块方案</button>
            <div class="coll-content">
                <h4>（2/3）细分块方案</h4>
                <p>从 SB 开始，运行一遍变换和简化的<i>率失真检查</i>。失真较大则四分，然后在每个分区上重复划分正方形分块；然后在每个细分块上遍历 9 种异形分块和 1 种不分块方案，并使用完整的率失真检查，然后选出失真最小的方案。9+1 种的方案为：</p>
                <ul>
                    <li><code class="code-bold">PARTITION_NONE</code></li>
                    <li><code class="code-bold">PARTITION_SPLIT</code></li>
                    <li><code class="code-bold">PARTITION_VERT</code>，<code class="code-bold">PARTITION_VERT_A</code>，<code class="code-bold">PARTITION_VERT_B</code>，<code class="code-bold">PARTITION_VERT_4</code></li>
                    <li><code class="code-bold">PARTITION_HORZ</code>，<code class="code-bold">PARTITION_HORZ_A</code>，<code class="code-bold">PARTITION_HORZ_B</code>，<code class="code-bold">PARTITION_HORZ_4</code></li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/block-splitting/partitions.png" alt="imageR" class="img-medium">
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/3）细分块递归深度</button>
            <div class="coll-content">
                <h4>（3/3）细分块递归深度</h4>
                <div class="align-items-center">
                    <img loading="lazy" src="files/block-splitting/recursive-sizes.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：见 <a href="https://wikidocs.net/70813">Wikidocs - Superblock and block</a> </p>
                </div>
            </div>

            <h3>图片结构——变换块</h3>
            <p>AV1 支持的变换块大小如下，用于帧内预测以及变换编码：</p>
            <ul>
                <li><code class="code-bold">TX_4X4</code>，<code class="code-bold">TX_4X8</code>，<code class="code-bold">TX_8X4</code></li>
                <li><code class="code-bold">TX_8X8</code>，<code class="code-bold">TX_8X16</code>，<code class="code-bold">TX_16X8</code></li>
                <li><code class="code-bold">TX_16X16</code>，<code class="code-bold">TX_16X32</code>，<code class="code-bold">TX_32X16</code></li>
                <li><code class="code-bold">TX_32X32</code>，<code class="code-bold">TX_32X64</code>，<code class="code-bold">TX_64X32</code></li>
                <li><code class="code-bold">TX_64X64</code></li>
                <li><code class="code-bold">TX_4X16</code>，<code class="code-bold">TX_16X4</code></li>
                <li><code class="code-bold">TX_8X32</code>，<code class="code-bold">TX_32X8</code></li>
                <li><code class="code-bold">TX_16X64</code>，<code class="code-bold">TX_64X16</code></li>
            </ul>
            <ul>
                <li>128x128 的块会以逻辑上最大 64x64，或宽/高更小的块（min(W, 64) x min(H, 64)）分别变换</li>
                <li>色度平面支持其中最宽和最高 32 的块</li>
            </ul>
            <div class="align-items-center">
                <img loading="lazy" src="files/block-splitting/recursive-partitions.png" alt="imageR" class="img-medium">
                <p class="text-gray-side mt-0">图：AV1 的递归细分块方案，以及变换块在各种细分块方案 PARTITION 下的变换块运用</p>
            </div>

            <h3>图片结构——环路还原滤镜单元</h3>
            <p>还原单元 Restortion unit 用于定义环路还原滤镜 LRU 的作用范围（滤镜强度分区调节），从而使还原滤镜实现强度自适应。对 RU 的说明见环路滤镜版块，详见下方的环路滤镜版块。</p>

            <h2 id="h2-4">变换</h2>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：复习：一维变换</button>
            <div class="coll-content">
                <h3>复习：一维变换</h3>
                <p>由结果值，缩放值与初始值构成，初始值与缩放值的积为结果值 <span class="text-blue-math">\(x^\prime = A x\)</span> 。在一维空间中只有一根数轴。如果只缩放点<span class="text-blue-math">(2)</span>，缩放到 -3 倍（<span class="text-blue-math">\(-6 = -3 \cdot 2\)</span>），则该点的位置会移动到 <span class="text-blue-math">(-6)</span> 处。</p>
                <p>如果要缩放一段音频，设定一批采样点，然后用求和/积分/循环的方法遍历所有采样点，得到缩放结果。如将音频提速到 2 倍（缩放到 <span class="text-blue-math">\(\frac{1}{2}\)</span> 倍长度），音频长度从 0 数到 <span class="text-blue-math">\(N-1\)</span>，从采样点的视角看则：<span class="text-blue-math">\(n^\prime = \frac{1}{2} n\)</span>。而从波形整体可以看做：
                    <span class="text-blue-math">\[X^\prime = \sum_{n=0}^{N-1} \frac{1}{2} \cdot x(n)\]</span>
                    如果将缩放值改回未知数（函数），且输出的音频作为新波形 <span class="text-blue-math">\(y(m)\)</span>，则：
                    <span class="text-blue-math">\[y(m) = \sum_{n=0}^{N-1} A(n, m) \cdot x(n)\]</span>
                    音频虽是一维信号，但每个采样点除了坐标信息外，还会记录一项可以代表波形高度的信号值，这个信号可以是像素值（注意二维下的高度是坐标的一部分），有了它，人们就可以利用坐标系来记录和处理信号了。
                </p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：复习：二维变换/仿射变换</button>
            <div class="coll-content">
                <h3>变换——二维变换/仿射变换 Affine transformation</h3>
                <p>比一维多一轴。这里的信号同时拥有了宽度和高度，而信号值在此可以理解为像素值。此时，遍历所有点的操作方法就会是双求和、嵌套循环了。二维变换会用到矩阵乘法，如：
                    <span class="text-blue-math">\[
                    \begin{bmatrix} x^\prime \\ y^\prime \\ \end{bmatrix} = 
                    \begin{bmatrix} m_{x} & m_{Y} \\ m_{X} & m_{y} \\ \end{bmatrix}
                    \begin{bmatrix} x \\ y \\ \end{bmatrix}
                    \]</span>
                </p>
                <p>不考虑像素值、只考虑坐标变化时，点坐标的 x 分量分别乘进 <span class="text-blue-math">\(m_{x}, m_{Y}\)</span>；y 分量分别乘进 <span class="text-blue-math">\(m_{X}, m_{y}\)</span>，就得到了变换后的坐标。</p>
                <p>缩放值 <span class="text-blue-math">\(A\)</span> 作为矩阵，除了 <span class="text-blue-math">\(m_{x}\)</span>，<span class="text-blue-math">\(m_{y}\)</span> 两个相对于 <span class="text-blue-math">\((0,0)\)</span> 的缩放分量外，斜对角上还多了 <span class="text-blue-math">\(m_{X}\)</span>，<span class="text-blue-math">\(m_{Y}\)</span> 两个相对于对方的缩放分量。这是因为二维坐标系出现了旋转的新性质，而“旋转”本质上同样是有两个分量构成的，即“x 相对于 y 的倍数”横向倾斜扭曲，以及“y 相对于 x 的倍数”或纵向倾斜扭曲（这个认知并非常识，建议搜索相关的视频演示）。</p>
                <ul>
                    <li><span class="text-blue-math">\(m_{Y}\)</span> 会造成 <span class="text-blue-math">\(y \lt 0\)</span> 处的 x 分量与 <span class="text-blue-math">\(y \gt 0\)</span> 处的分量反向缩放，矩阵乘法中表现为图形于 x 轴的缩放被乘进了 <span class="text-blue-math">\(-y\)</span></li>
                    <li><span class="text-blue-math">\(m_{X}\)</span> 会造成 <span class="text-blue-math">\(x \lt 0\)</span> 处的 y 分量与 <span class="text-blue-math">\(x \gt 0\)</span> 处的分量反向缩放，矩阵乘法中表现为图形于 y 轴的缩放被乘进了 <span class="text-blue-math">\(-x\)</span></li>
                    <li>若 <span class="text-blue-math">\(m_{Y}\)</span> 与 <span class="text-blue-math">\(m_{X}\)</span> 一正一负，就会得到顺/逆时针的旋转效果</li>
                </ul>
            </div>
            
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：变换/帧间预测——全局仿射变换动态搜索与补偿 Global affine / warped MEMC</button>
            <div class="coll-content">
                <h3>变换/帧间预测——全局仿射变换动态搜索与补偿 Global affine / warped MEMC</h3>
                <p>AV1 中的一种 MEMC 方案。针对视频画面内容整体的缩放（如行车记录仪视频中，车辆前进时的场景放大），则可以通过一部分像素的动态向量推理出图形的缩放和旋转程度，从而提高动态向量的精度。推理结果为：</p>
                <span class="text-blue-math">\[
                    \begin{bmatrix} x' \\ y' \\ \end{bmatrix} =
                    \begin{bmatrix}
                    h_{11} & h_{12} & h_{13} \\ h_{21} & h_{22} & h_{23}
                    \end{bmatrix}
                    \begin{bmatrix} x \\ y \\ 1 \\ \end{bmatrix}
                \]</span>
                <p>相比上述的二维变换，这里额外有横纵向平移的分量 <span class="text-blue-math">\(h_{13}, h_{23}\)</span>，而这两个方向仅用于对齐画面中的图形，所以矩阵乘法中仅会乘以 1，而不缩放。<span class="text-blue-math">\(h_{11}, h_{12}, h_{21}, h_{22}\)</span> 为 12bit 精度，而平移的 <span class="text-blue-math">\(h_{13}, h_{23}\)</span> 为 15bit。具体的搜索和补偿算法见帧间预测版块</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：变换——离散余弦变换 DCT-3 概述</button>
            <div class="coll-content">
                <h3>变换——离散余弦变换 Discrete Cosine Transform（DCT-3）</h3>
                <p>变换一个 NxN 块的大致过程是将各行、各列分别变换一次，然后将解算出的频域强度加到一起。例如取一行 4x4 块的值记做 Y，设像素值 [0,1,0,0]，得到：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/transforming/dct-0-1-0-0.png" alt="imageR" class="img-medium">
                </div>

                <p>长度 N 由输入序列 Y 的长度得到。Y 的四点需要设定 X 轴间距和偏移才能置于坐标系中。此步骤由 <span class="text-blue-math">\(X=\frac{\pi}{N}\left(\left[0,...,N-1\right]+\frac{1}{2}\right)\)</span> 实现，其中：</p>
                <ul class="text-smaller">
                    <li><span class="text-blue-math">\(\frac{\pi}{N}\)</span> 将点的间距缩放到 [0,1,0,0] 长度中的常规间距（长度 N 的一份，此处即 <span class="text-blue-math">\(\frac{1}{4}\)</span>），以及余弦函数 cosine 的标准间距（当然也可以缩放余弦函数到常规间距）</li>
                    <li>向右偏移 <span class="text-blue-math">\(\frac{1}{2}\)</span>，从而把余弦函数相对于这些点"换成正弦函数 sine"（只有正弦函数才会穿过坐标系 (0,0)<ul>
                    <li>或者，将式子换成 <span class="text-blue-math">\(\sin\left(kx\right)\)</span>，虽然结果波形会对齐到这些点上，但原理完全不同）</li></ul></li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/transforming/dct-X-scaling.png" alt="imageR" class="img-medium">
                </div>

                <p>在求和符号中，可以看到遍历变量 <span class="text-blue-math">\(k\)</span> 从 1 开始数，在这个式子里最多数到 3，而被跳过的 0 是它左侧的 <span class="text-blue-math">\(\frac{1}{N} F\left(0\right)\)</span> 的结果（DC），所以这个式子可以分解为：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/transforming/dct-sum-components-freq-index-k.png" alt="imageR" class="img-medium">
                </div>

                <p>缩放值 <span class="text-blue-math">\(F\left(k\right)\)</span>，就是“8x8 DCT 图表”中的某一部分。它也使用了遍历变量 <span class="text-blue-math">\(k\)</span>，从而拆分出 <span class="text-blue-math">\(Y_{k}, X_{k}\)</span> 两个序列中每个位置的强度并加在一起。</p>
                <ul class="text-smaller">
                    <li>由于 <span class="text-blue-math">\(Y_0, Y_2, Y_3\)</span> 的强度为 0，所以只有 <span class="text-blue-math">\(Y_1\)</span> 的部分会缩放 <span class="text-blue-math">\(p(x)\)</span> 的波形频率</li>
                    <li>强度 <span class="text-blue-math">\(F\left(1\right)\)</span> 也是余弦函数，为 <span class="text-blue-math">\(F_{actual}\left(x\right)=1\cos\left(\frac{3\pi x}{8}\right)\)</span>（<span class="text-blue-math">\(\frac{3\pi x}{8}\)</span> 为冠军个点的 X 轴坐标）</li>
                </ul>

                <p>在这个例子中，初始值即 Y，X 两个序列，结果值是函数 p(x)，缩放值由多个部分组成，但可拆分为：</p>
                <ul class="text-smaller">
                    <li>强度缩放值 <span class="text-blue-math">\(F\left(k\right)\)</span></li>
                    <li>对齐缩放值 <span class="text-blue-math">\(\frac{\pi}{N}, \frac{2}{N}\)</span></li>
                </ul>
                <p>以及偏移值：</p>
                <ul class="text-smaller">
                    <li>对齐 X 轴 <span class="text-blue-math">\(+\frac{1}{2}\)</span></li>
                    <li>对齐 Y 轴（DC）<span class="text-blue-math">\(+\frac{1}{N}F\left(0\right)\)</span></li>
                </ul>
                <p>上图的可互动例子见 <a href="https://www.desmos.com/calculator/zonmf9kdp1">Desmos</a>可以试着添加更多值到 Y 序列，以及更改这些值的大小等。例如上述“去掉 <span class="text-blue-math">\(\frac{1}{2}\)</span>，换成 <span class="text-blue-math">\(\sin\left(kx\right)\)</span>”构成的一种离散正弦变换 DST：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/transforming/dst-like-transformation.png" alt="imageR" class="img-medium">
                </div>
            </div>
            
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：变换——非对称离散正弦变换 ADST 概述</button>
            <div class="coll-content">
                <h3>变换——非对称离散正弦变换 Asymmetric Discrete Sine Transform（ADST）</h3>
                <p>一种 DST 的变体。DCT 对变换区域边界的信息保留能力较差，因此量化强一些时容易导致块失真。尽管去块滤镜可以消除块失真，但也会抹去一些画面的高频细节分量。造成变换效果不佳的这些边界失真的主要原因是“块的两边不对称”。通过引入离散正弦变换 DST（效果类似上图），再进一步修改其缩放值，使变换波形的宽构成由宽到窄，以及由窄到宽（翻转变体）的过渡状，从而提高边缘细节的保留能力。</p>
                <p>ADST 使用 <span class="text-blue-math">\( \frac{2}{ \sqrt{2N+1} } \)</span> 缩放正弦函数的振幅，以及 <span class="text-blue-math">\[ \sin\left( \frac{ \left( 2j-1 \right) i\pi }{2N+1} \right) \]</span> 动态缩放了正弦函数的宽度，使其一端较窄：
                    <span class="text-blue-math">\[ \frac{2}{ \sqrt{2N+1} } \sin\left( \frac{\pi}{2N+1} \right) \]</span>
                    另一端较宽：
                    <span class="text-blue-math">\[ \frac{2}{ \sqrt{2N+1} } \sin\left( \frac{N \pi}{2N+1} \right) \]</span>
                </p>
                <p class="text-smaller"><b>注：</b>编写本教程时未能实现演算，所以上述内容可能有问题且需要被进一步修正。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：变换——AV1 变换算法配置</button>
            <div class="coll-content">
                <h3>变换——AV1 变换算法配置</h3>
                <p>AVC 中使用 DCT 实现变换。HEVC 中搭配使用了整数 DCT（IDCT），DST，一种从 DST 衍生的整数变换（4x4 块 Integer Transform, IT）。AV1 中使用了 DCT，ADST，翻转 ADST（FLIPADST），以及 ID 变换（Identity Transform, IDTX），一维下的频域配置为：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/transforming/transformation-kernel-frequencies.png" alt="imageR" class="img-medium">
                </div>
                <p>具体算法为 DCT-2：
                    <span class="text-blue-math">\[T_{i}\left(j\right) =
                        \omega_0 \sqrt{\frac{2}{N}}
                        \cos\left(  i \pi \frac{ 2j+1 }{2N} \right) \text{,} \hspace{2mm}
                        \omega_0 = \begin{cases} 
                            i = 0 \text{,} \hspace{2mm} \sqrt{\frac{2}{N}} \\
                            i > 0 \text{,} \hspace{2mm} 1 \\
                        \end{cases}
                    \]</span>
                    DST-4：
                    <span class="text-blue-math">\[T_{i}\left(j\right) =
                        \sqrt{\frac{2}{N}} \sin\left( \pi \frac{\left( 2i+1 \right)\left( 2j+1 \right) }{4N} \right)
                    \]</span>
                    DST-7/ADST<span class="text-smaller">（Aomedia CWG-B078，与 Overview of AV1 文档不同）</span>：
                    <span class="text-blue-math">\[T_{i}\left(j\right) =
                        \sqrt{\frac{4}{2N+1}} \sin\left( \pi \frac{\left( 2i+1 \right)\left( j+1 \right)}{ 2N+1 } \right)
                    \]</span>
                    IDT/IDTX：
                    <span class="text-blue-math">\[T_{i}\left(j\right) = \begin{cases} 
                        i = j \text{,} \hspace{2mm} 1 \\
                        i \neq j \text{,} \hspace{2mm} 0 \\
                    \end{cases}\]</span>
                    关于 AV1 编码器会在什么时候选择用什么变换，详见 <a href="https://aomedia.org/docs/AV1_ToolDescription_v11-clean.pdf">CWG-B078</a> - 3.4.2 Transform selection and signalling。
                </p>
            </div>

            <h3>变换——部分模式决策与先后选择顺序</h3>
            <p>根据帧内预测选用的模式决定。色度帧内块的变换取决于同位亮度帧内块的模式。</p>
            <pre><code class="text-smaller language-cpp">
Mode_To_Txfm[ UV_INTRA_MODES_CFL_ALLOWED ] = {
DCT_DCT,   // DC_PRED 水平直流模式
ADST_DCT,  // V_PRED 大概率夹角模式
DCT_ADST,  // H_PRED
DCT_DCT,   // D45_PRED
ADST_ADST, // D135_PRED
ADST_DCT,  // D113_PRED
DCT_ADST,  // D157_PRED
DCT_ADST,  // D203_PRED
ADST_DCT,  // D67_PRED 小概率夹角模式
ADST_ADST, // SMOOTH_PRED 大概率平滑模式
ADST_DCT,  // SMOOTH_V_PRED
DCT_ADST,  // SMOOTH_H_PRED 小概率平滑模式
ADST_ADST, // PAETH_PRED 非线性模式
DCT_DCT,   // UV_CFL_PRED 色度填亮度模式
}

typedef enum { // 一般模式
    DCT_DCT = 0, // 纵向 DCT 加横向 DCT
    ADST_DCT = 1, // 纵向 ADST 加横向 DCT
    DCT_ADST = 2, // 纵向 DCT 加横向 ADST
    ADST_ADST = 3, // 纵向 ADST 加横向 ADST
#if CONFIG_EXT_TX // 扩展模式
    FLIPADST_DCT = 4,
    DCT_FLIPADST = 5,
    FLIPADST_FLIPADST = 6,
    ADST_FLIPADST = 7,
    FLIPADST_ADST = 8,
    IDTX = 9,
    V_DCT = 10,
    H_DCT = 11,
    V_ADST = 12,
    H_ADST = 13,
    V_FLIPADST = 14,
    H_FLIPADST = 15,
#endif
    TX_TYPES,
} TX_TYPE;
            </code></pre>

            <h2 id="h2-5">前瞻进程</h2>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：前瞻——时域依赖性建模 TPL</button>
            <div class="coll-content">
                <h3>前瞻——时域依赖性建模 Temporal dependency modeling（TPL）</h3>
                <p>在编码每个 GOP 的开端以逆向顺序推演，以 16x16 分区建立运动轨迹，反应了分块对于整个 GOP 压缩率的贡献，类似于 MB/CUTree，对细分块级别的量化强度设定，率失真优化设定起到关键作用。见：<a href="https://martchus.dyn.f3l.de/doc/aom/encoder_guide.html">AOM Guide</a></p>
                <ul>
                    <li><code class="code-bold">intra_cost</code>：根据 SATD 估算帧内预测成本</li>
                    <li><code class="code-bold">inter_cost</code>：有 pass1 中可用的运动信息时估算帧间预测成本
                        <ul><li>AV1 支持帧内帧间混合预测模式，因此 <code>inter_cost</code> 的上限由 <code>intra_cost</code> 决定</li></ul>
                    </li>
                    <li><code class="code-bold">propagation_amount</code>，<code class="code-bold">propagation_cost</code>：从未来处理帧流回的累计传播量，以及计算出的传播代价</li>
                    <li>GOP 中最后一个处理帧中的所有块，它被初始化为 0</li>
                </ul>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/3）信息传播程度估计</button>
            <div class="coll-content">
                <h4>（1/3）信息传播程度估计</h4>
                <ul>
                    <li>当前块向其参考块传播（propagation）的信息估计如下，反映了运动补偿参考对减少预测误差的贡献程度百分比</li>
                </ul>
                <span class="text-blue-math">\[ \text{Prop}_{\text{fraction}} = 1 - \frac{\text{inter}_{cost}}{ \text{intra}_{\text{cost}}} \]</span>
                <ul>
                    <li>当前 16x16 分区对 GOP 贡献的信息总量估计为 <span class="text-blue-math">\(\text{intra}_{\text{cost}} + \text{Prop}_{\text{cost}}\)</span>，它为参考块溯块所提供的信息量统计为：</li>
                </ul>
                <span class="text-blue-math">\[ \text{Prop}_{\text{amount}} = \left(\text{intra}_{\text{cost}} + \text{Prop}_{\text{cost}}\right) \times \text{Prop}_{\text{fraction}} \]</span>
                <ul>
                    <li>由于最终的分块方案不一定位于 16x16 网格上。因此这个传播量会被分配给与参考块重叠的所有块，为：</li>
                </ul>
                <span class="text-blue-math">\[ \text{Prop}_{\text{cost}} = \text{Prop}_{\text{cost}} + \frac{\text{Overlap}}{16^2} \times \text{Prop}_{\text{amount}} \]</span>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/3）失真传播程度估计</button>
            <div class="coll-content">
                <h4>（2/3）失真传播程度估计</h4>
                <span class="text-blue-math">\[ \text{Dist}_{\text{Prop}} = 1 + \frac{\sum_{i}\text{Prop}_{\text{cost}[i]}}{\sum_{i}\text{intra}_{\text{cost}[i]}} \]</span>
                <ul>
                    <li><span class="text-blue-math">\(i\)</span> 代表后移的帧数</li>
                    <li><span class="text-blue-math">\(\frac{\text{Prop}_{\text{cost}}}{\text{intra}_{\text{cost}}}\)</span> 代表对后续帧的影响</li>
                </ul>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/3）率失真优化程度估计</button>
            <div class="coll-content">
                <h4>（3/3）率失真优化程度估计</h4>
                <span class="text-blue-math">\[ \lambda[i] = \lambda[0] \frac{ \text{Dist}_{\text{Prop}}}{ \text{Dist}_{\text{Prop}}[i]} \]</span>
                <ul>
                    <li><span class="text-blue-math">\(\lambda\)</span>：在 64x64 分区中推演得到：</li>
                    <li>其中 i 表示帧中的块索引。我们还有帧级失真传播因子：</li>
                </ul>
            </div>

            <h3>前瞻——录屏特化功能开关控制</h3>
            <p>AV1 使用内容类型检测录屏内容，并对匹配的内容选用以下编码模式：</p>
            <ul>
                <li>帧内预测——帧内块拷贝模式 Intra block copy（IBC）</li>
                <li>帧内预测——调色板模式 Palette mode</li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：内容类型检测</button>
            <div class="coll-content">
                <h4>（1/1）内容类型检测 Content-type detection</h4>
                <p>在编码一帧之前进行，通过如 conter1，conter2 两个计数变量，统计每个 16x16 亮度区域的像素值种类与方差实现：</p>
                <ul>
                    <li>若像素值种类只有 2、3 或 4 种，则 counter1 加 1</li>
                    <li>若方差大于预定的阈值，则 counter2 加 1</li>
                    <li><b>判断启用调色板模式</b>：<span class="text-blue-math">\(\text{conter1} &gt; \frac{FrameWidth \times FrameHeight}{2560}\)</span></li>
                    <li><b>判断启用 IBC 模式</b>：<span class="text-blue-math">\(\text{conter2} &gt; \frac{FrameWidth \times FrameHeight}{3072}\)</span></li>
                </ul>
                <p>以下是一些常用分辨率下的阈值例子：</p>
                <span class="text-blue-math">\[ 1280 \times 720 \div 2560 = 360
                    \]\[ 1280 \times 720 \div 3072 = 300
                    \]\[ 1920 \times 1080 \div 2560 = 810
                    \]\[ 1920 \times 1080 \div 3072 = 675
                    \]\[ 2560 \times 1440 \div 2560 = 1440
                    \]\[ 2560 \times 1440 \div 3072 = 1200
                    \]\[ 3840 \times 2160 \div 2560 = 3240
                    \]\[ 3840 \times 2160 \div 3072 = 2700
                \]</span>
            </div>

            <h3>前瞻/帧间预测——时域降噪过滤</h3>
            <p>时域降噪过滤 Temporal filtering（TF）是 VP 编码器流程中的帧间降噪与帧类型设定功能，主要用于增强参考帧的画质。“过滤”由时域加权平均和简化的动态搜索以分离细节和噪声，且用于构建支线被参考帧 <code>ALTREF</code> 以在 GOP 的参考结构中起到预测结构替代或补充作用。某些情况下，叠加帧 <code>OVERLAY</code> 会额外被建立，以辅助当前的支线被参考帧减少误差，进而优化码率的分配，并间接影响到分层预测结构的建立。SVT-AV1 中，前瞻进程会在扫描到支线被参考帧的位置时临时提高搜索范围，以包括 TF 所覆盖的未来帧数量，见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-Alt-Refs.md">SVT-AV1 Docs</a>。</p>
            
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）TF 滤镜步骤</button>
            <div class="coll-content">
                <h4>（1/2）时域降噪过滤步骤</h4>
                <ol>
                    <li>统计当前帧自身的噪声强度</li>
                    <li>根据当前帧噪声强度决定调用前后共多少帧（噪声越强调用越多）</li>
                    <li>根据色彩结构性差异（颜色直方图 SAD）进一步决定调用前后多少帧（差异越大调用越少）</li>
                    <li>计算时域降噪过滤强度衰减（SVT-AV1 中由 <code>&#45;&#45;preset</code> 决定强度）</li>
                    <li>相邻的原画前、后帧分别进行动态搜索，得到过去、未来两项动态补偿预测（对齐邻帧画面）</li>
                    <li>使用自适应加权（过滤）整合所有运动补偿预测，得到降噪后的分层预测结构底部帧</li>
                    <li>决定某些符合分层预测结构条件的帧为支线被参考帧 <code>ALTREF</code></li>
                    <li>将过滤出的噪声拼合出叠加帧 <code>OVERLAY</code></li>
                </ol>
                <div class="align-items-center mt-3">
                    <img loading="lazy" src="files/lookahead/motion-estimation-for-temporal-filtering-window.svg" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：TF 对待处理的帧，相对于邻帧进行 hex 动态搜索，见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/svt-av1-encoder-design.md">SVT-AV1 Docs</a></p>
                </div>
                <p>SVT-AV1 中，TF 操作与其它编码进程平行，逐 64x64 块处理。见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-Alt-Refs.md#multi-threading">SVT-AV1 Doc</a>。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）时域降噪过滤强度衰减</button>
            <div class="coll-content">
                <h4>（2/2）时域降噪过滤强度衰减</h4>
                <p>用于配置精确到分块的样本过滤操作。</p>
                <span class="text-blue-math">\[ \text{TemporalFilter}_{\text{Decay}} = 2 \times n_{\text{Decay}}^2 \times q_{\text{Decay}} \times s_{\text{Decay}} \]</span>
                <ul>
                    <li><span class="text-blue-math">\( n_{\text{Decay}} \)</span>：噪声衰减，由输入噪声强度、上帧清晰度、亮度色度区分和降噪强度决定</li>
                    <li><span class="text-blue-math">\( q_{\text{Decay}} \)</span>：QP 衰减，由量化强度决定，量化越强则允许的降噪越强</li>
                    <li><span class="text-blue-math">\( s_{\text{Decay}} \)</span>：滤镜强度衰减，由用户设置决定，用于改变编码策略</li>
                </ul>
            </div>

            <h2 id="h2-6">帧间预测</h2>
            
            <h3>帧间预测——流程概述</h3>
            <ol>
                <li>当前帧针对 DRL 中的被参考帧进行动态搜索，得到一系列动态信息方案</li>
                <li>由向量规划预测 Motion vector referencing scheme（MVRS）查找和整理出预测量：
                    <ul class="text-smaller">
                        <li>空域预测 Spatial MV prediction：与空域相邻块的动态向量对齐，适合低速移动画面</li>
                        <li>时域/向量场预测 Temporal MV prediction：与时域相邻块的动态向量对齐，适合高速移动画面</li>
                    </ul>
                </li>
                <li>由动态规划 Dynamic MVRS 筛选出最适合某帧的预测量：
                    <ul class="text-smaller">
                        <li>单帧参考帧筛选</li>
                        <li>混合参考帧筛选</li>
                    </ul>
                </li>
                <li>由运动补偿提高动态向量的精度：
                    <ul class="text-smaller">
                        <li>平移补偿 Translational MC</li>
                        <li>局部仿射补偿 Local affine / Warped MC</li>
                        <li>重叠块补偿 OBMC</li>
                        <li>全局仿射补偿 Global affine / Warped MC</li>
                    </ul>
                </li>
                <li>拼合混合参考块所用的 2 项参考源或 2 种动态补偿：
                    <ul class="text-smaller">
                        <li>帧间距离加权/平均预测分权 Distance、Average</li>
                        <li>差值加权/差值调制预测分权 Difference / modulated</li>
                        <li>帧内帧间模式分权 Compound InterIntra</li>
                        <li>楔形蒙版预测分权 Wedge mask</li>
                    </ul>
                </li>
            </ol>

            <p><b>预测量 Predictor</b> 此处代表由搜索与规划算法给出，针对 8x8 块的一组可用的帧间动态向量，从中筛选出合适的帧间预测模式。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：帧间预测——动态搜索 Motion estimation</button>
            <div class="coll-content">
                <h3>帧间预测——动态搜索 Motion estimation</h3>
                <p>基本原理见 x265 教程。x264/5 的动态搜索通过块间像素匹配的方法实现，运动补偿通过对比插值放大后的预测块与原画实现。SVT-AV1 支持 ME 和 HME，见 <a href="https://github.com/huijuanzh/SVT-AV1/blob/master/Docs/svt-av1-encoder-design.md#motion-estimation-process">Github: SVT-AV1 Encoder Design</a></p>
            </div>

            <h3>帧间预测——向量规划 Motion Vector Referencing Scheme（MVRS）</h3>
            <p>在全局动态向量以及针对其他被参考帧的动态向量凑齐之后，使用一种类似于帧内预测的规划法（Referencing scheme）将参考帧匹配到合适的被参考帧。AV1 中，这种参考规划由适合低速移动的空间动态向量 S-MVRS 参考规划，以及适合高速移动的向量场动态向量参考规划 MVF-MVRS 实现针对不同物件移动速度规划匹配，并在每个 8x8 预测块上得到预测量。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/4）空域动态向量预测、（2/4）空域 MVRS</button>
            <div class="coll-content">
                <h4>（1/4）空域动态向量预测 Spatial MV Prediction</h4>
                <p>AV1 中代表通过空间相邻 8x8 块的帧间动态向量所推理出的动态向量，与帧内编码无关。前提是时间相邻块需要有动态向量。</p>

                <h4>（2/4）空域 MVRS</h4>
                <p>亮度编码块中以 8x8 区域搜索其帧内的顶部、左侧、左上、右上共 4 种相邻块是否溯至同一被参考帧（混合参考帧模式下为同两帧被参考帧）。如 32x32 亮度分块中，顶部代表横向 3 行，每行 4 个 8x8 区域；左侧代表纵向 3 列，每列 4 个 8x8 区域；以及左上角，右上角各一个 8x8 区域。搜索顺序为由近到远，为行 1，列 1，右上，左上，行 2，列 2，行 3，列 3：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/spatial-mvrs-order.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：空域 MVRS 查找顺序</p>
                    <img loading="lazy" src="files/inter-prediction/spatial-mvrs-single.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：单帧参考帧规划</p>
                    <img loading="lazy" src="files/inter-prediction/spatial-mvrs-compound.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：混合参考帧规划</p>
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/4）时域/向量场动态向量预测、（4/4）时域/向量场 MVRS</button>
            <div class="coll-content">
                <h4>（3/4）时域动态向量预测 Temporal MV Prediction</h4>
                <p>AV1 中代表通过时间相邻 8x8 块（<del>相邻帧</del>被参考帧上同位块）的帧间动态向量所推理，而得到的动态向量。前提是时间相邻块需要有动态向量。</p>

                <h4>（4/4）时域/向量场 MVRS</h4>
                <p>采用一种线性投影模型以对齐时域相邻块动态向量的规划法，适合高速直线运动轨迹。以 8x8 块为单位，通过遍历地将被参考帧列表中的动态向量乘进一个缩放值，而得到当前帧的向量场预测。缩放值的取值为被参考帧距离当前帧的帧数，与被参考帧距离前被参考帧之差（帧数距离）的比。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/temporal-mvrs.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：当前帧（Current Frame）通过距离被参考帧的帧数缩放动态向量以及预测量</p>
                    <img loading="lazy" src="files/inter-prediction/temporal-mvrs-order.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：被参考帧中的搜索区域，先尝试对准一块 16x16 范围，其次是角落</p>
                </div>
            </div>

            <h3>帧间预测——动态规划 Dynamic MVRS</h3>
            <p>从动态搜索与空域 MVRS、时域 MVRS 得出的预测量中筛选。<b>预测量 Predictor</b> 于此处代表一组可行的动态向量，其中含有当前编码块相对于被参考帧列表中，被参考帧列表中每帧的最多储存 4 种可能的每帧动态向量。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）单帧参考帧筛选</button>
            <div class="coll-content">
                <h4>（1/2）单帧参考帧筛选</h4>
                <p>动态搜索以及 MVRS 得到的预测量中，按照动态向量的长度，由（帧间距离）进到远排序（?）：</p>
                <ul>
                    <li><code class="code-bold">NEARESTMV</code>：第 1 种动态向量</li>
                    <li><code class="code-bold">NEWMV</code>：第 1~3 种动态向量中筛选，附有预测向量与实际向量的差距（MV difference，MVD）</li>
                    <li><code class="code-bold">NEARMV</code>：第 2~4 种动态向量中筛选</li>
                    <li><code class="code-bold">GLOBALMV</code>：使用全局动态向量</li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/reference-mv-single.png" alt="imageR" class="img-medium">
                </div>
            </div>
        
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）混合参考帧预测量筛选</button>
            <div class="coll-content">
                <h4>（2/2）混合参考帧预测量筛选</h4>
                <ul>
                    <li><code class="code-bold">NEAREST_NEARESTMV</code>：同 <code class="code-bold">NEARESTMV</code></li>
                    <li><code class="code-bold">NEAREST_NEWMV</code>：同 <code class="code-bold">NEARESTMV</code>，远被参考帧（<code class="code-bold">RefFrame[1]</code>）附有预测向量与实际向量的差距（MV difference，MVD）</li>
                    <li><code class="code-bold">NEW_NEARESTMV</code>：同 <code class="code-bold">NEARESTMV</code>，近被参考帧（<code class="code-bold">RefFrame[0]</code>）附有预测向量与实际向量的差距（MV difference，MVD）</li>
                    <li><code class="code-bold">NEW_NEWMV</code>：同 <code class="code-bold">NEWMV</code>，附有近、远两被参考帧的 MVD</li>
                    <li><code class="code-bold">NEAR_NEARMV</code>：同 <code class="code-bold">NEARMV</code>，附有远被参考帧的 MVD</li>
                    <li><code class="code-bold">NEAR_NEWMV</code>：同 <code class="code-bold">NEARMV</code>，附有近被参考帧的 MVD</li>
                    <li><code class="code-bold">NEAR_NEARMV</code>：同 <code class="code-bold">NEARMV</code>，附有远，仅两被参考帧的 MVD</li>
                    <li><code class="code-bold">GLOBALMV</code>：同上</li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/reference-mv-compound.png" alt="imageR" class="img-medium">
                </div>
                <p>除 <code class="code-bold">NEARESTMV</code>，<code class="code-bold">NEAREST_NEARESTMV</code> 之外，被参考帧的预测差距 MVD 都会被纳入考量。而剩余的模式区别就是采用哪一种预测量的区别。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：帧内与帧间预测模式表 Ymode</button>
            <div class="coll-content"><pre><code class="language-cpp">
static const int mode_2_counter[] = { // 帧内 + 帧间预测模式表
    // 帧内预测模式
    9, // DC_PRED
    9, // V_PRED
    9, // H_PRED
    9, // D45_PRED
    9, // D135_PRED
    9, // D117_PRED
    9, // D153_PRED
    9, // D207_PRED
    9, // D63_PRED
#if CONFIG_ALT_INTRA // 帧内预测 - 平滑
    9, // SMOOTH_PRED
#if CONFIG_SMOOTH_HV // 帧内预测 - 横纵平滑
    9, // SMOOTH_V_PRED
    9, // SMOOTH_H_PRED
#endif // CONFIG_SMOOTH_HV
#endif // CONFIG_ALT_INTRA // 帧内预测 - 其它
    9, // TM_PRED
    0, // NEARESTMV
    0, // NEARMV
    3, // ZEROMV
    1, // NEWMV
#if CONFIG_EXT_INTER // 帧间预测模式
#if CONFIG_COMPOUND_SINGLEREF // 帧间预测 - 混合以及单帧参考帧
    0, // SR_NEAREST_NEARMV
    1, // SR_NEAR_NEWMV
    3, // SR_ZERO_NEWMV
    1, // SR_NEW_NEWMV
#endif // CONFIG_COMPOUND_SINGLEREF / 帧间预测 - 混合参考帧
    0, // NEAREST_NEARESTMV
    0, // NEAR_NEARMV
    1, // NEAREST_NEWMV
    1, // NEW_NEARESTMV
    1, // NEAR_NEWMV
    1, // NEW_NEARMV
    3, // ZERO_ZEROMV
    1, // NEW_NEWMV
#endif
}
            </code></pre></div>

            <h3>帧间预测——局部运动补偿</h3>
            <p>基本原理已在 x265 教程中说明，此处不再赘述。AV1 支持平移子像素运动补偿 Translational MC 和仿射运动补偿 Affine/Warped MC。运动补偿用于对齐动态向量到子像素精度，所以会临时地使用子像素插值滤镜。如：</p>
            <ul class="text-smaller">
                <li>AVC 的亮度块支持 <span class="text-blue-math">\( \frac{1}{2} \)</span> 像素精度下使用 6-tap FIR 插值、<span class="text-blue-math">\( \frac{1}{4} \)</span> 像素精度下使用双线性插值</li>
                <li>HEVC 的亮度块支持 <span class="text-blue-math">\( \frac{1}{2} \)</span>，以及部分的 <span class="text-blue-math">\( \frac{1}{4} \)</span> 像素精度使用上下左右加权平均插值、<span class="text-blue-math">\( \frac{1}{4} \)</span> 像素精度下使用 7-tap 和 8-tap FIR 滤镜插值</li>
                <li>HEVC 色度块 <span class="text-blue-math">\( \frac{1}{2} \)</span> 和 <span class="text-blue-math">\( \frac{1}{4} \)</span> 像素精度使用 4-tap FIR 插值</li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/3）平移运动补偿 Translational MC</button>
            <div class="coll-content">
                <h4>（1/3）平移运动补偿 Translational MC</h4>
                <p>选用平移预测模式后，AV1 亮度块会使用 <code>SMOOTH</code>，<code>REGULAR</code> 和 <code>SHARP</code>，共 3 种自适应 8-tap FIR 插值滤镜，代表在横向或纵向 8 个像素中采样并分配权重。如果像素位于块的纵向中间处，则先计算块中的所有横向插值结果，在从中计算纵向插值结果。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/8-tap-interpolation.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：8x8 区间（8-tap 范围内）的横向→纵向插值，得到中心的子像素</p>
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：3 种平移运动补偿滤镜以及其自适应变体，4x4 变体</button>
            <div class="coll-content"><ul class="list-dotless">
                <li><code>REGULAR</code></li>
                <li><pre><code class="language-cpp">
{
    { 0, 0, 0, 128, 0, 0, 0, 0 }, // 边缘
    { 0, 2, -6, 126, 8, -2, 0, 0 }, // 偏左
    { 0, 2, -10, 122, 18, -4, 0, 0 },
    { 0, 2, -12, 116, 28, -8, 2, 0 },
    { 0, 2, -14, 110, 38, -10, 2, 0 },
    { 0, 2, -14, 102, 48, -12, 2, 0 },
    { 0, 2, -16, 94, 58, -12, 2, 0 },
    { 0, 2, -14, 84, 66, -12, 2, 0 },
    { 0, 2, -14, 76, 76, -14, 2, 0 },
    { 0, 2, -12, 66, 84, -14, 2, 0 },
    { 0, 2, -12, 58, 94, -16, 2, 0 },
    { 0, 2, -12, 48, 102, -14, 2, 0 },
    { 0, 2, -10, 38, 110, -14, 2, 0 },
    { 0, 2, -8, 28, 116, -12, 2, 0 },
    { 0, 0, -4, 18, 122, -10, 2, 0 }, // 偏右
    { 0, 0, -2, 8, 126, -6, 2, 0 } // 边缘
}
                </code></pre></li>
                <li><code>SMOOTH</code></li>
                <li><pre><code class="language-cpp">
{
    { 0, 0, 0, 128, 0, 0, 0, 0 }, // 左边缘
    { 0, 2, 28, 62, 34, 2, 0, 0 }, // 偏左
    { 0, 0, 26, 62, 36, 4, 0, 0 },
    { 0, 0, 22, 62, 40, 4, 0, 0 },
    { 0, 0, 20, 60, 42, 6, 0, 0 },
    { 0, 0, 18, 58, 44, 8, 0, 0 },
    { 0, 0, 16, 56, 46, 10, 0, 0 },
    { 0, -2, 16, 54, 48, 12, 0, 0 },
    { 0, -2, 14, 52, 52, 14, -2, 0 },
    { 0, 0, 12, 48, 54, 16, -2, 0 },
    { 0, 0, 10, 46, 56, 16, 0, 0 },
    { 0, 0, 8, 44, 58, 18, 0, 0 },
    { 0, 0, 6, 42, 60, 20, 0, 0 },
    { 0, 0, 4, 40, 62, 22, 0, 0 },
    { 0, 0, 4, 36, 62, 26, 0, 0 }, // 偏右
    { 0, 0, 2, 34, 62, 28, 2, 0 } // 右边缘
}
                </code></pre></li>
                <li><code>SHARP</code></li>
                <li><pre><code class="language-cpp">
{
    { 0, 0, 0, 128, 0, 0, 0, 0 }, // 左边缘
    { -2, 2, -6, 126, 8, -2, 2, 0 }, // 偏左
    { -2, 6, -12, 124, 16, -6, 4, -2 },
    { -2, 8, -18, 120, 26, -10, 6, -2 },
    { -4, 10, -22, 116, 38, -14, 6, -2 },
    { -4, 10, -22, 108, 48, -18, 8, -2 },
    { -4, 10, -24, 100, 60, -20, 8, -2 },
    { -4, 10, -24, 90, 70, -22, 10, -2 },
    { -4, 12, -24, 80, 80, -24, 12, -4 },
    { -2, 10, -22, 70, 90, -24, 10, -4 },
    { -2, 8, -20, 60, 100, -24, 10, -4 },
    { -2, 8, -18, 48, 108, -22, 10, -4 },
    { -2, 6, -14, 38, 116, -22, 10, -4 },
    { -2, 6, -10, 26, 120, -18, 8, -2 },
    { -2, 4, -6, 16, 124, -12, 6, -2 }, // 偏右
    { 0, 2, -2, 8, 126, -6, 2, -2 } // 右边缘
}
                </code></pre></li>
                <li><code>REGULAR 4x4</code></li>
                <li><pre><code class="language-cpp">
{
    { 0, 0, 0, 128, 0, 0, 0, 0 }, // 边缘
    { 0, 0, -4, 126, 8, -2, 0, 0 }, // 偏左
    { 0, 0, -8, 122, 18, -4, 0, 0 },
    { 0, 0, -10, 116, 28, -6, 0, 0 },
    { 0, 0, -12, 110, 38, -8, 0, 0 },
    { 0, 0, -12, 102, 48, -10, 0, 0 },
    { 0, 0, -14, 94, 58, -10, 0, 0 },
    { 0, 0, -12, 84, 66, -10, 0, 0 },
    { 0, 0, -12, 76, 76, -12, 0, 0 },
    { 0, 0, -10, 66, 84, -12, 0, 0 },
    { 0, 0, -10, 58, 94, -14, 0, 0 },
    { 0, 0, -10, 48, 102, -12, 0, 0 },
    { 0, 0, -8, 38, 110, -12, 0, 0 },
    { 0, 0, -6, 28, 116, -10, 0, 0 },
    { 0, 0, -4, 18, 122, -8, 0, 0 }, // 偏右
    { 0, 0, -2, 8, 126, -4, 0, 0 } // 边缘
}
                </code></pre></li>
                <li><code>SMOOTH 4x4</code></li>
                <li><pre><code class="language-cpp">
{
    { 0, 0, 0, 128, 0, 0, 0, 0 }, // 左边缘
    { 0, 0, 30, 62, 34, 2, 0, 0 }, // 偏左
    { 0, 0, 26, 62, 36, 4, 0, 0 },
    { 0, 0, 22, 62, 40, 4, 0, 0 },
    { 0, 0, 20, 60, 42, 6, 0, 0 },
    { 0, 0, 18, 58, 44, 8, 0, 0 },
    { 0, 0, 16, 56, 46, 10, 0, 0 },
    { 0, 0, 14, 54, 48, 12, 0, 0 },
    { 0, 0, 12, 52, 52, 12, 0, 0 },
    { 0, 0, 12, 48, 54, 14, 0, 0 },
    { 0, 0, 10, 46, 56, 16, 0, 0 },
    { 0, 0, 8, 44, 58, 18, 0, 0 },
    { 0, 0, 6, 42, 60, 20, 0, 0 },
    { 0, 0, 4, 40, 62, 22, 0, 0 },
    { 0, 0, 4, 36, 62, 26, 0, 0 }, // 偏右
    { 0, 0, 2, 34, 62, 30, 0, 0 } // 右边缘
}
                </code></pre></li>
                <li><code>INTRA CHROMA 2x2（?）</code></li>
                <li><pre><code class="language-cpp">
{
    { 0, 0, 0, 128, 0, 0, 0, 0 }, // 左边缘
    { 0, 0, 0, 120, 8, 0, 0, 0 }, // 偏左
    { 0, 0, 0, 112, 16, 0, 0, 0 },
    { 0, 0, 0, 104, 24, 0, 0, 0 },
    { 0, 0, 0, 96, 32, 0, 0, 0 },
    { 0, 0, 0, 88, 40, 0, 0, 0 },
    { 0, 0, 0, 80, 48, 0, 0, 0 },
    { 0, 0, 0, 72, 56, 0, 0, 0 },
    { 0, 0, 0, 64, 64, 0, 0, 0 },
    { 0, 0, 0, 56, 72, 0, 0, 0 },
    { 0, 0, 0, 48, 80, 0, 0, 0 },
    { 0, 0, 0, 40, 88, 0, 0, 0 },
    { 0, 0, 0, 32, 96, 0, 0, 0 },
    { 0, 0, 0, 24, 104, 0, 0, 0 },
    { 0, 0, 0, 16, 112, 0, 0, 0 }, // 偏右
    { 0, 0, 0, 8, 120, 0, 0, 0 } // 右边缘
}
                </code></pre></li>
                </ul>
                <p>滤镜结构见 Github：<a href="https://github.com/mozilla/aom/blob/46b7bb243b39929c02d6decc1bdb2e39e11540d6/av1/common/filter.c"><code>filter.c</code></a>，<a href="https://github.com/mozilla/aom/blob/46b7bb243b39929c02d6decc1bdb2e39e11540d6/av1/common/filter.c"><code>filter.h</code></a></p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/3）局部仿射变换运动补偿 Local Affine/Warped MC</button>
            <div class="coll-content">
                <h4>（2/3）局部仿射变换运动补偿 Local Affine/Warped MC</h4>
                <p>基于当前块及其空间相邻块，以估计局部的仿射模型参数。如果空间相邻块与当前块指向同一被参考帧，则检查这个空间相邻块中的中心像素与其作对应的，被参考帧中的像素；与其左侧、顶部的 <span class="text-blue-math">\(\frac{1}{4}\)</span> 像素，对应被参考帧的准确映射位置，而得到补偿程度的变换矩阵。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/local-affine-motion-compensation-derivation.png" alt="imageR" class="img-medium">
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/3）重叠块运动补偿 Overlapped block MC</button>
            <div class="coll-content">
                <h4>（3/3）重叠块运动补偿 Overlapped block MC</h4>
                <p>单帧参考帧中，如果当前帧间预测块面积不小于 8x8，且顶部或左侧的相邻块（不含左上块）已被编码时，只要指向同一被参考帧，则可能会有块间画面的重叠。当 OBMC 应用于当前块时，当前块的帧间预测结果会与顶部、左侧相邻块的结果合成；最多支持顶部和左侧块的四个动态向量。虽然运动补偿与预测模式下的权重分配不相关，但合并两个预测结果画面的重叠处时，仍然需要计算预测像素值，为 <span class="text-blue-math">\( P_{1}=m\cdot R_{1}+(64-m)R_{\text{above OR left}} \)</span></p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/overlapped-motion-compensation-top-left.png" alt="imageR" class="img-medium">
                    <img loading="lazy" src="files/inter-prediction/overlapped-motion-compensation-order.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：OBMC 的检测范围，和处理顺序（右/下）</p>
                </div>
                <p>预测像素动态向量的比例受到预测像素所在的高（顶部重叠）或宽（左侧重叠）的变化而变化；且受到预测块自身的高（顶部重叠）或宽（左侧重叠）的变化而变化。例如越远离重叠块，则当前预测块的动态向量权重越高；而当前块面积越大，则变化的区间梯度（变化周期宽度）也会变缓。</p>
                <p>通过 <span class="text-blue-math">\( \frac{1}{2} \sin() \)</span> 缩放精度和微调周期宽度（重叠块最多预测到当前块自身高/宽的一半），得到权重：</p>
                <span class="text-blue-math">\[ m=64\cdot\left(\frac{1}{2}\sin\left(\frac{\pi}{b_{height}}\left(x_{height}+\frac{1}{2}\right)\right)+\frac{1}{2}\right)\ \]</span>
            </div>

            <h3>帧间编码——全局仿射动态补偿 Global affine / warped MC</h3>
            <p>分为<i>全局动态搜索</i>（特征匹配 Feature match）和<i>全局运动补偿</i>（模型识别 Model identification）两部分。匹配<i>被参考帧相比原画</i>的整帧缩放、倾斜、旋转（仿射变换，见变换版块）。</p>
            <ol>
                <li><b>特征匹配</b>：识别位于原图，以及被参考帧中的特征角点</li>
                <li><b>模型识别</b>：得到变换矩阵参数，并从中生成每个参考帧的动态向量</li>
            </ol>
            <p>SVT-AV1 编码器中使用<i>特征匹配</i>来计算每个参考帧的全局运动参数，然后应用<i>随机样本一致性（RANSAC）</i>算法（见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/tree/master/Docs/Appendix-Global-Motion.md">SVT-AV1 Docs</a>）。此“运动补偿”可以理解为“初阶段补偿”。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/4）加速式分瓣检测取点法 FAST</button>
            <div class="coll-content">
                <h4>（1/4）加速式分瓣检测取点法 Features from accelerated segment test（FAST）</h4>
                <p>通过检查某点 p 周围的 16 像素圆环（半径 3 像素）来识别特征角点 corner point。如果环上 12 个<i>连续点</i>的值都相比点 p 的值要高出，或低过一定阈值，则设点 p 为图像中的特征角点。这种特征提取方法对明暗和运动的变化有抗性（robustness）。“加速”体现在使用像素值差异，而不是特征向量匹配，高斯模糊渐变梯度等算法实现。</p>
                <p>识别出原画帧<i>以及</i>被参考帧上的所有特征后，计算这两组特征之间归一化（缩放到基本单位大小）的互相关函数来实现特征筛选。大致为：</p>
                <ul class="text-smaller">
                    <li>参考帧上的特征相比原画中特征的空间距离差异是否在合理范围（阈值）内</li>
                    <li>所有“参考帧上的特征相比原画中特征”中，相关性是否（相比周围是）最高</li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/features-from-accelerated-segment-test.jpg" alt="imageR" class="img-medium">
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/4——1/1）线性回归分析法 Linear regression</button>
            <div class="coll-content">
                <h4>（1/4——1/1）线性回归分析法 Linear regression</h4>
                <p>一种统计方法，用于在含测量误差的干扰下仍能获取较为准确的数据（此处为直线函数）。当数据点可能因时间或其他因素偏离真实值时，可以通过回归分析找到一条最能代表这些数据的直线或曲线。当然，进行回归分析需要事先知道线的类型（正弦、余弦、幂、对数等）。</p>
                <p>线性回归分析的目标是从坐标系的某一轴（x 或 y 轴）中，找到相对这条轴的一条最优解直线。这里的<i>最优解</i>指该直线到所有数据点的距离之和最小（通常指垂直距离）。因此，我们认为这条直线最能反映数据的整体趋势。</p>
                <p>需要注意的是，除了线性回归以外还有主成分分析（PCA）方法。不使用后者通常是因为这组采样点的 x 或 y 坐标可能只是时间序列或其它顺序变量（如隔几秒采样一次），这种情况下，我们更关注变量之间的关系本身，而不是数据的降维处理。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/least-squares.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图片来自：<a href="https://www.cuemath.com/data/least-squares/">cuemath.com</a></p>
                </div>
            </div>

            <!--<button type="button" class="collapsible border-main rounded-3">点击展开/折叠内容：（2/5——2/2）主成分分析法 PCA</button>
            <div class="coll-content">
                <h4>（1/4——2/2）主成分分析法 Principal component analysis（PCA）</h4>
                <p>与回归分析不同，PCA 通过寻找与自身所有采样点的垂直方向（正交）最短结果——即所有采样点/特征点到该直线的垂直距离之和最小。这种正交性保证了 PCA 找到的是一条能够最大程度保留二维数据信息走向的主成分轴。此时坐标系中心、采样点与采样点距离直线最短点，三点构成直角三角形</p>
                <p>使用 PCA 而不用线性回归分析，说明这组采样点的 x 和 y 信息都是数据的一部分（例如预测下一次动态搜索中最可能的向量）。见：<a href="https://shankarmsy.github.io/posts/pca-vs-lr.html">shankarmsy.github.io</a> 然而，PCA 的实现依赖于计算协方差矩阵、特征值和特征向量，因此要求使用者需要对线性代数具有深刻理解，所以在效率的考量下一般会避免用到它。见 <a href="https://droneree.github.io/2020/06/05/PCA_CCA_PLS/">droneree.github.io</a></p>
            </div>-->

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/4）最小二乘法 Least squares</button>
            <div class="coll-content">
                <h4>（2/4）最小二乘法 Least squares</h4>
                <h5>（2/4——1/2）基础理论</h5>
                <p>一种简单直接的数学优化方法，是回归分析的一种实现。其目标是最小化以下表达式：
                    <span class="text-blue-math">\[\mathbb{E} = \sum_{i=1}^{n}(y_i - f(x_i))^2\]</span>
                    通过找出误差平方和 SSE 最小的值 <span class="text-blue-math">\( \mathbb{E} \)</span>（最小化）实现“找到最能代表这些数据的直线或曲线”的目标。
                </p>
                <ul>
                    <li>采样值/观测值：<span class="text-blue-math">\( y_i \)</span></li>
                    <li>回归模型的预测值：<span class="text-blue-math">\( f(x_i) \)</span>，越接近 <span class="text-blue-math">\( y_i \)</span> 越好</li>
                    <li>采样/观测的次数：<span class="text-blue-math">\( n \)</span></li>
                </ul>

                <h5>（2/4——2/2）回归处理</h5>
                <p>例如，在特征点中找出一条 <span class="text-blue-math">\(y = mx+b\)</span> 最小二乘法通过计算所有特征点的：</p>
                <ul>
                    <li>横向特征点位置 x 的总和：<span class="text-blue-math">\(\sum x = x_1 + x_2 + \ldots + x_n\)</span></li>
                    <li>纵向特征点位置 y 的总和：<span class="text-blue-math">\(\sum y = y_1 + y_2 + \ldots + y_n\)</span></li>
                    <li>每个 x·y 的总和：<span class="text-blue-math">\(\sum xy = x_1 y_1 + x_2 y_2 + \ldots + x_n y_n\)</span></li>
                    <li>每个 x 取平方的总和：<span class="text-blue-math">\(\sum x^2 = x_1^2 + x_2^2 + \ldots + x_n^2\)</span></li>
                    <li>特征点总数：<span class="text-blue-math">\(n\)</span></li>
                </ul>
                <p>得到斜度，以及代入斜度，得到截距：
                    <span class="text-blue-math">\[ m = \frac{n \sum xy - \sum x \sum y}{n \sum x^2 - \left(\sum x\right)^2} \]</span>
                    <span class="text-blue-math">\[ b = \frac{\sum y - m \sum x}{n} \]</span>
                    从而拟合出整个 <span class="text-blue-math">\(y = mx+b\)</span> 直线。
                </p><!-- 为什么不翻译成最小二次方法 -->
                <!-- 说不定此处可以把 K-L 变换的内容搬出来，当然因为过于晦涩，必须是作为额外的页面出现 -->
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/4）随机采样一致法 RANSAC</button>
            <div class="coll-content">
                <h4>（3/4）随机采样一致法 Random sample consensus（RANSAC）</h4>
                <p>将特征角点归纳为“合群 inlier”与“离群 outlier”两类，通过迭代的方式筛除离群特征角点，从而增强最小二乘法抗干扰能力的处理。这个步骤大致分为：</p>
                <ol class="text-smaller">
                    <li>随机选择若干个点记做“合群”</li>
                    <li>拟合出模型（此处为最小二乘法找到的直线）</li>
                    <li>带入新的点到刚才建立的模型中，计算其是否属于合群（例如根据该点距离这条直线的最短距离判断）</li>
                    <li>记下合群点数量</li>
                    <li>重复以上步骤（每次都随机选择若干点）</li>
                    <li>给出合群点数量最多的一次所拟合的模型</li>
                </ol>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/ransac-fitted-line.svg" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图片来自：<a href="https://zh.wikipedia.org/wiki/%E9%9A%A8%E6%A9%9F%E6%8A%BD%E6%A8%A3%E4%B8%80%E8%87%B4">维基百科</a></p>
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/4）全局动态向量 Global MV</button>
            <div class="coll-content">
                <h4>（4/4）全局动态向量 Global MV</h4>
                <p>即模型识别的结果，分为 4 类：</p>
                <ul>
                    <li><code class="code-bold">IDENTITY</code>：IDTX 变换</li>
                    <li><code class="code-bold">TRANSLATION</code>：平移变换</li>
                    <li><code class="code-bold">ROTZOOM</code>：平移，旋转和对称放大变换</li>
                    <li><code class="code-bold">AFFINE</code>：本格仿射变换</li>
                </ul>
            </div>

            <h3>帧间预测——混合参考帧运动补偿</h3>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/6）权重分配</button>
            <div class="coll-content">
                <h4>（1/6）权重分配</h4>
                <p>单帧参考帧下，一格预测像素可以表示为 <span class="text-blue-math">\( P\left(x,y\right) = m\left(x,y\right) \cdot R\left(x,y\right)\)</span>，代表“预测值为缩放值与初始值的积”。混合参考帧结合了两帧被参考帧，因此在“重叠的预测像素”上也需要分配权重，如某个预测像素的值为：<span class="text-blue-math">\[ P\left(x,y\right) = m\left(x,y\right) ∗ R_{1}\left(x,y\right) + (64 - m\left(x,y\right)) ∗ R_{2}\left(x,y\right) \]</span></p>
                <p>这里的权重/缩放值 <span class="text-blue-math">\( m\left(x,y\right) \)</span> 最大（100%）被放大了 64 倍，从而优化为整数计算并提高精度。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2~3/6）帧间距离加权、平均加权模式分权 Distance & average weighted predictor</button>
            <div class="coll-content">
                <h4>（2~3/6）帧间距离加权、平均加权模式分权 Distance & average weighted predictor</h4>
                <p>将 <span class="text-blue-math">\( d_1, d_2 \)</span> 作为混合被参考帧距离当前预测块的距离，根据 <span class="text-blue-math">\(d_2\)</span> 小于 <span class="text-blue-math">\(d_1\)</span> 的多少倍来确定权重。特殊情况为“平均加权模式分权 Average weighted predictor”，即距离加权分配中出现距离相等的情况。注：分为帧间以及帧内两种加权权重。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/6）差值加权模式分权 Difference weighted / modulated predictor</button>
            <div class="coll-content">
                <h4>（4/6）差值加权模式分权 Difference weighted / modulated predictor</h4>
                <p>直接从两个被参考帧中的同位像素做差，权重设定为：</p>
                <span class="text-blue-math">\[m\left(x,y\right) = \begin{cases} 
                    38 + \frac{\left| P_{1}\left(x,y\right) - P_{2}\left(x,y\right) \right|}{16}
                    \text{, mask_type = 0} \\
                    64 - 38 + \frac{\left| P_{1}\left(x,y\right) - P_{2}\left(x,y\right) \right|}{16}
                    \text{, mask_type = 1} \\
                \end{cases}\]</span>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（5/6）帧内帧间混合模式分权 Compound InterIntra Predictor</button>
            <div class="coll-content">
                <h4>（5/6）帧内帧间混合模式分权 Compound InterIntra Predictor</h4>
                <p>重叠块运动补偿 OBMC 见下方的运动补偿版块中，结合 DC、垂直/水平夹角或平滑/SMOOTH 的帧内编码块，以及仿射预测的帧间编码块。结合的方法包括了楔形蒙版预测的横向和纵向模式，但主要为随坐标变化过渡权重的两种预测结果混合，实现合成。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/inter-prediction/compound-interintra-prediction.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：重叠合成的可行样式与渐变结构</p>
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（6/6）楔形蒙版模式分权 Wedge mask predictor</button>
            <div class="coll-content">
            <h4>（6/6）楔形蒙版模式分权 Wedge mask predictor</h4>
            通过长 16 的序列作为指定分割被参考块的蒙版/掩码参数，使两个被参考帧的同位参考块得以叠加，预测出当前块。由于楔形蒙版预测实际是两帧参考帧分别合成，因此预测像素的权重只在重合界处为各自一半（32:32），其余为 64:0 以及 0:64
            <ul>
                <li><a href="https://aomediacodec.github.io/av1-spec/#wedge-mask-process">AV1 Spec 中</a> 则是从 64x1 的蒙版/掩码（<code>Wedge_Master_Oblique_Odd/Even</code>，<code>Wedge_Master_Vertical</code>）中生成：</li>
            </ul>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：64x1 楔形蒙版初始值</button>
            <div class="coll-content"><pre><code class="language-cpp">
Wedge_Master_Oblique_Odd[MASK_MASTER_SIZE] =
{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 6, 18, 37, 53, 60, 63, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64 }

Wedge_Master_Oblique_Even[MASK_MASTER_SIZE] =
{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 11, 27, 46, 58, 62, 63, 64, 64, 64, 64 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64 64, 64, 64, 64, 64, 64, 64, 64 }

Wedge_Master_Vertical[MASK_MASTER_SIZE] =
{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 7, 21, 43, 57, 62, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64 }
            </code></pre></div>
            <p>通过确认当前块横向还是纵向的 4x4 分块数量更多，以预选一批模式，然后循环遍历选取蒙版角度，以及额外用于对齐的 x 偏移与 y 偏移，完成预测：</p>
            <div class="align-items-center">
                <img loading="lazy" src="files/inter-prediction/compound-wedge-prediction.png" alt="imageR" class="img-small">
                <p class="text-gray-side mt-0">图：楔形蒙版的 NxN，Nx2N 分类的不同模式</p>
                <img loading="lazy" src="files/inter-prediction/compound-prediction-modes.webp" alt="imageR" class="img-small">
                <p class="text-gray-side mt-0">图：不同混合参考帧预测模式的结果对比</p>
            </div>
            <button type="button" class="collapsible border-main rounded-3 my-3">点击展开/折叠内容：蒙版角度及偏移对齐量的筛选</button>
            <div class="coll-content"><ul class="list-dotless text-smaller">
                <li>纵向 4x4 亮度分块更多（4~15）</li>
                <li><pre><code class="language-cpp">
WEDGE_OBLIQUE27, 4, 4
WEDGE_OBLIQUE63, 4, 4
WEDGE_OBLIQUE117, 4, 4
WEDGE_OBLIQUE153, 4, 4
WEDGE_HORIZONTAL, 4, 2
WEDGE_HORIZONTAL, 4, 4
WEDGE_HORIZONTAL, 4, 6
WEDGE_VERTICAL, 4, 4
WEDGE_OBLIQUE27, 4, 2
WEDGE_OBLIQUE27, 4, 6
WEDGE_OBLIQUE153, 4, 2
WEDGE_OBLIQUE153, 4, 6
WEDGE_OBLIQUE63, 2, 4
WEDGE_OBLIQUE63, 6, 4
WEDGE_OBLIQUE117, 2, 4
WEDGE_OBLIQUE117, 6, 4
                </code></pre></li>
                <li>横向 4x4 亮度分块更多（4~15）：</li>
                <li><pre><code class="language-cpp">
WEDGE_OBLIQUE27, 4, 4
WEDGE_OBLIQUE63, 4, 4
WEDGE_OBLIQUE117, 4, 4
WEDGE_OBLIQUE153, 4, 4
WEDGE_VERTICAL, 2, 4
WEDGE_VERTICAL, 4, 4
WEDGE_VERTICAL, 6, 4
WEDGE_HORIZONTAL, 4, 4
WEDGE_OBLIQUE27, 4, 2
WEDGE_OBLIQUE27, 4, 6
WEDGE_OBLIQUE153, 4, 2
WEDGE_OBLIQUE153, 4, 6
WEDGE_OBLIQUE63, 2, 4
WEDGE_OBLIQUE63, 6, 4
WEDGE_OBLIQUE117, 2, 4
WEDGE_OBLIQUE117, 6, 4
                </code></pre></li>
                <li>数量相等（4~15）：</li>
                <li><pre><code class="language-cpp">
WEDGE_OBLIQUE27, 4, 4
WEDGE_OBLIQUE63, 4, 4
WEDGE_OBLIQUE117, 4, 4
WEDGE_OBLIQUE153, 4, 4
WEDGE_HORIZONTAL, 4, 2
WEDGE_HORIZONTAL, 4, 6
WEDGE_VERTICAL, 2, 4
WEDGE_VERTICAL, 6, 4
WEDGE_OBLIQUE27, 4, 2
WEDGE_OBLIQUE27, 4, 6
WEDGE_OBLIQUE153, 4, 2
WEDGE_OBLIQUE153, 4, 6
WEDGE_OBLIQUE63, 2, 4
WEDGE_OBLIQUE63, 6, 4
WEDGE_OBLIQUE117, 2, 4
WEDGE_OBLIQUE117, 6, 4
                </code></pre></li>
            </ul></div>

            <h3>帧间预测——模式决策设定</h3>
            <ul>
                <li>小于 8x8 的细分块设为单帧参考模式</li>
                <li>如果选择编码一帧为混合参考帧，则判断应该使用双向混合还是单向混合方法（根据插值理论来说，双向的准确度更好）</li>
                <li>当应用单参考帧间预测，并且细分块介于 8x8~32x32 大小（小于等于、大于等于）时，才有条件选择使用帧间帧内混合模式</li>
                <li>使用平移运动补偿的块需要判断是否使用时域插值滤镜（不是空域的 8-tap FIR 滤镜）</li>
            </ul>

            <h2 id="h2-7">帧内预测</h2>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：帧内预测——临近参考源序列 Neighbour arrays</button>
            <div class="coll-content">
                <h3>帧内预测——临近参考源序列 Neighbour arrays</h3>
                <p>HEVC 中的帧内参考源拥有左侧一列，顶部一行，共两排参考源加一个左上角参考源。SVT-AV1 编码器的帧内预测块拥有其所在 Superblock 的左侧和顶部一行一列，外加一个左上肩型序列（Γ），<i>共 3 列</i>。</p>
                <p>左侧序列约一个 SB 高，可使用帧内编码 SB 的 y 坐标锁定。顶部序列大约有一个图片宽，且包含了原本的左上角参考源像素，可以使用当前块的 x 坐标锁定。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/intra-reference-neighbour.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：SVT-AV1 中帧内预测的参考源序列。</p>
                </div>
                <p><a href="https://aomediacodec.github.io/av1-spec/#general-11">AV1 Spec - Intra Prediction</a> 中，左上肩序列仍然是分为左侧和顶部两个序列看待的，当参考源缺失时按如下顺序填补。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：填补参考源的流程</button>
            <div class="coll-content">
                <p>仅左侧或上侧参考源可用——以左上角参考源的像素值填补</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/intra-neighbour-replenishment.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：<code class="code-bold">haveAbove == 0; haveLeft == 1</code> 时的填补</p>
                </div>
                <p>两侧参考源皆不可用——设为最大像素值的 <span class="text-blue-math">\(\frac{1}{4}\)</span>。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/intra-neighbour-replenishment-2.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：<code class="code-bold">haveAbove == 0; haveLeft == 0</code> 时的填补</p>
                </div>
                <p>左侧和上侧参考源可用，但右上行参考源缺失——用顶部的最右侧参考源填补。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/intra-neighbour-replenishment-3.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：<code class="code-bold">haveAbove == 1; haveAboveRight == 0</code> 时的填补</p>
                </div>
                <p>左上角的参考源遵循相同的填补逻辑。见：<a href="https://wikidocs.net/71814">Wikidocs</a></p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/intra-neighbour-replenishment-4.png" alt="imageR" class="img-medium">
                </div>
            </div>

            <!--<button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：最大像素值的四分之一</button>
            <div class="coll-content">
                <p>通过该式得到：<span class="text-blue-math">\( 1 &lt;&lt; \left( \text{BitDepth}-1 \right)-1 \)</span></p>
                <pre><code class="language-powershell">
// # PowerShell 例子：
// PS > $D = 10;
// PS > 1 -shl ($D-1)-1;
                </code></pre>
            </div>-->

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/1）SVT-AV1 更新和访问参考源序列的流程</button>
            <div class="coll-content">
                <h4>（1/1）SVT-AV1 更新和访问参考源序列的流程</h4>
                <p>临近参考源序列在当前帧开始帧内编码时重置。每个块完成编码后，其模式信息（或参考信息）会被填入这些序列。SVT-AV1 编码器更新和访问参考源序列的流程如下：</p>
                <ol>
                    <li>参考源序列合成当前编码块（SB 内的分块）所需的参考源信息</li>
                    <li>块的帧内编码模式决策</li>
                    <li>将当前块的模式信息（或参考信息）更新到参考源序列中</li>
                    <li>如果当前编码块是 SB 内的分块模式决策点，则更新与当前帧内参考模式所相关的参考源序列（?）</li>
                    <li>继续下一个块</li>
                </ol>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/intra-reference-neighbour-order.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：帧内预测的参考源序列更新。由于参考模式的不同，所以更新的参考源序列也不同</p>
                </div>
                <p>箭头表示了 Z 字型扫描编码细分块的顺序，颜色表示每个块编码所选用的参考模式（图中模式仅供参考）。三个参考源序列中会储存已完成编码的当前块，也包括了它们的参考模式。</p>
            </div>

            <h3>帧内预测——夹角模式</h3>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）VP9 编码</button>
            <div class="coll-content">
                <h4>（1/2）VP9——基本角 162°，无偏移角，共 8 种</h4>
                <ul class="text-smaller">
                    <li><code class="code-bold">D45_PRED</code>：+0°</li>
                    <li><code class="code-bold">D63_PRED</code>：+18°</li>
                    <li><code class="code-bold">H_PRED</code>：+27°</li>
                    <li><code class="code-bold">D117_PRED</code>：+27°</li>
                    <li><code class="code-bold">D135_PRED</code>：+18°</li>
                    <li><code class="code-bold">D153_PRED</code>：+18°</li>
                    <li><code class="code-bold">V_PRED</code>：+27°</li>
                    <li><code class="code-bold">D207_PRED</code>：+27°</li>
                </ul>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）AV1 编码</button>
            <div class="coll-content">
                <h4>（2/2）AV1——基本角 158°，偏移最大 176°，共 56 种</h4>
                <p>AV1 沿用了<i>一小部分</i> VP9 的基本夹角。</p>
                <ul class="text-smaller">
                    <li><code class="code-bold">D45_PRED</code>：+0°</li>
                    <li><code class="code-bold">D67_PRED</code>：+22°</li>
                    <li><code class="code-bold">H_PRED</code>：+23°</li>
                    <li><code class="code-bold">D113_PRED</code>：+23°</li>
                    <li><code class="code-bold">D135_PRED</code>：+22°</li>
                    <li><code class="code-bold">D157_PRED</code>：+22°</li>
                    <li><code class="code-bold">V_PRED</code>：+23°</li>
                    <li><code class="code-bold">D203_PRED</code>：+23°</li>
                </ul>
                <p>偏移角最大和最小的夹角分别为 207+9°和 45-9°，最终相差 180°（Type II 最终相差 176°）。8x8 的小预测块仍然沿用 8 个夹角以节省算力。这种先基本后细化夹角的查找方法类似于 x265 中的 fast-intra 查找。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/directional-prediction.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：帧内预测的夹角模式，为 8 个夹角中添加了左右各 3 个，每个 3°的偏移角</p>
                </div>
            </div>

            <h3>帧内预测——平滑模式 Smooth</h3>
            <p>分为以二次多项式插值（一种样条 Spline 插值）的 <code class="code-bold">SMOOTH_V_PRED</code> 与 <code class="code-bold">SMOOTH_H_PRED</code>，以及合并前两者，构成类似 HEVC 趋平预测模式（Planar）的 <code class="code-bold">SMOOTH_PRED</code>。权重根据预测像素坐标变化而变化：</p>
            <ul class="text-smaller">
                <li><code class="code-bold">SMOOTH_V_PRED</code> 使用二次多项式插值计算左下角参考点到左上角参考点的过渡，然后纵向填满该编码块</li>
                <li><code class="code-bold">SMOOTH_H_PRED</code> 使用二次多项式插值计算右上角参考点到左上角参考点的过渡，然后横向填满该编码块</li>
                <li><code class="code-bold">SMOOTH_PRED</code> 使用二次多项式插值出两种过渡，然后通过 Round2 函数取平均</li>
                <li>二次多项式插值代表“权重 1 × 点 1 + 权重 2 × 点 2 + ... + 权重 N × 点 N”，权重由距离过渡得到</li>
            </ul>
            <div class="align-items-center">
                <img loading="lazy" src="files/intra-prediction/smooth-prediction.png" alt="imageR" class="img-medium">
            </div>

            <button type="button" class="collapsible border-main rounded-3 mb-3">点击展开/折叠内容：SMOOTH_PRED 插值，Round2 函数伪代码</button>
            <div class="coll-content">
                <pre><code class="language-cpp">
// SMOOTH_V_PRED
smoothPred = smWeights[i] * AboveRow[j] + (256-smWeights[i]) * LeftCol[h-1]
pred[i][j] = Round2(smoothPred, 8) // 约分

// SMOOTH_H_PRED
smoothPred = smWeights[j] * LeftCol[i] + (256-smWeights[j]) * AboveRow[w-1]
pred[i][j] = Round2(smoothPred, 8) // 约分

// SMOOTH_PRED
smoothPred = smWeights[i] * AboveRow[j] + (256-smWeights[i]) * LeftCol[h-1] + smWeights[j] * LeftCol[i] + (256-smWeights[j]) * AboveRow[w-1]
pred[i][j] = Round2(smoothPred, 9) // 约分的同时取平均
                </code></pre>
                <!--<p>Round2 类似于取模 modulus，将输入 <span class="text-blue-math">\(x\)</span> <i>约分</i>到最接近的 <span class="text-blue-math">\(2^n\)</span> 倍数（如 <span class="text-blue-math">\(n=3\)</span> 则为逼近 8 倍数的数），然后通过 <span class="text-blue-math">\(+ 2^{n-1}\)</span> 实现对齐偏移。也代表通过二次幂转换十进制到二进制 bits 的大小</p>
                <pre><code class="language-powershell">
// 约分并对其到二进制下 n 的倍数
Round2(x,n) = floor((x+2^(n-1)) / 2^n)

// PowerShell 演算：
// PS > $x = 1234; $n = 3;
// PS > [Math]::floor( (($x + [Math]::Pow(2, $n-1))) / [Math]::Pow(2, $n) )
// 154

// 注：154*8 = 1232; 155*8 = 1240;
                </code></pre>-->
            </div>
            
            <h3>帧内预测——DC 模式</h3>
            <p>沿用了 VP9 中的 <code class="code-bold">DC_PRED</code>。</p>

            <h3>帧内预测——非线性模式 Paeth</h3>
            <p>来自 PNG 图像格式，适合在夹角未知的情况下模仿参考源，在常规的预测方法无效时提高了预测的准确度。VP9 中为 <code class="code-bold">TM_PRED</code>，代表预测像素值由“所对应顶部与左侧参考源之和，减左上参考源的差”得到。AV1 升级为 <code class="code-bold">PAETH_PRED</code>，见：<a href="https://aomediacodec.github.io/av1-spec/#basic-intra-prediction-process">AV1 Spec</a>。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/1）Paeth 插值步骤</button>
            <div class="coll-content">
                <ol>
                    <li>算出 <code class="code-bold">TM_PRED</code> 插值，赋值到变量 <code class="code-bold">base</code> </li>
                    <li>分别算出 <code class="code-bold">base</code> 与其对应的顶部、左侧、左上参考源的差，再取三者中最小</li>
                    <li>这种算法相比单纯执行 <code class="code-bold">TM_PRED</code> 能更好地隔离边缘纹理</li>
                </ol>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/tm-prediction.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：<code class="code-bold">TM_PRED</code> 所对应的顶部，左侧和左上角参考源</p>
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：Paeth 插值伪代码</button>
            <div class="coll-content"><pre><code class="language-cpp">
base = AboveRow[j] + LeftCol[i] – AboveRow[-1]
pLeft = Abs(base – LeftCol[i]) // abs(A-C)
pTop = Abs(base – AboveRow[j]) // abs(L-C)
pTopLeft = Abs(base – AboveRow[-1]) // abs(A+L-2*C)

if (pLeft &lt;= pTop && pLeft &lt;= pTopLeft) // 选择三者里值最小的参考源
    pred[i][j] = LeftCol[i] // 左侧参考源最小
else if (pTop &lt;= pTopLeft)
    pred[i][j] = AboveRow[j] // 顶部最小
else
    pred[i][j] = AboveRow[-1] // 左上角最小
                </code></pre>
                <p>见：<a href="https://wikidocs.net/70860">Wikidocs - Paeth Intra Prediction</a></p>
            </div>

            <h3>帧内预测——递归插值模式 Recursive filter intra</h3>
            <p>使用与 <code class="code-bold">TM_PRED</code> 类似的原理，结合递归逻辑预测一处 8x8 范围。AV1 中定义了 5 种递归模式，每种附带一组 7-tap 滤镜，将当前块划分为 4x2 的细分块，这些细分块由来自顶部和左侧块的 7 个参考源，由滤镜插值得到。每个 4x2 细分块内使用不同的 7-tap 滤镜，且每个完成预测的细分块都被用于下一个 4x2 细分块的预测，构成递归计算的参考结构。</p><!--该预测模式并没有“<code class="code-bold">_PRED</code>”的变量名。-->
            <div class="align-items-center">
                <img loading="lazy" src="files/intra-prediction/recursive-prediction.png" alt="imageR" class="img-small">
                <img loading="lazy" src="files/intra-prediction/recursive-prediction-variables.png" alt="imageR" class="img-small">
                <p class="text-gray-side mt-0">图：递归预测模式与所对应的参考源映射方向，（右/下）分块与变量值图解。见：<a href="https://aomediacodec.github.io/av1-spec/#recursive-intra-prediction-process">AV1 Spec - Recursive intra prediction</a></p>
            </div>
            <p>递归插值模式不是在夹角，DC，PAETH 等模式基础上进行微调，而是作为独立的预测模式存在，所以需要模式决策分别判断率失真程度（<a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/tree/master/Docs/Appendix-Filter-Intra.md">SVT-AV1 Readme</a>）。理论上可以改善“传统帧内预测”应对块中画面微小变化的保真度。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：4x2 范围的预测像素支持的 5 种 7-tap 插值：</button>
            <div class="coll-content">
                <table class="table-center align-items-center">
                    <thead>
                        <tr>
                            <th class="px-1">像素</th>
                            <th class="px-1"><code class="code-bold">FILTER_DC_PRED</code></th>
                            <th class="px-1"><code class="code-bold">FILTER_V_PRED</code></th>
                            <th class="px-1"><code class="code-bold">FILTER_H_PRED</code></th>
                            <th class="px-1"><code class="code-bold">FILTER_D157_PRED</code></th>
                            <th class="px-1"><code class="code-bold">FILTER_PAETH_PRED</code></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="t-light-gray">
                            <td class="px-1">0</td>
                            <td class="px-1">-6,10,0,0,0,12,0,0</td>
                            <td class="px-1">-10,16,0,0,0,10,0,0</td>
                            <td class="px-1">-8,8,0,0,0,16,0,0</td>
                            <td class="px-1">-2,8,0,0,0,10,0,0</td>
                            <td class="px-1">-12,14,0,0,0,14,0,0</td>
                        </tr>
                        <tr>
                            <td class="px-1">1</td>
                            <td class="px-1">-5,2,10,0,0,9,0,0</td>
                            <td class="px-1">-6,0,16,0,0,4,0,0</td>
                            <td class="px-1">-8,0,8,0,0,16,0,0</td>
                            <td class="px-1">-1,3,8,0,0,6,0,0</td>
                            <td class="px-1">-10,0,14,0,0,12,0,0</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-1">2</td>
                            <td class="px-1">-3,1,1,10,0,7,0,0</td>
                            <td class="px-1">-4,0,0,16,0,4,0,0</td>
                            <td class="px-1">-8,0,0,0,8,16,0,0</td>
                            <td class="px-1">-1,2,3,8,0,4,0,0</td>
                            <td class="px-1">-9,0,0,14,0,11,0,0</td>
                        </tr>
                        <tr>
                            <td class="px-1">3</td>
                            <td class="px-1">-3,1,1,2,10,5,0,0</td>
                            <td class="px-1">-2,0,0,0,16,2,0,0</td>
                            <td class="px-1">-8,0,0,0,8,16,0,0</td>
                            <td class="px-1">0,1,2,3,8,2,0,0</td>
                            <td class="px-1">-8,0,0,0,14,10,0,0</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-1">4</td>
                            <td class="px-1">-4,6,0,0,0,2,12,0</td>
                            <td class="px-1">-10,16,0,0,0,0,10,0</td>
                            <td class="px-1">-4,4,0,0,0,0,16,0</td>
                            <td class="px-1">-1,4,0,0,0,3,10,0</td>
                            <td class="px-1">-10,12,0,0,0,0,14,0</td>
                        </tr>
                        <tr>
                            <td class="px-1">5</td>
                            <td class="px-1">-3,2,6,0,0,2,9,0</td>
                            <td class="px-1">-6,0,16,0,0,0,6,0</td>
                            <td class="px-1">-4,0,4,0,0,0,16,0</td>
                            <td class="px-1">-1,3,4,0,0,4,6,0</td>
                            <td class="px-1">-9,1,12,0,0,0,12,0</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-1">6</td>
                            <td class="px-1">-3,2,2,6,0,2,7,0</td>
                            <td class="px-1">-4,0,0,16,0,0,4,0</td>
                            <td class="px-1">-4,0,0,4,0,0,16,0</td>
                            <td class="px-1">-1,2,3,4,0,4,4,0</td>
                            <td class="px-1">-8,0,0,12,0,1,11,0</td>
                        </tr>
                        <tr>
                            <td class="px-1">7</td>
                            <td class="px-1">-3,1,2,2,6,3,5,0</td>
                            <td class="px-1">-2,0,0,0,16,0,2,0</td>
                            <td class="px-1">-4,0,0,0,4,0,16,0</td>
                            <td class="px-1">-1,2,2,3,4,3,3,0</td>
                            <td class="px-1">-7,0,0,1,12,1,9,0</td>
                        </tr>
                    </tbody>
                </table>
                <p class="text-gray-side mt-0 align-items-center">表：权重分布的和为 16；末尾的 0 不会被访问，可能起到分隔符作用</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）布置参考源</button>
            <div class="coll-content">
                <h4>（1/2）布置参考源</h4>
                <p>参考源序列索引号见上图。大致步骤（滤镜）为：</p>
                <ol>
                    <li>设 4x2 分块序列的坐标：<code>i2; j4</code></li>
                    <li>设参考源序列 <code>p[7]</code></li>
                    <li>设参考源序列的索引号 <code>i = 0..6</code></li>
                    <li>顶部参考源 1~5 <code class="code-bold">i == 0..4</code>：
                        <ul>
                            <li><code class="code-bold">i2 == 0</code>
                                <ul>
                                    <li>4x2 块位于顶部，从顶部参考源序列（AboveRow）取值</li>
                                    <li><code>p[i] = AboveRow[ (j4 &lt;&lt; 2) + i - 1 ]</code></li>
                                </ul>
                            </li>
                            <li><code class="code-bold">i == 0; j4 == 0</code>
                                <ul>
                                    <li>4x2 块位于左上，从左侧参考源序列（LeftCol）取值</li>
                                    <li><code>p[i] = LeftCol[ (j4 &lt;&lt; 1) - 1 ]</code></li>
                                </ul>
                            </li>
                            <li><code class="code-bold">i &gt; 0; i2 &gt; 0; j4 &gt; 0</code>：
                                <ul>
                                    <li>其它 4x2 块，从早期帧内预测结果 2D 序列（pred）取值</li>
                                    <li><code>p[i] = pred[ ( i2 &lt;&lt; 1 ) - 1 ][ ( j4 &lt;&lt; 2 ) + i - 1 ]</code></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>左侧参考源 6~7 <code class="code-bold">i == 5..6</code>：
                        <ul>
                            <li><code class="code-bold">j4 == 0</code>
                                <ul>
                                    <li>4x2 块位于左侧，从左侧参考源序列（LeftCol）取值</li>
                                    <li><code>[i] = LeftCol[ (i2 &lt;&lt; 1) + i - 5 ]</code></li>
                                </ul>
                            </li>
                            <li><code class="code-bold">j4 &gt; 0</code>
                                <ul>
                                    <li>其它 4x2 块，从早期帧内预测结果 2D 序列（pred）取值</li>
                                    <li><code>p[i] = pred[ ( i2 &lt;&lt; 1 ) + i - 5 ][ ( j4 &lt;&lt; 2 ) - 1 ]</code></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ol>
            </div>

            <button type="button" class="collapsible border-main rounded-3 my-3">点击展开/折叠内容：（2/2）预测过程</button>
            <div class="coll-content">
                <h4>（2/2）预测过程</h4>
                <ol>
                    <li>设冠军个 4x2 分块序列的坐标：<code>i1; j1</code></li>
                    <li>沿用参考源序列的索引号：<code>i = 0..6</code></li>
                    <li>沿用上一步配置好的参考源：<code>p</code></li>
                    <li>设预测像素：<code>pr</code></li>
                    <li><code class="code-bold">i == 0..6</code>：
                        <ul>
                            <li><code>pr[i] = Intra_Filter_Taps[ INTRA_FILTER_MODES ][ ( i1 &lt;&lt; 2 ) + j1 ][i] * p[i] </code></li>
                            <li><span class="text-blue-math">\(pr(i) =
                                \text{Intra_Filter_Taps}_\text{INTRA_FILTER_MODES}
                                \left( i_1 \cdot 2^2 \right) \cdot i \cdot p_i
                                \)</span></li>
                        </ul>
                    </li>
                </ol>
                <p>滤镜如下表：</p>
                <pre><code class="language-cpp">
Intra_Filter_Taps[ INTRA_FILTER_MODES ][ 8 ][ 7 ] = {
    {
        { -6, 10, 0, 0, 0, 12, 0 },
        { -5, 2, 10, 0, 0, 9, 0 },
        { -3, 1, 1, 10, 0, 7, 0 },
        { -3, 1, 1, 2, 10, 5, 0 },
        { -4, 6, 0, 0, 0, 2, 12 },
        { -3, 2, 6, 0, 0, 2, 9 },
        { -3, 2, 2, 6, 0, 2, 7 },
        { -3, 1, 2, 2, 6, 3, 5 },
    },
    {
        { -10, 16, 0, 0, 0, 10, 0 },
        { -6, 0, 16, 0, 0, 6, 0 },
        { -4, 0, 0, 16, 0, 4, 0 },
        { -2, 0, 0, 0, 16, 2, 0 },
        { -10, 16, 0, 0, 0, 0, 10 },
        { -6, 0, 16, 0, 0, 0, 6 },
        { -4, 0, 0, 16, 0, 0, 4 },
        { -2, 0, 0, 0, 16, 0, 2 },
    },
    {
        { -8, 8, 0, 0, 0, 16, 0 },
        { -8, 0, 8, 0, 0, 16, 0 },
        { -8, 0, 0, 8, 0, 16, 0 },
        { -8, 0, 0, 0, 8, 16, 0 },
        { -4, 4, 0, 0, 0, 0, 16 },
        { -4, 0, 4, 0, 0, 0, 16 },
        { -4, 0, 0, 4, 0, 0, 16 },
        { -4, 0, 0, 0, 4, 0, 16 },
    },
    {
        { -2, 8, 0, 0, 0, 10, 0 },
        { -1, 3, 8, 0, 0, 6, 0 },
        { -1, 2, 3, 8, 0, 4, 0 },
        { 0, 1, 2, 3, 8, 2, 0 },
        { -1, 4, 0, 0, 0, 3, 10 },
        { -1, 3, 4, 0, 0, 4, 6 },
        { -1, 2, 3, 4, 0, 4, 4 },
        { -1, 2, 2, 3, 4, 3, 3 },
    },
    {
        { -12, 14, 0, 0, 0, 14, 0 },
        { -10, 0, 14, 0, 0, 12, 0 },
        { -9, 0, 0, 14, 0, 11, 0 },
        { -8, 0, 0, 0, 14, 10, 0 },
        { -10, 12, 0, 0, 0, 0, 14 },
        { -9, 1, 12, 0, 0, 0, 12 },
        { -8, 0, 0, 12, 0, 1, 11 },
        { -7, 0, 0, 1, 12, 1, 9 },
    }
}
            </code></pre></div>

            <h3>帧内预测——色度填亮度模式 Chroma from luma（CFL，特殊）</h3>
            <p>色度平面的预测像素通过亮度平面的同位像素值生成。高频部分通过重建块减去亮度块平均值预测得到，低频部分取自亮度块 <code class="code-bold">DC_PRED</code> 预测模式的像素值。高低频相加则得到一个色度预测像素，见：<a href="https://aomediacodec.github.io/av1-spec/#predict-chroma-from-luma-process">AV1 Spec - CfL</a></p>
            <div class="align-items-center">
                <img loading="lazy" src="files/intra-prediction/chroma-from-luma-prediction.png" alt="imageR" class="img-medium">
                <p class="text-gray-side mt-0">图：色度填亮度预测模式的计算。包括了提取亮度平面残差，乘进缩放值，以及叠加色度平面 <code class="code-bold">DC_PRED</code> 结果</p>
                <img loading="lazy" src="files/intra-prediction/chroma-from-luma-prediction-1.svg" alt="imageR" class="img-medium">
                <p class="text-gray-side mt-0">图：<a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-CfL.md?ref_type=heads">SVT-AV1 Docs</a> 中的色度填亮度预测模式的计算图例</p>
            </div>

            <!--<button type="button" class="collapsible border-main rounded-3">点击展开/折叠内容：Round2Signed 函数伪代码</button>
            <div class="coll-content">
                <p>Round2 函数的文本说明见帧内预测——平滑模式</p><pre><code class="language-cpp">
Round2Signed(x,n) = {
    Round2(x,n); x&gt;=0
   -Round2(-x,n); x&lt;0
}
Round2(x,n) = floor((x+2^(n-1)) / 2^n)
scaledLuma = Round2Signed( alpha * ( L[i][j] - lumaAvg ), 6 )
                </code></pre>
            </div>-->

            <h3>帧内预测——帧内块拷贝模式 Intra block copy（特殊）</h3>
            <p>通过“伪动态向量”定位一个重建块的伪帧间预测。亮度块的伪动态向量缩小后可以用于色度平面，但向量会变成半像素精度，这种情况下会额外在子像素上用到双线性插值滤镜，见：<a href="https://aomediacodec.github.io/av1-spec/#general-12">AV1 Spec</a>。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：IBC 模式启用条件</button>
            <div class="coll-content">
                <ul>
                    <li>使用时，帧间动态矢量缩放会被关闭（可能与跨分辨率动态搜索有关）</li>
                    <li>使用时，参考块被视为使用当前帧为参考帧的帧间预测</li>
                    <li>仅支持整数偏移/平移值</li>
                    <li>仅允许帧内参考中使用，整帧会禁用所有环路滤镜（去块、CDEF、重建滤镜）</li>
                    <li>使用时，不可用于 IBC 预测的块如下图</li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/intra-block-copy-availability.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：帧内块拷贝预测的可用块限制</p>
                </div>
            </div>
            
            <h3>帧内预测——调色板模式 Palette mode（特殊）</h3>
            <p>在当前 8x8~64x64 帧内编码亮度或色度块判断为 <code class="code-bold">DC_PRED</code> 时的可选预测模式。“调色板”代表一套类似于熵编码/文本编码的上下文序列。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：调色板模式的映射</button>
            <div class="coll-content">
                <p>调色板的映射包括从左，上和左上参考源中筛选出惯用值，再对上下文排序，最后以对角线扫描的顺序映射出预测块。预测每个块都需要更新一遍调色板（上下文）。编码时，编码块的冠军个预测像素会独立选择调色板中的颜色，其余的预测像素使用其顶部、左侧和左上角的参考源作为熵编码的上下文进行编码。见：<a href="https://aomediacodec.github.io/av1-spec/#palette-prediction-process">AV1 Spec - Palette Prediction</a>，<a href="https://aomediacodec.github.io/av1-spec/#palette-color-context-function">AV1 Spec - Palette Color Context</a></p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/intra-prediction/palette-mode.png" alt="imageR" class="img-small">
                    <img loading="lazy" src="files/intra-prediction/palette-context.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：4x4 块调色板模式的扫描顺序，与调色板上下文的例子（右）</p>
                </div>
            </div>
            
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：帧内预测——模式决策设定</button>
            <div class="coll-content">
                <h3>帧内预测——模式决策设定</h3>
                <p>一般情况下，AV1 会尝试所有帧内预测模式，并通过计算各个结果的率失真程度以选出合适的模式。特定情况下：</p>
                <ul class="text-smaller">
                    <li>4x4 亮度预测分块沿用 SB 的帧内预测模式</li>
                    <li>8x4，4x8 亮度预测沿用其上级细分块的帧内预测模式</li>
                    <li>更大的块同样沿用 SB 的预测模式</li>
                    <li>使用 filter_intra（<code class="code-bold">INTRA_FILTER_MODES</code>）：递归帧内预测模式</li>
                    <li>夹角模式的偏移角主要用于提高较大细分块的压缩率，4x4、4x8、8x4 块只使用基本夹角模式</li>
                    <li>如果亮度细分块可以使用 <code class="code-bold">DC_PRED</code> 模式，则根据判断是否应该换成递归模式</li>
                    <li>使用了帧内滤镜的亮度分块选用递归预测模式，见 <a href="https://aomediacodec.github.io/av1-spec/#filter-intra-mode-info-semantics">AV1 Spec - intra_filter_mode</a>，<a href="https://aomediacodec.github.io/av1-spec/#recursive-intra-prediction-process">AV1 Spec - Recursive intra prediction</a>：
                        <ul>
                            <li><code class="code-bold">FILTER_DC_PRED</code></li>
                            <li><code class="code-bold">FILTER_V_PRED</code></li>
                            <li><code class="code-bold">FILTER_H_PRED</code></li>
                            <li><code class="code-bold">FILTER_DC_PRED</code></li>
                            <li><code class="code-bold">FILTER_D157_PRED</code></li>
                        </ul>
                    </li>
                    <li>调色板模式需要判断调色板大小，以及是否使用缓存的调色板</li>
                </ul>
            </div>

            <h2 id="h2-8">量化</h2>

            <h3>量化——率控制前置条件</h3>
            <p>由于时间条件不允许，本教程将忽略除 CRF 模式以外（VBR、CBR、2pass）的编码器用法。SVT-AV1 的详细率控制说明见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-Rate-Control.md">SVT-AV1 Docs</a>。</p>

            <h3>量化——流程概述</h3>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：量化——流程概述</button>
            <div class="coll-content">
                <h3>量化——流程概述</h3>
                <p>AV1 与 VP9 中的量化步骤<i>大致</i>如下：</p>
                <ol>
                    <li><b>GOP 初始 QP 偏移</b>：
                        <ul class="text-smaller"><li>由用户指定，或默认值得到</li></ul>
                    </li>
                    <li><b>计算 QP</b>：
                        <ul class="text-smaller"><li>由率控制模式（CRF、CBR、VBR）结合前瞻进程（Lookahead）的推演得到</li></ul>
                    </li>
                    <li><b>帧类型 QP 偏移</b>：
                        <ul class="text-smaller"><li>以关键帧 Keyframe，帧内编码帧 Intra、帧间编码帧 Inter 的区别偏移 QP</li></ul>
                    </li>
                    <li><b>块大小 QP 偏移</b>：
                        <ul class="text-smaller"><li>据变换块的大小偏移 QP</li></ul>
                    </li>
                    <li><b>帧分瓣 QP 偏移</b>：
                        <ul class="text-smaller"><li>据帧分瓣 Segmentation 的各自情况偏移 QP</li></ul>
                    </li>
                    <li><b>亮度色度 QP 偏移</b>：
                        <ul class="text-smaller"><li>据亮度 Luma、色度 Chroma 平面偏移 QP，AV1 支持 Y、Cb、Cr 分别偏移</li></ul>
                    </li>
                    <li><b>转换到量化步长索引 QIndex</b>：
                        <ul class="text-smaller">
                            <li>将 QP 缩放到 0~255 范围的高精度状态<span class="text-smaller">（QIndex 不绑定位深，所以不存在 0~1023 的范围）</span></li>
                            <li>“索引”在编程中代表支持储存多个值的变量中，某个特定值的序号</li><!--（Array、ArrayList、LinkedList）-->
                        </ul>
                    </li>
                    <li><b>帧类型 QIndex 偏移</b>：
                        <ul class="text-smaller"><li>偏移关键帧，帧内编码帧、帧间编码帧的 QIndex</li></ul>
                    </li>
                    <li><b>亮度色度 QIndex 偏移</b>：
                        <ul class="text-smaller"><li>偏移 Y、Cb、Cr</li></ul>
                    </li>
                    <li><b>尖塔混合参考帧层级偏移</b>：
                        <ul class="text-smaller">
                            <li>“混合参考帧”即额外支持单向参考，此外同为 AVC、HEVC 的尖塔 B 帧（B-Pyramid）</li>
                            <li>尖塔层级与帧类型偏移的原理同为参考越多允许的量化越强</li>
                            <li>由用户分别指定亮度、色度平面的尖塔层级偏移</li>
                        </ul>
                    </li>
                    <li><b>转换到 AC、DC 量化步长</b>：
                        <ul class="text-smaller"><li>“索引”即 <code>Ac_Qlookup</code>、<code>Dc_Qlookup</code> 表中的，QIndex 所对应的值得到</li></ul>
                    </li>
                    <li><b>VAQ 量化步长偏移</b>：
                        <ul class="text-smaller"><li>方差自适应量化根据感知掩蔽效应找出并应用每个 SB 分配得到</li></ul>
                    </li>
                    <li><b>转换到量化与逆量化矩阵</b>（用户指定、非默认）：
                        <ul class="text-smaller"><li>映射量化步长到量化与逆量化矩阵，并用于编解码</li></ul>
                    </li>
                </ol>
            </div>

            <h3>量化——量化步长</h3>
            <p>AVC、HEVC 中为 QStep，代表量化强度的阶梯间隔，映射到对应的量化矩阵。VP9、AV1 中的默认量化模式是直接将变换块除以量化步长得到。量化步长由量化步长索引 QIndex 结合 <code>Dc_Qlookup</code>、<code>Ac_Qlookup</code> 得到，量化步长索引同时用于量化与逆量化。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：量化——量化矩阵</button>
            <div class="coll-content">
                <h3>量化——量化矩阵</h3>
                <p>在非默认量化方法中，AV1 支持 15 排量化矩阵。后排矩阵比前排的量化强度更高，帧间排比帧内排的强度更高。量化矩阵值的取值由块大小，率控制模式，和方差自适应量化根据位深、DC/AC 变换、Y/UV 平面等参数决定。结构大致如下（见 <a href="https://aomediacodec.github.io/av1-spec/#tables">AV1 Spec</a>）：</p>
                <pre><code class="text-smaller">
Quantizer_Matrix[ 15 ][ 2 ][ QM_TOTAL_SIZE ] = {
    {
        { // 亮度块 QM level 1，共 3344 个值，此处省略
            // 4x4 QM,
            // 8x8 QM,
            // 16x16 QM,
            // 32x32 QM,
            // 4x8 QM,
            // 8x4 QM,
            // 8x16 QM,
            // 16x8 QM,
            // 16x32 QM,
            // 32x16 QM,
            // 4x16 QM,
            // 16x4 QM,
            // 8x32 QM,
            // 32x8 QM,
        },
        { // 色度块 QM level 1
            // 4x4 QM,
            // 8x8 QM,
            // ... 略 ...
        }
    },
    {
        { // 亮度块 QM level 2
            // 4x4 QM,
            // 8x8 QM,
            // ... 略 12 “列” ...
        },
        // ... 略 1 行 ...
    },
    // ... 略 13 排 ...
}
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：QIndex、量化步长与量化矩阵之间的关系</button>
            <div class="coll-content">
                <p>以下是得到 QIndex 后的一些相关 AV1 代码，语法元素见 <a href="https://aomediacodec.github.io/av1-spec/#quantization-params-syntax">AV1 Spec</a>。</p>
                <pre><code class="text-smaller language-cpp">
quantization_params( ) {
    base_q_idx // 获取 QIndex
    DeltaQYDc = read_delta_q( ) // 获取 QIndex 偏移

    // 获取色度平面的 DC、AC，Y、Cb、Cr QIndex 偏移
    if (NumPlanes > 1) {
        if (separate_uv_delta_q) { diff_uv_delta }
        else { diff_uv_delta = 0 }

        DeltaQUDc = read_delta_q( )
        DeltaQUAc = read_delta_q( )

        if (diff_uv_delta) {
            DeltaQVDc = read_delta_q( )
            DeltaQVAc = read_delta_q( )
        }
        else {
            DeltaQVDc = DeltaQUDc
            DeltaQVAc = DeltaQUAc
        }
    }
    else { // 无色度平面
        DeltaQUDc = 0
        DeltaQUAc = 0
        DeltaQVDc = 0
        DeltaQVAc = 0
    }

    using_qmatrix // 是否调用量化矩阵（3D 序列，见上方）

    if (using_qmatrix) {
        qm_y // 选取亮度平面量化矩阵
        qm_u // 选取 Cb 平面量化矩阵
        if (!separate_uv_delta_q) { qm_v = qm_u } // 选取 Cr 平面量化矩阵
        else { qm_v }
    } // 关闭量化矩阵则跳过量化
}

read_delta_q( ) { // 获取 QIndex，未设置则返回 0
    delta_coded
    if (delta_coded) { delta_q }
    else { delta_q = 0 }
    return delta_q
}
                </code></pre>
                <p>将量化步长索引 QIndex 转给 <code>aom_qmatrix</code> 函数，以获取量化矩阵。语法元素见 <a href="https://github.com/mozilla/aom/blob/46b7bb243b39929c02d6decc1bdb2e39e11540d6/av1/common/quant_common.h">github.com/mozilla</a>。</p>
                <pre><code class="language-cpp">
#if CONFIG_AOM_QM
// 计算出量化矩阵范围限制（first，last 对应参数 --qm-min，--qm-max）
static INLINE int aom_get_qmlevel(int qindex, int first, int last) {
    // 将 QIndex 映射到 first~last 范围，再进一步映射到 QINDEX_RANGE 的范围，得到可用的量化矩阵分级
    int qmlevel = (qindex * (last + 1 - first) + QINDEX_RANGE / 2) / QINDEX_RANGE;
    // 限制量化强度分级到编码器支持的最大范围
    qmlevel = AOMMIN(qmlevel + first, NUM_QM_LEVELS - 1);
    return qmlevel;
}
// 定义量化矩阵值初始化函数
void aom_qm_init(struct AV1Common *cm);

// 获取逆量化 _iqmatrix 和量化 _qmatrix 矩阵。参数决定矩阵选取：
// cm：上下文指针
// comp：颜色分量
// tx_size：变换块大小
// is_intra：区分帧内、帧间编码帧
qm_val_t *aom_iqmatrix(struct AV1Common *cm, int qindex, int comp, TX_SIZE tx_size, int is_intra);
qm_val_t *aom_qmatrix(struct AV1Common *cm, int qindex, int comp, TX_SIZE tx_size, int is_intra);
#endif
                </code></pre>
                <p><i>获取量化、逆量化矩阵</i>：将量化步长索引映射到全局量化矩阵——<code>gqmatrix</code> 序列。语法元素见 <a href="https://github.com/mozilla/aom/blob/46b7bb243b39929c02d6decc1bdb2e39e11540d6/av1/common/quant_common.c">github.com/mozilla</a>。</p>
                <pre><code class="language-cpp">
#if CONFIG_AOM_QM
qm_val_t *aom_iqmatrix(AV1_COMMON *cm, int qmlevel, int is_chroma, TX_SIZE tx_size, int is_intra) {
    // 根据量化强度、平面类型区分、帧内帧间区分给出逆量化矩阵
    return &cm->giqmatrix[qmlevel][!!is_chroma][!!is_intra][tx_size][0];
}
qm_val_t *aom_qmatrix(AV1_COMMON *cm, int qmlevel, int is_chroma, TX_SIZE tx_size, int is_intra) {
    // 根据量化强度、平面类型区分、帧内帧间区分给出量化矩阵
    return &cm->gqmatrix[qmlevel][!!is_chroma][!!is_intra][tx_size][0];
}

// ... 省略不相关内容 ...
#endif
                </code></pre>
                <p>使用 <code>giqmatrix</code>、<code>gqmatrix</code> 的原因不明，推测是为了节约内存。</p>
                <!--<p>由于完整量化矩阵的序列特别大，所以有对其进行省略的量化矩阵变量，定义如下（没能找到赋值代码）。语法元素见 <a href="https://github.com/mozilla/aom/blob/46b7bb243b39929c02d6decc1bdb2e39e11540d6/av1/common/onyxc_int.h">github.com/mozilla</a>：</p>
                <pre><code class="language-cpp">
#if CONFIG_AOM_QM
    // 全局逆量化、量化矩阵，主要由编码器支持的矩阵分级数量，颜色分量数量（亮度、色度），未知值，以及变换块类型总数决定
    qm_val_t *giqmatrix[NUM_QM_LEVELS][2][2][TX_SIZES_ALL];
    qm_val_t *gqmatrix[NUM_QM_LEVELS][2][2][TX_SIZES_ALL];

    // 局部（每帧的）亮度、色度逆量化矩阵，主要由分瓣数量，颜色分量数量，变换块类型总数决定
    qm_val_t *y_iqmatrix[MAX_SEGMENTS][2][TX_SIZES_ALL];
    qm_val_t *uv_iqmatrix[MAX_SEGMENTS][2][TX_SIZES_ALL];

    // 局部（每帧的）亮度、色度量化矩阵
    qm_val_t *y_qmatrix[MAX_SEGMENTS][2][TX_SIZES_ALL];
    qm_val_t *uv_qmatrix[MAX_SEGMENTS][2][TX_SIZES_ALL];
    
    // ... 省略不相关内容 ...
#endif
                </code></pre>-->
                <p>全局和局部量化矩阵会进一步赋值到分瓣量化矩阵 <code>seg_iqmatrix</code>、<code>seg_qmatrix</code>，此处省略。</p>
                <!--<p>全局和局部量化矩阵赋值到分瓣的代码如下。语法元素见 <a href="https://github.com/mozilla/aom/blob/46b7bb243b39929c02d6decc1bdb2e39e11540d6/av1/encoder/av1_quantize.c">github.com/mozilla</a>：</p>
            <pre><code class="text-smaller">
#if CONFIG_AOM_QM
    memcpy(&xd->plane[0].seg_qmatrix[segment_id], cm->gqmatrix[qmlevel][0], sizeof(cm->gqmatrix[qmlevel][0]));
    memcpy(&xd->plane[0].seg_iqmatrix[segment_id], cm->giqmatrix[qmlevel][0], sizeof(cm->giqmatrix[qmlevel][0]));
#endif
                </code></pre>-->
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：量化——逆量化</button>
            <div class="coll-content">
                <h3>量化——逆量化</h3>
                <p>在默认方法中，VP9 与 AV1 通过将整帧乘以一个固定强度实现；AV1 的逆量化值由多个因素推导。从量化结果像素 <span class="text-blue-math">\( q[i] \)</span> 开始的过程为：</p>
                <span class="text-blue-math">\[ \text{dq}\left(i\right) = \frac{q[i] * Q_{\text{Step}}}{\text{deNorm}} \]</span>
                <table class="align-items-center table-center mb-3">
                    <thead>
                        <tr>
                            <th>deNorm</th>
                            <th>变换块面积</th>
                            <th>宽高举例</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="px-3 t-invert-dark">1</td>
                            <td class="px-3">&lt; 512 采样点</td>
                            <td class="px-3">16x16</td>
                        </tr>
                        <tr class="border-top">
                            <td class="px-3 t-invert-light">2</td>
                            <td class="px-3">512~1024 采样点</td>
                            <td class="px-3">32x32、16x64 等</td>
                        </tr>
                        <tr class="border-top">
                            <td class="px-3 t-invert-light">4</td>
                            <td class="px-3">&gt; 1024 采样点</td>
                            <td class="px-3">128x128</td>
                        </tr>
                    </tbody>
                </table>
                <p class="text-gray-side mt-0 align-items-center">表：deNorm 的值为 1、2 或 4，代表变换块大小不同时的强度变化。见 <a href="https://wikidocs.net/71452">Wikidocs</a></p>
                <pre><code class="text-smaller language-cpp">
for(i=0; i &lt; th; i++) { // 遍历分块宽，高
    for(j=0; j &lt; tw; j++) {
        // 获取量化值
        q = (i==0 && j==0) ? get_dc_quant(plane) : get_ac_quant(plane);

        // 使用量化矩阵，使用 IDTX 之前的变换（enum 0~8），且分瓣量化矩阵级别小于 15
        if (using_qmatrix==1 && PlaneTxType&lt;IDTX && SegQMLevel[plane][segment_id] &lt; 15) {
            level = SegQMLevel[plane][segment_id]
            offset = Qm_Offset[txSz] + i * tw + j // 量化矩阵根据多个参数偏移，因为各种块大小的量化值都在同一个序列里
            q2 = Round2(q * Quantizer_Marix[level][offset], 5); // 量化矩阵索引号
        }
        else { q2 = q; }

        dq = Quant[i*tw+j] * q2; // 通过矩阵乘法得到逆量化强度
        sign = dq &lt; 0 ? -1 : 1; // 获取强度的正负
        dq2 = sign * (Abs(dq) & 0xFFFFFF) / dqDenom
        Dequant[i][j] = Clip3(-(1 &lt;&lt; (7+BD)), (1&lt;&lt;(7+BD))-1, dq2);
    }
}
                </code></pre></div>

            <!--<h4>（1/1）量化矩阵分级 Quantization matrix level / qmlevel</h4>
            <p>将大量量化值简化为一些级别，以便相关算法筛选。见 <a href="https://github.com/mozilla/aom/blob/46b7bb243b39929c02d6decc1bdb2e39e11540d6/av1/common/quant_common.h"><code>aom_get_qmlevel()</code></a></p>-->
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/1）QLookup 表</button>
            <div class="coll-content">
                <h4>（1/1）QLookup 表</h4>
                <p>AV1 中的默认量化与逆量化方法的强度。范围为 0~255，由 <code class="code-bold">qp_to_qindex</code> 映射出 0~63。逆量化结果由块中像素值乘进 QLookup 表中对应的数，再将结果的二进制右移一位（÷2）实现。这些值会由偏移值进一步调整：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/rate-control/quantization-qp-qindex.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：QLookup 表对应的 0~63 QP 范围。与 0~255 的 QIndex 范围的曲线变化极小</p>
                </div>
                <ul class="text-smaller">
                    <li>由于 12 bit（4096 色深）占据图表高度太多，所以 8~10bit 下的量化强度增长不太明显</li>
                    <li>由于每种视频编码映射的量化强度不同，所以该图表无法简单地与其它编码比较</li>
                    <li>QP 映射到 QIndex 时有 QP 偏移，以及 QIndex 偏移两类偏移值</li>
                </ul>
                <pre><code class="text-smaller language-cpp">
Dc_Qlookup[ 3 ][ 256 ] = { // 解码，取值位深：8~12 → 0~2，索引号：0~255
    { // 强度 4~1336，最低强度 4 可能通 x264/5 的“--qp 4”（最低有损量化）
        4, 8, 8, 9, 10, 11, 12, 12, 13, 14, 15, 16,
        17, 18, 19, 19, 20, 21, 22, 23, 24, 25, 26, 26,
        27, 28, 29, 30, 31, 32, 32, 33, 34, 35, 36, 37,
        38, 38, 39, 40, 41, 42, 43, 43, 44, 45, 46, 47,
        48, 48, 49, 50, 51, 52, 53, 53, 54, 55, 56, 57,
        57, 58, 59, 60, 61, 62, 62, 63, 64, 65, 66, 66,
        67, 68, 69, 70, 70, 71, 72, 73, 74, 74, 75, 76,
        77, 78, 78, 79, 80, 81, 81, 82, 83, 84, 85, 85,
        87, 88, 90, 92, 93, 95, 96, 98, 99, 101, 102, 104,
        105, 107, 108, 110, 111, 113, 114, 116, 117, 118, 120, 121,
        123, 125, 127, 129, 131, 134, 136, 138, 140, 142, 144, 146,
        148, 150, 152, 154, 156, 158, 161, 164, 166, 169, 172, 174,
        177, 180, 182, 185, 187, 190, 192, 195, 199, 202, 205, 208,
        211, 214, 217, 220, 223, 226, 230, 233, 237, 240, 243, 247,
        250, 253, 257, 261, 265, 269, 272, 276, 280, 284, 288, 292,
        296, 300, 304, 309, 313, 317, 322, 326, 330, 335, 340, 344,
        349, 354, 359, 364, 369, 374, 379, 384, 389, 395, 400, 406,
        411, 417, 423, 429, 435, 441, 447, 454, 461, 467, 475, 482,
        489, 497, 505, 513, 522, 530, 539, 549, 559, 569, 579, 590,
        602, 614, 626, 640, 654, 668, 684, 700, 717, 736, 755, 775,
        796, 819, 843, 869, 896, 925, 955, 988, 1022, 1058, 1098, 1139,
        1184, 1232, 1282, 1336
    },
    { // 强度 4~5347
        4, 9, 10, 13, 15, 17, 20, 22, 25, 28, 31, 34,
        37, 40, 43, 47, 50, 53, 57, 60, 64, 68, 71, 75,
        78, 82, 86, 90, 93, 97, 101, 105, 109, 113, 116, 120,
        124, 128, 132, 136, 140, 143, 147, 151, 155, 159, 163, 166,
        170, 174, 178, 182, 185, 189, 193, 197, 200, 204, 208, 212,
        215, 219, 223, 226, 230, 233, 237, 241, 244, 248, 251, 255,
        259, 262, 266, 269, 273, 276, 280, 283, 287, 290, 293, 297,
        300, 304, 307, 310, 314, 317, 321, 324, 327, 331, 334, 337,
        343, 350, 356, 362, 369, 375, 381, 387, 394, 400, 406, 412,
        418, 424, 430, 436, 442, 448, 454, 460, 466, 472, 478, 484,
        490, 499, 507, 516, 525, 533, 542, 550, 559, 567, 576, 584,
        592, 601, 609, 617, 625, 634, 644, 655, 666, 676, 687, 698,
        708, 718, 729, 739, 749, 759, 770, 782, 795, 807, 819, 831,
        844, 856, 868, 880, 891, 906, 920, 933, 947, 961, 975, 988,
        1001, 1015, 1030, 1045, 1061, 1076, 1090, 1105, 1120, 1137, 1153, 1170,
        1186, 1202, 1218, 1236, 1253, 1271, 1288, 1306, 1323, 1342, 1361, 1379,
        1398, 1416, 1436, 1456, 1476, 1496, 1516, 1537, 1559, 1580, 1601, 1624,
        1647, 1670, 1692, 1717, 1741, 1766, 1791, 1817, 1844, 1871, 1900, 1929,
        1958, 1990, 2021, 2054, 2088, 2123, 2159, 2197, 2236, 2276, 2319, 2363,
        2410, 2458, 2508, 2561, 2616, 2675, 2737, 2802, 2871, 2944, 3020, 3102,
        3188, 3280, 3375, 3478, 3586, 3702, 3823, 3953, 4089, 4236, 4394, 4559,
        4737, 4929, 5130, 5347
    },
    { // 强度 4~21837
        4, 12, 18, 25, 33, 41, 50, 60,
        70, 80, 91, 103, 115, 127, 140, 153,
        166, 180, 194, 208, 222, 237, 251, 266,
        281, 296, 312, 327, 343, 358, 374, 390,
        405, 421, 437, 453, 469, 484, 500, 516,
        532, 548, 564, 580, 596, 611, 627, 643,
        659, 674, 690, 706, 721, 737, 752, 768,
        783, 798, 814, 829, 844, 859, 874, 889,
        904, 919, 934, 949, 964, 978, 993, 1008,
        1022, 1037, 1051, 1065, 1080, 1094, 1108, 1122,
        1136, 1151, 1165, 1179, 1192, 1206, 1220, 1234,
        1248, 1261, 1275, 1288, 1302, 1315, 1329, 1342,
        1368, 1393, 1419, 1444, 1469, 1494, 1519, 1544,
        1569, 1594, 1618, 1643, 1668, 1692, 1717, 1741,
        1765, 1789, 1814, 1838, 1862, 1885, 1909, 1933,
        1957, 1992, 2027, 2061, 2096, 2130, 2165, 2199,
        2233, 2267, 2300, 2334, 2367, 2400, 2434, 2467,
        2499, 2532, 2575, 2618, 2661, 2704, 2746, 2788,
        2830, 2872, 2913, 2954, 2995, 3036, 3076, 3127,
        3177, 3226, 3275, 3324, 3373, 3421, 3469, 3517,
        3565, 3621, 3677, 3733, 3788, 3843, 3897, 3951,
        4005, 4058, 4119, 4181, 4241, 4301, 4361, 4420,
        4479, 4546, 4612, 4677, 4742, 4807, 4871, 4942,
        5013, 5083, 5153, 5222, 5291, 5367, 5442, 5517,
        5591, 5665, 5745, 5825, 5905, 5984, 6063, 6149,
        6234, 6319, 6404, 6495, 6587, 6678, 6769, 6867,
        6966, 7064, 7163, 7269, 7376, 7483, 7599, 7715,
        7832, 7958, 8085, 8214, 8352, 8492, 8635, 8788,
        8945, 9104, 9275, 9450, 9639, 9832, 10031, 10245,
        10465, 10702, 10946, 11210, 11482, 11776, 12081, 12409,
        12750, 13118, 13501, 13913, 14343, 14807, 15290, 15812,
        16356, 16943, 17575, 18237, 18949, 19718, 20521, 21387
    }
}

Ac_Qlookup[ 3 ][ 256 ] = { // 解码，取值位深：8~12 → 0~2，强度：0~255
    { // 强度 4~1828
        4, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
        19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30,
        31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42,
        43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54,
        55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66,
        67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78,
        79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90,
        91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102,
        104, 106, 108, 110, 112, 114, 116, 118, 120, 122, 124, 126,
        128, 130, 132, 134, 136, 138, 140, 142, 144, 146, 148, 150,
        152, 155, 158, 161, 164, 167, 170, 173, 176, 179, 182, 185,
        188, 191, 194, 197, 200, 203, 207, 211, 215, 219, 223, 227,
        231, 235, 239, 243, 247, 251, 255, 260, 265, 270, 275, 280,
        285, 290, 295, 300, 305, 311, 317, 323, 329, 335, 341, 347,
        353, 359, 366, 373, 380, 387, 394, 401, 408, 416, 424, 432,
        440, 448, 456, 465, 474, 483, 492, 501, 510, 520, 530, 540,
        550, 560, 571, 582, 593, 604, 615, 627, 639, 651, 663, 676,
        689, 702, 715, 729, 743, 757, 771, 786, 801, 816, 832, 848,
        864, 881, 898, 915, 933, 951, 969, 988, 1007, 1026, 1046, 1066,
        1087, 1108, 1129, 1151, 1173, 1196, 1219, 1243, 1267, 1292, 1317, 1343,
        1369, 1396, 1423, 1451, 1479, 1508, 1537, 1567, 1597, 1628, 1660, 1692,
        1725, 1759, 1793, 1828
    },
    { // 强度 4~7312
        4, 9, 11, 13, 16, 18, 21, 24, 27, 30, 33, 37,
        40, 44, 48, 51, 55, 59, 63, 67, 71, 75, 79, 83,
        88, 92, 96, 100, 105, 109, 114, 118, 122, 127, 131, 136,
        140, 145, 149, 154, 158, 163, 168, 172, 177, 181, 186, 190,
        195, 199, 204, 208, 213, 217, 222, 226, 231, 235, 240, 244,
        249, 253, 258, 262, 267, 271, 275, 280, 284, 289, 293, 297,
        302, 306, 311, 315, 319, 324, 328, 332, 337, 341, 345, 349,
        354, 358, 362, 367, 371, 375, 379, 384, 388, 392, 396, 401,
        409, 417, 425, 433, 441, 449, 458, 466, 474, 482, 490, 498,
        506, 514, 523, 531, 539, 547, 555, 563, 571, 579, 588, 596,
        604, 616, 628, 640, 652, 664, 676, 688, 700, 713, 725, 737,
        749, 761, 773, 785, 797, 809, 825, 841, 857, 873, 889, 905,
        922, 938, 954, 970, 986, 1002, 1018, 1038, 1058, 1078, 1098, 1118,
        1138, 1158, 1178, 1198, 1218, 1242, 1266, 1290, 1314, 1338, 1362, 1386,
        1411, 1435, 1463, 1491, 1519, 1547, 1575, 1603, 1631, 1663, 1695, 1727,
        1759, 1791, 1823, 1859, 1895, 1931, 1967, 2003, 2039, 2079, 2119, 2159,
        2199, 2239, 2283, 2327, 2371, 2415, 2459, 2507, 2555, 2603, 2651, 2703,
        2755, 2807, 2859, 2915, 2971, 3027, 3083, 3143, 3203, 3263, 3327, 3391,
        3455, 3523, 3591, 3659, 3731, 3803, 3876, 3952, 4028, 4104, 4184, 4264,
        4348, 4432, 4516, 4604, 4692, 4784, 4876, 4972, 5068, 5168, 5268, 5372,
        5476, 5584, 5692, 5804, 5916, 6032, 6148, 6268, 6388, 6512, 6640, 6768,
        6900, 7036, 7172, 7312
    },
    { // 强度 4~29247
        4, 13, 19, 27, 35, 44, 54, 64,
        75, 87, 99, 112, 126, 139, 154, 168,
        183, 199, 214, 230, 247, 263, 280, 297,
        314, 331, 349, 366, 384, 402, 420, 438,
        456, 475, 493, 511, 530, 548, 567, 586,
        604, 623, 642, 660, 679, 698, 716, 735,
        753, 772, 791, 809, 828, 846, 865, 884,
        902, 920, 939, 957, 976, 994, 1012, 1030,
        1049, 1067, 1085, 1103, 1121, 1139, 1157, 1175,
        1193, 1211, 1229, 1246, 1264, 1282, 1299, 1317,
        1335, 1352, 1370, 1387, 1405, 1422, 1440, 1457,
        1474, 1491, 1509, 1526, 1543, 1560, 1577, 1595,
        1627, 1660, 1693, 1725, 1758, 1791, 1824, 1856,
        1889, 1922, 1954, 1987, 2020, 2052, 2085, 2118,
        2150, 2183, 2216, 2248, 2281, 2313, 2346, 2378,
        2411, 2459, 2508, 2556, 2605, 2653, 2701, 2750,
        2798, 2847, 2895, 2943, 2992, 3040, 3088, 3137,
        3185, 3234, 3298, 3362, 3426, 3491, 3555, 3619,
        3684, 3748, 3812, 3876, 3941, 4005, 4069, 4149,
        4230, 4310, 4390, 4470, 4550, 4631, 4711, 4791,
        4871, 4967, 5064, 5160, 5256, 5352, 5448, 5544,
        5641, 5737, 5849, 5961, 6073, 6185, 6297, 6410,
        6522, 6650, 6778, 6906, 7034, 7162, 7290, 7435,
        7579, 7723, 7867, 8011, 8155, 8315, 8475, 8635,
        8795, 8956, 9132, 9308, 9484, 9660, 9836, 10028,
        10220, 10412, 10604, 10812, 11020, 11228, 11437, 11661,
        11885, 12109, 12333, 12573, 12813, 13053, 13309, 13565,
        13821, 14093, 14365, 14637, 14925, 15213, 15502, 15806,
        16110, 16414, 16734, 17054, 17390, 17726, 18062, 18414,
        18766, 19134, 19502, 19886, 20270, 20670, 21070, 21486,
        21902, 22334, 22766, 23214, 23662, 24126, 24590, 25070,
        25551, 26047, 26559, 27071, 27599, 28143, 28687, 29247
    }
}

static const int qp_to_qindex[] = { // 索引号
    0,   4,   8,   12,  16,  20,  24,  28,  32,  36,  40,  44,  48,
    52,  56,  60,  64,  68,  72,  76,  80,  84,  88,  92,  96,  100,
    104, 108, 112, 116, 120, 124, 128, 132, 136, 140, 144, 148, 152,
    156, 160, 164, 168, 172, 176, 180, 184, 188, 192, 196, 200, 204,
    208, 212, 216, 220, 224, 228, 232, 236, 240, 244, 249, 255,
};
                </code></pre>
                <p>见 <a href="https://aomediacodec.github.io/av1-spec/#general-13">AV1 Spec - Dequantization</a>。</p>
            </div>
            
            <!--<button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：量化——粗分块偏移</button>
            <div class="coll-content">
                <h3>量化——粗分块偏移</h3>
                <p>判断不同位深的逐帧量化值后，AV1 支持检查和应用 Superblock 量化值偏移，以及分瓣 segment 量化值偏移：
                    <span class="text-blue-math">\[ \text{QP}_{\text{CB}} = \text{Clip3}\left(
                        \text{QP}_{\text{frame}} +
                        \Delta \text{QP}_{\text{SB}} +
                        \Delta \text{QP}_{\text{segment}} +
                        \text{,} \hspace{2mm} 1 \text{,} \hspace{2mm} 255 \right)
                    \]</span>
                    以及根据变换块类型（AC/DC）不同，色彩空间平面不同的偏移值：
                </p>
                <table class="align-items-center table-center mb-3">
                    <thead>
                        <tr>
                            <th class="px-1">plane\Tx</th>
                            <th class="px-1">AC</th>
                            <th class="px-1">DC</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="px-1 t-invert-dark">Y</td>
                            <td class="px-1"><span class="text-blue-math">\(\text{QP}_{\text{base}}\)</span></td>
                            <td class="px-1"><span class="text-blue-math">\(\text{QP}_{\text{base}} + \Delta \text{QP}_{\text{Y,DC}} \)</span></td>
                        </tr>
                        <tr class="border-top">
                            <td class="px-1 t-invert-light">U</td>
                            <td class="px-1"><span class="text-blue-math">\(\text{QP}_{\text{base}} + \Delta \text{QP}_{\text{U,AC}}\)</span></td>
                            <td class="px-1"><span class="text-blue-math">\(\text{QP}_{\text{base}} + \Delta \text{QP}_{\text{U,DC}} \)</span></td>
                        </tr>
                        <tr class="border-top">
                            <td class="px-1 t-invert-light">V</td>
                            <td class="px-1"><span class="text-blue-math">\(\text{QP}_{\text{base}} + \Delta \text{QP}_{\text{V,AC}}\)</span></td>
                            <td class="px-1"><span class="text-blue-math">\(\text{QP}_{\text{base}} + \Delta \text{QP}_{\text{V,DC}} \)</span></td>
                        </tr>
                    </tbody>
                </table>
                <p class="text-gray-side mt-0 align-items-center">表：判断偏移值 <span class="text-blue-math">\(\Delta \text{QP}\)</span> 的因素</p>
            </div>-->

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：量化——编码优化</button>
            <div class="coll-content">
                <h3>量化——编码优化</h3>
                <p>例如，量化一个像素的计算为：
                    <span class="text-blue-math">\[ Q_{\text{Coefficient}} = \frac{T_{\text{Coefficient}}}{Q_{\text{Step}}} \]</span>
                    硬件编解码器不擅长除法，所以添加一道 16 次幂的乘法，以及右移 16 位（÷2^16）两个步骤：
                    <span class="text-blue-math">\[ Q_{\text{Coefficient}} = \left( \frac{T_{\text{Coefficient}}}{ Q_{\text{Step}} } \cdot 2^{16} \right) &gt;&gt; 16 \]</span>
                    然后将除法部分“预渲染”为缩放值：
                    <span class="text-blue-math">\[ A = \frac{2^{16}}{ Q_{\text{Step}} } = Q_{\text{Lookup}\left[m\right]\left[n\right]} \]</span>
                    从而简化量化计算为：
                    <span class="text-blue-math">\[ Q_{\text{Coefficient}} = \left( A \cdot T_{\text{Coefficient}} \right) &gt;&gt; 16 \]</span>
                    而上述 QStep 为完整 QLookup 表（1~255）中，索引号所指的值。定位索引号后，从 QLookup 中选出量化步长 QStep。见：<a href="https://wikidocs.net/71453">Wikidocs - AV1 Quantization</a>
                </p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：分瓣级别与 av1_get_qindex 函数</button>
            <div class="coll-content">
                <p>0~2 为低级，3~14 为中级，15 及以上为高级。低中级的平面的熵编码按倒序扫描顺序编码，高级平面按顺序扫描顺序编码。熵编码时与 x265 一样使用零阶指数哥伦布编码（见 x265 教程）转换到二进制。</p>
                <pre><code class="text-smaller language-cpp">
// 参数：分瓣级别（可选），分瓣 ID，基础量化强度索引号（见上表）
int av1_get_qindex(const struct segmentation *seg, int segment_id, int base_qindex) {
    if (segfeature_active(seg, segment_id, SEG_LVL_ALT_Q)) { // 分瓣模式开
        const int data = get_segdata(seg, segment_id, SEG_LVL_ALT_Q); // 分瓣中的量化值偏移设定
        const int seg_qindex = seg->abs_delta == SEGMENT_ABSDATA ? data : base_qindex + data; // 直接使用绝对值或计算偏移结果
        return clamp(seg_qindex, 0, MAXQ); // 限制偏移强度到合理范围并返回
    }
    else { return base_qindex; } // 无偏移 
}
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：量化——SVT-AV1 精确到 SB 的 QP 调制</button>
            <div class="coll-content">
                <h3>量化——SVT-AV1 精确到 SB 的 QP 调制</h3>
                <p>调制算法基于时域依赖性模型 TPL。TPL 中，参数 beta 代表当前 SB 的传播参数 Propagation factor（beta 值越高则 SB 被参考的时域被依赖性更强，应该降低 QP）。决定最终 QP 的算法为：</p>
                <p>处理帧内编码帧、或 <span class="text-blue-math">\( \text{beta} &lt; 1 \)</span> 时：</p>
                <span class="text-blue-math">\[ \text{QP}'= \frac{\text{QP}}{\sqrt{\text{beta}}} \]</span>
                <p>否则：</p>
                <span class="text-blue-math">\[ \text{QP}'= \frac{\text{QP}}{\sqrt{\sqrt{\text{beta}}}} \]</span>
            </div>

            <h3>量化——方差自适应量化 VAQ</h3>
            <p>基本原理已在 x264 教程中说明，此处不再赘述。AV1 的 VAQ 主要作用于每帧的 8 个分瓣 segments 中，其次是每个细分块中，以量化偏移值表示。在找全一定数量的粗分块后，编码参数（量化强度、环路滤镜强度、被参考帧索引号、跳过残差开关）相似，见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/tree/master/Docs/Appendix-Variance-Based-Adaptive-Quantization.md">SVT-AV1 Readme</a></p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/3）直方图</button>
            <div class="coll-content">
                <h4>（1/3）直方图</h4>
                <p>一种外观类似于条形图的数据分类图表。</p>
                <ul>
                    <li><b>分箱 Binning</b>
                        <ul>
                            <li>渔获中，根据鱼的大小分为高、中、低端与不合格，装进分类设施末端的一排桶中</li>
                            <li>造芯时，根据芯片体质分为高、中、低端与不合格，装进分类设施末端的一排桶中</li>
                            <li>图像内，根据像素亮度分为亮，比较亮，不太亮，不亮与黑，并为对应的变量加 1</li>
                        </ul>
                    </li>
                    <li><b>箱宽 Bin width</b>
                        <ul>
                            <li>如果总宽度不变，则桶的数量越多，每个桶就越窄</li>
                            <li>桶越多，每个桶里的分件就越少</li>
                        </ul>
                    </li>
                    <li><b>箱边缘 Bin edge</b>
                        <ul>
                            <li>当前分箱在坐标系中的横向位置，由分箱的数量和箱宽得到</li>
                            <li>如果当前分箱位于末尾，则等于整个直方图的总宽度</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/3）分瓣直方图自适应量化 Segment-based histogram VAQ</button>
            <div class="coll-content">
                <h4>（2/3）分瓣直方图自适应量化 Segment-based histogram VAQ</h4>
                <p>整帧的方差 <span class="text-blue-math">\(\sigma\)</span> 由 8x8 块为基本单位得到：</p>
                <span class="text-blue-math">\[
                    \sigma_i = \frac{1}{64} \sum_{j=0}^{63} \sigma_{ij} \hspace{4mm} \text{for} \hspace{2mm} i=1 \cdots K
                \]</span>
                <p>其中 <span class="text-blue-math">\(\sigma_{ij}\)</span> 代表 SB 范围内某个 8x8 分块的方差（共 64 个），<span class="text-blue-math">\(K\)</span> 代表当前帧的所有特大块 SB。以此类推得到所有帧内 SB 的方差。</p>
                <p>这些方差中可以推导出的对数最大值 <span class="text-blue-math">\(\sigma_{\text{max}}\)</span>，最小值 <span class="text-blue-math">\(\sigma_{\text{min}}\)</span> 和平均值 <span class="text-blue-math">\(\sigma_{\text{avg}}\)</span>。这些值会被用来计算方差直方图。直方图的箱宽取决于分瓣数量以及全图对比度的最大差异：</p>
                <span class="text-blue-math">\[
                    w = \frac{\sigma_{max}-\sigma_{min}}{N_{\text{segments}}}
                \]</span>

                <p><span class="text-blue-math">\(N\)</span> 代表分瓣的数量和当前序号。</p>
                <p>箱边缘取决于分瓣数量与箱宽，此处额外有最小差异的微调：</p>
                <span class="text-blue-math">\[
                    e_i = \sigma_{min} + i \cdot w \hspace{4mm} \text{for} \hspace{2mm} i = 1 \cdots N_{\text{segments}}
                \]</span>

                <p>得到生成直方图的关键参数后，每个分瓣的量化值偏移就可以归纳为每个直方柱箱的高度，以及在此基础上的一些微调了：</p>
                <span class="text-blue-math">\[
                    \Delta q_{i + 1}=\frac{(e_i + e_{i + 1})}{2} - \sigma_{avg} \hspace{4mm} \text{for} \hspace{2mm} i = 0 \cdots N-1
                \]</span>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/3）SVT-AV1 帧内方差自适应量化增强 Variance boost（VB）</button>
            <div class="coll-content">
                <h4>（3/3）SVT-AV1 帧内方差自适应量化增强</h4>
                <p>一种调整方差计算结果强度的方法，称为 Variance boost（VB）。下例为 2 个大小相似的岩石纹理图。纹理逐渐淡化为纯白色、米色和黑色。从中出现了模糊、高频细节丢失、以及显露的变换块基础图案。算法部分详见：<a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/tree/master/Docs/Appendix-Variance-Boost.md">SVT-AV1 Docs</a>：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/rate-control/svt-av1/vb_rock_novb_qp50_22848.webp" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图 1：关 VB、QP 50 时得到 22,848 字节的帧</p>
                    <img loading="lazy" src="files/rate-control/svt-av1/vb_rock_novb_qp50_22848.webp" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图 2：开 VB、QP 53 时得到 22,352 字节的帧</p>
                </div>

                <p>尽管图 1 左侧画质很高，但随着颜色朝右减淡，QP 50 的例子中出现了越来越多的失真。而尽管 QP 53 开启 VB 例子中，图像左侧的失真略高，但随着颜色朝右减淡，可以看到细节保留的效果变得远好于 QP 50，这是由于 QP 50 图像中能量分布的不均匀所致。</p>
                <p>注：图片为了适配网页浏览而被转换为 PNG，与原本的 AVIF 格式略有区别。</p>

                <div class="align-items-center">
                    <img loading="lazy" src="files/rate-control/svt-av1/vb_rock_strength_s1_qp55_14767.webp" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图 1：VB 强度 1、QP 55 时得到 14,767 字节的帧</p>

                    <img loading="lazy" src="files/rate-control/svt-av1/vb_rock_strength_s2_qp55_16403.webp" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图 2：VB 强度 2、QP 55 时得到 16,403 字节的帧</p>

                    <img loading="lazy" src="files/rate-control/svt-av1/vb_rock_strength_s3_qp55_16826.webp" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图 3：VB 强度 3、QP 55 时得到 16,826 字节的帧</p>

                    <img loading="lazy" src="files/rate-control/svt-av1/vb_rock_strength_s4_qp55_21351.webp" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图 4：VB 强度 4、QP 55 时得到 16,21,351 字节的帧</p>
                </div>
            </div>

            <h2 id="h2-9">熵编码</h2>
            <p>基本原理已在 x265 教程中说明，此处不再赘述。AV1 的熵编码使用了两种算法：CABAC 用于量化后的数据，另一种客制化的整数算数编码用于语法元素。</p>
            <ul>
                <li>多符号 Multi-symbol 代表编解码器中的某些语法元素中有多个值的编码项目</li>
                <li>整数算数编码代表算数编码常用的出字概率区间 0~1 被乘以 32768（15 bit）放大，以摆脱对浮点计算的依赖</li>
            </ul>
        

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：熵编码——帧分瓣平面级别</button>
            <div class="coll-content">
                <h3>熵编码——帧分瓣平面级别</h3>
                <p>AV1 中，代表不同范围的系子（量化结果）幅度：0~2 为低，3~14 为中，15 及以上为高。低中级平面的熵编码按倒序扫描顺序编码，高级平面按顺序扫描顺序编码。熵编码时与 x265 一样使用零阶指数哥伦布编码（见 x265 教程）转换到二进制。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：CABAC 编码</button>
            <div class="coll-content">
                <h3>熵编码——CABAC 编码</h3>
                
                <h4>（1/2）开/闭区间 Open/Closed interval</h4>
                <p>开区间由 <span class="text-blue-math">(a,b)</span> 表示，闭区间由 <span class="text-blue-math">[a,b]</span> 表示。开区间的 a 与 b 是边界，只能从两者之间取值；闭区间的 a 与 b 是边界，也是可取的值：</p>
                <ul>
                    <li><span class="text-blue-math">\( \left[1, 5\right] = \{1, 2, 3, 4, 5\} \)</span></li>
                    <li><span class="text-blue-math">\( \left(1, 5\right) = \{2, 3, 4\} \)</span></li>
                    <li><span class="text-blue-math">\( \left[1, 5\right) = \{1, 2, 3, 4\}\)</span></li>
                    <li><span class="text-blue-math">\( \left(1, 5\right] = \{2, 3, 4, 5\}\)</span></li>
                </ul>

                <h4>（2/2）编码过程</h4>
                <p>注意本节的计算主要用于展示过程，所以计算和图像准确度会与实际情况有误差。本计算过程假设有以下出字概率：</p>
                <ul>
                    <li><span class="text-blue-math">\( x=0 \text{:} \hspace{2mm} P\left(0\right)=0.7 \)</span></li>
                    <li><span class="text-blue-math">\( x=1 \text{:} \hspace{2mm} P\left(1\right)=0.3 \)</span></li>
                </ul>
                <p>写作：</p>
                <ul>
                    <li><span class="text-blue-math">\(\left[0, 0.7\right) \hspace{2mm} \text{for} \hspace{2mm} x=0 \)</span></li>
                    <li><span class="text-blue-math">\(\left[0.7, 1\right) \hspace{2mm} \text{for} \hspace{2mm} x=1 \)</span></li>
                </ul>
                <p>则 CABAC 编码 <span class="text-blue-math">\( \left[1, 0, 1, 1, 0\right] \)</span> 的过程如下：</p>
                <ol>
                    <li><b>输入 <span class="text-blue-math">\(x=1\)</span></b>——占上区间，更新为：
                        <ul>
                            <li><span class="text-blue-math">\(\left[0.7, 0.91\right) \hspace{2mm} \text{for} \hspace{2mm} x=0 \)</span></li>
                            <li><span class="text-blue-math">\(\left[0.91, 1\right) \hspace{2mm} \text{for} \hspace{2mm} x=1 \)</span></li>
                        </ul>
                    </li>
                    <li><b>输入 <span class="text-blue-math">\(x=0\)</span></b>——占下区间，更新为：
                        <ul>
                            <li><span class="text-blue-math">\(\left[0.7, 0.826\right) \hspace{2mm} \text{for} \hspace{2mm} x=0 \)</span></li>
                            <li><span class="text-blue-math">\(\left[0.826, 0.91\right) \hspace{2mm} \text{for} \hspace{2mm} x=1 \)</span></li>
                        </ul>
                    </li>
                    <li><b>输入 <span class="text-blue-math">\(x=1\)</span></b>——占上区间，更新为：
                        <ul>
                            <li><span class="text-blue-math">\(\left[0.826, 0.8772\right) \hspace{2mm} \text{for} \hspace{2mm} x=0 \)</span></li>
                            <li><span class="text-blue-math">\(\left[0.8772, 0.91\right) \hspace{2mm} \text{for} \hspace{2mm} x=1 \)</span></li>
                        </ul>
                    </li>
                    <li><b>输入 <span class="text-blue-math">\(x=1\)</span></b>——占上区间，更新为：
                        <ul>
                            <li><span class="text-blue-math">\(\left[0.8772, 0.89704\right) \hspace{2mm} \text{for} \hspace{2mm} x=0 \)</span></li>
                            <li><span class="text-blue-math">\(\left[0.89704, 0.91\right) \hspace{2mm} \text{for} \hspace{2mm} x=1 \)</span></li>
                        </ul>
                    </li>
                    <li><b>输入 <span class="text-blue-math">\(x=0\)</span></b>——得到下区间：<span class="text-blue-math">\(\left[0.8772, 0.89704\right)\)</span></li>
                </ol>
            </div>
            
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：复习：语法元素 syntax</button>
            <div class="coll-content">
                <h3>复习：语法元素 syntax</h3>
                <p>编码数据“语境”下的<i>数据结构和组织办法</i>；符号 symbol 代表<i>特定的</i>某个数据或指令，是组成语法元素的基本结构之一，如 AVC、HEVC 的 I，P，B 块标识。</p>
                <p>与 AVC、HEVC 中将语法元素转换为二进制，再使用 CAVLC、CABAC 的过程不同，AV1 虽然同样使用了算术编码，但其熵编码不含二进制转换，所以需要统计每种符号的概率值。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：累积分布函数 CDF</button>
            <div class="coll-content">
                <h3>熵编码——累积分布函数 Cumulative distribution function（CDF）</h3>
                <p>在统计学中代表二维坐标轴中，从起始处累积到某点 X 左侧的直线或曲线 <span class="text-blue-math">\(F\left(x\right)\)</span> 下方阴影的面积，该面积可以表示累计概率（Accumulated probability）。由于概率的最大值为 1，所以假设曲线下的最大阴影面积为 1，定义为:
                    <span class="text-blue-math">\[ F_X \left(x\right) = P\left( X \leq x \right) \]</span>
                    其中 X 代表给定的某个 x 轴点。
                </p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/entropy-coding/cumulative-distribution-function.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图片来自：<a href="https://deepai.org/machine-learning-glossary-and-terms/cumulative-distribution-function">deepai.org</a></p>
                </div>

                <h4>（1/3）离散随机变量 Discrete random variables</h4>
                <p>一组给定范围（<span class="text-blue-math">\(\in\)</span>）内，有限个不重复的数。例如抛 N 次硬币，正面朝上的次数只可能会是整数 0..N，记做 <span class="text-blue-math">\(k \in \{0, 1, \ldots, N\}\)</span>，k 代表某场执行“抛硬币 N 次”活动后，硬币正面朝上的次数，这个次数一定会在 0~N 的范围内。</p>
                <p>相对地，如果掷标准 6 面骰子 1 次，则记做 <span class="text-blue-math">\(k \in \{1, 2, \ldots, 6\}\)</span>。这里面既无 0，又无 N。</p>
                <p><b>样本空间 Sample space</b>：代表“一组给定范围”的空间，此处表示为 <span class="text-blue-math">\(\{ \ldots \}\)</span></p>

                <h4>（2/3）概率质量函数 Probability mass function（PMF/PDF）</h4>
                <p>由于离散随机变量中不会有样本空间中“不存在”的值，且因给定事件的概率可测量，所以样本空间中，每个值的出现概率可以被归纳总结为函数——PMF：
                    <span class="text-blue-math">\[ p(x_i) = P(X=x_i) = P(\underbrace{\{k \in K\ |\ X(k) = x_i\}}_{\text{set of outcomes resulting in}\ X=x_i}) \]</span>
                    如样本空间中给 3 种不同概率的结果（30%，50%，20%，<span class="text-blue-math">\(k \in \{x_1,x_2,x_3\}\)</span>）：
                    <span class="text-blue-math">\[ P(X=x_1) = 0.3 \text{,} \hspace{4mm} P(X=x_2) = 0.5 \text{,} \hspace{4mm} P(X=x_3) = 0.2\]</span>
                    此处的大写 X 代表样本空间的函数，而 X 的 PMF 则必须满足总概率等于 1，以及每个 PMF 的概率都大于等于 0，共 2 件条件：
                    <span class="text-blue-math">\[ \displaystyle{\sum_{x_i} p(x_i)} = p(x_1) + p(x_2) + \ldots = 1 \]</span>
                    <span class="text-blue-math">\[ p(x_i) \geq 0 \]</span>
                </p>

                <h4>（3/3）PMF/PDF 对比 CDF</h4>
                <p>简单地说，CDF 同样是定义为一组样本空间中的值，但两者有别。使用随机变量的 CDF 定义为包括全部实数，也就是说“掷标准 6 面骰子”的例子中，两者的统计方法不一样，后者的 CDF 呈累计状，能够更好的显示概率的分布状况，以及每个离散随机变量 X 在其中到底“贡献”了多少：
                    <span class="text-blue-math">\[ p_X(x) = \begin{cases}
                        \frac{1}{6}, & x \in \{1, 2, 3, 4, 5, 6\} \\
                        0, & \text{otherwise}
                    \end{cases}
                    \]\[
                    \bar{P}_n = \left[ p_1\left(n\right), p_2\left(n\right), \ldots, p_M\left(n\right) \right]
                    \]\[
                    c_X(x) = F_X(x) = \begin{cases}
                        0, & x &lt; 1 \\
                        \frac{1}{6}, & 1 \leq x &lt; 2 \\
                        \frac{2}{6}, & 2 \leq x &lt; 3 \\
                        \frac{3}{6}, & 3 \leq x &lt; 4 \\
                        \frac{4}{6}, & 4 \leq x &lt; 5 \\
                        \frac{5}{6}, & 5 \leq x &lt; 6 \\
                        1, & x \geq 6
                    \end{cases}
                    \]\[
                    \bar{C}_n = \left[ c_1\left(n\right), c_2\left(n\right), \ldots, c_M-1\left(n\right), 1 \right]
                    \]</span>
                    在两个离散随机变量值（k 或 X）之间时，CDF 值不变；而一旦越过边界，则 <span class="text-blue-math">\(c_X(x)\)</span>（CDF 值）起跳一个 <span class="text-blue-math">\(p_X(x)\)</span>（PMF 值）的高度。可以理解为将一堆离散概率值按顺序扎进了二维坐标系中。
                </p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/entropy-coding/cdf-accumulation.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：“CDF 值起跳高度”就是每个 <span class="text-blue-math">\(p_X(x)\)</span> 的概率，所以。见：<a href="https://stats.libretexts.org/Courses/Saint_Mary's_College_Notre_Dame/MATH_345__-_Probability_(Kuter)/3%3A_Discrete_Random_Variables/3.2%3A_Probability_Mass_Functions_(PMFs)_and_Cumulative_Distribution_Functions_(CDFs)_for_Discrete_Random_Variables">Saint Mary's College - MATH345</a></p>
                </div>

                <p>这种“累积”的性质可以用求和/循环表示。样本空间中，越靠后的 CDF 值所累积的高度越高，为：
                    <span class="text-blue-math">\[ c_k\left(n\right) = \sum_{i=1}^k p_{i}\left(n\right) \]</span>
                </p>

                <p>计算 CDF 时还可能会遇到“仅取一部分 PMF 函数”的甲方要求，此时需要在坐标系中标定 k 或 X，代表选取样本空间中的某个离散随机变量，然后从这里求上述的“点 X 左侧阴影面积”。
                <div class="align-items-center">
                    <img loading="lazy" src="files/entropy-coding/cdf-uniform-pmf.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：对等大小（Uniform）PMF <span class="text-blue-math">\(F\left(x\right)\)</span> 下取 CDF <span class="text-blue-math">\(P\left( X \leq x \right)\)</span> 见：<a href="https://www.youtube.com/watch?v=4QeL1ma_XJ0">MIT 公开课</a>图中计算与本文关系不大，可以忽略</p>
                </div>
            </div>
            <!--
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/4）往 PMF 与 CDF 添加新值</button>
            <div class="coll-content">
                <h4>（4/4）往 PMF 与 CDF 添加新值</h4>
                <p>设 PMF 函数的更新逻辑为：
                    <span class="text-blue-math">\[ \bar{P}_n = \bar{P}_{n-1}\left( 1-\alpha \right) + \alpha\bar{e}_k \]</span>
                    <span class="text-blue-math">\(\bar{e}_k\)</span> 代表“离散随机变量 k”中，概率为 1 的提示量
                    <span class="text-blue-math">\(\alpha\)</span> 代表更新频率：
                    <span class="text-blue-math">\[
                        \alpha = \frac{1}{2^{3 + I_{\text{count}&gt;15} + I_{\text{count}&gt;32} + min(log_2(M),2) }}
                    \]</span>
                    <span class="text-blue-math">\( \bar{P}_{n-1}\left( 1-\alpha \right) \)</span> 代表以 <span class="text-blue-math">\(1-\alpha\)</span> 速率衰减的旧概率。总体上代表添加一个新的离散随机变量对样本空间所造成的影响。参数 <span class="text-blue-math">\(min\left(\log_2\left(M\right),2\right)\)</span> 代表新离散随机变量的位置，参数 I 代表帧内编码块的数量超过了给定数量。（?）
                </p>

                <p>CDF 函数的更新需要拆分为 <span class="text-blue-math">\(m &lt; k\)</span>：
                    <span class="text-blue-math">\[ c_m\left(n\right) =
                        \sum_{i=1}^m p_i\left(n\right) =
                        \sum_{i=1}^m p_i\left(n-1\right)\left(1-\alpha\right) =
                        c_m\left(n-1\right)\left(1-\alpha\right)
                    \]</span>
                    和 <span class="text-blue-math">\(m \geq k\)</span> 两种情况：
                    <span class="text-blue-math">\[ 1 - c_m\left(n\right) =
                        \sum_{i=m+1}^M p_i\left(n\right) =
                        \sum_{i=m+1}^M p_i\left(n-1\right)\left(1-\alpha\right) =
                        \left(1-c_m\left(n-1\right)\right)\left(1-\alpha\right)
                    \]</span>
                    总结为：
                    <span class="text-blue-math">\[ c_m\left(n\right) = \begin{cases}
                        c_m\left(n-1\right)\left(1-\alpha\right) \text{,} \hspace{2mm} m &lt; k \\
                        c_m\left(n-1\right)+\alpha\left(1-c_m\left(n-1\right)\right) \text{,} \hspace{2mm} m \geq k
                    \end{cases} \]</span>
                </p>
            </div>
            -->

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：编码 64x64 块的语法元素例</button>
            <div class="coll-content">
                <h3>熵编码——编码 64x64 块的语法元素例</h3>
                <p>注意本节的计算主要用于展示过程，所以计算和图像准确度会与实际情况有误差，以及大量演算中可能会出现错误。在观看本节前，建议补习 x265 教程——熵编码中的算数编码和 PPM 推演部分。</p>
                
                <h4>（1/6）细分块语法元素</h4>
                <p>10 种模式，将这些模式按照 AV1 的编码概率排序（见：<a href="https://aomediacodec.github.io/av1-spec/#decode-partition-semantics">AV1 Spec</a>）为：</p>
                <ol class="text-smaller" start="0">
                    <li><code class="code-bold">PARTITION_NONE</code></li>
                    <li><code class="code-bold">PARTITION_HORZ</code></li>
                    <li><code class="code-bold">PARTITION_VERT</code></li>
                    <li><code class="code-bold">PARTITION_SPLIT</code></li>
                    <li><code class="code-bold">PARTITION_HORZ_A</code></li>
                    <li><code class="code-bold">PARTITION_HORZ_B</code></li>
                    <li><code class="code-bold">PARTITION_VERT_A</code></li>
                    <li><code class="code-bold">PARTITION_VERT_B</code></li>
                    <li><code class="code-bold">PARTITION_HORZ_4</code></li>
                    <li><code class="code-bold">PARTITION_VERT_4</code></li>
                </ol>
                <p>对比 64x64 块的上下文出字概率结果，以及实际用于计算的整数表：</p>
                <pre><code class="text-smaller language-cpp">
/**
 * { 换算为 0~1 范围：
 *     { 0.615, 0.657, 0.704, 0.902, 0.910, 0.923, 0.931, 0.942, 0.968, 1, 0 }, Row 0：初始状态，无 ctx
 *     { 0.205, 0.229, 0.290, 0.853, 0.862, 0.870, 0.884, 0.904, 0.919, 1, 0 }, Row 1
 *     { 0.181, 0.234, 0.255, 0.875, 0.889, 0.908, 0.917, 0.925, 0.984, 1, 0 }, Row 2
 *     { 0.027, 0.037, 0.045, 0.952, 0.958, 0.964, 0.969, 0.973, 0.987, 1, 0 }  Row 3：正常状态，3 ctx
 * }   Col 0      1      2      3      4      5      6      7      8    9  10
 */
Default_Partition_W64_Cdf[ PARTITION_CONTEXTS ][ 11 ] = {
    { 20137, 21547, 23078, 29566, 29837, 30261, 30524, 30892, 31724, 32768, 0 }, 
    { 6732, 7490, 9497, 27944, 28250, 28515, 28969, 29630, 30104, 32768, 0 },
    { 5945, 7663, 8348, 28683, 29117, 29749, 30064, 30298, 32238, 32768, 0 },
    { 870, 1212, 1487, 31198, 31394, 31574, 31743, 31881, 32332, 32768, 0 }
}
                </code></pre>
                <!--冠军行的“起跳高度”分别为 +0.043，+0.047，+0.198，+0.008，+0.013，+0.008，+0.011，+0.026，+0.032，-1-->
                <p>可以看到上下文长 3 时，<code class="code-bold">PARTITION_NONE</code>、<code class="code-bold">PARTITION_HORZ</code>、<code class="code-bold">PARTITION_VERT</code> 的出字概率变得很小，也就是说在编码了 3 个 64x64 块后，接下来的块有了足够多的信息，所以选择这些模式的概率也会变小。熵编码出字概率 0~1 区间的范围越小，用于表示这段区间的小数数位越长，因此降低不常用模式的出字概率（占据位宽），就可以提高其他模式可用的宽度，以减少小数数位，而提高压缩率。</p>
                <p>假设编码某帧中的冠军个 64x64 SB。其左侧和顶部区域不存在（ctx 为 0，对应上述冠军行）。假设其分块模式决定使用 <code class="code-bold">PARTITION_NONE</code>，则选择冠军行，冠军列的 20137（0.615）区间，并更新一遍 CTX。下一个分块会使用亚军行的出字概率</p>
                <p>预设 0~1 区间（0~32768）的 0.615 倍为，20137，这个数小于 32768，因此需要循环归一化/基本单位化（乘以 2），放大到 40274。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/entropy-coding/arithmetic-coding-1.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：出字概率被缩减到小于 32768（100%）时，循环地放大下限和上限 2 倍；若新范围的下限高于 32768，则为下限和上限循环地减 32768</p>
                </div>
                <ul>
                    <li>此时 0~1 区间的下限为 0，不大于 32768，×2 操作循环了 1 次，所以输出 1bit；而设定编码结果为 <code>1b0</code>
                        <ul class="text-smaller"><li>全称：最重要数位 Most significant bit（MSB）为 0 的 1 位二进制数</li></ul>
                    </li>
                </ul>

                <h4>（2/6）残差编码开关元素</h4>
                <p>判断该分块是否需要执行残差编码，早在变换块中判断，并发送 <code>all_zero</code> 旗标到此处。由于冠军个分块并没有预测模式可用，所以残差计算不会进行，得到“跳过 Skip 模式”；因此，选择下表中第 2 列的 32768，也就是 PDF 的 1097（0.031）。</p>
                <pre><code class="text-smaller class="language-cpp"">
/**
 * 换算为 0~1 范围
 *{
 *   { 0.969, 1, 0 }, Row 0，无上下文
 *   { 0.504, 1, 0 }, Row 1
 *   { 0.140, 1, 0 }  Row 2，满上下文
 * } Col 0,   1, 2
 */
Default_Skip_Cdf[ SKIP_CONTEXTS ][ 3 ] = { 
    { 31671, 32768, 0 },
    { 16515, 32768, 0 },
    { 4576, 32768, 0 }
}
                </code></pre>
                <p>当前块的上下文长 0。假设此时选择跳过残差编码，则在上表中对应行 1 列 2（32768）。根据 CDF 的性质，这个出字概率是 <span class="text-blue-math">\(32768-31671=1097 \hspace{2mm} \left(0.033\right)\)</span>，且<i>这个新区间位于最后方</i>，即 0~1 出字概率区间的顶部。</p>
                <ul>
                    <li>循环 5 次 <code>&lt;&lt;2</code> 或 <span class="text-blue-math">\(\times 2\)</span> 缩放后得到了上限减下限大于等于 32768 的概率区间</li>
                    <li>缩放后的下限 200256 大于最大上限 32768，所以还需下移</li>
                    <li>编码该语法元素的过程中出现了 6 次下移：<span class="text-blue-math">\(39026 \curvearrowright 6258\)</span>、<span class="text-blue-math">\(200256 \curvearrowright 3648\)</span>。</li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/entropy-coding/arithmetic-coding-2.png" alt="imageR" class="img-medium">
                </div>
                <ul>
                    <li><span class="text-blue-math">\(39026 \curvearrowright 6258\)</span> 中下移了 1 次，此下移为编码分块模式语法元素的部分，所以改动之前的编码结果为 <code>1b1</code></li>
                    <li>新区间的下限为 3648，即二进制 <code>15b000_1110_0100_0000</code></li>
                    <li>×2 操作循环了 5 次，所以输出 5bit——记做 5 位 MSB 的 <code>5b00011</code></li>
                    <li>拼合（concat）上一步分块语法元素，构成 <code>6b1_00011</code></li>
                </ul>

                <h4>（3/6）亮度预测模式元素 YMode</h4>
                <p>此处假设选择帧内编码，不使用帧内块复制 IBC 模式。冠军个分块并没有左上或顶部参考块可用（有的话优先选用左上、右上，其次左下、右下块的模式，见 <a href="https://github.com/mozilla/aom/blob/46b7bb243b39929c02d6decc1bdb2e39e11540d6/av1/common/blockd.c#L19"><code class="code-bold">av1_left_block_mode</code></a>）。帧间模式按照 AV1 标准排序 <code class="code-bold">Intra_Frame_Y_Mode</code>（见：<a href="https://aomediacodec.github.io/av1-spec/#intra-frame-mode-info-semantics">AV1 Spec</a>），<code class="code-bold">Intra_Mode_Context</code>（见 <a href="https://aomediacodec.github.io/av1-spec/#cdf-selection-process">AV1 Spec</a>）得到：</p>
                <table class="table-center align-items-center">
                    <thead>
                        <tr>
                            <th class="px-3">Enum</th>
                            <th class="px-3">YMode</th>
                            <th class="px-3">CDF[aisle][row]</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="t-light-gray">
                            <td class="px-3">0</td>
                            <td class="px-3"><code class="code-bold">DC_PRED</code></td>
                            <td class="px-3 text-purple-resv">0</td>
                        </tr>
                        <tr>
                            <td class="px-3">1</td>
                            <td class="px-3"><code class="code-bold">V_PRED</code></td>
                            <td class="px-3">1</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">2</td>
                            <td class="px-3"><code class="code-bold">H_PRED</code></td>
                            <td class="px-3">2</td>
                        </tr>
                        <tr>
                            <td class="px-3">3</td>
                            <td class="px-3"><code class="code-bold">D45_PRED</code></td>
                            <td class="px-3 text-red-emph">3</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">4</td>
                            <td class="px-3"><code class="code-bold">D135_PRED</code></td>
                            <td class="px-3 text-blue-emph">4</td>
                        </tr>
                        <tr>
                            <td class="px-3">5</td>
                            <td class="px-3"><code class="code-bold">D113_PRED</code></td>
                            <td class="px-3 text-blue-emph">4</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">6</td>
                            <td class="px-3"><code class="code-bold">D157_PRED</code></td>
                            <td class="px-3 text-blue-emph">4</td>
                        </tr>
                        <tr>
                            <td class="px-3">7</td>
                            <td class="px-3"><code class="code-bold">D203_PRED</code></td>
                            <td class="px-3 text-blue-emph">4</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">8</td>
                            <td class="px-3"><code class="code-bold">D67_PRED</code></td>
                            <td class="px-3 text-red-emph">3</td>
                        </tr>
                        <tr>
                            <td class="px-3">9</td>
                            <td class="px-3"><code class="code-bold">SMOOTH_PRED</code></td>
                            <td class="px-3 text-purple-resv">0</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">10</td>
                            <td class="px-3"><code class="code-bold">SMOOTH_V_PRED</code></td>
                            <td class="px-3">1</td>
                        </tr>
                        <tr>
                            <td class="px-3">11</td>
                            <td class="px-3"><code class="code-bold">SMOOTH_H_PRED</code></td>
                            <td class="px-3">2</td>
                        </tr>
                        <tr class="t-light-gray">
                            <td class="px-3">12</td>
                            <td class="px-3"><code class="code-bold">PAETH_PRED</code></td>
                            <td class="px-3 text-purple-resv">0</td>
                        </tr>
                    </tbody>
                </table>
                <ol class="text-smaller" start="13"><li>“Palette mode”：伪帧内编码，不在熵编码列表里</li></ol>
                <p class="mb-0">以及上下文配置：</p>
                <pre><code class="text-smaller language-cpp">
/**
 * 第 1 排换算为 0~1 范围：
 * 0.476, 0.520, 0.590, 0.617, 0.631, 0.644, 0.666, 0.709, 0.738, 0.860, 0.888, 0.930, 1, 0 顶块 DC/SMOOTH/PAETH，左块 DC/SMOOTH/PAETH
 * 0.367, 0.551, 0.596, 0.620, 0.632, 0.654, 0.668, 0.703, 0.746, 0.875, 0.921, 0.959, 1, 0 顶块 DC/SMOOTH/PAETH，左块 V/SMOOTH_V
 * 0.307, 0.329, 0.680, 0.695, 0.704, 0.709, 0.736, 0.782, 0.798, 0.895, 0.913, 0.963, 1, 0 顶块 DC/SMOOTH/PAETH，左块 H/SMOOTH_H
 * 0.430, 0.470, 0.502, 0.574, 0.584, 0.596, 0.610, 0.674, 0.755, 0.903, 0.945, 0.991, 1, 0 顶块 DC/SMOOTH/PAETH，左块 D45/D67
 * 0.370, 0.405, 0.476, 0.504, 0.568, 0.611, 0.683, 0.781, 0.807, 0.923, 0.948, 0.991, 1, 0 顶块 DC/SMOOTH/PAETH，左块 D135/D113/D157/D203
 *
 * 第 2 排换算为 0~1 范围：
 * 0.306, 0.598, 0.636, 0.654, 0.666, 0.695, 0.705, 0.733, 0.775, 0.885, 0.930, 0.959, 1, 0 顶块 V/SMOOTH_V，左块 DC/SMOOTH/PAETH
 * 0.183, 0.735, 0.750, 0.759, 0.765, 0.787, 0.791, 0.806, 0.843, 0.913, 0.954, 0.970, 1, 0 顶块 V/SMOOTH_V，左块 V/SMOOTH_V
 * 0.227, 0.390, 0.616, 0.633, 0.643, 0.659, 0.677, 0.714, 0.747, 0.852, 0.888, 0.931, 1, 0 顶块 V/SMOOTH_V，左块 H/SMOOTH_H
 * 0.261, 0.448, 0.471, 0.521, 0.531, 0.555, 0.562, 0.605, 0.752, 0.890, 0.949, 0.983, 1, 0 顶块 V/SMOOTH_V，左块 D45/D67
 * 0.230, 0.434, 0.473, 0.494, 0.546, 0.632, 0.671, 0.748, 0.793, 0.906, 0.945, 0.976, 1, 0 顶块 V/SMOOTH_V，左块 D135/D113/D157/D203
 *
 * INTRA_MODES 即 YMode。INTRA_MODE_CONTEXTS 代表左侧与顶部参考源序列的和。AOM-AV1 中缩写为 kf_y_cdf
 */
Default_Intra_Frame_Y_Mode_Cdf[ INTRA_MODE_CONTEXTS ][ INTRA_MODE_CONTEXTS ][ INTRA_MODES+1 ] = { // [5][5][13+1]
    { // Aisle 0
        { 15588, 17027, 19338, 20218, 20682, 21110, 21825, 23244, 24189, 28165, 29093, 30466, 32768, 0 }, // Row 0
        { 12016, 18066, 19516, 20303, 20719, 21444, 21888, 23032, 24434, 28658, 30172, 31409, 32768, 0 },
        { 10052, 10771, 22296, 22788, 23055, 23239, 24133, 25620, 26160, 29336, 29929, 31567, 32768, 0 },
        { 14091, 15406, 16442, 18808, 19136, 19546, 19998, 22096, 24746, 29585, 30958, 32462, 32768, 0 },
        { 12122, 13265, 15603, 16501, 18609, 20033, 22391, 25583, 26437, 30261, 31073, 32475, 32768, 0 }
    }, // Col 0, 1, ...
    { // Aisle 1
        { 10023, 19585, 20848, 21440, 21832, 22760, 23089, 24023, 25381, 29014, 30482, 31436, 32768, 0 },
        { 5983, 24099, 24560, 24886, 25066, 25795, 25913, 26423, 27610, 29905, 31276, 31794, 32768, 0 },
        { 7444, 12781, 20177, 20728, 21077, 21607, 22170, 23405, 24469, 27915, 29090, 30492, 32768, 0 },
        { 8537, 14689, 15432, 17087, 17408, 18172, 18408, 19825, 24649, 29153, 31096, 32210, 32768, 0 },
        { 7543, 14231, 15496, 16195, 17905, 20717, 21984, 24516, 26001, 29675, 30981, 31994, 32768, 0 }
    },
      // ... 此处省略 3 排 ...
}
                </code></pre>
                
                <p>在没有可用块时，<code class="code-bold">av1_left_block_mode</code>，<code class="code-bold">av1_top_block_mode</code> 会返回 <code class="code-bold">DC_MODE</code>，映射到上述上下文表中排 aisle、行 row、列 column 的 [0][0][0]，即 0.476。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/entropy-coding/arithmetic-coding-3.png" alt="imageR" class="img-medium">
                </div>
                <ul>
                    <li>新区间的下限为 7296，即二进制 <code>15b001_1100_1000_0000</code></li>
                    <li>×2 操作循环了一次，所以输出 1bit 的 <code>1b0</code></li>
                    <li>拼合上一步分块语法元素，构成 <code>7b1_00011_0</code></li>
                </ul>

                <h4>（4/6）色度预测模式元素 UVMode</h4>
                <p>假设同位色度块大小为 64x64。除个别特殊预测模式外，色度与亮度平面支持的预测模式功能（除特殊模式外）没有差异。色度预测的上下文（CDF 值）选取由下表决定（见 <a href="https://aomediacodec.github.io/av1-spec/#intra-block-mode-info-semantics">AV1 Spec</a>）：</p>
                <ul class="text-smaller">
                    <li>同位亮度块的预测模式</li>
                    <li>色度块决定使用的预测模式</li>
                    <li>是否使用了特殊预测模式（如色度填亮度模式）</li>
                </ul>  
                <!--UVMode 与 YMode 同为 <code class="code-bold">PREDICTION_MODE</code> 类的枚举器-->
                <pre><code class="text-smaller language-cpp">
/**
 * 非色度填亮度模式（Non-CFL）所用的表格，使用 CFL 则更换为 Default_Uv_Mode_Cfl_Allowed_Cdf
 * 0.691, 0.737, 0.774, 0.783, 0.793, 0.809, 0.826, 0.852, 0.862, 0.917, 0.944, 0.975, 1, 0 Y-DC
 * 0.290, 0.820, 0.823, 0.825, 0.828, 0.844, 0.847, 0.849, 0.865, 0.900, 0.909, 0.970, 1, 0 Y-V
 * 0.300, 0.303, 0.875, 0.876, 0.878, 0.878, 0.891, 0.910, 0.911, 0.939, 0.970, 0.977, 1, 0 Y-H
 * 0.416, 0.424, 0.432, 0.773, 0.781, 0.785, 0.792, 0.828, 0.872, 0.934, 0.957, 0.992, 1, 0 Y-D45
 * 0.298, 0.300, 0.303, 0.304, 0.775, 0.826, 0.853, 0.859, 0.862, 0.949, 0.969, 0.988, 1, 0 Y-D135
 * 0.361, 0.415, 0.417, 0.419, 0.459, 0.892, 0.894, 0.899, 0.907, 0.951, 0.960, 0.993, 1, 0 ...
 * 0.433, 0.439, 0.507, 0.513, 0.541, 0.542, 0.871, 0.922, 0.923, 0.972, 0.987, 0.997, 1, 0 
 * 0.393, 0.398, 0.457, 0.476, 0.478, 0.481, 0.494, 0.889, 0.893, 0.935, 0.975, 0.991, 1, 0 
 * 0.367, 0.417, 0.423, 0.467, 0.473, 0.480, 0.488, 0.497, 0.868, 0.927, 0.939, 0.989, 1, 0 
 * 0.581, 0.605, 0.628, 0.638, 0.645, 0.655, 0.668, 0.693, 0.707, 0.881, 0.927, 0.982, 1, 0 
 * 0.568, 0.600, 0.640, 0.648, 0.656, 0.666, 0.677, 0.706, 0.718, 0.826, 0.958, 0.981, 1, 0 
 * 0.520, 0.580, 0.610, 0.621, 0.628, 0.644, 0.652, 0.669, 0.686, 0.790, 0.810, 0.971, 1, 0 
 * 0.370, 0.420, 0.457, 0.458, 0.458, 0.459, 0.460, 0.463, 0.466, 0.481, 0.489, 0.507, 1, 0
 * UV-DC  UV-V   UV-H   UV-D45 UV-D135 ...
 */
Default_Uv_Mode_Cfl_Not_Allowed_Cdf[ INTRA_MODES ][  UV_INTRA_MODES_CFL_NOT_ALLOWED+1 ] = { // [13][13+1]
    { 22631, 24152, 25378, 25661, 25986, 26520, 27055, 27923, 28244, 30059, 30941, 31961, 32768, 0 },
    { 9513,  26881, 26973, 27046, 27118, 27664, 27739, 27824, 28359, 29505, 29800, 31796, 32768, 0 },
    { 9845,  9915,  28663, 28704, 28757, 28780, 29198, 29822, 29854, 30764, 31777, 32029, 32768, 0 },
    { 13639, 13897, 14171, 25331, 25606, 25727, 25953, 27148, 28577, 30612, 31355, 32493, 32768, 0 },
    { 9764,  9835,  9930,  9954,  25386, 27053, 27958, 28148, 28243, 31101, 31744, 32363, 32768, 0 },
    { 11825, 13589, 13677, 13720, 15048, 29213, 29301, 29458, 29711, 31161, 31441, 32550, 32768, 0 },
    { 14175, 14399, 16608, 16821, 17718, 17775, 28551, 30200, 30245, 31837, 32342, 32667, 32768, 0 },
    { 12885, 13038, 14978, 15590, 15673, 15748, 16176, 29128, 29267, 30643, 31961, 32461, 32768, 0 },
    { 12026, 13661, 13874, 15305, 15490, 15726, 15995, 16273, 28443, 30388, 30767, 32416, 32768, 0 },
    { 19052, 19840, 20579, 20916, 21150, 21467, 21885, 22719, 23174, 28861, 30379, 32175, 32768, 0 },
    { 18627, 19649, 20974, 21219, 21492, 21816, 22199, 23119, 23527, 27053, 31397, 32148, 32768, 0 },
    { 17026, 19004, 19997, 20339, 20586, 21103, 21349, 21907, 22482, 25896, 26541, 31819, 32768, 0 },
    { 12124, 13759, 14959, 14992, 15007, 15051, 15078, 15166, 15255, 15753, 16039, 16606, 32768, 0 } 
}
                </code></pre>
                <p>同为帧内编码的冠军个分块，因此这里编码的色度块仍然使用 [0][0] 处的出字概率 0.691。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/entropy-coding/arithmetic-coding-4.png" alt="imageR" class="img-medium">
                </div>
                <ul>
                    <li>该步骤中得到的下限不大于 32768，范围长度/高度也不小于 32768，所以没有用到下移</li>
                    <li>新下限 14592 为 <code>15b011_1001_0000_0000</code></li>
                    <li>×2 操作循环了一次，所以输出 1bit，为 <code>1b0</code></li>
                    <li>拼合上一步分块语法元素，构成 <code>8b1_00011_0_0</code></li>
                </ul>

                <h4>（5/6）变换块深度元素 TX_DEPTH</h4>
                <p class="mb-0">变换块有 3 种分块深度，对应概率表：</p>
                <pre><code class="text-smaller language-cpp">
/**
 * 0.176, 0.350, 1, 0
 * 0.176, 0.350, 1, 0
 * 0.513, 0.695, 1, 0
 * 深 0,    1,   2
 */
Default_Tx_64x64_Cdf[ TX_SIZE_CONTEXTS ][ MAX_TX_DEPTH + 2 ] = {
    { 5782, 11475, 32768, 0 },
    { 5782, 11475, 32768, 0 },
    { 16803, 22759, 32768, 0 }
}
                </code></pre>
                <p>假设当前块的变换块分块深度为 0（整块变换），同时上下文长 0，所以使用 [0][0]，即 0.176。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/entropy-coding/arithmetic-coding-5.png" alt="imageR" class="img-medium">
                </div>
                <ul>
                    <li>该步骤中 ×2 操作循环了 2 次，并使用了 1 次下移</li>
                    <li>新区间的下限为 25600，即二进制 <code>15b110_0100_0000_0000</code>，析出 <code>2b11</code></li>
                    <li>拼合上一步分块语法元素，构成 <code class="text-blue-emph">10b1_00011_0_0_11</code></li>
                </ul>

                <h4>（6/6）收尾</h4>
                <p>以上简化编码步骤中省略的模式包括时域降噪过滤、混合参考帧类型、动态向量类型等等，但已经足够演示计算过程了。64x64 编码结束时执行两项操作：</p>
                <ol>
                    <li>若最后一步得到的下限大于等于 16384，则为结果加 1</li>
                    <li>添加额外的零以对齐字节到 16bit</li>
                </ol>
                <p>上述的最后一个下限为 25600，大于 16384。因此需要加 1，得到 <code class="text-blue-emph">10b1000110100</code>；最后补零对齐到 16bit，为 <code class="text-blue-emph">16b1000_1101_0000_0000</code>，在 16 进制上为 <code class="text-blue-emph">2x8D00</code> 或 <code class="text-blue-emph">8D 00</code>。</p>
            </div>

            <h2 id="h2-10">模式决策</h2>

            <h3>模式决策——率失真优化</h3>
            <p>基本原理已在 x265 教程中说明，此处不再赘述。AV1 中使用了缩放到整数的值完成计算，但率失真曲线并无变化。率失真代价函数为：</p>
            <span class="text-blue-math">\[J = D + \lambda \cdot R\]</span>
            <p>由于 AV1 的量化与反量化主要是通过“查表”得到计算参数，所以并不像 AVC、HEVC 一样有 <span class="text-blue-math">\(Q_{\text{scale}}\)</span> 缩放值，而是完全取代为 <span class="text-blue-math">\(Q_{\text{index}}\)</span> 的 <code class="code-bold">Dc_Qlookup</code>、<code class="code-bold">Ac_Qlookup</code> 表格索引号（即 x264、x265 的 <span class="text-blue-math">\(Q_{\text{step}}\)</span>），但幸好原理还是一样的。</p>
            
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：模式决策——斜度 Lambda</button>
            <div class="coll-content">
                <h3>模式决策——斜度 Lambda</h3>
                <p>libaom 中，计算 <span class="text-blue-math">\( \lambda \)</span> 默认值的函数由：
                    <span class="text-blue-math">\[ \lambda = 0.85 \times Q_\text{step}^{2} \]</span>
                    转变为：
                    <span class="text-blue-math">\[ \lambda = 88 \cdot \frac{Q_\text{step}^{2}}{24} \]</span>
                    基本上分为以下几个步骤得到：
                </p>
                <pre class="text-smaller"><code>
int av1_compute_rd_mult_based_on_qindex(const AV1_COMP *cpi, int qindex) {
    // 获取当前量化步长索引
    const int q = av1_dc_quant_QTX(qindex, 0, cpi->common.seq_params.bit_depth);
    // 算出率失真斜度
    int rdmult = (int)(((int64_t) 88 * q * q) / 24);
  
    // 根据位深缩放率失真斜度
    switch (cpi->common.seq_params.bit_depth) {
        case AOM_BITS_8:
            break;
        case AOM_BITS_10:
            rdmult = ROUND_POWER_OF_TWO(rdmult, 4); break;
        case AOM_BITS_12:
            rdmult = ROUND_POWER_OF_TWO(rdmult, 8); break;
        default:
            assert(0 && "bit_depth should be AOM_BITS_8, AOM_BITS_10 or AOM_BITS_12");
            return -1;
    }
    // 限制最小率失真斜度并返回
    return rdmult > 0 ? rdmult : 1;
}
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/1）SV1-AV1 精确到细分块的 Lambda 调制</button>
            <div class="coll-content">
                <h4>（1/1）SV1-AV1 精确到细分块的 Lambda 调制</h4>
                <p>调制算法基于时域依赖性模型 TPL，斜度 Lambda 被重命名为率失真缩放值（RD-Multiplier，rdmult），核心思想为根据 TPL 信息（依赖大小）缩放每个块的相对权重，辅以新旧两个率失真斜度的差距的阻尼：</p>
                <span class="text-blue-math">\[ \text{TPL}_{\text{Superblock_rdmult_scale_factors}} = 
                    \frac{\text{rdmult}_\text{new}}{\text{rdmult}_{\text{old}}} \cdot \frac{\text{TPL}_{\text{rdmult_scale_factors}}}{\text{Geometric_Mean}_{\text{TPL_rdmult_scale_factors}}}
                \]</span>
                <ul>
                    <li>Geometric mean 代表 SB 内所有 16x16 块的 rdmult 所用时间依赖模型的几何平均</li>
                    <li><span class="text-blue-math">\( \text{rdmult}_{\text{old}} \)</span> 代表旧版斜度，“旧”代表上帧量化步长索引 QIndex 所映射出的率失真斜度</li>
                    <li><span class="text-blue-math">\( \text{rdmult}_{\text{new}} \)</span> 代表新版斜度，“新”代表修改后的 SB QIndex 所映射出的率失真斜度</li>
                    <li><span class="text-blue-math">\( \frac{\text{rdmult}_{\text{new}}}{\text{rdmult}_{\text{old}}} \)</span> 代表新旧率失真斜度之间的变化程度</li>
                    <li><span class="text-blue-math">\( \frac{\text{tpl}_{\text{rdmult_scale_factors}}}{\text{Geometric_Mean}} \)</span> 代表根据 TPL 信息（依赖大小）缩放每个块的相对权重，与 MB/CUTree 的逻辑一致</li>
                </ul>
                <p>接下来根据 SB 内的块大小分为两类，其中大于等于 16x16 的块需要统计几何平均：</p>
                <span class="text-blue-math">\[ \text{Geometric_Mean}_\text{scaled} =
                    \sqrt[N]{\prod_{i=1}^{N} \text{TPL}[i]_\text{Superblock_rdmult_scale_factors}}
                \]</span>
                <p>最后得到精确到细分块的率失真斜度。见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-Rate-Control.md">SVT-AV1 Docs</a>：</p>
                <span class="text-blue-math">\[ \text{Lambda}_{\text{new}} =
                    \text{Lambda}_{\text{CurrentFrame}} \times \text{Geometric_Mean}_\text{scaled} + 0.5
                \]</span>
            </div>

            <h2 id="h2-11">环路滤镜</h2>
            <p>相比于 x264/5 的实现，AV1 中的环路滤镜实现了在编码步骤（分块、变换、量化）之前的滤镜应用、继承 VP9 参与压缩的滤镜、以及根据内容自动调节强度的滤镜。</p>
            
            <h3>环路滤镜——胶片颗粒编码</h3>
            <p>位于所有编码步骤之前，通过自动回归分析模型 Autoregressive model 对原视频流中过滤出的噪声建模，最后于解码端复现的滤镜链；而只编码剥离出噪声的视频流。这种处理利用了通过算法生成噪声几乎不占用算力，而噪声的结构变化/失真（相对于画面内容失真）不受人眼视觉系统 Human visual system（HVS）重视的特性，提高了有损压缩上限。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2、2/2）亮度、色度平面的回归模型</button>
            <div class="coll-content">
                <h4>（1/2）亮度平面噪点回归分析模型</h4>
                <span class="text-blue-math">\[ Y^\prime = Y + f\left(Y\right) \cdot G_L \]</span>
                <ul>
                    <li><b>对合成噪声的预测面</b>：<span class="text-blue-math">\( Y^\prime \)</span>，即亮度叠加平面</li>
                    <li><b>降噪并编码的亮度平面</b>：<span class="text-blue-math">\( Y \)</span>，即画面本体</li>
                    <li><b>分段线性缩放函数</b>：<span class="text-blue-math">\( f\left(Y\right) \)</span>，即对噪声强度的缩放值</li>
                    <li><b>噪声采样</b>：<span class="text-blue-math">\( G_L \)</span>，由测量 <span class="text-blue-math">\( Y \)</span> 与降噪前的源 <span class="text-blue-math">\( Y_{\text{Source}} \)</span>得到</li>
                </ul>
                <h4>（2/2）色度平面噪点回归分析模型</h4>
                <span class="text-blue-math">\[ C^\prime = C + f\left(u\right) \cdot G_C \]
                    \[ u = b_c \cdot C + d_c \cdot Y_{avg} \cdot h \]</span>
                <ul>
                    <li><b>色度分量缩放索引</b>：<span class="text-blue-math">\( u \)</span>，结合 <span class="text-blue-math">\( f\left(u\right) \)</span> 得到色度噪声强度的缩放值</li>
                    <li><b>自回归色度平面缩放值</b>：<span class="text-blue-math">\( b_c \)</span>，用于与亮度平面映射分权</li>
                    <li><b>同位亮度平面映射缩放值</b>：<span class="text-blue-math">\( d_c \)</span>，用于与色度平面分权</li>
                    <li><b>像素值位深缩放</b>：<span class="text-blue-math">\( h \)</span></li>
                </ul>
                <p>胶片颗粒编码滤镜会首先生成 1 份 64×64 亮度和 2 份 32×32 色度噪声模板。在合成过程中，从这些模板中以伪随机位置获取 32×32 亮度和 16×16 色度的噪声块，并将其添加到重建平面中。AV1 会将噪声块重叠摆放，以减少分块边界处的潜在细线失真。</p>
            </div>

            <!--<button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/1）分段线性缩放函数</button>
            <div class="coll-content">
                <h4>（1/1）分段线性缩放函数</h4>
                <p>根据输入值的不同，进行不同的线性变换，如输入 <span class="text-blue-math">\(x\)</span>，得到 <span class="text-blue-math">\(f\left(x\right)\)</span>：</p>
                <span class="text-blue-math">\[ f(x) =
                \begin{cases}
                a_1 x + b_1, & x \in \left[x_0, x_1\right] \\
                a_2 x + b_2, & x \in \left(x_1, x_2\right] \\
                \hspace{10mm} \vdots \\
                a_n x + b_n, & x \in \left(x_{n-1}, x_n\right]
                \end{cases}\]
                </span>
            </div>-->

            <h3>环路滤镜——参考缩放环路 Reference scaling loop</h3>
            <p>位于所有编码步骤之前，胶片颗粒编码滤镜之后，用于实现类似于 AVC、HEVC 的 VBV 码率峰值限制。AV1 标准支持先降低分辨率再编码，最后输出为实际分辨率更低，但在解码端通过缩放滤镜恢复的重建帧。（<span class="text-red-emph">猜测：</span>对画面细节的影响类似于设置 AVC、HEVC 中的死区量化器）。</p>

            <h4>（1/2）缩小倍数分母设定</h4>
            <p>SVT-AV1 中定义为 0.89~0.5 倍，即 <span class="text-blue-math">\( \frac{8}{9} \curvearrowright \frac{8}{16} \)</span>。分为降低视频帧的采样，以及二阶段的去块与 CDEF（共 3 步）。解码端通过空域参考缩放滤镜恢复原始大小。见<a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-Reference-Scaling.md">SVT-AV1 Docs</a>。</p>
            <div class="align-items-center">
                <img loading="lazy" src="files/loop-filter/downscale-filter.png" alt="imageR" class="img-medium">
                <p class="text-gray-side mt-0">图：参考缩放环路</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）缩小分母判断</button>
            <div class="coll-content">
                <h4>（2/2）缩小分母判断</h4>
                <p>取决于用户决定的 3 种模式：</p>
                <ul>
                    <li><b>固定</b>：设定 1 个关键帧缩放分母、1 个参考帧缩放分母，适合搭配 CQP 模式的快速压制</li>
                    <li><b>随机</b>：用于测试</li>
                    <li><b>动态（需 1pass CBR）</b>：据缓冲区大小决定，只要缓冲区不溢出就不缩放；否则进入 1 阶段以大减分辨率，然后进入 2 阶段，只有当触发缓冲区下溢（buffer underflow）才会恢复原始分辨率：
                        <ul>
                            <li>1 阶段：缩放到 <span class="text-blue-math">\( 8 \div 32 \)</span></li>
                            <li>2 阶段：缩放到 <span class="text-blue-math">\( 8 \div 16 \)</span></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <h3>环路滤镜——超分辨率环路 Super resolution loop</h3>
            <p>与参考缩放环路类似，区别在于在编码后环路还原滤镜，区别在于超采样滤镜会在 CDEF 滤镜之后线性放大视频帧到原始分辨率，然后再运行环路还原滤镜（因此解码器也会在拿到视频流后先放大，再应用配置给完整分辨率的环路还原滤镜），相比参考缩放环路，超分辨率环路能够恢复更多高频信息。见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-Super-Resolution.md">SVT-AV1 Docs</a>。</p>
            <div class="align-items-center">
                <img loading="lazy" src="files/loop-filter/superres-filter.png" alt="imageR" class="img-medium">
                <p class="text-gray-side mt-0">图：超分辨率环路</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）缩小分母判断</button>
            <div class="coll-content">
                <h4>（1/1）缩小分母判断</h4>
                <p>取决于用户决定的 6 种模式：</p>
                <ul>
                    <li><b>固定</b>：设定 1 个关键帧缩放分母、1 个参考帧缩放分母，适合搭配 CQP 模式的快速压制</li>
                    <li><b>随机</b>：用于测试</li>
                    <li><b>阈值</b>：根据率控制模式判断出的 QP 是否达到用户指定的 QP threshold（QThreshold）决定</li>
                    <li><b>自动单流</b>：编码器自行决定 QThreshold</li>
                    <li><b>自动双流</b>：同时编码完整分辨率和缩小视频流，根据率失真优化的判断换流，仅缩放关键帧和直线被参考帧 <code>ALTREF</code></li>
                    <li><b>自动齐发</b>：同时编码完整分辨率及所有缩放流（分母 9~16），根据率失真优化的判断换流，仅缩放关键帧和直线被参考帧 <code>ALTREF</code></li>
                </ul>
            </div>

            <h3>环路滤镜——去块滤镜</h3>
            <p>一种低通滤镜，基本原理已在 x265 教程中说明，此处不再赘述。AV1 中根据变换块的大小不同，亮度块支持 4-tap、8-tap 和 14-tap 低通，色度块支持 4-tap 和 6-tap 插值。14-tap 插值需要变换块的宽和高都超过 16。</p>

            <!--<p><b>低通滤镜</b>：相对于高通，带通；目标是过滤掉除了低频以外的频率，或在 N 个输入值中选最低。</p>-->

            <h3>环路滤镜——定向边缘强化滤镜 Constrained directional enhancement filter（CDEF）</h3>
            <p>一种结合了 Mozilla Daala 编解码器的定向去振铃滤镜（Directional de-ringing filter）与 Cisco Thor 编解码器的定向低通滤镜（Constrained low pass filter），在去块滤镜之后应用的 8x8 块去振铃算法，见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/tree/master/Docs/Appendix-CDEF.md">SVT-AV1 Readme</a> 。CDEF 主要由两个步骤组成：</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）定向</button>
            <div class="coll-content">
                <h4>（1/2）定向</h4>
                <p>检查当前块属于 8 种夹角图案中的哪一种。简单地说就是通过当前块与各个夹角图案中同位像素的值取平均，选其中差距最少的一个。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/cdef-direction-finding.png" alt="imageR" class="img-medium">
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）强化边缘</button>
            <div class="coll-content">
                <h4>（2/2）强化边缘</h4>
                <p>选择好夹角后，对判定为边缘纹理的临像素取值，进行类似子像素动态补偿的自适应 FIR 插值，分为两阶段：</p>
                <ol>
                    <li>初阶段沿着边缘所同的角度强化，使用初阶段的滤镜强度和抑制阻尼</li>
                    <li>二阶段以边缘 +45°、-45° 的两个角度强化，使用二阶段的滤镜强度和抑制阻尼</li>
                </ol>
                <p>两个阶段的强化计算都使用该式给出，输入待处理像素 <span class="text-blue-math">\( p\left(i,j\right) \)</span>：</p>
                <span class="text-blue-math">\[ P\left(i,j\right)=
                    p\left(i,j\right) + \sum_{m,n} w_{m,n} f\left(p\left(m,n\right)-p\left(i,j\right),S_{\text{Strength}},D_{\text{Damp}}\right)
                \]</span>
                <ul class="text-smaller">
                    <li><span class="text-blue-math">\( p\left(m,n\right) \)</span> 代表初阶段，或者二阶段的采样点</li>
                    <li><span class="text-blue-math">\( w \)</span> 代表插值采样点的权重</li>
                    <li><span class="text-blue-math">\( f \)</span> 代表非线性限位函数，根据 S，D 调节 <span class="text-blue-math">\( p\left(m,n\right) \)</span> 的强度</li>
                    <li><span class="text-blue-math">\( S \)</span> 代表强度，或者最大允许的对比度</li>
                    <li><span class="text-blue-math">\( D \)</span> 代表抑制阻尼 damping，用于抑制临像素的影响</li>
                </ul>
                <p>当 <span class="text-blue-math">\( p\left(m,n\right)-p\left(i,j\right) \)</span> 的值偏小时，<span class="text-blue-math">\( f\left(\ldots,S,D\right) = p\left(m,n\right)-p\left(i,j\right)\)</span>，代表当前状态下的滤镜运行类似于 FIR 插值；反过来当 <span class="text-blue-math">\( p\left(m,n\right)-p\left(i,j\right) \)</span> 的值偏大时，<span class="text-blue-math">\( f\left(\ldots,S,D\right) = 0 \)</span>，代表当前状态下滤镜无效。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/cdef-primary-filter.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：初阶段的插值取值和权重分配，权重取决于强度为奇数/偶数判断</p>
                    <img loading="lazy" src="files/loop-filter/cdef-secondary-filter.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：二阶段的插值取值和权重分配，权重固定。可以看到这种 FIR 类似于 SAO 滤镜</p>
                </div>
            </div>
            
            <h3>环路滤镜——还原滤镜 Restoration filter</h3>
            <p>在去块滤镜和 CDEF 之后，尝试还原已劣化采样（Degraded sample）的算法。噪声与失真的位置和程度在此变得不确定，所以常规的 FIR 滤镜会失效（滤镜强度与实际不符，反而产生新的失真，如 x265 中的 SAO）。</p>
            <p>还原滤镜定义了还原单元（Restortion unit，RU）的滤镜强度范围，在每个 64×64，128×128 和/或 256×256 RU 中分别设定滤镜类型和滤镜强度，分为：</p>
            <ul>
                <li>使用可拆分对称维纳滤镜 SSW</li>
                <li>使用子空间投影回归制导还原滤镜 SGR</li>
                <li>跳过</li>
            </ul>
            <p>滤镜强度取决于每个 RU 分别建立的 LMS 的自适应模型，由找到模型的最低点定义。</p>
            <ul>
                <li>SVT-AV1 中的滤镜类型设定为按整帧设定，而非逐 RU 设定。见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/tree/master/Docs/Appendix-Restoration-Filter.md"></a> 步骤 4</li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：最小均方值 LMS</button>
            <div class="coll-content">
                <h4>（1/7）最小均方值 Least mean square（LMS）</h4>
                <p>在先前讨论的最小二乘法中，“最小化”这个概念来自于“解”的不存在或不成立。既知无解，数据分析的目标就会变为“尽可能合理”，即最小化。</p>
                <p>LMS / <span class="text-blue-math">\( \text{min}\left(\sigma^2\right) \)</span> 是一种快速的贪心算法。其原理由通过迭代概率模型中的参数，从而逐步减小预测误差的均方值。效率高，而且易于实现，因此在实际应用中得到了广泛的应用。

                <h5>（1/7-1/3）概率构成</h5>
                <p>一套自适应算法由 <span class="text-blue-math">\( x_k \)</span>，<span class="text-blue-math">\( y_k \)</span> 两种输入信号构成：</p>
                <span class="text-blue-math">\[ \hat{s}_k = y_k-\hat{n}_k = s_k+\left(n_k-\hat{n}_k\right) \]</span>
                <ul>
                    <li><b>含噪信号值</b> <span class="text-blue-math">\( y_k = s_k + n_k \)</span> 此处视为第 k 帧或第 k 次采样</li>
                    <li><b>噪声相关采样</b> <span class="text-blue-math">\( x_k \)</span> 相比于采样，它更像是不断更新的预测值，与噪声的相关性 correlation 越高越好，此处视为第 k 次采样</li>
                    <li><b>噪声相关采样对噪声的预测</b> <span class="text-blue-math">\( \hat{n}_k \)</span>，即 <span class="text-blue-math">\( x_k \)</span> 对 <span class="text-blue-math">\( n_k \)</span> 的预测</li>
                    <li><b>对无噪信号的预测</b> <span class="text-blue-math">\( \hat{s}_k \)</span> 代表 <span class="text-blue-math">\( y_k \)</span> 与 <span class="text-blue-math">\( \hat{n}_k \)</span> 的差</li>
                </ul>

                <h5>（1/7-2/3）模型推导</h5>
                <p>将上式取平方并展开后得到：</p>
                <span class="text-blue-math">\[ \hat{s}_k^2 = s_k^2 + \left( n_k-\hat{n}_k \right)^2 + 2s_k\left( n_k-\hat{n}_k \right) \]</span>
                <p>套入平均值（即强度）函数 E 后得到均方值；<span class="text-blue-math">\( \mathbb{E}\left(\left( n_k-\hat{n}_k \right)^2\right) \)</span> 代表残余噪声的强度：</p>
                <span class="text-blue-math">\[ \mathbb{E}\left( \hat{s}_k^2 \right) = \mathbb{E}\left( s_k^2 \right) + \mathbb{E}\left(\left( n_k-\hat{n}_k \right)^2\right) + 2\mathbb{E}\left( s_k \left( n_k-\hat{n}_k \right)\right) \]</span>
                <p>取期望——由于预测的信号 <span class="text-blue-math">\( \hat{s}_k^2 \)</span> 与噪声并无相关性（correlation），所以噪声交叉项等于零。剩下残余噪声交叉项：</p>
                <span class="text-blue-math">\[ \mathbb{E}\left( \hat{s}_k^2 \right) = \mathbb{E}\left( s_k^2 \right) + \mathbb{E}\left(\left( n_k-\hat{n}_k \right)^2\right) \]</span>
                <p>重新排列后，得到的关系如下，即“预测信号的能量越小，则噪声残差强度越小，则信噪比越高”：</p>
                <span class="text-blue-math">\[ \mathbb{E}\left( s_k^2 \right) = \mathbb{E}\left( \hat{s}_k^2 \right) - \mathbb{E}\left(\left( n_k-\hat{n}_k \right)^2\right) \]</span>

                <h5>（1/7-3/3）现实意义</h5>
                <p>虽然上式非常难以理解，但现实中是有例可举的。如打靶所瞄准的目标大小和距离 <span class="text-blue-math">\( \mathbb{E}\left( s_k^2 \right) \)</span>  不变，只是将靶心 <span class="text-blue-math">\( \mathbb{E}\left( \hat{s}_k^2 \right) \)</span> 画的更小（<span class="text-blue-math">\( \mathbb{E}\left( \hat{s}_k^2 \right) \)</span> 趋近于 0），就导致了射击 <span class="text-blue-math">\(\mathbb{E}\left(\left( n_k-\hat{n}_k \right)^2\right) \)</span> 散布/噪声越小。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/lms-theory-asms.webp" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：ASMS。见 <a href="https://www.linkedin.com/pulse/aim-small-miss-shashikant-sethy-jwqdc">Shashikant Sethy</a></p>
                </div>
                <p>同样地，噪声残余、弹道散布虽然被尽可能地缩小，但仍然会存在；对应了查找的是最小值，而非确切解（least but not exact）的道理。相对于率失真优化，这相当于“对率失真优化的优化”。</p>
            </div>

            <!--<button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（?/?）维纳滤镜</button>
            <div class="coll-content">
                <h4>（?/?）维纳滤镜 Wiener filter</h4>
                <p>一种利用二维正交投影的线性回归分析进行制导的自动 FIR 滤镜。假设一项 FIR 滤镜被调用了 N 次，每次配有一项可调权重系数 W，则对失真程度 <span class="text-blue-math">\(n_k\)</span> 的预测为：</p>
                <span class="text-blue-math">\[ n_k = y_k-\hat{n}_k \hspace{1mm} = \hspace{1mm} y_k-W^T X_k \]</span>
                <p><span class="text-blue-math">\(X_k\)</span> 代表第 k 次采样中的噪声相关向量：</p>
                <span class="text-blue-math">\[ X_k = \begin{pmatrix} x_k \\ x_{k-1} \\ x_{k-2} \\ \cdots \\ x_{k-(N-1)} \end{pmatrix} \]</span>
                <p><span class="text-blue-math">\(W\)</span> 代表每个 <span class="text-blue-math">\(X_k\)</span> 上的可调节权重，此处以转置状态呈现，以便计算与 X 的点积：</p>
                <span class="text-blue-math">\[ W^T = \begin{pmatrix} w_k & w_{k-1} & w_{k-2} & \cdots & w_{k-(N-1)} \end{pmatrix} \]</span>
                <ul class="text-smaller">
                    <li>注：<span class="text-blue-math">\({}^T\)</span> 的“左旋 90°”用于两个“矩阵”间的标量点积，使得结果变为一个值，为：</li>
                    <li><span class="text-blue-math">\(W^T = 1 \times N\)</span></li>
                    <li><span class="text-blue-math">\(X_k = N \times 1\)</span></li>
                    <li>点积后的大小为 <span class="text-blue-math">\(1 \times 1\)</span></li>
                </ul>
                <p>将上式取平方，并展开为多项式后为：</p>
                <span class="text-blue-math">\[ n_k^2 = y_k^2 - 2y_k X_k^T W + W^T X_k X_k^T W \]</span>
                <p>再取均值得到：</p>
                <span class="text-blue-math">\[ \mathbb{E}\left(n_k^2\right) = 
                    \mathbb{E}\left(y_k^2\right) - 2\mathbb{E}\left(y_k X_k^T W\right) + \mathbb{E}\left(W^T X_k X_k^T W\right)
                \]</span>
                <p>与 1/8 节的算式（输入信号的强度等于预测的强度减失真残差的强度）对比：</p>
                <span class="text-blue-math">\[ \mathbb{E}\left( s_k^2 \right) = \mathbb{E}\left( \hat{s}_k^2 \right) - \mathbb{E}\left(\left( n_k-\hat{n}_k \right)^2\right) \]</span>
                <p>提取出 y 与 X 的互相关 P、向量转化结果 R 后为：</p>
                <span class="text-blue-math">\[ \mathbb{E}\left(n_k^2\right) = \mathbb{E}\left(y_k^2\right) + 2P^T W + W^T RW \]</span>
                
                <ul><li><span class="text-blue-math">\( P = \mathbb{E}\left(y_k X_k\right) \)</span></li></ul>
                <ul class="text-smaller">
                    <li><span class="text-blue-math">\(y_k\)</span> 为 <span class="text-blue-math">\(1\)</span></li>
                    <li><span class="text-blue-math">\(X_k\)</span> 为 <span class="text-blue-math">\(N \times 1\)</span></li>
                    <li>点积后的大小为 <span class="text-blue-math">\(N \cdot 1\)</span></li>
                </ul>
                <ul><li><span class="text-blue-math">\( R = \mathbb{E}\left(X_k X_k^T\right) \)</span></li></ul>
                <ul class="text-smaller">
                    <li><span class="text-blue-math">\(X_k\)</span> 为 <span class="text-blue-math">\(N \times 1\)</span></li>
                    <li><span class="text-blue-math">\(X_k^T\)</span> 为 <span class="text-blue-math">\(1 \times N\)</span></li>
                    <li>点积后的大小为 <span class="text-blue-math">\(N \cdot N\)</span></li>
                </ul>
                上式中，查找偏差/失真最小值转化为了对两个权重 W 的调整。<span class="text-blue-math">\(W_0\)</span> 与 <span class="text-blue-math">\(W_1\)</span> 张成的三维空间以及非线性的投影可以画作：
                </p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/wiener-filter-error-perf.png" alt="imageR" class="img-small">
                    <p class="text-gray-side mt-0">图：维纳滤镜使用矩阵乘法查找 LMS 的算式。见 <a href="https://www.ssyoutube.com/watch?v=yDouldS2g38">自适应滤镜讲座</a></p>
                </div>
                <p>由于预测的残余噪声与信号没有相关性，得到噪声残余，即 <span class="text-blue-math">\(\mathbb{E}\left(n_k^2\right)\)</span> 为最小的算式为：</p>
                <span class="text-blue-math">\[ W_{\text{opt}} = R^{-1} P \]</span>
                <ul class="text-smaller">
                    <li><span class="text-blue-math">\(R\)</span> 为 <span class="text-blue-math">\(N \times N\)</span></li>
                    <li><span class="text-blue-math">\(R^{-1}\)</span> 为倒数</li>
                </ul>
                <span class="text-blue-math text-smaller">\[A=\begin{bmatrix} a & b \\ c & d \end{bmatrix} \text{,} \hspace{2mm} A^{-1}= \frac{1}{ad-bc} \begin{bmatrix} d & -b \\ -c & a \end{bmatrix} \]</span>
                <ul class="text-smaller">
                    <li><span class="text-blue-math">\(P\)</span> 为 <span class="text-blue-math">\(N \times 1\)</span></li>
                    <li>点积后的大小为 <span class="text-blue-math">\(N \cdot 1\)</span></li>
                </ul>

                <p>在重建像素上，维纳滤镜通过 <span class="text-blue-math">\(w=2r+1\)</span>，生成奇数大小的卷积矩阵。r 代表半径。这些采样包含在矩阵 R 和 P 中。根据上式 R 由以下公式给出 X 的自协方差，即 <span class="text-blue-math">\(w \times w\)</span> 个采样（列）的向量转化结果（?）：</p>
                <span class="text-blue-math">\[ R=\mathbb{E}\left[XX^T\right] \]</span>
                <p>其中 <span class="text-blue-math">\(\mathbb{E}\left[·\right]\)</span> 对应于期望运算。Y 与 X 的互相关 P 为（?）：</p>
                <span class="text-blue-math">\[ P=\mathbb{E}\left[YX^T\right] \]</span>
                <p>这种方法需要为每个滤镜结果像素传输 <span class="text-blue-math">\(w \times w\)</span> 个值。但通过使其大小写为奇数，并搭配一些限制条件使用。</p>
            </div>-->

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：可拆分对称维纳滤镜 SSW</button>
            <div class="coll-content">
                <h4>（2/7）可拆分对称维纳滤镜 Separable symmetric wiener filter（SSW）</h4>
                <p>一种减少传输参数数量，并预制了强度配置的极简版维纳滤镜，起到自适应反失真的作用。其特点是利用 LMS 的制导，分别对横向和纵向卷积强度进行选择，并拼装出卷积内核，然后对扫描区域进行卷积计算。AV1 中，该卷积内核的动态更新（被精简）为每切换一个扫描区域 Restoration Unit（RU），就换一种预设好的横向，纵向强度。RU 支持 64x64~256x256 的范围。</p>
                <ul class="text-smaller">
                    <li>AV1 中，当确立一个方向的强度后，就不再尝试该方向的其他强度与另一方向所拼装出的卷积内核</li>
                </ul>
                <p>亮度平面使用 7、5 或 3-tap，色度平面使用 5 或 3-tap 的横向和纵向反失真滤镜组。一项 3x3 的卷积内核可为：</p>
                <span class="text-blue-math">\[ h = \begin{bmatrix}
                    h_{-1,-1} & h_{-1,0} & h_{-1,1} \\ h_{0,-1} & h_{0,0} & h_{0,1} \\ h_{1,-1} & h_{1,0} & h_{1,1}
                \end{bmatrix} \]</span>
                <p>将原画块、压缩失真块、和重建目标块分别设为 <span class="text-blue-math">\( B_0, B_1, B_2 \)</span>，则滤镜前后结果为（* 符表示卷积计算）：</p>
                <span class="text-blue-math">\[ B_2 = h * B_1 \]</span>
                <p>则重建块与原画误差越小越好（在此基础上推导 LMS）：</p>
                <span class="text-blue-math">\[ \text{MSE} = 
                    \frac{1}{N} \sum_{i,j} \left(B_0\left(i,j\right) - B_2\left(i,j\right)\right)^2
                \]</span>
                <ul class="text-smaller">
                    <li>解出 h 需要结合矩阵自相关性地计算维纳霍夫方程，由于步骤太多，所以这里当做黑箱看待</li>
                </ul>
                <p>为了降低计算空域复杂度，维纳滤镜被附加了一些限制条件，所以全称叫做可拆分对称维纳滤镜：</p>
                <ul class="text-smaller">
                    <li>滤镜结果必须支持拆分（纵向与横向）</li>
                    <li>每个横向与纵向滤镜都必须对称</li>
                    <li>横向与纵向滤镜的系子不可以设为可能值</li>
                    <li>二者的积为常数，AV1 中为 216</li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/wiener-convolution-kernel.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：SSW 滤镜分横纵向之别所查的卷积内核强度，以及利用对称性而只传输 3 个值的特性</p>
                </div>
                <p>注：从原版维纳滤镜的角度看，应当是内核在卷积过程中每位移一次就换一个（内核的所有值通过计算 LMS 得到），但这样可能会让计算过程慢数万倍；但反过来，优化版的 SSW 可能会因为对扫描区域的 LMS 预测不足、扫描区域设定过大、或所有滤镜预设都不适合当前画面的扫描区域而导致额外的失真。</p>
            </div>

            <!--<h4>（2/4）向量子空间 Vector subspace</h4>
            <p>在坐标系中划分区域，这个区域就是子空间；这个区域中的向量就是坐标系中支持所有向量中的一项子集 subset：</p>
            <ul>
                <li>包含 0 向量
                    <ul class="text-smaller"><li><span class="text-blue-math">\( 0=\begin{bmatrix} 0 \\ 0 \\ \cdots \\ 0 \end{bmatrix} \text{,} \hspace{2mm} 0 \in V \)</span></li></ul>
                </li>
                <li><b>加法封闭性 Addition closure：</b>
                    该子空间里的向量之间相加，得到的新向量在子空间内
                    <ul class="text-smaller"><li><span class="text-blue-math">\( v_1,v_2 \in V \text{,} \hspace{2mm} v_1+v_2 \in V \)</span></li></ul>
                </li>
                <li><b>乘法封闭性 Multiplication closure：</b>
                    该子空间里的向量与任意实数标量相乘，得到的新向量在子空间内
                    <ul class="text-smaller"><li><span class="text-blue-math">\( v_1 \in V \text{,} \hspace{2mm} k \in R \text{,} \hspace{2mm} v_1 k \in V \)</span></li></ul>
                </li>
            </ul>-->

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：向量的可视化</button>
            <div class="coll-content">
                <h4>复习：向量的可视化</h4>
                <p>向量的书面写法与点的坐标完全一样，如 <span class="text-blue-math">\(v = \begin{bmatrix} 0 \\ 1 \end{bmatrix}\)</span>。在坐标系中，它是一条从中心 0 点开始，拉伸到这个坐标上结束的双参数数量。只有大小的变量称为标量，向量在这个基础上增加了方向。将其写作坐标点，如三维空间下的 <span class="text-blue-math">\(v = \begin{bmatrix} x \\ y \\ z \end{bmatrix}\)</span> 是为了方便表示和计算，但也可以视作当前向量在坐标系中的投影的分量。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：复习：向量的线性组合</button>
            <div class="coll-content">
                <h4>（3/7）向量的线性组合 Linear combination of vectors</h4>
                <p>两个向量的组合由 <span class="text-blue-math">\(w=c_1v+c_2v\)</span> 给出。向量间的线性组合会产生新的向量。见 <a href="https://www.geogebra.org/m/WShmQvQU">GeoGebra 的可互动例</a></p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/linear-combination-of-vectors-1.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：不同于 <span class="text-blue-math">\(y=mx+b\)</span>，向量 <span class="text-blue-math">\(v\)</span> 并不参与坐标轴的映射，结果仅仅是坐标分量的相加</p>
                    <img loading="lazy" src="files/loop-filter/linear-combination-of-vectors-2.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：两个向量在不同权重下的组合</p>
                </div>
            </div>

            <!--<h4>复习：线性独立/线性无关 Linear independance</h4>
            <p>一组向量中，其中两者的线性组合不会得到这组向量中的任何向量。如：</p>
            <span class="text-blue-math">\[
                \begin{Bmatrix} \begin{bmatrix} 2 \\ 3 \end{bmatrix} \text{,} & \begin{bmatrix} 4 \\ 6 \end{bmatrix} \end{Bmatrix} \text{,} \hspace{2mm}
                w_1\begin{bmatrix} 2 \\ 3 \end{bmatrix} + w_2\begin{bmatrix} 4 \\ 6 \end{bmatrix}
            \]</span>-->

            <!--<h4>复习：正交 Orthogonal</h4>
            <p>构成垂直条件的状态，即找到点和线之间的最短距离。如点与直线，点与平面，直线与平面等。</p>-->
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：复习：欧几里得距离</button>
            <div class="coll-content">
                <h3>复习：欧几里得距离 Euclidean distance</h3>
                <p>摘自 x265 教程。通过计算两点分别取值的平方差 SSE 获得，如 GPS 的定位与实际位置的距离误差。此处用于测量向量的投影是否构成正交。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/entropy-coding/Euclidean-distance.svg" alt="image48" class="img-small">
                    <p class="text-gray-side mt-0">图：欧几里得距离利用平方差的算法，见<a href="https://en.wikipedia.org/wiki/Euclidean_distance">维基百科</a></p>
                </div>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：正交投影计算推导</button>
            <div class="coll-content">
                <h4>（4/7）正交投影计算推导 Orthogonal projection</h4>
                <p>本节完全取自 <a href="https://tidystat.com/orthogonal-projection/">tidystat</a>。设定 <span class="text-blue-math">\( \vec{X}=\left[\begin{array}{c} 3 \\ 2 \end{array} \right] \)</span>、<span class="text-blue-math">\( \vec{Y}=\left[\begin{array}{c} 1 \\ 3 \end{array} \right] \)</span> 两条向量，则 <span class="text-blue-math">\( \vec{Y} \)</span> 与 <span class="text-blue-math">\( \vec{X} \)</span> 的最短距离与 <span class="text-blue-math">\( \vec{X} \)</span> 构成的直线垂直：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/orthogonal-projection-finding.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：见<a href="https://tidystat.com/orthogonal-projection/">tidystat</a></p>
                </div>
                <ul>
                    <li><span class="text-blue-math">\( \vec{Y} \)</span> 落在 <span class="text-blue-math">\( \vec{X} \)</span> 构成的直线上之后得到预测向量 <span class="text-blue-math">\( \hat{Y} \)</span>，也就是正交投影</li>
                    <li>虽然图中所画 <span class="text-blue-math">\( \hat{Y} \)</span> 的起点是（1，3），但实际上它的起点是 0</li>
                    <li><span class="text-blue-math">\( \hat{Y} \)</span> 与 <span class="text-blue-math">\( \vec{Y} \)</span> 间越发垂直，距离就越短</li>
                </ul>

                <h5>（4/7-1/2）初步推演缩放值 c</h5>
                <p>若向量 <span class="text-blue-math">\( \vec{v} \)</span> 和向量 <span class="text-blue-math">\( \vec{w} \)</span> 的点积为零，则向量 <span class="text-blue-math">\( \vec{v} \)</span> 与 <span class="text-blue-math">\( \vec{w} \)</span> 垂直，即：</p>
                <span class="text-blue-math">\[ \vec{v} \cdot \vec{w} = 0 \]</span>
                <ul>
                    <li>例如，<span class="text-blue-math">\( \vec{v} = \left[\begin{array}{c} 1 \\ -2 \end{array} \right] \)</span>；<span class="text-blue-math">\( \vec{w} = \left[\begin{array}{c} 2 \\ 1 \end{array} \right] \)</span>，则 <span class="text-blue-math">\( \vec{v} \cdot \vec{w} = 1 \times 2 + -2 \times 1 = 0 \)</span></li>
                </ul>
                <p>反过来将垂直作为限制条件，得到查找最短距离的算式：</p>
                <span class="text-blue-math">\[ \left( \hat{Y}-\vec{Y} \right) \cdot \vec{X} = 0\]</span>
                <p>从上图可见，<span class="text-blue-math">\( \hat{Y} \)</span> 是向量 <span class="text-blue-math">\( \vec{X} \)</span> 长度的缩放，所以转换上式为：</p>
                <span class="text-blue-math">\[ \left( c\vec{X}-\vec{Y} \right) \cdot \vec{X} = 0 \]</span>
                <p>将括号展开：</p>
                <span class="text-blue-math">\[ c \vec{X} \cdot \vec{X} – \vec{Y} \cdot \vec{X} = 0 \]</span>
                <p>换算为：</p>
                <span class="text-blue-math">\[ c = \frac{\vec{X} \cdot \vec{Y}}{\vec{X} \cdot \vec{X}} \]</span>
                <p>将点积部分展开：</p>
                <span class="text-blue-math">\[
                    \vec{X} \cdot \vec{Y} = x_1 y_1 + x_2 y_2 + \ldots + x_n y_n = \sum
                    \]\[
                    \vec{X} \cdot \vec{X} = x_1^2 + x_2^2 + \ldots + x_n^2
                \]</span>

                <h5>（4/7-2/2）彻底推演缩放值 c</h5>
                <p>通过取导另一种查找最短距离的方法实现。使用欧几里得距离（平方差）对比 <span class="text-blue-math">\( \vec{X} \)</span> 任意一点中的距离 <span class="text-blue-math">\( \vec{Y} \)</span> 的长度，得到最短距离为：</p>
                <span class="text-blue-math">\[\text{min} \sum_{i} \left(cX_{i}-Y\right)^2\]</span>
                <p>这个算式与缩放值 c 构成二次函数关系：</p>
                <span class="text-blue-math">\[\frac{\delta}{\delta c} \sum_i (cX_{i}-Y_{i})^2 = 0\]</span>
                <p>取导数与换算结果为：</p>
                <span class="text-blue-math">\[ \begin{align} \frac{\delta}{\delta c} \sum_i (cX_{i}-Y_{i})^2 &= \sum_i 2 X_{i} (cX_{i}-Y_{i}) \\ &=2 \sum_i  X_{i} (cX_{i}-Y_{i}) \\ &= 2 \sum_i ( cX_{i} X_{i}-X_{i}Y_{i}) \end{align} \]</span>
                <p>最后，转换到向量点积的格式，得到算式：</p>
                <span class="text-blue-math">\[ cX^{T} \cdot X - X^T \cdot Y = 0 \]
                \[ c= (X^{T} \cdot X)^{-1} \cdot X^{T} \cdot Y \]</span>
            </div>

            <h4>复习：常数向量 Constant vector / Fixed vector</h4>
            <p>在任何维度空间中都不会因为变换而缩放或旋转（分量保持不变）的向量，一般作为参考（bound）使用，所谓的不变是通过不与坐标系锚定（不计算）实现的。可以视作客制化的 X 轴。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（5/7）向量正交投影出的均值</button>
            <div class="coll-content">
                <h4>（5/7）向量正交投影出的均值 Mean as an orthogonal projection</h4>
                <p>本节通过计算中解释“均值”的出处。见 <a href="https://tidystat.com/linear-regression-and-orthogonal-projection/">tidystat.com</a></p>
                <ol>
                    <li>设定 n 维空间中的向量：
                        <ul class="text-smaller">
                            <li><span class="text-blue-math">\( \vec{y} \in \mathbb{R}^n \)</span>，代表 n 维空间中一系列采样点的坐标</li>
                            <li><span class="text-blue-math">\( \vec{x} \)</span>，代表 n 维空间的常数向量分量：</li>
                        </ul>
                        <span class="text-blue-math">\[ \vec{x}=\left[\begin{array}{c} 1 \\ 1 \\ \vdots \\ 1 \end{array} \right] \in \mathbb{R}^n \]</span>
                    </li>
                    <li>设定子空间 Subspace L：
                        <ul class="text-smaller">
                            <li>由常数向量 <span class="text-blue-math">\( \vec{x} \)</span> 张成（spanned）；代表所有向量 <span class="text-blue-math">\( \vec{x} \)</span> 的线性组合：</li>
                        </ul>
                        <span class="text-blue-math">\[ L = \{ c\vec{x} \mid c \in \mathbb{R} \} \]</span>
                        <ul class="text-smaller">
                            <li>这个子空间只有一个基向量 <span class="text-blue-math">\( \vec{x} \)</span> 张成，所以其空间是一维的</li>
                        </ul>
                    </li>
                    <li>找到 <span class="text-blue-math">\( \vec{y} \)</span> 与子空间 L 的正交投影：
                        <ul class="text-smaller">
                            <li>即 <span class="text-blue-math">\( \vec{y} \)</span> 与 L 间的 LMS 最短距离：</li>
                        </ul>
                        <span class="text-blue-math">\[
                            \operatorname{Projection}_{L}(\vec{y}) = \frac{\langle \vec{y}, \vec{x} \rangle}{\langle \vec{x}, \vec{x} \rangle} \vec{x}
                        \]</span>
                        <ul class="text-smaller">
                            <li>换算后，出现了均值（÷n）的计算构成：</li>
                            <li><span class="text-blue-math">\( \langle \vec{y}, \vec{x} \rangle = y_1 + y_2 + \dots + y_n = \sum_{i=1}^{n} y_i \)</span></li>
                            <li><span class="text-blue-math">\( \langle \vec{x}, \vec{x} \rangle = 1^2 + 1^2 + \dots + 1^2 = n \)</span></li>
                        </ul>
                        <span class="text-blue-math">\[
                            \operatorname{Projection}_{L}(\vec{y}) = \left( \frac{\sum_{i=1}^{n} y_i}{n} \right) \vec{x}
                        \]</span>
                        <ul class="text-smaller">
                            <li>这说明 <span class="text-blue-math">\( \vec{y} \)</span> 投影到 L 的结果是常数向量，其每个值都是 <span class="text-blue-math">\( \vec{y} \)</span> 分量的最小均值——LMS：</li>
                        </ul>
                        <span class="text-blue-math">\[ \left[\begin{array}{c} \bar{y} \\ \bar{y} \\ \vdots \\ \bar{y} \end{array} \right], \quad \text{where } \bar{y} = \frac{1}{n} \sum_{i=1}^{n} y_i \]</span>
                        <ul class="text-smaller">
                            <li>其中的 <span class="text-blue-math">\( \bar{y} \)</span> 就是“预测信号能量最小”的值</li>
                        </ul>
                    </li>
                </ol>
            </div>
            
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（6/7）二维正交投影的线性回归分析法</button>
            <div class="coll-content">
                <h4>（6/7）正交投影的线性回归分析法</h4>
                <h5>（6/7-1/2）二维空间分析</h5>
                <p>虽然 4/7~5/7 的过程曲折，但是回到二维坐标系后，这些概念就会落入线性回归的“点到直线的最短距离”题目里。</p>
                <p>设二维常数向量 <span class="text-blue-math">\( \vec{X_0}=\left[\begin{array}{c} 1 \\ 1 \end{array} \right] \)</span>，其张成的子空间 L 是一条 <span class="text-blue-math">\( y=x \)</span> 直线。从 <span class="text-blue-math">\( \vec{Y} \)</span> 找到与 L 垂直的线需要计算斜度 <span class="text-blue-math">\( \beta \)</span>：</p>
                <span class="text-blue-math">\[ \vec{Y} = \beta_0 X_0 = \beta_0 \left[\begin{array}{c} 1 \\ 1 \end{array}\right] \]</span>
                <p>这里的坐标轴由 2 次观测 Observation 得到，观测的具体方法由算法决定。因此，采样 <span class="text-blue-math">\( Y \)</span> 的向量坐标代表了两次观测得到的值。这里跳过观测，设定 <span class="text-blue-math">\( Y = \left[\begin{array}{c} 1 \\ 3 \end{array}\right] \)</span>。</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/orthogonal-projection-mean-visualization.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：见<a href="https://tidystat.com/linear-regression-and-orthogonal-projection/">tidystat</a></p>
                </div>
                <p>找到 <span class="text-blue-math">\( \beta_0 \)</span> 需要满足以下条件：</p>
                <ul class="text-smaller">
                    <li>与子空间 L 垂直</li>
                    <li>残差越小越好（ASMS）</li>
                </ul>
                <p>5/7 的推导说明了 <span class="text-blue-math">\( \beta_0 \)</span> 代表向量 <span class="text-blue-math">\( \vec{Y} \)</span> 的均值，所以：</p>
                <span class="text-blue-math">\[ \beta_0 = \frac{1+3}{2} = 2 \]</span> 
                <p>而投影出的坐标，也就是预测向量为：</p>
                <span class="text-blue-math">\[ \hat{Y} = \left[\begin{array}{c} 2 \\ 2 \end{array}\right] \]</span>

                <h5>（6/7-2/2）三维空间分析</h5>
                <p>AV1 的 SGR 还原滤镜使用了三维空间分析。这里的坐标轴由 3 次观测得到，拥有两个 X 以及两个配套的斜度：</p>
                <span class="text-blue-math">\[ \vec{Y} = \beta_0 \vec{X_0} + \beta_1 \vec{X_1} \]</span>
                <p>为了演示，所以直接设定这些数据（X 为矩阵）为：</p>
                <span class="text-blue-math">\[ \vec{Y} = \left[\begin{array}{c} 1 \\ 3 \\ 1 \end{array} \right]
                \text{;} \hspace{2mm}
                \vec{X} =\left[\begin{array}{c} 1 & 2 \\ 1 & 3 \\ 1 & 3 \end{array} \right] \]</span>
                <p>由 <span class="text-blue-math">\( \vec{X_0} \)</span>、<span class="text-blue-math">\( \vec{X_1} \)</span> 构成的子空间 L 可以视作矩阵的列，所以也叫列空间 Column space：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/orthogonal-projection-in-3d-1.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：见<a href="https://tidystat.com/linear-regression-and-orthogonal-projection/">tidystat</a></p>
                </div>
                <p>但列空间 L 实际上并不局限于 <span class="text-blue-math">\( \vec{X_0} \)</span>、<span class="text-blue-math">\( \vec{X_1} \)</span> 之间。与二维中的例子一样，这个子空间由直线构成，而且是两个无限长的不平行直线（虽然这里的坐标是手动指定的），所以这个 L 实际上是一个无限大的二维平面，每个点对应了表示 L 的矩阵中某列的值：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/orthogonal-projection-in-3d-2.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：见<a href="https://tidystat.com/linear-regression-and-orthogonal-projection/">tidystat</a></p>
                </div>
                <p>这里的斜度由 5/7 所推导出的正交投影计算得到（查找列空间 L 上的点）：</p>
                <span class="text-blue-math">\[ \beta = (X^{T} \cdot X)^{-1} \cdot X^{T} \cdot Y =
                    \]\[
                \left(\left[\begin{array}{c} 1 & 1 &1 \\ 2 & 3 & 3 \end{array}\right] \left[\begin{array}{c} 1 & 2\\ 1 & 3 \\ 1 & 3 \end{array}\right]\right)^{-1} \left[\begin{array}{c} 1 & 1 &1 \\ 2 & 3 & 3 \end{array}\right] \left[\begin{array}{c} 1\\ 3 \\ 1 \end{array} \right] =\left[\begin{array}{c} -1 \\ 1 \end{array} \right]
                \]</span>
                <p>从而推导出预测向量 <span class="text-blue-math">\( \hat{Y} \)</span> 的坐标：</p>
                <span class="text-blue-math">\[ \hat{Y} = \beta_0 \vec{X_0} + \beta_1 \vec{X_1} = -1\left[\begin{array}{ccc} 1 \\ 1 \\ 1 \end{array} \right] +1\left[\begin{array}{c} 2 \\ 3 \\ 3 \end{array} \right] = \left[\begin{array}{ccc} 1 \\ 2 \\ 2 \end{array} \right] \]</span>
                <p>投影结果如图：</p>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/orthogonal-projection-3d-1.png" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：见<a href="https://tidystat.com/linear-regression-and-orthogonal-projection/">tidystat</a></p>
                </div>
                <!--<p>n 维空间下，这种线性回归分析的矩阵写作：</p>
                <span class="text-blue-math">\[
                    \underbrace{
                        \begin{matrix} \text{obs}_1 \\ \text{obs}_2 \\ \vdots \\ \text{obs}_n \end{matrix}
                        \begin{pmatrix}
                            \text{1} & x_{1_1} & x_{1_2} & x_{1_{\ldots}} & x_{1_p} \\
                            \text{1} & x_{2_1} & x_{2_2} & x_{2_{\ldots}} & x_{2_p} \\
                            \vdots & \vdots & \vdots & \ddots & \vdots \\
                            \text{1} & x_{n_1} & x_{n_2} & x_{n_{\ldots}} & x_{n_p} \\
                        \end{pmatrix}
                    }_{X}
                    \underbrace{ \begin{pmatrix} \beta_0 \\ \beta_1 \\ \vdots \\ \beta_p \end{pmatrix} }_{\cdot \beta} =
                    \underbrace{ \begin{pmatrix} y_0 \\ y_1 \\ \vdots \\ y_n \end{pmatrix} }_{=Y}
                \]</span>-->
            </div>

            <!--<p>将噪声插入预测函数中，构成方差；噪声越强则：</p>
            <span class="text-blue-math">\[ E\left( \left(v[n]\right)^2 \right) = \sigma^2_v \]</span>-->
            
            <!--<p>将所有采样插入预测函数中，构成自相关性：</p>
            <span class="text-blue-math">\[  E\left( \left(x[n]x[n-k]\right) \right) = r\left[k\right] \]</span>
            <span class="text-blue-math">\[ X[n] = -a_1 x[n-1] + -a_2 x[n-2] + \ldots + -a_m x[n-m] + v[n] \]</span>
            <ul class="text-smaller">
                <li><span class="text-blue-math">\( x[\ldots] \)</span> 代表采样</li>
                <li><span class="text-blue-math">\( a_1, a_2, \ldots \)</span> 代表滤镜强度</li>
                <li><span class="text-blue-math">\( v[n] \)</span> 代表噪声</li>
            </ul>-->

            <!--<p><b>移动平均滤镜 Moving average（MA）</b> 定义了一道长度固定的采样范围；每采样一次，这个范围后移一个单位，抛弃最早输入的值，再输出这个范围里的平均值实现。这种方法非常简单，但权重完全平均的特性也使其缺乏自适应能力，查找 LMS 的性能很差。</p>-->

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（7/7）子空间投影回归制导滤镜 SGR</button>
            <div class="coll-content">
                <h4>（7/7）子空间投影回归制导滤镜 Self-Guided Restoration Filter with Subspace Projection Regression（SGR）</h4>
                <p>通过简单空域滤镜，根据两种半径与方差 <span class="text-blue-math">\(\{r_1, e_1\},\{r_2, e_2\}\)</span> 作为参数生成 <span class="text-blue-math">\(X_1 \text{,} \hspace{2mm} X_2\)</span> 两张引导图像 Guided image，再分别减去劣化采样（压缩失真图像）<span class="text-blue-math">\(X\)</span> 得到引导叠加层 <span class="text-blue-math">\(X_1-X \text{,} \hspace{2mm} X_2-X\)</span>，将两份叠加层分权重相加，再与劣化采样 <span class="text-blue-math">\(X\)</span> 相加还原图像 <span class="text-blue-math">\(X_r\)</span>：</p>
                <span class="text-blue-math">\[X_r = \beta_1\left( X_1-X \right) + \beta_2\left( X_2-X \right) + X\]</span>
                <ul>
                    <li>注：<span class="text-blue-math">\(Y = X_r = X_{\text{source}} - X\)</span></li>
                </ul>
                <p>权重 <span class="text-blue-math">\(\beta_1, \beta_2\)</span> 由正交投影点积计算得到 LMS 值：</p>
                <span class="text-blue-math">\[ \beta_1 =
                    \left( \left(X_1 - X\right)^T \left(X_1 - X\right) \right)^{-1} \left(X_1 - X\right)^T
                \]\[ \beta_2 =
                    \left( \left(X_2 - X\right)^T \left(X_2 - X\right) \right)^{-1} \left(X_2 - X\right)^T 
                \]</span>
                <div class="align-items-center">
                    <img loading="lazy" src="files/loop-filter/sgr-filter.png" alt="imageR" class="img-medium">
                </div>
            </div>
            <!--<button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（8/8）投影矩阵计算</button>
            <div class="coll-content">
                <h4>（8/8）投影矩阵计算</h4>
                <p>一种线性代数计算。设矩阵 A 为源，投影的斜度为 P，则：</p>
                <span class="text-blue-math">\[ P = A(A^TA)^{-1}A^T \]</span>
                <p>以下为演算过程。设矩阵 A：</p>
                <span class="text-blue-math">\[ A = \begin{bmatrix} 1 & 2 \\ 3 & 4 \\ 5 & 6 \end{bmatrix} \]</span>
                <p>计算 A 的转置 Transpose：</p>
                <span class="text-blue-math">\[
                    A^T = \begin{bmatrix} 1 & 3 & 5 \\ 2 & 4 & 6 \end{bmatrix}
                \]</span>
                <span class="text-blue-math text-smaller">\[
                    \begin{bmatrix} 1 & 2 \\ 3 & 4 \\ 5 & 6 \end{bmatrix} \rightarrow
                    \begin{bmatrix} 1 & 2 & 0 \\ 3 & 4 & 0 \\ 5 & 6 & 0 \end{bmatrix} \rightarrow
                    \begin{bmatrix} 1 & 3 & 5 \\ 2 & 4 & 6 \\ 0 & 0 & 0 \end{bmatrix} \rightarrow
                    \begin{bmatrix} 1 & 3 & 5 \\ 2 & 4 & 6 \end{bmatrix}
                \]</span>
                <p>计算叉乘 <span class="text-blue-math">\(A^T A\)</span>：</p>
                <span class="text-blue-math">\[A^T A =
                    \begin{bmatrix} 1 & 3 & 5 \\ 2 & 4 & 6 \end{bmatrix}
                    \begin{bmatrix} 1 & 2 \\ 3 & 4 \\ 5 & 6 \end{bmatrix}
                    \]\[ = 
                    \begin{bmatrix} 1\cdot1+3\cdot3+5\cdot5 & 1\cdot2+3\cdot4+5\cdot6 \\ 2\cdot1+4\cdot3+6\cdot5 & 2\cdot2+4\cdot4+6\cdot6 \end{bmatrix}
                    \]\[ =
                    \begin{bmatrix} 35 & 44 \\ 44 & 56 \end{bmatrix}
                \]</span>
                <p>计算行列式 Determinant：</p>
                <span class="text-blue-math">\[
                    M = \begin{bmatrix} a & b \\ c & d \end{bmatrix} \text{,} \hspace{2mm} \text{det}\left(M\right) = ad-cb
                    \]\[
                    \text{det}\left(A^T A\right) = 196
                \]</span>
                <p>计算矩阵逆 Inverse：</p>
                <span class="text-blue-math">\[
                    M^{-1} = \begin{bmatrix} d & -b \\ -c & a \end{bmatrix} \div \text{det}\left(M\right)
                    \]\[ \left(A^T A\right)^{-1} =
                    \begin{bmatrix} 35 & 44 \\ 44 & 56 \end{bmatrix} \div 196
                    \]\[ = 
                    \begin{bmatrix} 0.2857 & -0.2245 \\ -0.2245 & 0.1786 \end{bmatrix}
                \]</span>
                <p>计算 <span class="text-blue-math">\(A \left( A^T A \right)^{-1}\)</span>：</p>
                <span class="text-blue-math">\[
                    A(A^T A)^{-1} = \begin{bmatrix} 1 & 2 \\ 3 & 4 \\ 5 & 6 \end{bmatrix}
                    \begin{bmatrix} 0.2857 & -0.2245 \\ -0.2245 & 0.1786 \end{bmatrix}
                    \]\[
                    = \begin{bmatrix} -0.1633 & 0.1327 \\ -0.2857 & 0.2245 \\ -0.4082 & 0.3163 \end{bmatrix}
                \]</span>
                <p>计算 <span class="text-blue-math">\(A \left( A^T A \right)^{-1} A^T\)</span>：</p>
                <span class="text-blue-math">\[
                    P = \begin{bmatrix} -0.1633 & 0.1327 \\ -0.2857 & 0.2245 \\ -0.4082 & 0.3163 \end{bmatrix}
                    \begin{bmatrix} 1 & 3 & 5 \\ 2 & 4 & 6 \end{bmatrix}
                    \]\[
                    = \begin{bmatrix} 0.3571 & 0.4286 & 0.5000 \\ 0.4286 & 0.5306 & 0.6327 \\ 0.5000 & 0.6327 & 0.7653 \end{bmatrix}
                \]</span>
            </div>-->

            <h2 id="h2-13">SVT-AV1 编码器</h2>

            <h3>SVT-AV1——命令行格式</h3>
            <h4>（1/4）使用 ffmpeg 内置的 libsvtav1</h4>
            <p>以下命令指定了（API 格式的）编码设置命令，ffmpeg 拷贝音频，输出 .mp4 封装文件：</p>
            <pre><code class="text-smaller language-powershell">
ffmpeg.exe -i .\输入.mkv -c:v libsvtav1 -preset 3 -crf 30 -svtav1-params "keyint=12s:sharpness=-2:film-grain=20" -c:a copy .\输出.mp4
            </code></pre>
            <p>ffmpeg 命令行中，如原本 <code class="code-bold">--param1 value --param2 value</code> 需要以 API 格式书写，为 <code class="code-bold">-xxx-params "param1=value:param2=value"</code>，而兼容性略好的编码库则会提供一小部分 <code class="code-bold">-param1 value</code> 的格式于 <code class="code-bold">-c:v libxxx</code> 与 <code class="code-bold">-xxx-params</code> 之间，配置起来会容易一点。</p>
            <p>以下命令的格式同上，但设置的参数更多一些，同样指定拷贝音频，使用 .mp4 封装文件：</p>
            <pre><code class="text-smaller language-powershell">
ffmpeg.exe -i .\输入.mkv -c:v libsvtav1 -preset 4 -crf 35 -svtav1-params "keyint=12s:enable-variance-boost=1:variance-boost-curve=2:variance-boost-strength=3:mastering-display=G(0.2649,0.6900)B(0.1500,0.0600)R(0.6800,0.3200)WP(0.3127,0.3290)L(1000.0,1)" -c:a copy .\输出.mp4
            </code></pre>

            <h4>（2/4）使用 Y4M 管道输出到 SvtAv1EncApp</h4>
            <p class="text-gray-side">注：使用该选项则建议手动编译 SvtAv1EncApp.exe，以获取 SVT-AV1 的最新稳定版。</p>
            <p> ffmpeg、avs2yuv、avs2pipemod 等到独立 SVT-AV1 编码器程序，使用 <code>-strict -1</code> 解除 10bit y4m 管道格式限制，SVT-AV1 使用 12 秒关键帧间隔，CRF 35，预设 3，启用量化矩阵量化模式，完整显示进度条；导出未封装视频流：</p>
            <pre><code class="text-smaller language-powershell">
ffmpeg.exe -i .\输入YUV420空间10bit位深视频.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict -1 - | SvtAv1EncApp.exe -i - --keyint 12s --crf 35 --enable-qm 1 --preset 3 --progress 2 -b .\输出.ivf

avs2yuv.exe .\输入.avs -csp &lt;色彩空间&gt; -depth &lt;位深&gt; - | SvtAv1EncApp.exe -i - &lt;其它命令&gt; -b .\输出.ivf

avs2pipemod.exe .\输入.avs -y4mp | SvtAv1EncApp -i - &lt;其它命令&gt; -b .\输出.ivf
            </code></pre>

            <h4>（3/4）VapourSynth VSPipe</h4>
            <h5>R.54 - API 3.0:</h5>
            <pre><code class="text-smaller language-powershell">
VSpipe.exe &lt;源.vpy&gt; --y4m - | SvtAv1EncApp.exe -i - &lt;其它命令&gt; -b .\输出.ivf
            </code></pre>
            <h5>R.55 - API 4.0</h5>
            <pre><code class="text-smaller language-powershell">
VSpipe.exe &lt;源.vpy&gt; -c y4m - | SvtAv1EncApp.exe -i - &lt;其它命令&gt; -b .\输出.ivf

VSpipe.exe &lt;源.vpy&gt; --container y4m - | SvtAv1EncApp.exe -i - &lt;其它命令&gt; -b .\输出.ivf
            </code></pre>

            <h4>（4/4）导入未压缩 YUV</h4>
            <p>导入有元数据的 yuv for mepg 视频流（即含元数据的 YUV），指定使用 12 秒关键帧间隔，CRF 30，预设 3，懈怠显示进度条；导出未封装视频流：</p>
            <pre><code class="text-smaller language-powershell">
SvtAv1EncApp.exe -i .\输入.y4m --keyint 12s --crf 30 --preset 3 -b .\输出.ivf
            </code></pre>
            <p>导入无元数据的纯 yuv 视频流，并手动指定使用 bt709 色彩，3840x2160x24 大小，yuv420 空间，10bit 位深；指定使用 12 秒关键帧间隔，CRF 30，预设 3，SSIM 率失真优化，完整显示进度条；导出未封装视频流：</p>
            <pre><code class="text-smaller language-powershell">
SvtAv1EncApp.exe -i .\输入.yuv -w 3840 -h 2160 --input-depth 10 --color-format 1 --matrix-coefficients 1 --transfer-characteristics 1 --color-primaries 1 --fps 24 --keyint 12s --crf 30 --preset 3 --tune 2 --progress 2 -b .\输出.ivf
            </code></pre>

            <h3>SVT-AV1——参数与预设</h3>
            <p>来源于 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Parameters.md">SVT-AV1 官方文档</a>。注意随着编码器的版本更迭，参数的写法已经相较于较早版本有了变化。</p>
            <code class="code-bold">&#45;&#45;version</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;开关&gt;显示当前编译版本。</p>

            <h4>（1/12）IO</h4>
            <code class="code-bold">-i</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;字符串路径&gt;<u>输入</u>待压制的 .y4m，.yuv 流文件；或者选用 <code>-</code> 从管道输入。</p>
            <code class="code-bold">-b</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;字符串路径&gt;<u>输出</u>未封装视频流文件 .ivf 的路径。</p>
            <!--<code class="code-bold">-c</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;字符串路径&gt;<u>输入</u>配置文件（?）。</p>-->
            <code class="code-bold">-n</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数帧数&gt;指定压制帧的数量。</p>
            <code class="code-bold">--skip</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数帧数&gt;指定跳过前 n 帧后开始压制。</p>

            <!--<h4>（2/?）输入图片序列</h4>
            <p>注：可能仅支持管道输入</p>
            <code class="code-bold">&#45;&#45;inj</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关&gt;启用图片序列输入模式。</p>
            <code class="code-bold">&#45;&#45;inj-frm-rt</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~240，默认 60&gt;指定图片序列帧率。</p>-->

            <h4>（1/12——1/1）日志 IO</h4>
            <code class="code-bold">&#45;&#45;errlog</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;字符串路径&gt;<u>输出</u>报错信息到文件（txt）的路径。</p>
            <code class="code-bold">&#45;&#45;enable-stat-report</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关&gt;启用逐帧 PSNR / SSIM 统计功能。</p>
            <code class="code-bold">--stat-file</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;字符串路径&gt;<u>输出</u>逐帧 PSNR / SSIM 结果到文件。</p>
            <code class="code-bold">&#45;&#45;progress</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 1（懈怠）&gt;启用并指定进度条展示，1 与 2 为进度条样式。</p>
            <ul class="list-dotless text-smaller font-monospace">
                <li><b>1</b>：<code>Encoding         29</code></li>
                <li><b>2</b>：<code>Encoding frame   29 629.42 kbps 2.06 fps</code></li>
            </ul>

            <h4>（2/12）格式设定</h4>
            <code class="code-bold">&#45;&#45;input-depth</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;8/10，默认 8，直接导入 .yuv 或从 rawvideo pipe 中导入时必须指定&gt;指定输入视频的位深精度。与视频不符会导致主要为绿屏的严重画面错误。</p>
            <code class="code-bold">-w</code>；<code class="code-bold">-h</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 4~16384；整数 4~8704&gt;指定输入视频的宽、高。</p>
            <code class="code-bold">&#45;&#45;fps</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 1~240，默认 25&gt;指定视频帧率，可选用后者以精确表示小数帧率。</p>
            <code class="code-bold">&#45;&#45;fps-num</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~4294967295，默认 60000&gt;指定视频帧率分子，便于表示小数帧率。</p>
            <code class="code-bold">&#45;&#45;fps-denom</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~4294967295，默认 1000；整数分子；整数分母&gt;指定视频帧率分母，便于表示小数帧率。</p>
            <code class="code-bold">--color-range</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：studio&gt;指定使用有限或完整位深格式——0：studio，1：full</p>
            <code class="code-bold">--tile-rows</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~6，默认 0：<code>log2(x)</code>&gt;指定横向瓦片数量，默认根据分辨率自适应。</p>
            <code class="code-bold">--tile-columns</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~4，默认 0：<code>log2(x)</code> 429&gt;指定纵向瓦片数量，默认根据分辨率自适应。</p>

            <h4>（3/12）规格与级别</h4>
            <code class="code-bold">&#45;&#45;profile</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 0（main）&gt;指定输出视频规格——0：main，1：high，2：professional。</p>
            <table class="table-center mt-3">
                <thead>
                    <tr class="t-invert-dark">
                        <th>规格</th>
                        <th>Main</th>
                        <th>High</th>
                        <th>Professional</th>
                    </tr>
                    <tr class="t-light-gray">
                        <th class="px-3">采样\位深</th>
                        <th class="px-3">8/10 bit</th>
                        <th class="px-3">8/10 bit</th>
                        <th class="px-3">8/10/12 bit</th>
                    </tr>
                </thead>
                <tbody class="align-items-center">
                    <tr class="border-bottom">
                        <th class="px-3">YUV 4:0:0</th>
                        <td class="px-3">√</td>
                        <td class="px-3">√</td>
                        <td class="px-3">√</td>
                    </tr>
                    <tr class="border-bottom">
                        <th class="px-3">YUV 4:2:0</th>
                        <td class="px-3">√</td>
                        <td class="px-3">√</td>
                        <td class="px-3">√</td>
                    </tr>
                    <tr class="border-bottom">
                        <th class="px-3">YUV 4:2:2</th>
                        <td class="px-3 t-light-gray">×</td>
                        <td class="px-3 t-light-gray">×</td>
                        <td class="px-3">√</td>
                    </tr>
                    <tr>
                        <th class="px-3">YUV 4:4:4</th>
                        <td class="px-3 t-light-gray">×</td>
                        <td class="px-3">√</td>
                        <td class="px-3">√</td>
                    </tr>
                </tbody>
            </table>
            <p class="text-gray-side pl-5 m-0 align-items-center">表：见 <a href="https://en.wikipedia.org/wiki/AV1#Profiles_and_levels">维基百科 - AV1</a></p>

            <code class="code-bold">--level</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0 / 浮点 2.0~7.3：输出，默认 0（自动）&gt;指定输出视频级别。</p>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：级别表格</button>
            <div class="coll-content overflow-auto mt-3">
                <table class="table-center">
                    <thead>
                        <tr>
                            <th class="px-1">seq_level_idx</th>
                            <th class="px-1">级别 Level</th>
                            <th class="px-1">最大宽高积</th>
                            <th class="px-1">最大码率</th>
                            <th class="px-1">最高分辨率@帧率举例</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-bottom">
                            <th class="px-1">0</th>
                            <th class="px-1">2.0</th>
                            <td class="px-1 t-invert-light">147,456</td>
                            <td class="px-1 t-align-left"><b>Main</b>: 1.5 Mbps<br><b>High</b>: -</td>
                            <td class="px-1">426×240@30 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">1</th>
                            <th class="px-1">2.1</th>
                            <td class="px-1 t-light-gray">278,784</td>
                            <td class="px-1 t-align-left"><b>Main</b>: 3 Mbps<br><b>High</b>: -</td>
                            <td class="px-1">640×360@30 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">4</th>
                            <th class="px-1">3.0</th>
                            <td class="px-1 t-invert-light">665,856</td>
                            <td class="px-1"><b>Main</b>: 6 Mbps<br><b>High</b>: -</td>
                            <td class="px-1">854×480@30 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">5</th>
                            <th class="px-1">3.1</th>
                            <td class="px-1 t-light-gray">1,065,024</td>
                            <td class="px-1 t-align-left"><b>Main</b>: 10 Mbps<br><b>High</b>: -</td>
                            <td class="px-1">1280×720@30 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">8</th>
                            <th class="px-1">4.0</th>
                            <td class="px-1 t-invert-light" rowspan="2">2,359,296</td>
                            <td class="px-1 t-align-left"><b>Main</b>: 12 Mbps<br><b>High</b>: 30 Mbps</td>
                            <td class="px-1">1920×1080@30 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">9</th>
                            <th class="px-1">4.1</th>
                            <!--<td>2,359,296</td>-->
                            <td class="px-1"><b>Main</b>: 20 Mbps<br><b>High</b>: 50 Mbps</td>
                            <td class="px-1">1920×1080@60 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">12</th>
                            <th class="px-1">5.0</th>
                            <td class="px-1 t-light-gray" rowspan="4">8,912,896</td>
                            <td class="px-1"><b>Main</b>: 30 Mbps<br><b>High</b>: 100 Mbps</td>
                            <td class="px-1">3840×2160@30 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">13</th>
                            <th class="px-1">5.1</th>
                            <!--<td>8,912,896</td>-->
                            <td class="px-1"><b>Main</b>: 40 Mbps<br><b>High</b>: 160 Mbps</td>
                            <td class="px-1">3840×2160@60 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">14</th>
                            <th class="px-1">5.2</th>
                            <!--<td>8,912,896</td>-->
                            <td class="px-1"><b>Main</b>: 60 Mbps<br><b>High</b>: 240 Mbps</td>
                            <td class="px-1">3840×2160@120 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">15</th>
                            <th class="px-1">5.3</th>
                            <!--<td>8,912,896</td>-->
                            <td class="px-1"><b>Main</b>: 60 Mbps<br><b>High</b>: 240 Mbps</td>
                            <td class="px-1">3840×2160@120 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">16</th>
                            <th class="px-1">6.0</th>
                            <td class="px-1 t-invert-light" rowspan="4">35,651,584</td>
                            <td class="px-1"><b>Main</b>: 60 Mbps<br><b>High</b>: 240 Mbps</td>
                            <td class="px-1">7680×4320@30 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">17</th>
                            <th class="px-1">6.1</th>
                            <!--<td>35,651,584</td>-->
                            <td class="px-1"><b>Main</b>: 100 Mbps<br><b>High</b>: 480 Mbps</td>
                            <td class="px-1">7680×4320@60 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">18</th>
                            <th class="px-1">6.2</th>
                            <!--<td>35,651,584</td>-->
                            <td class="px-1"><b>Main</b>: 160 Mbps<br><b>High</b>: 800 Mbps</td>
                            <td class="px-1">7680×4320@120 fps</td>
                        </tr>
                        <tr class="border-bottom">
                            <th class="px-1">19</th>
                            <th class="px-1">6.3</th>
                            <!--<td>35,651,584</td>-->
                            <td class="px-1"><b>Main</b>: 160 Mbps<br><b>High</b>: 800 Mbps</td>
                            <td class="px-1">7680×4320@120 fps</td>
                        </tr>
                    </tbody>
                </table>
                <p class="text-gray-side mt-0 align-items-center">图：表：见 <a href="https://en.wikipedia.org/wiki/AV1#Profiles_and_levels">维基百科 - AV1</a></p>
            </div>

            <h4>（4/12）格式与 VUI/SEI 标注</h4>
            <code class="code-bold">--chroma-sample-position</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 0（留空）&gt;指定色度采样缩减分辨率时所用的像素相对于缩小前像素的位置，涉及到解码端的色度像素对齐。如果源视频标注，则建议标注——1：左，2：左上。</p>
            <code class="code-bold">--color-format</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~3，默认 1&gt;指定输入视频的 YUV 色彩空间格式——0: 400，1: 420，2: 422，3: 444</p>
            <code class="code-bold">--matrix-coefficients</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;部分整数 0~14，默认 2（留空）&gt;播放用矩阵格式/系数指标：</p>
            <ul class="list-dotless text-smaller">
                <li><b>0：</b>identity</li>
                <li><b>1：</b>bt709</li>
                <li><b>2：</b>留空（视频播放器默认）</li>
                <li><b>4：</b>fcc</li>
                <li><b>5：</b>bt470bg</li>
                <li><b>6：</b>bt601</li>
                <li><b>7：</b>smpte240m</li>
                <li><b>8：</b>ycgco</li>
                <li><b>9：</b>bt2020-ncl（BT.2020 可变亮度，BT.2100 YCbCr）</li>
                <li><b>10：</b>bt2020-nc（BT.2020 单一亮度）</li>
                <li><b>11：</b>smpte2085</li>
                <li><b>12：</b>chroma-ncl（chroma-derived-nc 色度衍生可变亮度）</li>
                <li><b>13：</b>chroma-cl（chroma-derived-c 色度衍生单一亮度）</li>
                <li><b>14：</b>ictcp (BT.2100 ICtCp)</li>
                <li><b>3：</b>保留值，不可用</li>
            </ul>
            <code class="code-bold">--transfer-characteristics</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;部分整数 1~18，默认 2（留空）&gt;传输特质：</p>
            <ul class="list-dotless text-smaller">
                <li><b>1：</b>bt709</li>
                <li><b>2：</b>留空（视频播放器默认）</li>
                <li><b>4：</b>bt470m</li>
                <li><b>5：</b>bt470bg</li>
                <li><b>6：</b>bt601</li>
                <li><b>7：</b>smpte240、smpte240m</li>
                <li><b>8：</b>linear</li>
                <li><b>9：</b>log100</li>
                <li><b>10：</b>log100-sqrt10</li>
                <li><b>11：</b>iec61966（-2-4）</li>
                <li><b>12：</b>bt1361</li>
                <li><b>13：</b>srgb、sycc</li>
                <li><b>14：</b>bt2020-10</li>
                <li><b>15：</b>bt2020-12</li>
                <li><b>16：</b>smpte2084</li>
                <li><b>17：</b>smpte428</li>
                <li><b>18：</b>hlg</li>
                <li><b>3：</b>保留值，不可用</li>
            </ul>
            <code class="code-bold">--color-primaries</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;部分整数 1~22，默认 2（留空）&gt;三原色及白点指标，详见上述的国际电信联盟（ITU-T）<a href="https://www.itu.int/rec/T-REC-H.273-202407-I">H.273——Table 2</a>：</p>
            <ul class="list-dotless text-smaller">
                <li><b>1：</b>bt709</li>
                <li><b>2：</b>留空（视频播放器默认）</li>
                <li><b>4：</b>bt470m</li>
                <li><b>5：</b>bt470bg</li>
                <li><b>6：</b>bt601</li>
                <li><b>7：</b>smpte240</li>
                <li><b>8：</b>film</li>
                <li><b>9：</b>bt2020</li>
                <li><b>10：</b>xyz</li>
                <li><b>11：</b>smpte431</li>
                <li><b>12：</b>smpte432</li>
                <li><b>22：</b>ebu3213</li>
                <li><b>0、3、13~21、...：</b>保留值，不可用</li>
            </ul>

            <h4>（5/12）HDR VUI/SEI 标注</h4>
            <p>HDR 信息分为硬件、软件、以及数据，共 3 类不统一的标准。为保证色彩正确，必须与源视频的元数据一致才能正确解码。</p>
            <code class="code-bold">--master-display</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;字符串 G(x,y)B(x,y)R(x,y)WP(x,y)L(max,min)&gt;用于高动态范围内容的绿、蓝、红、白点、光强信息</p>
            <ul class="font-monospace pl-5 text-smaller list-dotless">
                <li>RGB-WP 原信息见上述的 ITU-T H.273 表格，以下为转换出的结果：</li>
                <!--<li><b>DCI-P3：</b>G(0.265,y0.690)B(x0.150,y0.060)R(x0.680,y0.320)WP(x0.3127,y0.329)</li>-->
                <li><b>bt709: </b>
                    <ul><li>G(0.30,y0.60)B(x0.150,y0.060)R(x0.640,y0.330)WP(x0.3127,y0.329)L(max,min)</li></ul>
                </li>
                <li><b>bt470m: </b>
                    <ul><li>G(0.21,0.71)B(0.14,0.08)R(0.67,0.33)WP(0.31,0.316)L(max,min)</li></ul>
                </li>
                <li><b>bt470bg: </b>
                    <ul><li>G(0.29,0.60)B(0.15,0.06)R(0.64,0.33)WP(0.3127,0.329)L(max,min)</li></ul>
                </li>
                <li><b>bt601: </b>
                    <ul><li>G(0.31,0.595)B(0.155,0.07)R(0.63,0.34)WP(0.3127,0.329)L(max,min)</li></ul>
                </li>
                <li><b>smpte240: </b>
                    <ul><li>G(0.31,0.595)B(0.155,0.07)R(0.63,0.34)WP(0.3127,0.329)L(max,min)</li></ul>
                </li>
                <li><b>film: </b>
                    <ul><li>G(0.243,0.692)B(0.145,0.049)R(0.681,0.319)WP(0.31,0.316)L(max,min)</li></ul>
                </li>
                <li><b>bt2020: </b>
                    <ul><li>G(0.71,0.797)B(0.131,0.046)R(0.708,0.292)WP(0.3127,0.329)L(max,min)</li></ul>
                </li>
                <li><b>xyz: </b>
                    <ul><li>Y(0,1),Z(0,0),X(1,0)WP(0.3333,0.3333)L(max,min)</li></ul>
                </li>
                <li><b>smpte431: </b>
                    <ul><li>G(0.265,0.69)B(0.15,0.06)R(0.68,0.32)WP(0.314,0.351)L(max,min)</li></ul>
                </li>
                <li><b>smpte432: </b>
                    <ul><li>G(0.265,0.69)B(0.150,0.060)R(0.68,0.32)WP(0.3127,0.329)L(max,min)</li></ul>
                </li>
                <li><b>ebu3213: </b>
                    <ul><li>G(0.295,0.605)B(0.155,0.077)R(0.63,0.34)WP(0.3127,0.329)L(max,min)</li></ul>
                </li>
                <li><b>L(max,min): </b> 见源视频的元数据。SDR 视频的光强是 (1000,1)，单位 <span class="text-blue-math">\(\text{candela}\times 10000\)</span></li>
            </ul>
            <code class="code-bold">--content-light</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;逗号分隔整数 MaxCLL,MaxFall&gt;根据源视频的元数据设置最大内容光强（Max content light level）与最大平均光强（Max Frame-Avg Light level）。</p>

            <h4>（6/12）编解码场景、<span class="text-blue-emph">兼容性</span></h4>
            <code class="code-bold">--nb</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 -1~<span class="text-blue-math text-smaller">\(1-2^{31}-1\)</span>，默认 -1：关&gt;指定运行逻辑变更：先缓存（原视频解码后的）视频帧，再开始压制。适合内存空间大但内存延迟高（导致 CPU 占用不足的程度）的计算机。解码后每秒的内存占用可以粗略地算作：</p>
            <span class="text-blue-math">\[ \frac{3_{\text{RGB 通道}} \times d_{\text{位深}} \times r_{\text{帧率}} \times w_{\text{宽}} \times h_{\text{高}}}{8_{\text{转字节}} \times 1048576_{\text{二进制 1 MB}}} \]</span>
            <span class="text-blue-math text-smaller">\[ \frac{3 \times 60 \times 8 \times 1920 \times 1080}{8 \times 1048576} = 355.96 \hspace{2mm} \text{MBps (FHD60 8bit)} \]</span>
            <span class="text-blue-math text-smaller">\[ \frac{3 \times 60 \times 10 \times 3840 \times 2160}{8 \times 1048576} = 1779.79 \hspace{2mm} \text{MBps (4K60 10bit)} \]</span>
            <!--<code class="code-bold">&#45;&#45;16bit-pipeline</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关&gt;指定编码器内部使用 16bit 位深精度计算。</p>-->
            <code class="code-bold">&#45;&#45;fast-decode</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 0：关，<span class="text-red-emph">被<code>--hierarchical-levels</code>覆盖</span>&gt;指定低延迟模式（减少解码复杂度），适合直播的转码分发机制，以及算力不足的平台——1：普通限制，2：强限制。影响 SuperBlock 大小等多个机制。</p>
            <code class="code-bold">--asm</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~11/字符串 c~max，默认 max：全部&gt;指定弃用较新的 CPU 指令集以兼容旧式计算机平台。按照从旧到新排序为——c, mmx, sse, sse2, sse3, ssse3, sse4_1, sse4_2, avx, avx2, avx512, avx512icl, max。</p>
            <code class="code-bold">&#45;&#45;forced-maximum-frame-width</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 4~16384，&gt;将输入帧宽度值设为强制。<span class="text-red-emph">猜测：</span>限制参考缩放环路与超分辨率环路。</p>
            <code class="code-bold">&#45;&#45;forced-maximum-frame-height</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 4~8704，用途未知&gt;将输入帧高度值设为强制。<span class="text-red-emph">猜测：</span>限制参考缩放环路与超分辨率环路。</p>
            <code class="code-bold">--avif</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关&gt;启用静态图像编码优化，在视频流仅为静态图像时提高编码速度、降低内存占用。</p>
            <code class="code-bold">--lossless</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关&gt;启用无损压缩模式。</p>

            <h4>（7/12）线程与节点占用</h4>
            <code class="code-bold">--lp</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~6，默认 0：全部&gt;指定当前压制任务的线程数量。</p>
            <code class="code-bold">&#45;&#45;pin</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~n，默认 0：关&gt;指定仅占用前 n 个 CPU 核心</p>
            <code class="code-bold">--ss</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 -1~n&gt;指定使用多节点系统中的特定节点编码。-1 表示自动选择。</p>

            <h4>（8/12）率控制模式</h4>
            <code class="code-bold">&#45;&#45;enable-qm</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关&gt;启用量化矩阵</p>
            <code class="code-bold">--qm-min</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~15，默认 8：中低&gt;指定量化矩阵的最小序号，序号值越小则允许使用越发陡峭、压缩越强的矩阵。</p>
            <code class="code-bold">--qm-max</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~15，默认 15：最大&gt;指定量化矩阵的最大序号，序号值越大则允许使用越发平坦、压缩越弱的矩阵。</p>
            <code class="code-bold">&#45;&#45;rc</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 0：CRF 或 CQP&gt;指定率控制模式——（<code>--aq-mode 0</code> 则为 CQP），1：VBR 模式，2：CBR 模式。</p>
            <code class="code-bold">--qp</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 1~63，默认 35：中高量化&gt;指定 CQP 模式下的固定值，CRF 模式下为初始 QP（类似于手动设置 x264/5 的 <code>--cplxblur</code>）。由于 GOP 总以关键帧开始，所以 CRF 模式下推荐较低的值。</p>
            <code class="code-bold">--crf</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 1~63，默认 35：中高量化&gt;指定质量呼应码率模式的量化强度目标，SVT-AV1 中直接映射为 <code>&#45;&#45;rc 0 --aq-mode 2 --qp [_]</code>。</p>
            <code class="code-bold">--luminance-qp-bias</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~100，默认 0：关闭&gt;将 QP 分配逻辑过渡到“据亮度调整”的百分比程度（使码率分配逻辑变得更像 x264、x265 的表现）。</p>

            <h5>（8/12——1/7）QIndex 偏移</h5>
            <p>相比于 AVC、HEVC 偏移 QP，QIndex 的精度比 QP 高 4 倍。同时，使用时应该注意 <code>Dc_Qlookup</code> 与 <code>Ac_Qlookup</code> 表格在不同位深下的替换（强度变更），并注意量化步长曲线走向与 AVC、HEVC 量化步长曲线的区别。</p>
            <code class="code-bold">--use-fixed-qindex-offsets</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 0：编码器设定 QIndex&gt;指定量化步长索引 QIndex 的取值方法——1：用户指定 QP 常数值，并使用下列偏移参数调整 QIndex；2：编码器计算 QP，并使用下列偏移参数调整 QIndex</p>
            <code class="code-bold">--key-frame-qindex-offset</code>；<code class="code-bold">--key-frame-chroma-qindex-offset</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 -64~63，默认 0&gt;亮度与色度平面关键帧 QIndex 偏移，决定量化步长大小。</p>
            <code class="code-bold">--luma-y-dc-qindex-offset</code>；<code class="code-bold">--luma-y-ac-qindex-offset</code>；<br>
            <code class="code-bold">--chroma-u-dc-qindex-offset</code>；<code class="code-bold">--chroma-u-ac-qindex-offset</code>；<br>
            <code class="code-bold">--chroma-v-dc-qindex-offset</code>；<code class="code-bold">--chroma-v-ac-qindex-offset</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 -64~63，默认 0&gt;指定 DC、AC 画面中，Y、Cb、Cr 平面的 QIndex 偏移。</p>
            <code class="code-bold">--startup-qp-offset</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 -63~63，默认 0&gt;指定 GOP 初始 QP 值偏移。</p>
            <code class="code-bold">--qindex-offsets</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;逗号分隔整数，默认 0,0,...,0&gt;指定每层尖塔混合参考帧（<code>--hierarchical-levels</code>）下级的量化步长索引偏移，决定量化步长大小。</p>
            <code class="code-bold">--chroma-qindex-offsets</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;逗号分隔整数，默认 0,0,...,0&gt;指定每层色度尖塔混合参考帧（<code>--hierarchical-levels</code>）下级的量化步长索引偏移，决定色度平面量化步长大小。</p>

            <h5>（8/12——2/7）方差自适应量化</h5>
            <code class="code-bold">&#45;&#45;enable-variance-boost</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关，<span class="text-red-emph">Superblock 大小改为 64x64</span>&gt;指定<u>帧内</u>方差自适应量化的增强强度微调。Superblock 改动逻辑见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Source/Lib/Globals/enc_handle.c#L3922">enc_handle.c</a>。</p>
            <code class="code-bold">--variance-boost-curve</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 0：默认曲线&gt;指定<u>帧内</u>方差自适应量化的增强映射曲线，类似于 x264/5 的 <code>--qcomp</code></p>
            <ul class="list-dotless text-smaller">
                <li><b>0：</b>通过低底数的指数递减曲线映射方差变化，快速收敛/收紧方差自适应量化的优化范围</li>
                <li><b>1：</b>通过线性递减线映射方差变化到量化值，中速收敛/收紧方差自适应量化的优化范围，在适度增加码率的情况下增强低~中对比度区域的画质</li>
                <li><b>2：</b>通过线性递减线映射方差变化到量化值，慢速收敛/收紧方差自适应量化的优化范围，由 SVT-AV1-PSY 开发组基于 Cloudinary CID22 测试集中 SSIMULACRA2 跑分得出
                    <ul><li>SVT-AV1-PSY Tune 4（静态图像微调）会调用该曲线</li></ul>
                </li>
            </ul>
            <pre><code class="text-smaller language-cpp">
switch (curve) {
    case 1:
        qstep_ratio =
            0.25 * strength * (-log2((double)variance) + 8) + 1;
        break;
    case 2:
        qstep_ratio =
            0.15 * strength * (-log2((double)variance) + 10) + 1;
        break;
    default:
        qstep_ratio =
            pow(
                1.018,
                strengths[strength] * (-10 * log2((double)variance) + 80)
            );
        break;
}
            </code></pre>
            <code class="code-bold">--variance-boost-strength</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 1~4，默认 2：弱&gt;指定<u>帧内</u>方差自适应量化的增强强度——1：微，2：弱，3：中：4：强</p>
            <code class="code-bold">--variance-octile</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 1~8，默认 6：高要求&gt;指定<u>帧内（Superblock）</u>方差自适应量化增强（Variance Boost）的方差自适应量化开启条件——但凡特大块中某个分块的面积达到全块的 variance-octile÷8，并且内容为低对比度，则对该 Superblock 启用方差自适应量化增强。这样可以减少其中紧挨着“复杂块”的“简单块”被连带着分配了过高量化强度所致的模糊块失真。</p>
            <p class="text-gray-side">注：在大范围优化测试（见下方测试版块）中，发现指定 2、4、6（默认）时，对所有测试视频都没能产生任何影响，也没有触发参数无效警告。因此可能需要在远超 CRF30 所致的高量化强度、指定极值、或搭配参数使用。</p>
            <ul class="list-dotless text-smaller">
                <li>分子越小，则越多紧邻纹理线条/烟雾破片的平面/斜面的区域被开启 VAQ、计算量越大、码率越高、块内视觉对比度一致性也越高</li>
                <li>分子越大，则越少紧邻纹理线条/烟雾破片的平面/斜面的区域被开启 VAQ、计算量越大、码率越低、块内视觉对比度一致性也越低</li>
                <li>注：较大的分子可能会导致模糊块失真得不到解决</li>
                <li>注：如果源的画面自始至终都保持一致的复杂或简单，则此参数的影响需要极小值见效，但此时关键帧的体积可能会超出播放设备的带宽/网速上限</li>
                <li>建议：该参数高度依赖原画清晰度。如果原画已受到模糊、JPEG 蚊噪等失真影响，则建议使用默认或更高的值</li>
                <li>建议：一开始给予较低 CRF 强度、宽限 VBR 的情况下可以保持默认，否则根据高频细节与平面的紧邻程度和分辨率来调整。</li>
                <li>建议：官方建议范围 4~7，此外的值会导致码率翻倍或画质自适应不足。详见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-Variance-Boost.md?ref_type=heads#--variance-octile-1-8">SVT-AV1 Readme</a></li>
            </ul>

            <code class="code-bold">--aq-mode</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 2：分瓣 VAQ + QP 偏移预测&gt;指定帧间方差自适应量化模式——0：关，1：分瓣 VAQ 调整；2：并且使用 QP 偏移预测</p>

            <h5>（8/12——3/7）VBR、CBR 模式细节</h5>
            <code class="code-bold">--tbr</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 1~100000，默认 2000：Kbps&gt;指定 VBR 模式的目标码率，相当于 AVC、HEVC 的 <code>--bitrate</code>。</p>
            <code class="code-bold">--min-qp</code>；<code class="code-bold">--max-qp</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 1~62，默认 1&gt;&lt;整数 1~63，默认 63&gt;指定限制 VBR、CBR 模式下的 QP 值赋值范围。</p>
            <code class="code-bold">--overshoot-pct</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~100，默认 CBR：25，VBR：50&gt;指定判定 VBR，CBR 模式下码率大小为超标的百分比。</p>
            <code class="code-bold">--undershoot-pct</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~100，默认取决于率控制模式&gt;指定判定 VBR，CBR 模式下码率大小为落标的百分比。</p>
            <code class="code-bold">--gop-constraint-rc</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关，<span class="text-red-emph">需 VBR</span>&gt;将 VBR 模式的码率限制改为逐 GOP 应用，<span class="text-red-emph">猜测：</span>能够使每个 GOP 开始时有更充足的码率，但可能会消耗额外带宽。</p>

            <h5>（8/12——4/7）CBR 模式</h5>
            <p>SVT-AV1 中，CBR 模式代表以毫秒为单位的“时间缓冲区”定义缓冲区大小。如果解码用时高于或低于预期，则相应的调整压缩强度。控制参考缩放环路的动态模式。</p>
            <code class="code-bold">--buf-sz</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 20-10000，默认 1000：毫秒&gt;CBR 缓冲区极限大小，与 AVC、HEVC 的 <code>--vbv-bufsize</code> 有几分相似。</p>
            <code class="code-bold">--buf-initial-sz</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 20-10000，默认 600：毫秒&gt;CBR 缓冲区初始大小。</p>
            <code class="code-bold">--buf-optimal-sz</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 20-10000，默认 600：毫秒&gt;CBR 缓冲区中、后期大小。</p>

            <h5>（8/12——5/7）Capped CRF 模式</h5>
            <code class="code-bold">--mbr</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~100000，默认 0：关&gt;指定 CRF 模式的峰值码率，相当于 vbv-maxrate。</p>
            <code class="code-bold">--mbr-overshoot-pct</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~100，默认 50&gt;指定 Capped CRF 模式下，判定码率大小为超标的百分比。</p>

            <h5>（8/12——6/7）重编码环路级别</h5>
            <code class="code-bold">&#45;&#45;recode-loop</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~100，默认 0：关&gt;<span class="text-red-emph">猜测：</span>当编码结果与率控制目标差异过大（码率过低、过高、解码用时低于或高于预期）。</p>
            <ul class="list-dotless text-smaller">
                <li><b>1</b>：仅允许对关键帧重编码，无视码率限制</li>
                <li><b>2</b>：仅允许对关键帧、支线被参考帧（<code>ALTREF</code>）、金帧（<code>GOLDEN</code>）重新编码，无视码率限制</li>
                <li><b>3</b>：基于码率限制对所有帧类型重新编码</li>
                <li><b>4</b>：绑定预设参数 <code>&#45;&#45;preset</code></li>
            </ul>

            <h5>（8/12——7/8）率失真优化</h5>
            <code class="code-bold">--tune</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 1：PSNR（客观）&gt;调整率失真优化对失真（rdmult）的定义方法，以及更改一些内部参数（VQ 涉及更改去块滤镜判断锐度级别、SSIM 涉及到更改 MiRow、MiCol（Marcoblock Index）大小）——0：心理视觉优化 Visual quality（主观），2：SSIM。</p>
            <code>coding_loop.c</code>
            <pre><code class="text-smaller language-cpp">
if (pcs->ppcs->blk_lambda_tuning) {
    // 复制当前块几何信息与位置到模式决策
    md_ctx->blk_geom  = ed_ctx->blk_geom;
    md_ctx->blk_org_x = ed_ctx->blk_org_x;
    md_ctx->blk_org_y = ed_ctx->blk_org_y;
    // 动态调整当前块的 Lambda 值
    svt_aom_set_tuned_blk_lambda(md_ctx, pcs);
}
else if (pcs->ppcs->scs->static_config.tune == 2) { // tune 2
    // 复制当前块几何信息与位置到模式决策
    md_ctx->blk_geom  = ed_ctx->blk_geom;
    md_ctx->blk_org_x = ed_ctx->blk_org_x;
    md_ctx->blk_org_y = ed_ctx->blk_org_y;
    int mi_row        = ed_ctx->blk_org_y / 4;
    int mi_col        = ed_ctx->blk_org_x / 4;
    // 据当前块的空间位置使用 SSIM 统计 rdmult
    aom_av1_set_ssim_rdmult(md_ctx, pcs, mi_row, mi_col);
}
            </code></pre>
            <code>enc_handle.c</code>
            <pre><code class="text-smaller language-cpp">
static void derive_vq_params(SequenceControlSet* scs) {
    VqCtrls* vq_ctrl = &scs->vq_ctrls;

    if (scs->static_config.tune == 0) { // tune 0
        // 启用锐度相关控制
        vq_ctrl->sharpness_ctrls.scene_transition = 1;
        vq_ctrl->sharpness_ctrls.tf               = 1;
        vq_ctrl->sharpness_ctrls.unipred_bias     = 1;
        vq_ctrl->sharpness_ctrls.ifs              = 1;
        vq_ctrl->sharpness_ctrls.cdef             = 1;
        vq_ctrl->sharpness_ctrls.restoration      = 1;
        vq_ctrl->sharpness_ctrls.rdoq             = 1;
        // 启用模式决策块间差异稳态化控制（perform_pred_depth_refinement()）
        vq_ctrl->stability_ctrls.depth_refinement = 1;
    }
    else {  // tune 1, tune 2
        vq_ctrl->sharpness_ctrls.scene_transition = 1;
        vq_ctrl->sharpness_ctrls.tf               = 0;
        vq_ctrl->sharpness_ctrls.unipred_bias     = 0;
        vq_ctrl->sharpness_ctrls.ifs              = 0;
        vq_ctrl->sharpness_ctrls.cdef             = 0;
        vq_ctrl->sharpness_ctrls.restoration      = 0;
        vq_ctrl->sharpness_ctrls.rdoq             = 0;
        vq_ctrl->stability_ctrls.depth_refinement = 0;
    }
    // 低延迟模式、2-pass 非最后一遍时关闭转场优化
    if (scs->static_config.pred_structure != SVT_AV1_PRED_RANDOM_ACCESS || scs->static_config.pass == ENC_FIRST_PASS)
        vq_ctrl->sharpness_ctrls.scene_transition = 0;
}
            </code></pre>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：模式决策块间差异稳态化控制</button>
            <div class="coll-content"><code>enc_dec_process.c</code>
                <pre><code class="text-smaller language-cpp">
static void perform_pred_depth_refinement(SequenceControlSet *scs, PictureControlSet *pcs, ModeDecisionContext *ctx, uint32_t sb_index) {
    MdcSbData *results_ptr = &ctx->mdc_sb_array;
    uint32_t   blk_index   = 0; // 当前块序号
    // 是否启用基于成本带的深度调制（Cost band modulation）：未启用分块深度细化、或当前帧非帧内编码且动态搜索成本方差低于阈值时启用
    uint8_t    use_cost_band_based_modulation = (!scs->vq_ctrls.stability_ctrls.depth_refinement || (pcs->slice_type != I_SLICE && pcs->ppcs->me_8x8_cost_variance[ctx->sb_index] &lt; VQ_STABILITY_ME_VAR_TH));
    // 非正方形细分块关
    if (!ctx->nsq_geom_ctrls.enabled) {
        // 禁用 4x4 细分块
        if (ctx->disallow_4x4) {
            memset(results_ptr->consider_block, 0, sizeof(uint8_t) * scs->max_block_cnt);
            memset(results_ptr->refined_split_flag, 1, sizeof(uint8_t) * scs->max_block_cnt);
        }
        else {
            // 遍历分块并标记大于 4x4 的块
            while (blk_index &lt; scs->max_block_cnt) {
                const BlockGeom *blk_geom = get_blk_geom_mds(blk_index);

                bool split_flag                            = blk_geom->sq_size > 4 ? true : false;
                results_ptr->consider_block[blk_index]     = 0;
                results_ptr->refined_split_flag[blk_index] = blk_geom->sq_size > 4 ? true : false;
                blk_index += split_flag ? blk_geom->d1_depth_offset : blk_geom->ns_depth_offset;
            }
        }
    }
    else {
        // 启用 4x4 细分块——重设所有块的分块标记为默认，后续根据模式决策与预测块序列细分（md_blk_arr_nsq）
        while (blk_index &lt; scs->max_block_cnt) { // 遍历并加载默认值
            const BlockGeom *blk_geom                  = get_blk_geom_mds(blk_index);
            results_ptr->consider_block[blk_index]     = 0;
            results_ptr->refined_split_flag[blk_index] = blk_geom->sq_size > 4 ? true : false;
            blk_index++;
        }
    }

    // 获取选中分块深度 0 的最大/最小块大小（Get max/min PD0 selected block sizes）
    uint16_t max_pd0_size = 0;
    uint16_t min_pd0_size = 255;
    if (ctx->depth_ctrls.limit_max_min_to_pd0)
        get_max_min_pd0_depths(scs, pcs, ctx, &max_pd0_size, &min_pd0_size);
    results_ptr->leaf_count = 0;
    blk_index               = 0;
    bool pred_depth_only    = 1;

    // 遍历分块
    while (blk_index &lt; scs->max_block_cnt) {
        const BlockGeom *blk_geom = get_blk_geom_mds(blk_index);
        ctx->blk_ptr              = &ctx->md_blk_arr_nsq[blk_index];
        // 帧类型非 I 帧、或块大小小于 128x128 时允许检查分块（inject）
        uint8_t is_blk_allowed = pcs->slice_type != I_SLICE ? 1 : (blk_geom->sq_size &lt; 128) ? 1 : 0;
        // 加载当前非正方形分块数据
        bool split_flag = ctx->md_blk_arr_nsq[blk_index].split_flag;

        if (is_blk_allowed) {
            if (blk_geom->shape == PART_N) {
                if (ctx->md_blk_arr_nsq[blk_index].split_flag == false) {
                    // 添加当前预测深度的分块
                    results_ptr->consider_block[blk_index]     = 1;
                    results_ptr->refined_split_flag[blk_index] = false;
                    // 起始与结束深度（父子结构）
                    int8_t s_depth = ctx->depth_ctrls.s_depth;
                    int8_t e_depth = ctx->depth_ctrls.e_depth;

                    // 选定的深度应该可用，除非数据无效（如超出序列范围）。因此需要移除父子结构。
                    if (!ctx->cost_avail[blk_geom->sqi_mds]) {
                        s_depth = e_depth = 0;
                    }
                    else {
                        if (ctx->avail_blk_flag[blk_geom->sqi_mds]) {
                            // 当前块可用旗标。依赖已测试区块信息的决策应在此处进行（?）
                            // 非方形分块的分块成本可能来自 H/V，而方形块没有分块成本信息（?）
                            if (ctx->depth_ctrls.use_pred_mode) {
                                // 帧间块限制起始与结束深度到 (-1,+1)
                                if (ctx->intra_ctrls.enable_intra && (ctx->blk_ptr->prediction_mode_flag == INTER_MODE)) {
                                    s_depth = MAX(s_depth, -1);
                                    e_depth = MIN(e_depth, 1);
                                }
                            }
                        }
                    }

                    // 选取多种分块深度则启用细化（refinement）
                    if (s_depth != 0 || e_depth != 0) {
                        // 4x4 blocks have no children
                        if (blk_geom->sq_size == 4)
                            e_depth = 0;
                        // 检查开始和结束深度是否在允许范围内
                        if (ctx->disallow_4x4) {
                            e_depth = (blk_geom->sq_size == 8) ? 0
                                : (blk_geom->sq_size == 16)    ? MIN(1, e_depth)
                                : (blk_geom->sq_size == 32)    ? MIN(2, e_depth)
                                                               : e_depth;
                        }
                        if (ctx->depth_removal_ctrls.enabled) {
                            if (ctx->depth_removal_ctrls.disallow_below_64x64) {
                                e_depth = (blk_geom->sq_size &lt;= 64) ? 0
                                    : (blk_geom->sq_size == 128)    ? MIN(1, e_depth)
                                                                    : e_depth;
                            }
                            else if (ctx->depth_removal_ctrls.disallow_below_32x32) {
                                e_depth = (blk_geom->sq_size &lt;= 32) ? 0
                                    : (blk_geom->sq_size == 64)     ? MIN(1, e_depth)
                                    : (blk_geom->sq_size == 128)    ? MIN(2, e_depth)
                                                                    : e_depth;
                            }
                            else if (ctx->depth_removal_ctrls.disallow_below_16x16) {
                                e_depth = (blk_geom->sq_size &lt;= 16) ? 0
                                    : (blk_geom->sq_size == 32)     ? MIN(1, e_depth)
                                    : (blk_geom->sq_size == 64)     ? MIN(2, e_depth)
                                    : (blk_geom->sq_size == 128)    ? MIN(3, e_depth)
                                                                    : e_depth;
                            }
                        }
                        if (ctx->depth_ctrls.limit_max_min_to_pd0 && max_pd0_size != min_pd0_size) {
                            // 如果深度 0 选择了深度，则忽略选择范围之外的深度
                            if (blk_geom->sq_size == max_pd0_size)
                                s_depth = 0;
                            if (blk_geom->sq_size == min_pd0_size)
                                e_depth = 0;
                        }

                        uint8_t sq_size_idx = 7 - (uint8_t)svt_log2f((uint8_t)blk_geom->sq_size);
                        int64_t th_offset   = 0;

                        if (ctx->depth_refinement_ctrls.enabled && ctx->depth_refinement_ctrls.cost_band_based_modulation && use_cost_band_based_modulation && (s_depth != 0 || e_depth != 0)) {
                            update_pred_th_offset(ctx, blk_geom, &s_depth, &e_depth, &th_offset);
                        }

                        // 添加父级深度的块索引
                        // 基于成本的块深度细化仅适用于 [s_depth=-1, e_depth=1]
                        uint8_t add_parent_depth         = 1;
                        ctx->parent_to_current_deviation = MIN_SIGNED_VALUE;
                        if (ctx->depth_refinement_ctrls.enabled && s_depth == -1 && ctx->avail_blk_flag[blk_index] &&
                            blk_geom->sq_size &lt; ((scs->seq_header.sb_size == BLOCK_128X128) ? 128 : 64)) { // 检查当前块可用旗标，只有可用的块支持更新 default_cost
                            add_parent_depth = is_parent_to_current_deviation_small(pcs, ctx, blk_geom, th_offset);
                        }

                        // 添加子级深度的块索引
                        // 基于成本的块深度细化仅适用于 [s_depth=-1, e_depth=1]
                        uint8_t add_sub_depth           = 1;
                        ctx->child_to_current_deviation = MIN_SIGNED_VALUE;
                        if (ctx->depth_refinement_ctrls.enabled && e_depth == 1 && ctx->avail_blk_flag[blk_index] && blk_geom->sq_size > 4) { // 检查当前块可用旗标，只有可用的块支持更新 default_cost
                            add_sub_depth = is_child_to_current_deviation_small(pcs, ctx, blk_geom, blk_index, th_offset);
                        }

                        // 每个块设最大深度为 2（PRED+父、或 PRED+子）
                        if (ctx->depth_refinement_ctrls.enabled && ctx->depth_refinement_ctrls.up_to_2_depth) {
                            if ((s_depth == -1) && add_parent_depth && (e_depth == 1) && add_sub_depth) {
                                if (ctx->parent_to_current_deviation != MIN_SIGNED_VALUE &&
                                    ctx->child_to_current_deviation != MIN_SIGNED_VALUE) {
                                    if (ctx->parent_to_current_deviation &lt;= ctx->child_to_current_deviation) {
                                        add_sub_depth = 0;
                                    } else {
                                        add_parent_depth = 0;
                                    }
                                }
                            }
                        }

                        if (e_depth || s_depth)
                            pred_depth_only = 0;

                        if (s_depth != 0 && add_parent_depth) // 标记需处理的父块
                            set_parent_to_be_considered(ctx, results_ptr, blk_index, scs->seq_header.sb_size, (int8_t) blk_geom->depth, sq_size_idx, s_depth, !ctx->nsq_geom_ctrls.enabled);

                        if (e_depth != 0 && add_sub_depth) // 标记需处理的子块
                            set_child_to_be_considered(pcs, ctx, results_ptr, blk_index, sb_index, scs->seq_header.sb_size, (int8_t)blk_geom->depth, sq_size_idx, e_depth, !ctx->nsq_geom_ctrls.enabled);
                    }
                }
            }
        }
        // 遍历过程中跳过不用检测的块
        blk_index += split_flag ? blk_geom->d1_depth_offset : blk_geom->ns_depth_offset;
    }

    // 当前块仅保留预测深度，不做调整
    if (pred_depth_only)
        ctx->pred_depth_only = 1;
}
                </code></pre></div>

            <code class="code-bold">--lambda-scale-factors</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;逗号分隔整数×128，默认 128,...,128：关&gt;指定各种帧类型下，精确到帧的的率失真斜度缩放值。“各种帧类型”代表 <code>SvtAv1FrameUpdateType</code> 下的类型。每个值会被编码器除以 128，所以默认值实际上是 1。</p>
            <pre><code class="text-smaller language-cpp">
typedef enum SvtAv1FrameUpdateType {
    SVT_AV1_KF_UPDATE, // 关键帧
    SVT_AV1_LF_UPDATE, // 上帧
    SVT_AV1_GF_UPDATE, // 金帧/远距离过去帧
    SVT_AV1_ARF_UPDATE, // 支线被参考帧
    SVT_AV1_OVERLAY_UPDATE, // 占位符帧
    SVT_AV1_INTNL_OVERLAY_UPDATE, // 内部占位符帧
    SVT_AV1_INTNL_ARF_UPDATE, // 内部支线被参考帧
    SVT_AV1_FRAME_UPDATE_TYPES
} SvtAv1FrameUpdateType;
            </code></pre>

            <h5>（8/12——8/8）2pass 模式</h5>
            <code class="code-bold">&#45;&#45;passes</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;1/2，默认 1：关&gt;启用 2pass 模式。</p>
            <code class="code-bold">&#45;&#45;pass</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 0：关，<span class="text-red-emph">被 <code>&#45;&#45;preset</code> 覆盖</span>&gt;指定多遍编码模式，1：pass 1，2：pass 2。Pass 1 仅支持 CRF 率控制模式，Pass 2: 仅支持 VBR，同时要求 <code>&#45;&#45;preset &lt; 10</code>（见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/App/EncApp/EbAppConfig.c">SVT-AV1 app_config.c</a>）。</p>
            <code class="code-bold">--stats</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;字符串路径，默认 "svtav1_2pass.log"&gt;<u>输入输出</u>多遍编码分析日志。</p>

            <h4>（9/12）GOP、mini-GOP 设定</h4>
            <code class="code-bold">--keyint</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数/整数带后缀 -2~2147483647 帧，支持后缀 s（秒）&gt;设定 GOP 长度，替代旧版的 <code>&#45;&#45;intra-period</code>，映射到 <code>intra_period_length</code>。<a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/svt-av1_encoder_user_guide.md">SVT-AV1 官方推荐</a>设置为 mini-GOP 长度（<span class="text-blue-math">\( 2^{\text{hierarchical-levels}} \)</span>）的倍数之上再加 1，以避免将关键帧插入在 mini-GOP 之内，导致压缩率的降低。</p>
            <ul class="list-dotless text-smaller">
                <li><b>-2</b>：每 5 秒设立一个关键帧</li>
                <li><b>-1</b>~<b>0</b>：仅在开头设立关键帧</li>
                <li><b>1</b>~<b>2147483647</b>：每 n 帧设立一个关键帧</li>
                <li><b>1s</b>~<b>2147483647s</b>：每 n 秒设立一个关键帧（推荐）</li>
            </ul>
            <ul class="list-dotless text-smaller">
                <li><code class="code-bold">--hierarchical-levels 3</code>：<span class="text-blue-math">\(2^3 = 8\)</span>，即推荐值为 8 的倍数之上加 1</li>
                <li><code class="code-bold">--hierarchical-levels 4</code>：<span class="text-blue-math">\(2^4 = 16\)</span>，即推荐值为 16 的倍数之上加 1</li>
                <li><code class="code-bold">--hierarchical-levels 5</code>：<span class="text-blue-math">\(2^5 = 32\)</span>，即推荐值为 32 的倍数之上加 1</li>
                <li><code class="code-bold">--hierarchical-levels 6</code>（<code class="code-bold">&#45;&#45;preset &lt;= 8</code>）：<span class="text-blue-math">\(2^6 = 64\)</span>，即推荐值为 64 的倍数之上加 1</li>
            </ul>
            <code class="code-bold">&#45;&#45;irefresh-type</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;1/2，默认 2：Closed GOP&gt;指定关键帧类型，1：允许前向参考型（Open GOP），2：普通关键帧</p>
            <code class="code-bold">--scd</code><!--调用 perform_sc_detection() 函数？-->
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关&gt;开启转场检测。SVT-AV1 检测到转场后只会减少帧间参考，而不会插入关键帧，因此开启后仅会略微提高码率分配精度（见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/CommonQuestions.md#scene-change-detection">SVT-AV1 common questions</a>）映射到 <code>transition_present</code>。另外，如果需要这种提高画质的 keyint GOP 拆分机制，SVT-AV1 还有前瞻进程中 mini-GOP 的实现可用。</p>
            <code class="code-bold">--scm</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 2：自适应&gt;开启录屏特化功能模式（匹配使用 IBC、调色板帧内编码）开关控制所需的内容类型检测。</p>
            <code class="code-bold">--lookahead</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 -1~120，默认 -1：自动&gt;指定前瞻进程搜索距离</p>
            <code class="code-bold">--hierarchical-levels</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 2~5，默认 4，<span class="text-blue-emph"><code>&#45;&#45;preset 12~13</code> 下默认 5</span>，<span class="text-red-emph">覆盖<code>&#45;&#45;fast-decode</code>，被<code>&#45;&#45;pred-struct</code>覆盖</span>&gt;指定每个 GOP 于底层之上的分层预测结构层数。越高则帧间冗余功能越强、尖塔混合参考帧越多、负责解码每个 GOP 的 OBU 越多、编码速度越慢、解码压力越大（带宽压力越小）、串流时的网络信号质量要求越高。类似于设定连续 B 帧长度——2: 共 3 层，3: 共 4 层，5: 共 6 层。</p>
            <code class="code-bold">&#45;&#45;pred-struct</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 1~2，默认 2，<span class="text-red-emph">覆盖 <code>--hierarchical-levels</code></span>&gt;指定帧间预测模式——1: 低延迟编解码（限为单层，关闭混合参考模式，并影响一些编码模式的强度，映射到 <code>rtc_tune = true</code>、<code>LOW_DELAY_B</code>），2: 支持随机访问（不限制，开启混合参考模式）。</p>
            <pre><code class="text-smaller language-cpp">
/* 
 * 指定帧间预测模式，definitions.h 中为 PredStructure
 */
typedef enum SvtAv1PredStructure {
    SVT_AV1_PRED_LOW_DELAY_P   = 0, // 不再可用
    SVT_AV1_PRED_LOW_DELAY_B   = 1,
    SVT_AV1_PRED_RANDOM_ACCESS = 2,
    SVT_AV1_PRED_TOTAL_COUNT   = 3, // 暂不可用
    SVT_AV1_PRED_INVALID       = 0xFF,
} SvtAv1PredStructure;
            </code></pre>

            <code class="code-bold">&#45;&#45;enable-dg</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 1：开，<span class="text-red-emph">需 <code>--rc 0</code>，分辨率小于 4k，<code>&#45;&#45;fast-decode 0</code>，<code>&#45;&#45;pred-struct 2</code>，<code>&#45;&#45;preset &lt;=7</code></span>&gt;开启 GOP 层数的前期动态分析，拆分出 mini-GOP 以在 GOP 结构上提高对高时域复杂度场景的适应性，mini-GOP 默认长度为 16 帧。</p>
            <code class="code-bold">--startup-mg-size</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 2~4 或 0，默认 0：关，<span class="text-red-emph">需小于 <code>--hierarchical-levels</code></span>&gt;指定每个关键帧之后首个 mini-GOP 专用的分层预测结构层数。类似于设定连续 B 帧长度——2: 共 3 层，3: 共 4 层，4: 共 5 层。<span class="text-red-emph">猜测：</span>该功能可以在 GOP 本身较长的情况下，缓解 CBR 解码延迟的增长速率，从而使码率分配更合理。</p>

            <h5>设定 Superblock 大小到 64x64 的条件</h5>
            <ul>
                <li><code>--enable-variance-boost 1</code></li>
                <li><code>&#45;&#45;preset</code> 大于等于 7，更慢的预设需要高 GOP QP 设置为 64x64</li>
                <li><code>&#45;&#45;fast-decode</code> 开</li>
                <li><code>&#45;&#45;resize-mode</code> 开</li>
                <li><code>--pred-struct 1</code></li>
                <li>输入视频分辨率大于 360p、GOP QP 小于等于 56、</li>
                <li>输入视频分辨率小于等于 240p</li>
            </ul>

            <h4>（10/12）前瞻进程、帧间预测</h4>
            <code class="code-bold">&#45;&#45;enable-tpl-la</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 1：开，需 CRF/CQP 率控制模式&gt;开启前瞻时域依赖性建模，决定率控制的自动化。</p>
            <code class="code-bold">&#45;&#45;enable-tf</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~2，默认 1：开&gt;时域降噪过滤，也代表启用 <code>ALTREF</code> 帧类型，同时涉及 <code>OVERLAY</code> 帧类型的建立——0：关、1：开、2：根据帧类型（关键帧、参考帧、亮度、色度）、以及偏移值 <code>--tf-strength</code> 决定强度衰减系数、最后由强度在视频中的变化决定。</p>
            <code class="code-bold">--tf-strength</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~4，默认 3：较强&gt;指定时域降噪过滤中，滤镜强度衰减的偏移值。</p>
            <code class="code-bold">&#45;&#45;enable-overlays</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 1：开&gt;启用 <code>OVERLAY</code> 帧类型。</p>
            <code class="code-bold">&#45;&#45;enable-mfmv</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 -1~1，默认 -1：自动&gt;开启向量场规划（MVRS）。</p>

            <h4>（11/12）环路滤镜</h4>
            <code class="code-bold">&#45;&#45;enable-dlf</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 1：开&gt;开启环路去块滤镜。</p>
            <code class="code-bold">&#45;&#45;enable-cdef</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 1：开&gt;开启环路定向边缘强化滤镜。</p>
            <code class="code-bold">&#45;&#45;enable-restoration</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 1：开&gt;开启环路还原滤镜。在快速高画质编码预设下可能会出现 SSW 滤镜因 RU 大小过大的模糊失真。</p>
            <code class="code-bold">--sharpness</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 -7~7，默认 0：平均&gt;指定环路滤镜和模式决策中涉及锐度变更的强度。</p>
            <ul class="font-monospace pl-5 text-smaller list-dotless">
                <li><b>小于 0: </b>增加死区量化器大小，减少量化舍入进位宽限</li>
                <li><b>大于 0: </b>去块强度减半，减少死区量化器大小</li>
                <li><b>大于 4: </b>去块强度减四分之三，减少死区量化器大小，增加量化舍入进位宽限</li>
                <li><b>7：</b>最大值，但下方测试结果显示这个强度在所有情况下都反而会降低画质，因此不推荐</li>

                <li><code>-4</code> 相比 <code>--qm-min 0</code> 与 <code>--tune 1 --sharpness 0</code>（默认）下的画质反而高一点，并且降低了码率；除此之外不如 <code>--tune 0 --sharpness 0</code> 的画质提升，不失为专注降低码率的有效选项</li>
                <li><code>0~4</code> 对码率的影响，以及画质的影响取决于片源；画质提升在 VMAF 中显得无效，低强度（0~4）相比其他参数可以有效提升暂停画质，因此可以用于搭配高暂停画质测试选项，但高强度下对码率的影响会明显增加（5%~10%）</li>
                <li><code>6~7</code> 在动态信息复杂的 3D 动画、漫画材质动画（富含锐利纹理场景）中画质提升显著（SSIMULACRA2.1 +5 分），除此之外提升不大（SSIMULACRA2.1 +1~3 分），但码率的增加又与画质的提升不相关（更类似于线性增加 5~10%）</li>
                <li><code>7</code> 相比 6 出现了副作用，码率照旧增加，但画质反而降低了（一定会复现，结合 -4 强度的现象，推测是遇到了码率分配受限的问题）</li>
            </ul>
            <p class="text-blue-side">注：该参数对压制结果体积或码率的影响较大（5%~10%），但对画质的影响较小，因此不适合除画质绝对优先情况下使用。详见下方测试版块的大范围优化测试。</p>
            <p class="text-blue-side">注：尽管 &gt; 0 也会增加量化舍入进位宽限，但其影响在画面简单，容易压缩的视频源上有限。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：sharpness 相关源码分析</button>
            <div class="coll-content"><code>deblocking_filter.c</code>：设定环路滤镜强度
                <pre><code class="text-smaller language-cpp">
EbErrorType svt_av1_pick_filter_level(EbPictureBufferDesc *srcBuffer, PictureControlSet *pcs, LpfPickMethod method) {
    // ...省略...
    SequenceControlSet *scs = pcs->scs;
    // 导入帧标识头、源缓冲
    FrameHeader *frm_hdr = &pcs->ppcs->frm_hdr;
    (void)srcBuffer;
    struct LoopFilter *const lf = &frm_hdr->loop_filter_params;

    // 将参数 sharpness 缩限到 0~7 范围，赋值到 sharpness_val
    const int32_t sharpness_val = CLIP3(0, 7, pcs->scs->static_config.sharpness);

    // 将 sharpness_val 赋值到环路滤镜的 sharpness_level 变量
    lf->sharpness_level = sharpness_val;

    // 当前帧为关键帧，且设定 Tune VQ 时，提高 sharpness_level
    if (frm_hdr->frame_type == KEY_FRAME && pcs->scs->static_config.tune == 0)
        lf->sharpness_level = MIN(7, sharpness_val + 2);

    // ...省略...
}
                </code></pre>
                <code>deblocking_common.c</code>：遍历每个可能的强度（lvl）以设定滤镜值
                <pre><code class="text-smaller language-cpp">
void svt_aom_update_sharpness(LoopFilterInfoN *lfi, int32_t sharpness_lvl) {
    int32_t lvl;

    // MAX_LOOP_FILTER == 63
    for (lvl=0; lvl&lt;=MAX_LOOP_FILTER; lvl++) {

        // 根据 sharpness 设定 block_inside_limit
        // 具体为 lvl 右移 1 或 2 位（÷2、÷2^2）
        // 右移 0 位后，最大 block_inside_limit 为 63
        // 右移 1 位后，最大 block_inside_limit 为 31
        // 右移 2 位后，最大 block_inside_limit 为 15
        int32_t block_inside_limit =
            lvl &gt;&gt; ((sharpness_lvl &gt; 0) + (sharpness_lvl &gt; 4));

        // 上限、下限限位
        if (sharpness_lvl > 0) {
            if (block_inside_limit > (9 - sharpness_lvl))
                block_inside_limit = (9 - sharpness_lvl);
        }
        if (block_inside_limit &lt; 1) {
            block_inside_limit = 1;
        }

        // 根据 block_inside_limit 限制环路滤镜的各个强度阈值（LoopFilterThresh）
        // lim: 特大块内的去块最大强度
        memset(lfi->lfthr[lvl].lim, block_inside_limit, SIMD_WIDTH);
        // mblim: 特大块（Macroblock）间缝隙的去块最大强度
        memset(lfi->lfthr[lvl].mblim, (2 * (lvl + 2) + block_inside_limit), SIMD_WIDTH);
    }
}
                </code></pre>
                <code>md_config_process.c</code>：配置量化相关强度
                <pre><code class="text-smaller language-cpp">
void svt_av1_build_quantizer(PictureParentControlSet *pcs, EbBitDepth bit_depth, int32_t y_dc_delta_q, int32_t u_dc_delta_q, int32_t u_ac_delta_q, int32_t v_dc_delta_q, int32_t v_ac_delta_q, Quants *const quants, Dequants *const deq) {
    int32_t i, q, quant_qtx;

    for (q=0; q&lt;QINDEX_RANGE; q++) {
        int32_t qzbin_factor = svt_aom_get_qzbin_factor(q, bit_depth);
        // 非零值舍入范围在 lossless 下设为 64（?）
        int32_t qrounding_factor = q == 0 ? 64 : 48;
        const int32_t sharpness_val = pcs->scs->static_config.sharpness;
        // 当前量化值与帧标识头 Q-index 的强度差异大小
        // q 小得负，q 大得正
        int diff = q - pcs->frm_hdr.quantization_params.base_q_idx;

        // sharpness 与 diff 正负相反时：
        if ((sharpness_val &gt; 0 && diff &lt; 0) ||
            (sharpness_val &lt; 0 && diff &gt; 0)) {
            
            // 根据 sharpness 计算偏移值：
            // sharpness_val 大于 0：左移一位（×2），与 diff 的绝对值中选最大
            // sharpness_val 小于等于 0：绝对值左移一位（×2），与 diff 值中选最小
            int32_t offset = sharpness_val &gt; 0 ? MAX(sharpness_val &lt;&lt; 1, abs(diff))
                                               : MIN(abs(sharpness_val) &lt;&lt; 1, diff);
            
            // sharpness 大于 0 时，缩小死区量化（Deadzone / Zero bin factor）1 个偏移值，否则扩大 1 个偏移值
            qzbin_factor += (sharpness_val &gt; 0) ? -offset : offset;

            // sharpness 大于 0 时，增加非零值舍入因数（与 qzbin_factor 负相关）
            // qrounding_factor 初始值为 48，而越大则量化结果的进位越容易，对细节有微小提升
            qrounding_factor += (sharpness_val &gt; 0) ? offset : -offset;

            // 限位
            qzbin_factor = CLIP3(1, 256, qzbin_factor);
            qrounding_factor = CLIP3(1, 256, qrounding_factor);
        }
        // ... 省略 ...
    }
    // ... 省略 ...
}
                </code></pre>
            </div>

            <h5>（11/12——1/3）胶片颗粒编码</h5>
            <code class="code-bold">&#45;&#45;film-grain</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~50，默认 0：关，<span class="text-red-emph">被<code>&#45;&#45;film-grain-denoise</code>覆盖</span>&gt;开启 FGS 并指定噪点分离强度，涉及编码前的噪声的分离与建模、解码端的再合成。强度取决于画面类型，例如录像片源适合中~高强度、动画与录屏片源适合低强度（见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/CommonQuestions.md#tuning-for-animation">SVT-AV1 Common question</a>）——1：最弱分离、50：最强分离。</p>
            <ul class="list-dotless text-smaller font-monospace">
                <li><b>0</b>（关闭）：跳过 FGS，完全使用时域降噪过滤（TF）分离，编码和降噪噪声画面</li>
            </ul>
            <code class="code-bold">&#45;&#45;film-grain-denoise</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;0/1，默认 0：关，<span class="text-red-emph">覆盖<code>&#45;&#45;film-grain</code></span>&gt;丢弃 FGS 分离的噪点，<code>&#45;&#45;film-grain</code> 的分离强度间接转化为降噪强度。</p>

            <h4>（11/12——2/3）参考缩放环路</h4>
            <code class="code-bold">&#45;&#45;resize-mode</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~4，默认 0：关，<span class="text-red-emph">需关闭超分辨率环路</span>&gt;启用参考缩放环路，并制定缩放模式。</p>
            <ul class="list-dotless text-smaller font-monospace">
                <li><b>1</b>（固定）：设定 1 个关键帧缩放分母、1 个参考帧缩放分母</li>
                <li><b>2</b>（随机）：用于测试</li>
                <li><b>3</b>（动态，1pass CBR）：据缓冲区大小决定，只要缓冲区不溢出就不缩放；否则进入 1 阶段以大减分辨率，然后进入 2 阶段，只有当触发缓冲区下溢（buffer underflow）才会恢复原始分辨率：
                    <ul>
                        <li>1 阶段：缩放到 <span class="text-blue-math">\( 8 \div 32 \)</span></li>
                        <li>2 阶段：缩放到 <span class="text-blue-math">\( 8 \div 16 \)</span></li>
                    </ul>
                </li>
                <li><b>4</b>（随机访问）：根据 <code>&#45;&#45;frame-resz-events</code>、<code>&#45;&#45;frame-resz-kf-denoms</code>、<code>&#45;&#45;frame-resz-denoms</code> 指定视频中的多个分母</li>
            </ul>
            <code class="code-bold">&#45;&#45;resize-denom</code>；<code class="code-bold">&#45;&#45;resize-kf-denom</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 8~16，默认 8：分母&gt;指定参考缩放环路中“8÷缩放分母”的非关键帧、关键帧缩放分母——8：缩放到 8÷8，16：缩放到 1÷2。</p>

            <code class="code-bold">&#45;&#45;frame-resz-events</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;逗号分隔整数帧号，默认空，<span class="text-red-emph">需 <code>&#45;&#45;resize-mode 4</code></span>&gt;启用参考缩放环路，并制定缩放模式。</p>
            <code class="code-bold">&#45;&#45;frame-resz-denom</code>；<code class="code-bold">&#45;&#45;frame-resz-kf-denom</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;逗号分隔整数 8~16，默认 8：分母，<span class="text-red-emph">需 <code>&#45;&#45;resize-mode 4</code></span>&gt;指定参考缩放环路中每个 <code>&#45;&#45;frame-resz-events</code> 的“8÷缩放分母”的非关键帧、关键帧缩放分母——8：缩放到 8÷8，16：缩放到 1÷2。</p>
            
            <h4>（11/12——3/3）超分辨率环路</h4>
            <code class="code-bold">--superres-mode</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~4，默认 0：关，<span class="text-red-emph">需关闭参考缩放环路</span>&gt;开启超分辨率环路，并指定一种缩小模式：</p>
            <ul class="list-dotless text-smaller font-monospace">
                <li><b>1</b>（固定）：由 <code>--superres-denom</code> 指定 1 项“8÷缩小分母”中的分母，从而决定编码分辨率</li>
                <li><b>2</b>（随机）：每个 GOP 随机选一个分母</li>
                <li><b>3</b>（阈值）：根据率控制模式判断出的 QP 是否达到用户指定的 QP 阈值（QThreshold，<code>--superres-qthres</code>、<code>--superres-kf-qthres</code>）判断增大和缩小分母，仅缩小关键帧与支线被参考帧 <code>ALTREF</code></li>
                <li><b>4</b>（自动双流~自动齐发）：进行类似 Npass 编码（至少 2 遍）的流程。首遍编码缩小版视频流、最后编码全分辨率，由率失真优化筛选、拼合出码率限制下的最优版本</li>
            </ul>
            <code class="code-bold">--superres-denom</code>；<code class="code-bold">--superres-kf-denom</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 8~16，默认 8：分母&gt;指定超分辨率环路中“8÷缩放分母”的非关键帧、关键帧缩放分母——8：缩放到 8÷8，16：缩放到 1÷2。</p>
            <code class="code-bold">--superres-qthres</code>；<code class="code-bold">--superres-kf-qthres</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 0~64，默认 43：中高&gt;指定动态分母模式下非关键帧、关键帧的 QP 阈值，只要率控制模式指定了更高的 QP 值，就开始增加缩小分母大小。</p>

            <h4>（12/12）编码预设</h4>
            <p>注：SVT-AV1 的预设参数下牵扯着若干项强度的设定，且官方文档中仅实现了部分标注。以下内容主要来自于源代码分析，因此可能会看错看晕的情况，但对于帮助设定该参数有着良性作用。</p>
            <code class="code-bold">&#45;&#45;preset</code>
            <p class="font-monospace pl-5 m-0 overflow-auto">&lt;整数 13~-1，默认 10（可能最新版本为 8）：快速&gt;SVT-AV1 中高度涉及编码功能强度设定的参数。大致上 13~7 用于实时和快速编码用途，6~4 为常规用途，3~1 为高压缩用途，-1 为（<code>ENC_MR</code>，Research mode）模式，是在算力足以支撑 preset 0 时可以考虑的更优选项（不一定是上位替代）。10~0 的<i>部分</i>预设范围见下，或 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/CommonQuestions.md">SVT-AV1 Common questions</a>：</p>
            <ul class="text-smaller">
                <li><b>TF level</b>：时域降噪过滤搜索级别</li>
                <li><b>NSQ level</b>：非正方形细分块搜索级别</li>
                <li><b>HME SA</b>：分叉式动态搜索区域 Search area</li>
                <li><b>TXT level</b>：变换块分块搜索级别，见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-TX-Search.md">SVT-AV1 Docs</a></li>
                <li><b>TXS level</b>：变换块大小搜索级别，见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-TX-Search.md">SVT-AV1 Docs</a></li>
                <li><b>OBMC level</b>：重叠块运动补偿搜索级别，见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Appendix-Overlapped-Block-Motion-Compensation.md">SVT-AV1 Docs</a></li>
                <li><b>Filter Intra level</b>：递归插值模式搜索级别</li>
                <li><b>InterIntra level</b>：混合参考帧的帧内帧间模式搜索级别</li>
                <li><b>COMP level</b>：混合参考帧的帧间模式（InterInter、Inter-Inter）搜索级别</li>
                <li><b>TPL level</b>：前瞻时域依赖性建模（Lookahead）级别</li>
                <li><b>GM level</b>：全局仿射变换动态补偿</li>
                <li><b>Update CDF level</b>：累积分布函数更新搜索级别</li>
                <li><b>MRP level</b>：多参考帧搜索范围 Multi reference picture</li>
                <li><b>Max CAN</b>：模式决策最大候选量 Maximum candidates</li>
                <li><b>Chroma level</b>：色度平面编码级别（模式决策搜索级别与候选数量）</li>
                <li><b>DLF level</b>：去块滤镜级别（亮度、色度强度判断搜索、是否检查参考帧所用强度等数据）</li>
                <li><b>SG filter level</b>：子空间投影回归制导滤镜（SGR）级别</li>
                <li><b>WN filter level</b>：可拆分对称维纳滤镜（SSW）级别</li>
                <li><code>rtc_tune</code>：实时编解码（Real-time coding）开关，<code>&#45;&#45;pred-struct 1</code> 时启用</li>
                <li><code>is_ref</code>：当前帧的类型为被参考帧</li>
                <li><code>is_base</code>：当前帧位于分层预测结构的底层</li>
                <li><code>is_not_last_layer</code>：当前帧不位于分层预测结构的顶层</li>
                <li><code>is_islice</code>：当前帧的帧类型属于 I 帧，即分层预测结构底部帧（PCS）</li>
                <li><code>transition_present</code>：设定的帧间范围含有转场</li>
                <li><code>coeff_lvl</code>：块内系子数量高低：<code>{VLOW_LV=0, LOW_LVL=1, NORMAL_LVL=2, HIGH_LVL=3, INVALID_LVL=~0}</code></li>
            </ul>
            <div class="overflow-auto mt-3">
                <table class="table-center text-smaller">
                    <thead>
                        <tr class="border-lr border-bottom">
                            <th>功能\预设值</th>
                            <th class="t-light-gray">10</th>
                            <th class="t-light-gray px-1">9</th>
                            <th class="t-light-gray px-1">8</th>
                            <th class="t-light-gray">7</th>
                            <th class="t-invert-light">6</th>
                            <th class="t-invert-light">5</th>
                            <th class="t-invert-light">4</th>
                            <th class="t-invert-dark">3</th>
                            <th class="t-invert-dark">2</th>
                            <th class="t-invert-dark">1</th>
                            <th style="background-color: black; color: white">0</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Globals/EbEncHandle.c">TF level</a><br><span class="text-smaller">（需 <code>&#45;&#45;enable-tf</code>、<code>--hierarchical-levels &gt;1</code>、<code>--lossless 0</code>，否则关）</span></td>
                            <td class="px-1 text-smaller" colspan="3">
                                <code>&#45;&#45;pred-struct 1</code> 且分辨率大于等于 720p：2，小于 720p：0；否则 9
                            </td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <td class="px-1 t-light-gray text-smaller">
                                <code>&#45;&#45;pred-struct 1</code> 且分辨率大于等于 720p：1，小于 720p：0；否则 8
                            </td>
                            <td class="px-1 t-invert-light" colspan="3">5</td>
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <td class="px-1 t-invert-dark">3</td>
                            <td class="px-1 t-invert-dark" colspan="2">2</td>
                            <!--<td>10</td>-->
                            <td class="px-1" style="background-color: black; color: white">1</td>
                        </tr>

                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbCodingUnit.c">NSQ level</a></td>
                            <td class="px-1" colspan="5">关</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <td class="px-1 t-invert-light text-smaller"><code>LOW_LVL, is_base</code>：15，否则 0；<code>HIGHT_LVL, is_base</code>：17，否则 0；<code>regular, is_base</code>：16，否则 0</td>
                            <td class="px-1 t-invert-light text-smaller"><code>LOW_LVL, is_base</code>：9，否则 12；<code>HIGH_LVL, is_base</code>：11，否则 14；<code>regular, is_base</code>：10，否则 13</td>
                            <td class="px-1 t-invert-dark text-smaller" colspan="2"><code>is_base</code>：7，否则 8</td>
                            <!--<td>9</td>-->
                            <td class="px-1 t-invert-dark text-smaller"><code>is_base</code>：5，否则 6</td>
                            <td class="px-1 text-smaller" style="background-color: black; color: white"><code>is_ref</code>：2，否则 4</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbMotionEstimationProcess.c">HME SA</a>
                            </td>
                            <td class="px-1 t-light-gray text-smaller" colspan="6">搜索面积最小 240x240，最大 480x480</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <td class="px-1 t-invert-light text-smaller" colspan="2">
                                源分辨率大于等于 4k 时最小 32x32，最大 192x192；<br>
                                否则与更快的预设一致
                            </td>
                            <!--<td>7</td>-->
                            <td class="px-1 t-invert-dark text-smaller" colspan="3">
                                源分辨率小于等于 1080p 且场景复杂度高时：最小 16x16，最大 192x192；<br>
                                否则与更快的预设一致
                            </td>
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbMotionEstimationProcess.c">HME Refine</a></td>
                            <td class="px-1 t-light-gray text-smaller" colspan="9">1、2 级分叉皆细化 16x16</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>7</td>-->
                            <td class="px-1 t-invert-dark text-smaller" colspan="2">1、2 级分叉皆细化 8x3</td>
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbModeDecisionConfigurationProcess.c">TXT level</a></td>
                            <td class="px-1 text-smaller" colspan="4">
                                <code>LOW_LVL, is_base</code>：4，否则 5；<br>
                                <code>HIGH_LVL, is_base</code>：8，否则 10；<br>
                                <code>NORMAL_LVL</code>：7
                            </td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <td class="px-1 t-invert-light text-smaller" colspan="5">
                                <code>LOW_LVL</code>：4；<code>HIGH_LVL</code>：7；<br>
                                <code>NORMAL_LVL, is_base</code>：4，否则 5
                            </td>
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <td class="px-1 t-invert-dark">3</td>
                            <td class="px-1" style="background-color: black; color: white">2</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbModeDecisionConfigurationProcess.c">TXS level</a></td>
                            <td class="px-1 text-smaller"><code>is_islice</code>：4，否则 0</td>
                            <td class="px-1 t-light-gray text-smaller" colspan="3"><code>is_base</code>：4，否则 0</td>
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <td class="px-1 t-invert-light text-smaller" colspan="3"><code>is_base</code>：3，否则 0</td>
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <td class="px-1 t-invert-dark " colspan="2">3</td>
                            <!--<td>9</td>-->
                            <td class="px-1 t-invert-dark" colspan="2">2</td>
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbModeDecisionConfigurationProcess.c">OBMC level</a></td>
                            <td class="px-1">0</td>
                            <td class="px-1 t-light-gray text-smaller" colspan="3"><code>is_base</code>：4，否则 0</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <td class="px-1 t-invert-light" colspan="4">4</td>
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <td class="px-1 t-invert-dark" colspan="2">3</td>
                            <!--<td>10</td>-->
                            <td class="px-1" style="background-color: black; color: white">1</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbModeDecisionConfigurationProcess.c">Filter Intra level</a></td>
                            <td class="px-1" colspan="4">0</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <td class="px-1 t-invert-light" colspan="3">2</td>
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <td class="px-1 t-invert-dark" colspan="4">1</td>
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbModeDecisionConfigurationProcess.c">InterIntra level</a></td>
                            <td class="px-1">0</td>
                            <td class="px-1 t-light-gray text-smaller" colspan="7"><code>transition_present</code>：2，否则 0</td>
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <td class="px-1 t-invert-dark text-smaller" colspan="2"><code>is_base</code>/<code>transition_present</code>：2，否则 0</td>
                            <!--<td>10</td>-->
                            <td class="px-1" style="background-color: black; color: white">2</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbModeDecisionConfigurationProcess.c">COMP level</a></td>
                            <td class="px-1" colspan="8">0</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <td class="px-1 t-invert-dark" colspan="2">4</td>
                            <!--<td>10</td>-->
                            <td class="px-1" style="background-color: black; color: white">3</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbModeDecisionConfigurationProcess.c">Chroma level</a></td>
                            <td class="px-1 t-light-gray" colspan="3">5</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <td class="px-1 t-light-gray" colspan="7">4</td>
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <td class="px-1" style="background-color: black; color: white">1</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbModeDecisionConfigurationProcess.c">Update CDF level</a></td>
                            <td class="px-1">0</td>
                            <td class="px-1 t-light-gray" colspan="5"><code>is_base</code>：1，否则 0</td>
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <td class="px-1 t-invert-light text-smaller"><code>is_base</code>：1，否则 3</td>
                            <td class="px-1 t-invert-dark" colspan="3"><code>is_base</code>：1，否则 2</td>
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <td class="px-1" style="background-color: black; color: white">1</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Globals/EbEncHandle.c">MRP level</a></td>
                            <td class="px-1 t-light-gray">11</td>
                            <td class="px-1 t-light-gray" colspan="2">7</td>
                            <!--<td>2</td>-->
                            <td class="px-1 t-light-gray text-smaller">
                                <code>&#45;&#45;pred-struct 1 --hierarchical-levels &lt;= 3</code>：6；<br>
                                <code>&#45;&#45;pred-struct 1 --hierarchical-levels &gt; 3</code>：5；<br>
                                <code>&#45;&#45;pred-struct 2</code>：7
                            </td>
                            <td class="px-1 t-invert-light">5</td>
                            <td class="px-1 t-invert-light">4</td>
                            <td class="px-1 t-invert-light" colspan="3">3</td>
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <td class="px-1 t-invert-dark">2</td>
                            <td class="px-1" style="background-color: black; color: white">1</td>
                        </tr>
                        <!--<tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Globals/EbEncHandle.c">参考帧搜索范围级别 MRP</a>：<br>（<code>&#45;&#45;pred-struct 1</code>）</td>
                            <td class="px-1">11</td>
                            <td class="px-1 t-light-gray" colspan="10">10</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">参考帧搜索范围级别 MRP：<br>（<code>&#45;&#45;pred-struct 2</code>）</td>
                            <td class="px-1"><code>&#45;&#45;rc 0/&#45;&#45;rc 2</code>：0，否则 12</td>
                            <td class="px-1 text-smaller" colspan="2"><code>&#45;&#45;rc 0/&#45;&#45;rc 2</code>：<br>10，否则 0</td>
                            <td class="px-1 text-smaller" colspan="3"><code>&#45;&#45;rc 0/&#45;&#45;rc 2</code>：<br>9，否则 0</td>
                            <td class="px-1 t-light-gray" colspan="2">源 &gt; 640x360 或 <code>&#45;&#45;fast-decode 2<code>：9，否则 5</td>
                            <td class="px-1 t-light-gray" colspan="3">源 &gt; 640x360 或 <code>&#45;&#45;fast-decode 2<code>：9，否则 2</td>
                        </tr>-->
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Globals/EbEncHandle.c">TPL level</a><br><span class="text-smaller">（关缩放/超分辨率环路、<code>pred-struct 2</code>、<code>aq-mode &gt; 0</code>、<code>pass &gt; 1</code>）</span></td>
                            <td class="px-1 t-light-gray">6</td>
                            <td class="px-1 t-light-gray">5</td>
                            <td class="px-1 t-light-gray" colspan="2">4</td>
                            <!--<td>4</td>-->
                            <td class="px-1 t-invert-light" colspan="2">2</td>
                            <!--<td>6</td>-->
                            <td class="px-1 t-invert-light" colspan="5">1</td>
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbPictureDecisionProcess.c">GM level</a><span class="text-smaller">（关缩放/超分辨率环路）</span></td>
                            <td class="px-1 t-light-gray text-smaller" colspan="5"><code>is_ref</code>：关，否则 6</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <td class="px-1 t-invert-light" colspan="2">5</td>
                            <!--<td>8</td>-->
                            <td class="px-1 t-invert-dark" colspan="2">4</td>
                            <!--<td>9</td>-->
                            <td class="px-1 t-invert-dark">3</td>
                            <td class="px-1" style="background-color: black; color: white">2</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbModeDecisionProcess.c">Max CAN</a></td>
                            <td class="px-1 t-light-gray" colspan="4">190</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <td class="px-1 t-invert-light">236</td>
                            <td class="px-1 t-invert-light">295</td>
                            <td class="px-1 t-invert-light">369</td>
                            <td class="px-1 t-invert-dark">576</td>
                            <td class="px-1 t-invert-dark">720</td>
                            <td class="px-1 t-invert-dark">1000</td>
                            <td class="px-1" style="background-color: black; color: white">1225</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbPictureDecisionProcess.c">CDEF level</a><span class="text-smaller">（关 IBC）</span></td>
                            <td class="px-1 t-light-gray text-smaller" colspan="3"><code>is_base</code>：8，否则针对 <code>is_ref</code>：9，否则 10</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <td class="px-1 t-light-gray text-smaller" colspan="2"><code>is_ref</code>：8，否则 10</td>
                            <!--<td>5</td>-->
                            <td class="px-1 t-invert-light">4</td>
                            <td class="px-1 t-invert-light" colspan="4">2</td>
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <td class="px-1" style="background-color: black; color: white">1</td>
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Source/Lib/Globals/enc_handle.c#L4360"><code>--hierarchical-levels</code></a></td>
                            <td class="px-1 t-light-gray text-smaller" colspan="2">
                                <code>&#45;&#45;pred-struct 1</code>：2，否则 4
                            </td>
                            <!--<td>2</td>-->
                            <td class="px-1 t-light-gray text-smaller">
                                <code>&#45;&#45;pred-struct 1</code>：2，否则若 <code>&#45;&#45;fast-decode</code> 开，或 <code>&#45;&#45;rc</code> VBR/CBR，或分辨率大于等于 1080p：4，否则 5
                            </td>
                            <td class="px-1 t-light-gray text-smaller" colspan="8">
                                <code>&#45;&#45;pred-struct 1</code>：2，否则若 <code>&#45;&#45;fast-decode</code> 开，或 <code>&#45;&#45;rc</code> VBR/CBR，或分辨率大于等于 8k：4，否则 5
                            </td>
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Source/Lib/Codec/enc_mode_config.c#L1264">SG filter level</a></td>
                            <td class="px-1" colspan="8">关</td>
                            <!--<td>1</td>-->
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <td class="px-1 t-invert-dark text-smaller">分辨率大于等于 8k，或分辨率大于等于 360p、且 <code>&#45;&#45;fast-decode</code> 开时关，否则 3</td>
                            <td class="px-1 t-invert-dark" colspan="3">1（最大）</td>
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Source/Lib/Codec/enc_mode_config.c#L1246">WN filter level</a></td>
                            <td class="px-1" colspan="3">关</td>
                            <!--<td>1</td>-->
                            <!--<td>2</td>-->
                            <td class="px-1 t-light-gray text-smaller"><code>is_base</code>：5，否则关</td>
                            <td class="px-1 t-invert-light" colspan="8"><code>is_not_last_layer</code>：5，否则关</td>
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">DRL 参考帧数量</td>
                            <td class="px-1 t-light-gray">2</td>
                            <td class="px-1 t-light-gray" colspan="5">5</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <td class="px-1 t-invert-light" colspan="5">7（最大）</td>
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">整数像素动态搜索 ME</td>
                            <td class="px-1 t-light-gray" colspan="11">开</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">子像素动态补偿</td>
                            <td class="px-1 t-light-gray" colspan="11">开</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Source/Lib/Globals/enc_handle.c">Superblock 大小</a></td>
                            <td class="px-1 t-light-gray" colspan="4">64</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <td class="px-1 t-invert-light text-smaller" colspan="3">（由率控制模式指定的）GOP QP 小于等于 57：64，否则 128</td>
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <td class="px-1 t-invert-dark text-smaller">GOP QP 小于等于 56：64，否则 128</td>
                            <td class="px-1 t-invert-dark text-smaller">源分辨率小于等于 480p：GOP QP 小于等于 56：64，否则 128；源分辨率大于 480p：GOP QP 小于等于 50：64，否则 128</td>
                            <td class="px-1 t-invert-dark" colspan="2">128</td>
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">最小细分块大小</td>
                            <td class="px-1 t-light-gray" colspan="8">8</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <td class="px-1 t-invert-dark" colspan="3">4</td>
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1 text-smaller">帧内编码 DC、SMOOTH/_H/_V、夹角、Paeth、CFL</td>
                            <td class="px-1 t-light-gray" colspan="11">开</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbPictureDecisionProcess.c">IBC level</a><span class="text-smaller"></span></td>
                            <td class="px-1 t-light-gray">6</td>
                            <td class="px-1 t-light-gray" colspan="2">5</td>
                            <!--<td>4</td>-->
                            <td class="px-1 t-light-gray" colspan="2">4</td>
                            <!--<td>6</td>-->
                            <td class="px-1 t-invert-light" colspan="6">1</td>
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/f0efc5fa8d92355ae6bc6aaa56d09c574dd64009/Source/Lib/Encoder/Codec/EbPictureDecisionProcess.c">Palette level</a><span class="text-smaller"></span></td>
                            <td class="px-1 t-light-gray" colspan="11"><code>is_base</code>：2，否则 0</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">帧内编码递归插值模式</td>
                            <td class="px-1" colspan="4">关</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <td class="px-1 t-invert-light" colspan="7">开</td>
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">单帧参考帧、混合参考帧</td>
                            <td class="px-1 t-light-gray" colspan="11">开</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">亮度 1/8 像素插值</td>
                            <td class="px-1 t-light-gray" colspan="11">开</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">子像素插值搜索</td>
                            <td class="px-1 t-light-gray" colspan="11">开</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">仿射变换动态补偿</td>
                            <td class="px-1 t-light-gray" colspan="11">开</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1"><code>&#45;&#45;enable-mfmv</code></td>
                            <td class="px-1 t-light-gray" colspan="11">1</td>
                            <!--<td>2</td>-->
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <!--<td>10</td>-->
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">楔形蒙版预测分权</td>
                            <td class="px-1" colspan="8">关</td>
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <td class="px-1 t-invert-dark" colspan="3">开</td>
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">帧间距离加权分权</td>
                            <td class="px-1" colspan="8">关</td>
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <td class="px-1 t-invert-dark" colspan="3">开</td>
                            <!--<td>11</td>-->
                        </tr>
                        <tr class="border-lr border-bottom">
                            <td class="px-1">差值加权模式分权</td>
                            <td class="px-1" colspan="8">关</td>
                            <!--<td>3</td>-->
                            <!--<td>4</td>-->
                            <!--<td>5</td>-->
                            <!--<td>6</td>-->
                            <!--<td>7</td>-->
                            <!--<td>8</td>-->
                            <!--<td>9</td>-->
                            <td class="px-1 t-invert-dark" colspan="3">开</td>
                            <!--<td>11</td>-->
                        </tr>
                    </tbody>
                </table>

                <h5>（12/12——1/2）<a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Source/Lib/Codec/enc_mode_config.c#L1302">DLF level</a>：</h5>
                <table class="table-center text-smaller">
                    <thead>
                        <tr class="border-lr border-top">
                            <th>预设</th>
                            <th>实时模式：rtc_tune</th>
                            <th>一般模式：fast_decode 关<br>低分辨率模式：源小于等于 360p</th>
                            <th>快速模式：fast_decode 开且源大于 360p<br>高分辨率（节约内存）模式：分辨率大于等于 8k</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-lr border-bottom t-light-gray align-items-center text-smaller">
                            <td class="px-1"><b>10+</b></td>
                            <td class="px-1"><code>is_not_last_layer</code>：7，否则：0</td>
                            <td colspan="2">
                                <code>coeff_lvl</code> 高：<code>is_base</code>：6，否则：0<br>
                                <code>coeff_lvl</code> 中~低：<code>is_base</code>：5，否则 <code>is_not_last_layer</code>：7，否则：0
                            </td>
                        </tr>
                        <tr class="border-lr border-bottom t-light-gray text-smaller">
                            <td class="px-1"><b>9</b></td>
                            <td class="px-1"><code>is_base</code>：5，否则 <code>is_not_last_layer</code>：6，否则：0</td>
                            <td class="px-1">
                                分辨率小于等于 360p：<code>is_base</code>：5，否则 <code>is_not_last_layer</code>：6，否则：0<br>
                                分辨率大于 360p：同 10+ 一般模式
                            </td>
                            <td class="px-1">同 10+ 快速模式</td>
                        </tr>
                        <tr class="border-lr border-bottom t-light-gray text-smaller">
                            <td class="px-1"><b>8</b></td>
                            <td class="px-1"><code>is_base</code>：5，否则 <code>is_not_last_layer</code>：6，否则：0</td>
                            <td class="px-1">
                                分辨率小于等于 360p：5<br>
                                分辨率大于 360p：<code>is_base</code>：5，否则 <code>is_not_last_layer</code>：6，否则：0
                            </td>
                            <td class="px-1">
                                <code>fast_decode 1</code>：<code>is_base</code>：5，否则 <code>is_not_last_layer</code>：6，否则：0<br>
                                <code>fast_decode 2</code>：同 10+ 快速模式
                            </td>
                        </tr>
                        <tr class="border-lr border-bottom t-light-gray text-smaller">
                            <td class="px-1"><b>7</b></td>
                            <td class="px-1"><code>is_base</code>：5，否则：6</td>
                            <td class="px-1"><code>is_not_last_layer</code>：3，否则：6</td>
                            <td class="px-1"><code>is_not_last_layer</code>：4，否则：6</td>
                        </tr>
                        <tr class="border-lr border-bottom t-invert-light text-smaller">
                            <td class="px-1"><b>5~6</b></td>
                            <td class="px-1"><code>is_base</code>：5，否则：6</td>
                            <td class="px-1">3</td>
                            <td class="px-1">4</td>
                        </tr>
                        <tr class="border-lr t-invert-light text-smaller">
                            <td class="px-1"><b>4</b></td>
                            <td class="px-1"><code>is_base</code>：5，否则：6</td>
                            <td class="px-1">2</td>
                            <td class="px-1">4</td>
                        </tr>
                        <tr class="border-lr t-invert-dark text-smaller">
                            <td class="px-1"><b>0~3</b></td>
                            <td class="px-1"><code>is_base</code>：5，否则：6</td>
                            <td class="px-1">1</td>
                            <td class="px-1">
                                <code>fast_decode 1</code>：1，<code>fast_decode 2</code>：4
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>使用 R9 9900X（具体测试系统配置见测试版块）编码 3840x2160 帧大小的速度参考如下：</p>
            <ul class="list-dotless text-smaller font-monospace">
                <li><code class="code-bold">&#45;&#45;preset 1</code>：0.10 fps</li>
                <li><code class="code-bold">&#45;&#45;preset 3</code>：4.11 fps</li>
            </ul>
            <!--<h5>（12/12——2/3）HBD 模式</h4>
            <p>即高位深模式，当视频源大于 8bit 时自动启用，并更改一些模式决策的逻辑。</p>-->
            <h5>（12/12——2/2）分辨率常量</h5>
            <p>SVT-AV1 会根据视频分辨率的积，在 <code>&#45;&#45;preset</code> 参数之上进一步确立参数强度。</p>
            <table class="table-center">
                <thead>
                    <tr class="t-invert-dark">
                        <th class="px-1">值</th>
                        <th class="px-1">像素数量</th>
                        <th class="px-1">像素数量</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="t-light-gray">
                        <th class="px-3"><code>INPUT_SIZE_240p_TH</code></th>
                        <td class="px-3">0x28500</td>
                        <td class="px-3">165,120</td>
                    </tr>
                    <tr>
                        <th class="px-3"><code>INPUT_SIZE_360p_TH</code></th>
                        <td class="px-3">0x4CE00</td>
                        <td class="px-3">314,880</td>
                    </tr>
                    <tr class="t-light-gray">
                        <th class="px-3"><code>INPUT_SIZE_480p_TH</code></th>
                        <td class="px-3">0xA1400</td>
                        <td class="px-3">660,480</td>
                    </tr>
                    <tr>
                        <th class="px-3"><code>INPUT_SIZE_720p_TH</code></th>
                        <td class="px-3">0x16DA00</td>
                        <td class="px-3">1,497,600</td>
                    </tr>
                    <tr class="t-light-gray">
                        <th class="px-3"><code>INPUT_SIZE_1080p_TH</code></th>
                        <td class="px-3">0x535200</td>
                        <td class="px-3">5,460,480</td>
                    </tr>
                    <tr>
                        <th class="px-3"><code>INPUT_SIZE_4K_TH</code></th>
                        <td class="px-3">0x140A000</td>
                        <td class="px-3">21,012,480</td>
                    </tr>
                    <tr class="t-light-gray">
                        <th class="px-3"><code>INPUT_SIZE_8K_TH</code></th>
                        <td class="px-3">0X5028000</td>
                        <td class="px-3">84,049,920</td>
                    </tr>
                </tbody>
            </table>
            <p>每个预设强度的压缩率见 <a href="https://github.com/emrakyz">Discord/Emre</a> 于 <a href="https://discord.com/channels/587033243702788123">AV1 Community</a>SVT-AV1 频道发布的测试图，版本为 SVT-AV1 3.0.1：</p>
            <div class="align-items-center">
                <img loading="lazy" src="files/preset-bd-rate.png" alt="imageR" class="img-medium">
            </div>

            <h2 id="h2-14">SVT-AV1 报错与警告</h2>

            <h3>SVT-AV1 报错——参数与模式/源/参数间冲突</h3>
            <ul class="text-smaller">
                <li><code class="code-bold">&#45;&#45;preset &lt;=4</code>，</b>：8K 分辨率视频源（<code>INPUT_SIZE_8K_TH</code>）仅支持 5 及更快的预设</li>
                <li><b>视频源宽度</b> 必须至少为 4</li>
                <li><b>视频源高度</b> 必须至少为 4</li>
                <li><code class="code-bold">&#45;&#45;pass</code>：不支持 Open GOP 流结构</li>
                <li><code class="code-bold">&#45;&#45;pass 2</code>：不支持 CRF、CBR 率控制模式</li>
                <li><code class="code-bold">&#45;&#45;pass 2</code>：在 <code>&#45;&#45;preset &lt; 10</code> 下不支持 VBR 率控制模式</li>
                <li><code class="code-bold">--keyint -1</code>：不支持 CRF 率控制模式</li>
                <li><code class="code-bold">--aq-mode 0</code>：使用率控制模式（VBR/CBR/CRF）时不能关闭</li>
                <li><code class="code-bold">--mbr</code>：仅支持 CRF 模式</li>
                <li><code class="code-bold">&#45;&#45;rc 1~2</code>（CBR）</b>：不支持 <code>&#45;&#45;enable-dg 1</code>，请使用 CRF/CQP 模式</li>
                <li><code class="code-bold">&#45;&#45;rc 1</code>（VBR）</b>：不支持 <code>--keyint -1</code>，请使用 CRF 模式</li>
                <li><code class="code-bold">&#45;&#45;rc 1</code>（VBR）</b>：不支持 <code>&#45;&#45;pred-struct 1</code>，请使用其它模式</li>
                <li><code class="code-bold">&#45;&#45;rc 2</code>（CBR）</b>：不支持 <code>&#45;&#45;pred-struct 2</code>，请使用其它模式</li>
                <li><code class="code-bold">--tbr</code>：仅支持 <code>&#45;&#45;rc 1</code>，<code>&#45;&#45;rc 2</code>（VBR/CBR）</li>
                <li><code class="code-bold">--startup-qp-offset</code>：仅支持 <code>&#45;&#45;rc 0</code>（CRF/CQP）</li>
                <li><code class="code-bold">&#45;&#45;profile 1</code>：要求视频源为 4:4:4 格式</li>
                <li><code class="code-bold">&#45;&#45;profile 2</code>：位深度小于 10 时要求视频源为 4:2:2 格式</li>
                <li><code class="code-bold">&#45;&#45;fast-decode</code>：不支持超分辨率环路</li>
            </ul>

            <h3>SVT-AV1 警告——推荐与不推荐</h3>
            <ul class="text-smaller">
                <li><code class="code-bold">--aq-mode</code>：不支持分辨率宽或高小于 64 的源，已设为关闭（0）</li>
                <li><code class="code-bold">--color-primaries</code>：某些值保留且不推荐使用</li>
                <li><code class="code-bold">--transfer-characteristics</code>：某些值保留且不推荐使用</li>
                <li><code class="code-bold">--matrix-coefficients</code>：某些值保留且不推荐使用</li>
                <li><code class="code-bold">--chroma-sample-position</code>：某些值保留且不推荐使用</li>
                <li><code class="code-bold">--scd 0</code>：SVT-AV1 不以场景检测添加关键帧</li>
                <li><code class="code-bold">--tile-rows &gt;0</code>：建议使用 <code>&#45;&#45;fast-decode 1</code>、2，而不是瓦片数量以提高解码速度</li>
                <li><code class="code-bold">--tile-columns &gt;0</code>：建议使用 <code>&#45;&#45;fast-decode 1</code>、2，而不是瓦片数量以提高解码速度</li>
                <li><code class="code-bold">&#45;&#45;fast-decode</code>：与 <code>--tune 1</code> 一起使用时效果最佳</li>
                <li><code class="code-bold">&#45;&#45;enable-dg</code>，</b>：不支持 4K 分辨率及以上（<code>INPUT_SIZE_4K_TH</code>）的视频源</li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3">点击展开/折叠内容：SVT-AV1 报错——参数值</button>
            <div class="coll-content">
                <h3>SVT-AV1 报错——参数值</h3>
                <ul class="text-smaller">
                    <li><code class="code-bold">&#45;&#45;preset</code> 必须在 -1~MAX_ENC_PRESET（目前最大 13）范围内</li>
                    <li><code class="code-bold">&#45;&#45;profile</code>：最大允许 2</li>
                    <li><code class="code-bold">&#45;&#45;pass &gt;0 &#45;&#45;fast-decode 1</code>：多遍编码不支持低延迟模式</li>
                    <li><code class="code-bold">--buf-sz</code> 必须在 20~10000 范围内</li>
                    <li><code class="code-bold">--buf-initial-sz</code> 必须在 20~10000 范围内，且必须小于最大缓冲区大小</li>
                    <li><code class="code-bold">--buf-optimal-sz</code> 必须在 20~10000 范围内，且必须小于最大缓冲区大小</li>
                    <li><code class="code-bold">--overshoot-pct</code> 必须在 0~100 范围内</li>
                    <li><code class="code-bold">--mbr-overshoot-pct</code> 必须在 0~100 范围内</li>
                    <li><code class="code-bold">--undershoot-pct</code> 必须在 0~100 范围内</li>
                    <li><code class="code-bold">--tbr</code> 必须在 0~100000 Kbps 范围内</li>
                    <li><code class="code-bold">--mbr</code> 必须在 0~100000 Kbps 范围内</li>
                    <!--<li><b>最大分段百分比 (Max Section Percentage)</b> 必须在 [0, 10000] 范围内</li>
                    <li><b>最小分段百分比 (Min Section Percentage)</b> 必须在 [0, 100] 范围内</li>
                    <li><b>GOP 约束 RC (Gop Constraint RC)</b>：仅支持 VBR 模式且 GOP 大小大于 119</li>
                    <li><code class="code-bold">&#45;&#45;force-key-frames</code>：不支持 VBR 模式</li>-->
                    <li><code class="code-bold">-w</code> 必须小于或等于 16384</li>
                    <li><code class="code-bold">-h</code> 必须小于或等于 8704</li>
                    <li><code class="code-bold">&#45;&#45;forced-maximum-frame-width</code> 必须至少为 4，且小于或等于 16384</li>
                    <li><code class="code-bold">&#45;&#45;forced-maximum-frame-height</code> 必须至少为 4，且小于或等于 8704</li>
                    <li><code class="code-bold">--level</code> 必须在 2.0~7.3 范围内</li>
                    <li><code class="code-bold">--qp</code> 必须在 0~MAX_QP_VALUE 范围内</li>
                    <li><code class="code-bold">--hierarchical-levels</code>：必须在 0~5 范围内</li>
                    <li><code class="code-bold">--keyint</code> 必须在 -2~2^31-2 范围内</li>
                    <li><code class="code-bold">&#45;&#45;irefresh-type</code> 必须在 1~2 范围内</li>
                    <li><code class="code-bold">&#45;&#45;fps</code>：最大允许 240，且必须大于 0 fps</li>
                    <li><code class="code-bold">&#45;&#45;fps-num</code>，<code>&#45;&#45;fps-denom</code> 必须大于 0</li>
                    <li><code class="code-bold">&#45;&#45;recode-loop</code> 必须在 0~4 范围内</li>
                    <li><code class="code-bold">&#45;&#45;rc</code> 必须在 0~2 范围内</li>
                    <li><code class="code-bold">--lookahead</code> 必须在 0~MAX_LAD 范围内</li>
                    <li><code class="code-bold">--tile rows --tile-columns</code> 必须在 0~6 范围内</li>
                    <li><b>瓦片数量</b>：最大为 128，<code>--tile-columns</code> 最大为 16</li>
                    <li><code class="code-bold">--max-qp</code> 必须在 1, MAX_QP_VALUE 范围内</li>
                    <li><code class="code-bold">--min-qp</code> 必须在 1, MAX_QP_VALUE-1 范围内，且必须小于 <code>--max-qp</code></li>
                    <li><code class="code-bold">--use-fixed-qindex-offsets</code> 必须在 0~2 范围内</li>
                    <li><code class="code-bold">--key-frame-qindex-offset</code> 必须在 -64~63 范围内</li>
                    <li><code class="code-bold">--qindex-offsets</code> 必须在 -64~63 范围内</li>
                    <li><code class="code-bold">--luma-y-ac-qindex-offset</code> 必须在 -64~63 范围内</li>
                    <li><code class="code-bold">--luma-y-dc-qindex-offset</code> 必须在 -64~63 范围内</li>
                    <li><code class="code-bold">--chroma-u-dc-qindex-offset</code> 必须在 -64~63 范围内</li>
                    <li><code class="code-bold">--chroma-u-ac-qindex-offset</code> 必须在 -64~63 范围内</li>
                    <li><code class="code-bold">--chroma-v-dc-qindex-offset</code> 必须在 -64~63 范围内</li>
                    <li><code class="code-bold">--chroma-v-ac-qindex-offset</code> 必须在 -64~63 范围内</li>
                    <li><code class="code-bold">--startup-qp-offset</code> 必须在 -63~63 范围内</li>
                    <li><code class="code-bold">&#45;&#45;enable-stat-report</code> 必须在 0~1 范围内</li>
                    <li><code class="code-bold">&#45;&#45;enable-restoration</code> 必须在 0~1 范围内</li>
                    <li><code class="code-bold">--scm</code> 必须在 0~2 范围内</li>
                    <li><code class="code-bold">--aq-mode</code> 必须在 0~2 范围内</li>
                    <li><code class="code-bold">&#45;&#45;input-depth</code> 必须为 8 或 10</li>
                    <li><code class="code-bold">--color-format</code>：仅支持 420</li>
                    <li><code class="code-bold">&#45;&#45;profile</code>：非 420 颜色格式必须指定使用 1 或 2</li>
                    <li><code class="code-bold">--asm</code>：参数值无效</li>
                    <!--<li><b>目标套接字 (Target Socket)</b> 必须在 -1~1 范围内</li>
                    <li><b>高位深模式决策 (HBD Mode Decision)</b> 必须在 -1~2 范围内</li>
                    <li><b>CDEF 级别</b> 必须在 0~4 范围内，-1 表示自动</li>
                    <li><b>环路还原滤镜级别</b> 必须在 0~1 范围内，-1 表示自动</li>-->
                    <li><code class="code-bold">&#45;&#45;enable-mfmv</code> 必须在 0~1 范围内，-1 表示自动</li>
                    <li><code class="code-bold">&#45;&#45;fast-decode</code> 必须在 0~2 范围内</li>
                    <li><code class="code-bold">--tune</code> 必须在 0~2 范围内</li>
                    <li><code class="code-bold">--superres-mode</code> 必须在 <code>SUPERRES_NONE</code>~<code>SUPERRES_AUTO</code> 范围内</li>
                    <li><code class="code-bold">--superres-qthres</code> 必须在 <code>MIN_QP_VALUE</code>~<code>MAX_QP_VALUE</code> 范围内</li>
                    <li><code class="code-bold">--superres-kf-qthres</code> 必须在 <code>MIN_QP_VALUE</code>~<code>MAX_QP_VALUE</code> 范围内</li>
                    <li><code class="code-bold">--superres-kf-denom</code> 必须在 <code>MIN_SUPERRES_DENOM</code>~<code>MAX_SUPERRES_DENOM</code> 范围内</li>
                    <li><code class="code-bold">--superres-denom</code> 必须在 <code>MIN_SUPERRES_DENOM</code>~<code>MAX_SUPERRES_DENOM</code> 范围内</li>
                    <li><code class="code-bold">&#45;&#45;resize-mode</code> 必须在 <code>RESIZE_NONE</code>~<code>RESIZE_RANDOM_ACCESS</code> 范围内</li>
                    <li><code class="code-bold">&#45;&#45;resize-kf-denom</code> 必须在 <code>MIN_RESIZE_DENOM</code>~<code>MAX_RESIZE_DENOM</code> 范围内</li>
                    <li><code class="code-bold">&#45;&#45;resize-denom</code> 必须在 <code>MIN_RESIZE_DENOM</code>~<code>MAX_RESIZE_DENOM</code> 范围内</li>
                    <li><code class="code-bold">--matrix-coefficients 0</code>：identity 矩阵格式仅支持 YUV 4:4:4 格式</li>
                    <li><code class="code-bold">--hierarchical-levels</code>：仅支持 2~5</li>
                    <li><code class="code-bold">&#45;&#45;pass</code> 必须在 0~2 范围内</li>
                    <!--<li><code class="code-bold">&#45;&#45;pass</code>：不支持 S 帧（Switch frame）功能</li>
                    <li><b>切换帧间隔 (Switch Frame Interval)</b> 必须大于或等于 0</li>
                    <li><b>切换帧功能 (Switch Frame Feature)</b>：仅支持低延迟预测结构</li>
                    <li><b>切换帧模式 (Switch Frame Mode)</b> 必须在 [SFRAME_STRICT_BASE, SFRAME_NEAREST_BASE] 范围内</li>-->
                    <li><code class="code-bold">&#45;&#45;film-grain</code> 必须在 0~50 范围内</li>
                    <li><code class="code-bold">&#45;&#45;film-grain-denoise</code>：必须为 0 或 1</li>
                    <li><code class="code-bold">&#45;&#45;enable-qm</code>：<code>--qp-max</code> 必须不大于 <code>--qm-max</code></li>
                    <li><code class="code-bold">--startup-mg-size</code>：支持 0 及 2~4，且必须小于 <code>--hierarchical-levels</code></li>
                    <li><code class="code-bold">--variance-boost-curve</code> 必须在 0 到 2 之间</li>
                    <li><code class="code-bold">--variance-boost-strength</code> 必须在 1~4 之间</li>
                    <li><code class="code-bold">--variance-octile</code> 必须在 1~8 之间</li>
                    <li><code class="code-bold">--tf-strength</code> 必须在 0~4 之间</li>
                    <!--<li><b>亮度 QP 偏移 (Luminance QP Bias)</b> 必须在 0 到 100 之间</li>-->
                    <li><code class="code-bold">--sharpness</code> 必须在 -7~7 之间</li>
                </ul>
            </div>
            <!--<h2 id="h2-15">某编码器 参数与预设</h2>
            <p>TODO</p>
            <h2 id="h2-16">某编码器 报错与警告</h2>
            <h3>某编码器 报错与警告——参数与模式/源/参数间冲突</h3>
            <p>TODO</p>
            <h3>某编码器 报错与警告——推荐与不推荐</h3>
            <p>TODO</p>
            <h3>某编码器 报错与警告——参数值</h3>
            <p>TODO</p>-->

            <h2 id="h2-17">画质指标</h2>
            <p>对于测试画质这种说不准的伪客观多变量虚拟单位，即曾仕强教授所言“只能对到一定程度、深度，再往深究就错了”。测量画质的方法论即 Image/Video Quality Assessment。IQA、VQA 分为主观、客观，绝对评价、相对评价，全参考、部分参考和无参考。见 <a href="https://baike.baidu.com/item/IQA/19453034">百度百科</a>。</p>
            <p>主观画质测量指标受到视觉系统差异和认知理解差异拖累，因此需要大量参与者以及耗费大量时间测量和整理数据——需要协调群体完成。相比之下，由于主观评价最能贴近人眼视觉，这类指标成为客观指标的参考依据。客观测试具有结果高度可重复、高效率、无人值守、低成本的优点。当报告图像质量测量结果时，通常使用平均意见分数 Mean opinion score（MOS），或差异 Difference MOS（DMOS）平均意见分数表——以类似星级评价的测量方法（完全看不清~完美），见 <a href="https://videoclarity.com/PDF/Advancing-To-Multi-Scale-SSIM-Final.pdf">videoclarity</a>。VQA 与 IQA 使用了相同的评价体系分类，区别是视频要求观看距离和屏幕尺寸在测试中不变，且不暂停播放。</p>
            <div class="align-items-center">
                <img loading="lazy" src="files/image-quality-metric/vqa.webp" alt="imageR" class="">
                <p class="text-gray-side mt-0">图：VQA 测试。见<a href="https://qualinet.github.io/databases/video/ivp_subjective_quality_video_database/">香港大学 IVP Lab</a></p>
            </div>

            <h3>画质指标——评价体系分类</h3>

            <h4>（1/4）主观指标</h4>
            <p>只涉及人类观察者的人眼视觉系统 Human visual system（HVS），分为外行评价者与内行评价者的测量方法。</p>
            <ul>
                <li><b>绝对：</b>对比原图和失真图像，以类似星级评价的测量方法</li>
                <li><b>相对：</b>没有原图作参考，而是由观察者对一批图像进行画质优劣顺序</li>
            </ul>
            <h4>（2/4）客观指标</h4>
            <p>借助反映人眼感知的算法，给出数学计算推导结果。</p>
            <ul>
                <li><b>全参考：</b>使用算法统计，如 PSNR、SSIM、VIF、MAE、FUZZ、等，必须提供无损压缩或未压缩的源（Garbage in garbage out）</li>
                <li><b>部分参考：</b>通过算法提炼出图像的主体特征，与理想状态的主体特征做对比得到，相比全参考的计算量有所减少</li>
                <li><b>无参考：</b>没有原图时，设定一种理想的数据状态，再检查失真图像的各种性质（亮度、对比度、结构等）是否贴近</li>
            </ul>
            <h4>（3/4）客观指标缺点</h4>
            <ul>
                <li><b>全参考：</b>
                    <ul>
                        <li>无损压缩或未压缩的视频体积大，所以大多数的硬编录像设备都会使用有损压缩</li>
                        <li>无损压缩或未压缩的视频体积大，所以这种视频源相比有损压缩要稀少和昂贵</li>
                        <li>通过软件录制渲染出的画面会受到 CPU 带宽与硬盘的写入性能制约，并与渲染画面争夺计算性能</li>
                    </ul>
                </li>
                <li><b>部分参考：</b>图像的失真不一定都存在于特征上，如画面平面、斜面处的色带、块失真</li>
                <li><b>无参考：</b>用途很有限</li>
            </ul>
            <h4>（4/4）暂停还是播放</h4>
            <p>有损视频压缩必然会根据信息的动态强度而应用不同程度的量化，并在偏动态的画面中产生相比偏静态画面更多的“暂停时可见失真”；而另一方面，类似于观众对画质理解的差异，不同画质指标对于这种失真的“接受度”不同。基于图像的画质评价算法与“暂停观看评价”（图像序列逐帧对比）一致，所以必然会得出与基于视频的画质评价算法差异较大的分数。为了减少这种差异，测试环节就必然需要同时测量出“暂停观看评价”与“播放观看评价”两种指标，以保证合理性。</p>

            <h3>画质指标——指标的指标</h3>
            <p>评价画质的指标五花八门，想要对这些指标进行优劣排序，就需要找出他们各自与主观指标数据的相关性，越高越好。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/3）Spearman 单调相关系数（SROCC）</button>
            <div class="coll-content">
                <h4>（1/3）Spearman 单调相关系数（SROCC）</h4>
                <p>基于数据的大小排序，并将顺序本身作为参数，而衡量两排可能相关变量间的相关度。</p>
                <span class="text-blue-math">\[\rho = 1 - \frac{6 \sum d_i^2}{n(n^2 - 1)}\]</span>
                <span class="text-blue-math">\[ \sum d_i^2 = \sum_{i=1}^n (\text{rank}(x_i) - \text{rank}(y_i))^2 \]</span>
                <ul>
                    <li><span class="text-blue-math">\(\rho\)</span>：单调相关性，1：完全正相关，-1：完全负相关，0：单调不相关</li>
                    <li><span class="text-blue-math">\(d_i\)</span>：两项数据各自大小顺序值的差，有正负之分</li>
                    <li><span class="text-blue-math">\(n\)</span>：样本量</li>
                    <li>分子——值越大则说明两排数据间，大小顺序排位的差异越大，相关性越弱</li>
                    <li>分母——基本单位化映射，给出 -1~1 之间的结果</li>
                </ul>
                <p>这种评价方法忽略了数据大小，而是将每个数据都看成顺序，所以是单调指标、不是线性指标。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/3）Pearson 线性相关系数（PLCC）</button>
            <div class="coll-content">
                <h4>（2/3）Pearson 线性相关系数（PLCC）</h4>
                <p>找出两个连续变量之间的线性相关性，例如身高与体重的相关性：</p>
                <span class="text-blue-math">\[r = \frac{\sum (x_i - \bar{x})(y_i - \bar{y})}{\sqrt{\sum (x_i - \bar{x})^2 \sum (y_i - \bar{y})^2}}\]</span>
                <ul>
                    <li><span class="text-blue-math">r</span>：线性相关性，1：完全正相关，-1：完全负相关，0：线性无关</li>
                    <li><span class="text-blue-math">\(x_i\)，\(y_i\)</span>：观测/采样值
                        <ul><li>例如 <span class="text-blue-math">\(x_i\)</span> 即第 i 个人的身高，<span class="text-blue-math">\(y_i\)</span> 代表第 i 个人的体重</li></ul>
                    </li>
                    <li><span class="text-blue-math">\(\bar{x}\), \(\bar{y}\)</span>：样本均值
                        <ul><li>例如 <span class="text-blue-math">\(\bar{x}\)</span> 即所有采样的身高均值，<span class="text-blue-math">\(\bar{y}\)</span> 代表所有采样的体重均值</li></ul>
                    </li>
                    <li><span class="text-blue-math">\(\sum (x_i - \bar{x})(y_i - \bar{y})\)</span>：协方差，例如只有 x 和 y 同时高于或低于均值时相关性为正，否则判负</li>
                    <li><span class="text-blue-math">\(\sum (x_i - \bar{x})^2\)，\(\sum (y_i - \bar{y})^2\)</span>：方差，表示数据离散程度，越分散则分母越大，相关性 r 越小</li>
                </ul>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/3）SROCC、PLCC 评价各种画质评价指标的图表</button>
            <div class="coll-content">
                <h4>（3/3）SROCC、PLCC 评价各种画质评价指标的图表</h4>
                <div class="align-items-center">
                    <img loading="lazy" src="files/image-quality-metric/spearman-correlation.png" alt="imageR" class="">
                    <p class="text-gray-side mt-0">图：Spearman 等级相关系数（SROCC）所反映的指标相关性。见<a href="https://videoprocessing.ai/benchmarks/video-quality-metrics_frm.html">MSU Graphics Lab</a></p>
                    <img loading="lazy" src="files/image-quality-metric/pearson-correlation.png" alt="imageR" class="">
                    <p class="text-gray-side mt-0">图：Pearson 线性相关系数（PLCC）所反映的指标相关性，对理解视频画质指标的效益起到辅助作用。</p>
                </div>
            </div>
            <div class="overflow-auto mt-3">
                <table class="table-center">
                    <thead>
                        <tr class="t-invert-dark">
                            <th class="px-1">SROCC</th>
                            <th class="px-1">PSNR</th>
                            <th class="px-1">SSIM</th>
                            <th class="px-1">MS-SSIM</th>
                            <th class="px-1">VMAF</th>
                            <th class="px-1">WPSNR</th>
                            <th class="px-1">XPSNR</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="t-light-gray">
                            <th class="px-3"><a href="https://ieeexplore.ieee.org/document/7879860">参考</a></th>
                            <td class="px-3">0.860</td>
                            <td class="px-3"><b>0.949</b></td>
                            <td class="px-3"><b>0.925</b></td>
                            <td class="px-3"><b>0.915</b></td>
                            <td class="px-3"><b>0.939</b></td>
                            <td class="px-3"><b>0.935</b></td>
                        </tr>
                        <tr>
                            <th class="px-3"><a href="https://www.researchgate.net/publication/41404799_Study_of_Subjective_and_Objective_Quality_Assessment_of_Video">参考</a></th>
                            <td class="px-3">0.523</td>
                            <td class="px-3">0.694</td>
                            <td class="px-3">0.732</td>
                            <td class="px-3"><b>0.752</b></td>
                            <td class="px-3">0.605</td>
                            <td class="px-3">0.675</td>
                        </tr>
                        <tr class="t-light-gray">
                            <th class="px-3"><a href="https://qualinet.github.io/databases/video/ivp_subjective_quality_video_database/">参考</a></th>
                            <td class="px-3">0.647</td>
                            <td class="px-3">0.635</td>
                            <td class="px-3">0.574</td>
                            <td class="px-3">0.580</td>
                            <td class="px-3">0.690</td>
                            <td class="px-3"><b>0.709</b></td>
                        </tr>
                        <tr>
                            <th class="px-3">ECV</th>
                            <td class="px-3">0.762</td>
                            <td class="px-3"><b>0.916</b></td>
                            <td class="px-3">0.881</td>
                            <td class="px-3">0.736</td>
                            <td class="px-3">0.859</td>
                            <td class="px-3">0.816</td>
                        </tr>
                        <tr class="t-light-gray">
                            <th class="px-3">EVV</th>
                            <td class="px-3">0.764</td>
                            <td class="px-3"><b>0.908</b></td>
                            <td class="px-3"><b>0.911</b></td>
                            <td class="px-3">0.874</td>
                            <td class="px-3"><b>0.905</b></td>
                            <td class="px-3"><b>0.926</b></td>
                        </tr>
                        <tr>
                            <th class="px-3">SJTU</th>
                            <td class="px-3">0.739</td>
                            <td class="px-3">0.807</td>
                            <td class="px-3">0.799</td>
                            <td class="px-3">0.791</td>
                            <td class="px-3">0.814</td>
                            <td class="px-3"><b>0.877</b></td>
                        </tr>
                        <tr class="t-light-gray">
                            <th class="px-3">CfP</th>
                            <td class="px-3">0.739</td>
                            <td class="px-3">0.810</td>
                            <td class="px-3"><b>0.881</b></td>
                            <td class="px-3">0.867</td>
                            <td class="px-3">0.724</td>
                            <td class="px-3">0.866</td>
                        </tr>
                        <tr>
                            <th class="px-3"><a href="https://www.researchgate.net/publication/334225933_Subjective_comparison_of_VVC_and_HEVC">参考</a></th>
                            <td class="px-3">0.703</td>
                            <td class="px-3">0.848</td>
                            <td class="px-3">0.832</td>
                            <td class="px-3"><b>0.850</b></td>
                            <td class="px-3">0.730</td>
                            <td class="px-3">0.812</td>
                        </tr>
                        <tr>
                            <th class="px-3">平均</th>
                            <td class="px-3">0.717</td>
                            <td class="px-3">0.821</td>
                            <td class="px-3">0.817</td>
                            <td class="px-3">0.796</td>
                            <td class="px-3">0.783</td>
                            <td class="px-3"><b>0.827</b></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="text-gray-side pl-5 m-0 align-items-center">表：<a href="http://www.ecodis.de/video/helmrich_xpsnr_rev3.pdf">XPSNR 论文</a> 中使用 Spearman 等级相关系数（SROCC）所测量反映的指标相关性（数据仅供参考）。</p>
            <div class="overflow-auto mt-3">
                <table class="table-center">
                    <thead>
                        <tr class="t-invert-dark">
                            <th class="px-1">PLCC</th>
                            <th class="px-1">PSNR</th>
                            <th class="px-1">SSIM</th>
                            <th class="px-1">MS-SSIM</th>
                            <th class="px-1">VMAF</th>
                            <th class="px-1">WPSNR</th>
                            <th class="px-1">XPSNR</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="t-light-gray">
                            <th class="px-3"><a href="https://ieeexplore.ieee.org/document/7879860">参考</a></th>
                            <td class="px-3">0.822</td>
                            <td class="px-3">0.789</td>
                            <td class="px-3">0.765</td>
                            <td class="px-3"><b>0.942</b></td>
                            <td class="px-3"><b>0.916</b></td>
                            <td class="px-3"><b>0.919</b></td>
                        </tr>
                        <tr>
                            <th class="px-3"><a href="https://www.researchgate.net/publication/41404799_Study_of_Subjective_and_Objective_Quality_Assessment_of_Video">参考</a></th>
                            <td class="px-3">0.539</td>
                            <td class="px-3">0.626</td>
                            <td class="px-3">0.675</td>
                            <td class="px-3"><b>0.729</b></td>
                            <td class="px-3">0.637</td>
                            <td class="px-3">0.702</td>
                        </tr>
                        <tr class="t-light-gray">
                            <th class="px-3"><a href="https://qualinet.github.io/databases/video/ivp_subjective_quality_video_database/">参考</a></th>
                            <td class="px-3">0.632</td>
                            <td class="px-3">0.570</td>
                            <td class="px-3">0.546</td>
                            <td class="px-3">0.591</td>
                            <td class="px-3">0.686</td>
                            <td class="px-3"><b>0.707</b></td>
                        </tr>
                        <tr>
                            <th class="px-3">ECV</th>
                            <td class="px-3">0.733</td>
                            <td class="px-3"><b>0.879</b></td>
                            <td class="px-3">0.853</td>
                            <td class="px-3">0.830</td>
                            <td class="px-3">0.848</td>
                            <td class="px-3">0.784</td>
                        </tr>
                        <tr class="t-light-gray">
                            <th class="px-3">EVV</th>
                            <td class="px-3">0.727</td>
                            <td class="px-3">0.881</td>
                            <td class="px-3">0.874</td>
                            <td class="px-3"><b>0.937</b></td>
                            <td class="px-3">0.880</td>
                            <td class="px-3">0.897</td>
                        </tr>
                        <tr>
                            <th class="px-3">SJTU</th>
                            <td class="px-3">0.721</td>
                            <td class="px-3">0.765</td>
                            <td class="px-3">0.810</td>
                            <td class="px-3">0.827</td>
                            <td class="px-3">0.783</td>
                            <td class="px-3"><b>0.829</b></td>
                        </tr>
                        <tr class="t-light-gray">
                            <th class="px-3">CfP</th>
                            <td class="px-3">0.717</td>
                            <td class="px-3">0.794</td>
                            <td class="px-3">0.743</td>
                            <td class="px-3">0.862</td>
                            <td class="px-3">0.692</td>
                            <td class="px-3"><b>0.863</b></td>
                        </tr>
                        <tr>
                            <th class="px-3"><a href="https://www.researchgate.net/publication/334225933_Subjective_comparison_of_VVC_and_HEVC">参考</a></th>
                            <td class="px-3">0.722</td>
                            <td class="px-3">0.826</td>
                            <td class="px-3">0.799</td>
                            <td class="px-3"><b>0.855</b></td>
                            <td class="px-3">0.759</td>
                            <td class="px-3">0.818</td>
                        </tr>
                        <tr>
                            <th class="px-3">平均</th>
                            <td class="px-3">0.702</td>
                            <td class="px-3">0.766</td>
                            <td class="px-3">0.758</td>
                            <td class="px-3"><b>0.822</b></td>
                            <td class="px-3">0.775</td>
                            <td class="px-3">0.815</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="text-gray-side pl-5 m-0 align-items-center">表：<a href="http://www.ecodis.de/video/helmrich_xpsnr_rev3.pdf">XPSNR 论文</a> 中使用 Pearson 线性相关系数（PLCC）所反映的指标相关性（数据仅供参考）。</p>

            <h3>画质指标——峰值信噪比 Peak signal-noise ratio（PSNR）</h3>
            <p>基于均方差（MSE）衡量两张图像于像素级别的相似性，强调最大信号与噪声间的比值作为画质的全参考指标。PSNR 的优点有计算简单快速、被广泛使用于评价压缩失真。</p>
            <span class="text-blue-math">\[
                \text{PSNR} =
                10 \log_{10} \left( \frac{2^{N}-1}{\text{MSE}} \right)
                \]\[
                \text{PSNR}_{8\text{bit}} =
                10 \log_{10} \left( \frac{2^{8\text{bit}}-1}{\text{MSE}} \right)
                \]\[
                \text{MSE} =
                \frac{1}{n^2}\sum_{x=0}^{n-1}\sum_{y=0}^{n-1} \left| f(x,y) - f^\prime(x,y) \right|^2
            \]</span>
            <ul>
                <li>均方差 MSE 即衡量两幅图像中，同位像素值差距的平均平方</li>
                <li><span class="text-blue-math">\(10 \log_{10}\)</span> 用于对齐十进制</li>
            </ul>
            <p>PSNR 是目前最常用的指标，但在设计上仅统计客观差距，而不考虑感知差距。见 <a href="https://videoprocessing.ai/metrics/ways-of-cheating-on-popular-objective-metrics.html">MSU Graphics Lab</a>。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/1）PSNR 的缺点</button>
            <div class="coll-content">
                <h5>（1/1）PSNR 的缺点</h5>
                <ul>
                    <li>忽略色度信息、局部细节特征等 HVS 中对画质起到决定性作用的参数，因此准确度差</li>
                    <li>忽略结构特征的统计和比对，尤其是缩放、模糊后图像的边缘、对比度等的变化衡量能力差</li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/image-quality-metric/psnr-fail-1.webp" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：PSNR 看不出的各种感知性失真画面（GT 为原图）。见<a href="https://videoprocessing.ai/metrics/ways-of-cheating-on-popular-objective-metrics.html">MSU Graphics Lab</a></p>
                </div>
            </div>
            <!--<p>不同工具中对 PSNR 的取值范围不同，导致高分结果的不对齐，如 x264 中为 0~100 dB、x265 中为 0~99.99 dB，ffmpeg 中同 XPSNR 为 0~inf dB，见 <a href="https://zhuanlan.zhihu.com/p/706342146">知乎专栏 - codec2021</a>-->

            <h3>画质指标——结构相似性 Structural similarity（SSIM）</h3>
            <p>衡量两张数字图像的亮度是否一致、对比度是否一致、以及结构上呈正相关性程度的全参考指标，见<a href="https://zh.wikipedia.org/wiki/%E7%B5%90%E6%A7%8B%E7%9B%B8%E4%BC%BC%E6%80%A7">维基百科</a>和 <a href="https://medium.com/@akp83540/structural-similarity-index-ssim-c5862bb2b520">Medium.com</a>。计算量略高于 PSNR，但也补充了 PSNR 所忽视的感知质量评价。SSIM 分数的取值范围因算法而异，但主流范围中取值在 -1~1 之间（并限制到 0~1 范围）：</p>
            <span class="text-blue-math">\[
                \text{SSIM}\left(x,y\right) =
                \frac{(2\mu_x \mu_y + C_1)(2\sigma_{xy} + C_2)}
                {(\mu_x^2 + \mu_y^2 + C_1)(\sigma_x^2 + \sigma_y^2 + C_2)}
            \]</span>
            <ul>
                <li>x，y 代表两张相对比的图片</li>
                <li>亮度是否一致——平均差 <span class="text-blue-math">\(\mu_x\)</span>，<span class="text-blue-math">\(\mu_y\)</span></li>
                <li>对比度是否一致——标准差 <span class="text-blue-math">\(\sigma_x\)</span>，<span class="text-blue-math">\(\sigma_y\)</span>（亮度值离散程度）寻找两幅图像最亮和最暗范围之间的差异</li>
                <li>结构上呈正相关性——协方差 <span class="text-blue-math">\(\sigma_{xy}\)</span></li>
                <li><span class="text-blue-math">\(C\)</span> 用于防止除以 0</li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2、2/2）SSIM 的统计过程与缺点</button>
            <div class="coll-content">
                <p>（1/2）SSIM 的统计过程</p>
                <ol>
                    <li>将原画和失真图像缩放到相同大小</li>
                    <li>在图像中选择一个固定大小的滑动窗口</li>
                    <li>测量上述三个方面的测量结果</li>
                    <li>将结果组合成代表图像质量水平的总体分数</li>
                    <li>移动窗口以统计图像另一部分</li>
                    <li>重复统计，并累积出平均总体分数</li>
                </ol>

                <h4>（2/2）SSIM 的缺点</h4>
                <ul>
                    <li>忽略色度信息（导致了不同软件中使用了差异较大的 SSIM 算法，在 <a href="https://arxiv.org/abs/2006.13846">arxiv 的 SSIM 阐述</a> 中，作者建议仅用于灰度图像）</li>
                    <li>对于模糊失真的统计能力好过 PSNR，但仍然不准确</li>
                    <li>（<span class="text-red-emph">不影响测试编码器</span>）HVS 对图像的绝对亮度不太敏感，但对原图与失真图像的亮度差异很敏感</li>
                    <li>（<span class="text-red-emph">不影响测试编码器</span>）HVS 对图像的对比度差异不太敏感</li>
                    <li>忽略局部的关键图像特征，使得内容完全不同的图片可以因为亮度、对比度、结构性的相似而拥有比压缩失真结果更高的 SSIM 分数</li>
                </ul>
                <div class="align-items-center">
                    <img loading="lazy" src="files/image-quality-metric/ssim-fail-1.webp" alt="imageR" class="img-medium">
                    <p class="text-gray-side mt-0">图：内容不同的图片比失真结果拥有更高的 SSIM 分数。见<a href="https://videoprocessing.ai/metrics/ways-of-cheating-on-popular-objective-metrics.html">MSU Graphics Lab</a></p>
                </div>
            </div>

            <h3>画质指标——多分辨率结构相似性 MS-SSIM</h3>
            <p>MS-SSIM 是对传统 SSIM 的扩展改进，并与 SSIM 一样是全参考指标。两者具体区别在于 MS-SSIM 会在不同的分辨率（通常为每次缩小 2 倍）迭代计算 SSIM，并逐分辨率衡量出权重，最后通过权重将各个分辨率的得分整合，从而更贴近 HVS 的感知。这种“多尺度分析”使得 MS-SSIM 在不同分辨率下的比较更客观，而且额外计算成本较低，实现了比 SSIM 和 PSNR 更准确的感知质量计算。</p>
            <h4>（1/1）MS-SSIM 的缺点</h4>
            <ul>
                <li>与传统 SSIM 差不多，MS-SSIM 虽然不再那么好骗，但也只是解决了部分问题</li>
            </ul>

            <h3>画质指标——多方法融合 Video multi-method assessment fusion（VMAF）</h3>
            <p>一种结合了主观绝对评价、客观全参考指标、以及客观部分参考指标的多模型体系，考虑到 HVS 对于失真的判断与处理特性，并结合了机器学习模型与传统算法的部分参考加全参考指标。分数取值范围为 0~100。该算法内部机制较为复杂，本文略，详见 <a href="https://netflixtechblog.com/toward-a-practical-perceptual-video-quality-metric-653f208b9652">Netflix Tech Blog</a>。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/4、2/4）HVS 特性理论、模型与融合</button>
            <div class="coll-content">
                <h4>（1/4）HVS 特性理论</h4>
                <p>人眼所看到的图像是经过大脑后期处理的失真画面；例如视觉掩蔽效应、对高低频细节的敏感度不同、对不同对比度下的敏感度不同、对色度和亮度变化的感知不同等等。因此，将原图直接与失真图像做对比的评价是不能准确反应感知失真程度的，而是应该训练一种模拟 HVS 的机器学习滤镜，然后将原图与失真图像都提取出特征，再使用支持向量机进行融合预测，才能用于比较。</p>

                <h4>（2/4）模型与融合</h4>
                <p>VMAF 所用到的具体评估方法有：</p>
                <ul>
                    <li><b>视讯保真度 Visual information fidelity（VIF）</b>：
                        <ul>
                            <li>用统计模型（如 GSM）提取图像结构特征，并统计原图与失真图像在特征上的差异</li>
                            <li>应用自然景观模型（模拟真实场景结构）的统计特性以提取图像特征</li>
                            <li>应用失真结构模型找出并量化统计失真程度</li>
                        </ul>
                    </li>
                    <li><b>细节损失度 Detail loss metric（DLM）</b>：
                        <ul>
                            <li>利用多种算法（如小波变换）找出细节的丢失，尤其是 HVS 敏感对比度区间的细节</li>
                        </ul>   
                    </li>
                    <li><b>帧间亮度像素均差 Mean Co-Located Pixel Difference / Temporal Information（MCPD / TI）</b>：
                        <ul>
                            <li>量化统计失真视频的亮度平面的时域突兀像素值变化，以判断帧间突然变化（时域噪声、闪烁）的强度</li>
                        </ul>
                    </li>
                    <li><b>基于支持向量机的线性回归分析 Support vector machine regression（SVMR）模型</b>：
                        <ul>
                            <li>使用基于主观质量评分数据训练的模型做线性回归分析，预测出综合视频质量分数</li>
                            <li>该模型同时利用了参考和失真视频中提取的特征进行预测</li>
                        </ul>
                    </li>
                    <li><b>多模型</b>：
                        <ul>
                            <li>4k 模型使用了高分辨率素材的训练集，因此注重高频细节的完整</li>
                            <li>1080p 模型使用了适用于手机的流媒体压缩内容的训练集，因此对二次编码，上采样等失真敏感，如果 4k 得分显著高于 1080p，则可能是触发了这些扣分项</li>
                        </ul>
                    </li>
                </ul>
            </div>
            <h4>（3/4）流程概述</h4>
            <ol>
                <li>转换输入视频的色彩空间和分辨率</li>
                <li>使用 VIF、DLM、MCPD/TI 提取画面特征，MCPD 仅用于失真视频</li>
                <li>使用 SVR 融合特征</li>
                <li>屏幕尺寸校准</li>
            </ol>
            <h4>（4/4）VMAF 的缺点</h4>
            <ul>
                <li>算法原理复杂</li>
                <li>评价指标主要取决于提炼出的特征，而非失真图像与源的客观差距——分数变化与客观画质不一定呈正相关</li>
                <li>机器学习模型的训练数据只能涵盖部分画面内容种类，因此画面内容不够主流的视频不一定可用</li>
                <li>（<span class="text-red-emph">此点未经查证，真假未知</span>）特定版本中模糊失真、块失真、高对比度所导致的色度边缘溢出、偏色失真反而会导致评分提高</li>
            </ul>

            <h3>画质指标——块大小感知加权峰值信噪比 WPSNR、XPSNR</h3>
            <p>通过使用分块加权改变 MSE 的统计结果而改良的 PSNR 指标，见 <a href="http://www.ecodis.de/qpa/erfurt_icip_wpsnr.pdf">WPSNR 论文</a>，<a href="http://www.ecodis.de/video/helmrich_xpsnr_rev3.pdf">XPSNR 论文</a></p>
            <div class="overflow-auto mt-3"><span class="text-blue-math">\[
                \text{WPSNR}_{\text{c,s}} =
                10 \log_{10} \left( \frac{\left( 2^{N_{\text{bit}}}-1 \right)^2}{\text{WMSE}} \right)
            \]\[
                \text{WMSE} =
                \frac{1}{W \cdot H} \sum_{k}
                \left( \text{weight}_k \cdot \sum_{(x,y)\in\text{block}_k} \left| f(x,y)-f^\prime(x,y) \right|^2 \right)
            \]\[
                \text{weight}_k = \left(\frac{ \text{VisualWeight}_k }{ \text{VisualActivity}_k }\right)^{0.5}
            \]\[
            \text{VisualWeight} = 2^{N\text{bit}} \sqrt{ \frac{3840 \times 2160}{W \times H}}
            \]\[
                \text{VisualActivity} = \max \left( 
                    a_{\text{min}}^2 \text{,} \hspace{2mm}
                    \left( \frac{
                        \sum_{\left[x,y\right] \in \text{block}_k}
                        \left| \text{HighFrequency}_{\text{Spatial}_i} \left[ x,y \right] \right|
                    }{4N^2} \right)^2
                \right)
            \]</span></div>
            <ul>
                <li>WMSE 衡量两张图像中，同位粗分块的差距平均平方</li>
                <li><span class="text-blue-math">\(\sum_{k}\)</span>：遍历 k 项 NxN 粗分块</li>
                <li><span class="text-blue-math">\(\sum_{(x,y)\in\text{block}_k}\)</span>：遍历粗分块内的像素值</li>
                <li><span class="text-blue-math">\(\text{weight}_k\)</span>：统计当前块的面积分量与其中内容的细节强度为 MSE 权重</li>
                <li>Visual weight 即感知权重——填满画面所需当前块大小的数量与位深精度</li>
                <li>Visual activity 即感知活动范围——
                    <ul>
                        <li><span class="text-blue-math">\(\frac{1}{4N^2} \left| \text{HighFrequency}_{\text{Spatial}_i} \left[ x,y \right] \right|\)</span>：遍历当前粗分块以使用滤镜提取出高频分量，再缩放到计算需要的基本单位大小</li>
                        <li><span class="text-blue-math">\(\alpha_{\text{min}}^2\)</span>：<span class="text-red-emph">猜测：</span>用于防止除以零</li>
                    </ul>
                </li>
            </ul>

            <p>XPSNR 将帧率算作感知活动范围的参数之一，并使用帧间 FIR 滤镜帧间高频信息（<span class="text-blue-math">\(\text{HighFrequency}_{\text{Temporal}_i}\)</span>），从而能比 WPSNR 更能准确反应视频画质。根据源论文，这种方案虽然不精确，但优点在于简单易算。</p>
            <div class="overflow-auto mt-3"><span class="text-blue-math">\[
                \text{VideoVisualActivity} = \max \left( 
                    a_{\text{min}}^2 \text{,} \hspace{2mm}
                    \left( \frac{
                        \sum_{\left[x,y\right] \in \text{block}_k}
                        \left| h_{\text{Spatial}_i} \left[ x,y \right] \right| +
                        \gamma \left| h_{\text{Temporal}_i} \left[ x,y \right] \right|
                    }{4N^2} \right)^2
                \right)
            \]</span></div>
            <h4>（1/2）ffmpeg XPSNR 的用法</h4>
            <p>由于涉及视频帧时间基对齐问题，所以例子见下方版块。由于 ffmpeg XPSNR 运行时会持续打印信息，所以在区分并行的 CMD 窗口上可以使用 title 命令做标记。</p>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/2）将 XPSNR 分数转换回线性 1~100</button>
            <div class="coll-content">
                <h4>（2/2）将 XPSNR 分数转换回线性 1~100</h4>
                <p>将 dB 直接转换为线性会出现分数指数级增减，导致得分还是和 dB 一样不直观的问题，因此这里将 10~50 dB 的范围直接映射到 0~100 分的得分区间实现。这种方式虽然没有考虑 10bit 下的算法区别，但 XPSNR 在计算时已经统计了这一部分，因此这种映射法的失真不会特别离谱，而是类似于观察 dB 值的主观结果。此方法最终没有使用，但此处的优良分级将会被测试环节沿用。</p>
                <pre><code class="text-smaller language-cpp">
param(
    [Parameter(Position=0, Mandatory=$true)][double]$XPSNR_dB
)
# 10 dB 映射为 0 分，50 dB 映射为 100 分
$minDB = 10
$maxDB = 50
if ($XPSNR_dB -le $minDB) { return 0 }
elseif ($XPSNR_dB -ge $maxDB) { return 100 }
else { return (($XPSNR_dB - $minDB) / ($maxDB - $minDB)) * 100 }
&lt;#
0
0
25
50
75
100
#&gt;
param(
    [Parameter(Position=0, Mandatory=$true, ValueFromRemainingArguments = $true)][double[]]$XPSNR_dB
)
# 10 dB 映射为 0 分，50 dB 映射为 100 分
$minDB = 10
$maxDB = 50
foreach ($db in $XPSNR_dB) {
    if ($db -le $minDB) { $score = 0 }
    elseif ($db -ge $maxDB) { $score = 100 }
    else { $score = (($db - $minDB) / ($maxDB - $minDB)) * 100 }
    
    # 遍历输出结果
    [PSCustomObject]@{
        InputValue = $db
        Score      = $score
    }
}
&lt;#
# 同时计算 Y、Cb、Cr 得分
InputValue    Score
----------    -----
   39.7625 74.40625
   45.8456   89.614
   45.8868   89.717
#&gt;
                </code></pre>
            </div>

            <h3>画质指标——多失真识别多分辨率结构相似性 SSIMULACRA</h3>

            <p>一种对 MS-SSIM、<a href="https://github.com/pornel/dssim">DSSIM</a> 的改进，被用于 JPEG-XL。全拼为 Structural similarity unveiling local & compression related artifacts。其特点在于对失真的统计方法上除了沿用 MS-SSIM 的多分辨率迭代，还通过生成亮度、色度失真热度图以避免直接将失真计做一项平均值，并且结合了块失真、边缘失真（蚊噪、振铃）识别以更准确的反应画质分数。见 <a href="https://cloudinary.com/blog/detecting_the_psychovisual_impact_of_compression_related_artifacts_using_ssimulacra">Cloudinary</a>。</p>
            <p>失真热度图分为 SSIM 图、块失真振铃图、平滑模糊图 3 种。这些图分别以 6 种分辨率比例（1:1~1:32）对 X、Y、B 平面识别和累积得到共 3×6×3=54 张热度图。从中统计出 1-norm 和 4-norm 两值，共 108 个范数，通过加权求和得到最终的评分。权重由多种主观指标（CID22、TID2013、Kadid10k、KonFiG-IQA）对多种图像编码结果（JPEG、JPEG 2000、JPEG XL、WebP、AVIF、HEIC），以及人工添加失真的结果对比得到，见 <a href="https://github.com/cloudinary/ssimulacra2#how-it-works">GitHub/cloudinary</a>；季军方对比结果见 <a href="https://jon-cld.s3.amazonaws.com/test/ahall_of_fshame_SSIMULACRA_2_modelD.html">jon-cld</a>。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/5）范数与失真的关系</button>
            <div class="coll-content">
                <h4>（1/5）范数与失真的关系</h4>
                <p>1-范数（L1）即所有差异的线性和：</p>
                <span class="text-blue-math">\[ L_1 = \|e\|_1 = \sum_i \left|e_i\right| \]</span>
                <p>4-范数（L4）先对误差取 4 次幂，再求和，最后开 4 次根——局部失真对整体分数的影响更大：</p>
                <span class="text-blue-math">\[ L_4 = \|e\|_4 = \sqrt[4]{\sum_i \left|e_i\right|^4} \]</span>
                <p>HVS 感知失真的程度与失真像素的“影响力”有关，因此使用范数来描述画质得分相比直接统计差异要准确。在范数函数中，范数越大则局部误差的影响力越强，因而具有统计影响力的性质。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/5、3/5）版本 2.1 相比 2.0、1.0</button>
            <div class="coll-content">
                <h4>（2/5）版本 2.1 相比 2.0</h4>
                <ul>
                    <li><b>权重调整</b>：提高适用性</li>
                    <li><b>SSIM 多项式调整</b>：指标基本单位化，计算更贴近传统 SSIM，避免重复使用亮度曲线映射（伽马矫正）</li>
                    <li><b>多项式重新映射误差分数</b>：提高高失真情景的计算精度</li>
                </ul>
                <h4>（3/5）版本 2.1 相比 1.0</h4>
                <ul>
                    <li><b>色彩空间升级</b>：使用更新的 XYB 色彩空间替代 CIE Lab（中间格式仍映射到线性 RGB）</li>
                    <li><b>同时统计模糊和振铃</b>：提高适用性（之前只统计振铃失真）</li>
                    <li><b>移除特定块失真检测</b>：<span class="text-red-emph">猜测：</span>旧版有误判情况，或者单纯是新版提升了效率</li>
                    <li><b>根据更大规模的主观质量评分数据集优化</b>：提高精度</li>
                    <li><b>线性缩小分辨率</b>：提高精度</li>
                    <li>使用 1-norm（全局平均）和 4-norm（局部）替代原先的 max-norm（仅最差局部）组合，<span class="text-red-emph">猜测：</span>防止局部失真对整体评分的过大影响</li>
                </ul>
            </div>
            <h4>（4/5）SSIMULACRA 的缺点</h4>
            <ul>
                <li><b>仅读取 ICC 色彩空间配置文件</b>：ICC Profile 少见于图片元数据，所以需要检视图片规格，下载对应的 ICC 规格文件，再下载并使用如 image magick 之类的工具嵌入到图片中，比较麻烦
                    <ol>
                        <li>检查：<code>magick identify -verbose .\image.png</code>，得到一行如“Colorspace: sRGB”的指标</li>
                        <li>下载：<a href="https://color.org/srgbprofiles.xalter">sRGB IEC61966-2.1（sRGBv2）</a> 规格</li>
                        <li>嵌入：<code>magick .\lack-icc.png -profile sRGBv2.icc .\icc_embedded.png</code></li>
                        <li>验证：<code>magick identify -verbose .\image.png | findstr -i "Profile-icc"</code>，成功则得到：Profile-icc: 3024 bytes</li>
                    </ol>
                </li>
                <li><b>色彩空间转换</b>：YUV 色彩空间的源需要经过 YUV → RGB → Linear RGB → XYB 共 3 道有损转换，耗费了大量算力和内存，并且破坏了可靠性</li>
            </ul>
            <!--<button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：PowerShell 与 Image Magick 批量嵌入 ICC 配置</button>
            <div class="coll-content"><pre><code class="text-smaller language-powershell">
# 将 Image Magick 添加到环境变量，Image Magick 路径添加到环境变量中的 PATH 序列
# PowerShell 批量将 sRGB 图片嵌入 sRGB ICC 配置，并禁止 Magick 自动将图片转换为灰阶
# 指定不转换：在导出部分添加前缀，如 PNG24:output.png
$sRGBv2ICC = ".\sRGBv2.icc";
$imageCount = 3; # 填写图片数量 + 1
for ($i = 1; $i -le $imageCount - 1; $i++) {
    $source = (".\frame{0:D4}.png" -f $i)
    $embedded = (".\frame{0:D4}.png" -f $i)
    magick $source +profile icc -profile $sRGBv2ICC PNG24:$embedded
    if ($i % 100 -eq 0) { Write-Host "Conversion index: " $i }
}

# 如果 Magick CRC 报错的图像代表 Image2 没弄好，则手动通过该 CMD 命令重做（例如第 9774 帧损坏）：
# ffmpeg -y -i .\源视频.mp4 -vf select='eq(n,9774)' -vframes 1 -f image2 .\frame9774.png

# 然后手动在另一个 PowerShell 窗口里运行该命令以嵌入 ICC 配置
# $sRGBv2ICC = ".\sRGBv2.icc"
# $source = .\frame9774.png
# $embedded = .\frame9774.png
# magick $source +profile icc -profile $sRGBv2ICC PNG24:$embedded

# 最后通过 SSIMULACRA 对比原图和失真图像并累计平均值：
$value = 0.000000000;
$frames = 14316;
for ($i=1; $i -le $frames; $i++) {
    $source = (".\frame{0:D4}.png" -f $i)
    $encoded = (".\frame{0:D4}.png" -f $i)
    $value += .\ssimulacra2.exe $source $encoded 2>$null
    if ($i % 100 -eq 0) {
        "Index: " + $i + ", Current: " + $value + ", Avg: " + $value/$i;
    }
}
"Index: " + $frames + ", Total: " + $value + ", Avg: " + $value/$frames;
            </code></pre></div>-->
            <h4>（5/5）SSIMULACRA 的难点</h4>
            <ul>
                <li><b>仅读取图片</b> - 若是手动将编码的视频与源一并转换为 JXL 库支持解码的图片序列，如 PNG24，这意味着：
                    <ul>
                        <li>可以通过 ffmpeg image2 编码器无损编码为 PNG24 序列，但这导致了 YUV 转 RGB、再转 YUV 的有损流程，必须检查并调整配置到无损转换
                            <ul><li><code>ffmpeg -i .\源.mkv -vf select='eq(n,1859)' -vframes 1 -f image2 .\frame1859.png</code></li></ul>
                        </li>
                        <li>JXL 支持的无损图片类型中都不支持 10bit 位深，所以不能使用</li>
                    </ul>
                </li>
                <li>可以指定 frame-thread 线程数，只要内存/CPU 没吃满就可以一直提高占用而提速</li>
            </ul>
            <p>由于行不通，所以本教程的原测试结果全部更换为 <a href="https://github.com/rust-av/ssimulacra2.git">ssimulacra_rs</a>（内置 VapourSynth LSMASH 视频解码器）跑分。</p>

            <h3>画质指标——Butteraugli</h3>
            <p>Guetzli JPEG 编码器内置的心理视觉优化算法，使用 XYB 色彩空间、滑动窗口统计、图像频段分解（通过模糊卷积处理拆分出高低频，模拟 HVS 对不同频段的感知）、2-norm（欧几里得距离）差异热度图累计等计算。</p>
            <p>Butteraugli 结合了上述的多种算法思路（在滑动窗口、差异热度图上类似于 SSIMULACRA），还实现了分频段统计失真范围、以及在色度平面按照 HVS 感知质量的不同拆分权重，因此是本篇所录入指标中最先进的一种。见 <a href="https://github.com/google/butteraugli">github.com/google</a>。</p>
            <h4>（1/1）Butteraugli 的缺点</h4>
            <ul>
                <li>仅支持 8bit 位深（用于优化网页图像压缩）</li>
                <li>缺少对比其他算法的测试数据支持</li>
            </ul>

            <h2 id="h2-18">测试</h2>
            <p>如上所述，SSIMULACRA 2.1、VMAF、XPSNR 三项指标能够可靠的反应画质。两者的优势包括客观全参考、SROCC 与 PLCC 等级相关系数大于等于 0.9、算法思路清晰、拥有测试数据支持、支持 10bit 位深、代码开源、结果易复现等。</p>

            <h3>测试——SVT-AV1 编码器基准</h3>
            <p>编码器通过在 SVT-AV1 官方 GitLab 仓库下载（2025 年 3 月），据 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Build-Guide.md">官方说明</a>（Visual Studio 2022、CMake、NASM）编译得到。视频源选择方面，应该查找编码难度偏高（高时域、空域复杂度），而不是任何编码器都擅长的视频源。</p>
            <p>编译优化方面，更好的编译方案可以提高程序的运行性能，但这相当于一项额外的测试变量，且一般用户难以实现，因此本教程只使用最官方的编译结果测试 SVT-AV1。</p>
            
            <h4>（1/7）测试源条件与中间格式</h4>
            <p>只使用合理的视频源、并将所有源的格式统一，以达到可靠的测试条件。</p>
            <ul>
                <li><b>分辨率：</b>原生逐行扫描、视频高不超过 2160 像素</li>
                <li><b>帧率：</b>原生恒定帧率、未插帧的视频源</li>
                <li><b>色彩空间：</b>源与压缩结果均为 YUV 4:2:0；矩阵格式/系数指标、传输特质、三原色及白点、master-display 皆为 Bt.709 SDR
                    <ul>
                        <li>如果源的原生色域高于 Bt.709，则转换到 Bt.709 并编码为中间格式</li>
                        <li>源的原生色域不可低于 Bt.709</li>
                    </ul>
                </li>
                <li><b>位深：</b>8 或 10bit，不可低于 8bit，位深超过 10bit 时则转换并编码为中间格式</li>
                <li><b>关键帧间隔：</b>由于测试项目较多，所以只使用 12 秒间隔，理想时间条件下应当额外测试 5 秒关键帧间隔
                    <ul><li>该距离虽略长于串流用途（提高解码难度和延迟），但作为测试，这有助于编码器时域冗余能力得到充分发挥</li></ul>
                </li>
                <li><b>空间/时间加边（Padding）：</b>不得有任何黑边，或累计时长打达到影片 10% 长度的黑场；黑边黑场的编解码过于简单，导致原本影片的分数异常升高而失信</li>
            </ul>
            <h4>（2/7）测试内容画面</h4>
            <h5>（2/7——1/3）电影、录像</h5>
            <ul>
                <li>困难：<a href="https://archive.org/details/AV-LOSSLESS-TEST-MATERIAL">Boat 4096x2160 60fps 10bit 420</a>
                    <ul>
                        <li>前景含大量细节、背景含一定细节，背景偏模糊，背景平移，高分辨率</li>
                        <li>©Netflix</li>
                    </ul>
                </li>
                <li>普通：<a href="https://archive.org/details/AV-LOSSLESS-TEST-MATERIAL">WindAndNature 4096x2160 60fps 10bit 420</a>
                    <ul>
                        <li>动静态场景相互交错，场景渐变，高分辨率，仅背景画面</li>
                        <li>©Netflix</li> 
                    </ul>
                </li>
            </ul>
            <h5>（2/7——2/3）仿真材质动画、AAA 游戏</h5>
            <ul>
                <li>普通：<a href="https://archive.org/details/AV-LOSSLESS-TEST-MATERIAL">BigBuckBunny 1920x1080 24fps 8bit rgb</a>
                    <ul><li>©Blender Foundation</li></ul>
                </li>
                <li>困难：<a href="https://archive.org/details/AV-LOSSLESS-TEST-MATERIAL">ElephantsDream 1920x1080 24fps 8bit rgb</a>
                    <ul><li>©Blender Foundation</li></ul>
                </li>
            </ul>
            <h5>（2/7——3/3）漫画材质动画：</h5>
            <ul>
                <li>简单：HYOUKA Volume 1\STREAM\00002.m2ts 1920x1080 23.976fps 8bit 420（AVC 37.4 Mbps）
                    <ul>
                        <li>几乎所有场景含有明确的前景、静态场景偏多、前景聚焦点含锐利细节</li>
                        <li>©米澤穂信・角川書店／神山高校古典部 OB 会</li>   
                    </ul>
                </li>
                <li>普通：MAIDRAGON-S Volume 3\STREAM\00001.m2ts 1920x1080 23.976fps 8bit 420 (AVC 34.3 Mbps)
                    <ul>
                        <li>前景、背景均含有锐利线条、场景切换偏频繁、动态场景多</li>
                        <li>©クール教信者・双葉社／ドラゴン生活向上委員会</li>
                    </ul>
                </li>
                <li>极致：
                    <a href="https://opencontent.netflix.com">SolLevante 4k 24fps HDR10 2020 ST2084 UHD 24fps 1000nit 12bit 4444XQ</a>
                    <ul>
                        <li>前景、背景充满锐利线条、浅色纹理、高动态纹理、粒子特效、浅色粒子，场景切换频繁，复杂动态场景居多，高分辨率</li>
                        <li>注：需转换到 SDR Bt.709 10bit</li>
                        <li>©Netflix</li> 
                    </ul>
                </li>
            </ul>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/7）测试电脑平台</button>
            <div class="coll-content">
                <h4>（3/7）测试电脑平台</h4>
                <ul class="text-smaller">
                    <li>OS：Windows 10 22H2 19045.5371，高性能电源计划</li>
                    <li>CPU：R9 9900X 5.4 Ghz 风冷、PBO -8 曲线、限制 220W，满载 89°C、FCLK 2200</li>
                    <li>CPU 性能：Cinebench R23 10 分钟测试得分 34125，Cinebench 2024 10 分钟测试得分 1942</li>
                    <li>主板：MPG B650 EDGE WIFI（6L PCB）</li>
                    <li>BIOS：7E10v1I/AGESA 1.2.0.2B，2025 年 1 月</li>
                    <li>芯片组驱动版本：7.02.13.148（2025 年 3 月）</li>
                    <li>内存：MLX5C640A77P32G DDR5-5800 28-36-36-96 CR1 81000 MBps、85000 MBps、71000 MBps、59.2ns</li>
                </ul>
                <p>测试条件虽较为简陋，但编码时未遇到内存和硬盘 IO 瓶颈，因此尽管同 CPU 电脑的编码速度可能无法达到精准，但不同编码测试之间的速度差异不受影响。</p>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/7）转换 ST.2084 PQ 到 Bt.709</button>
            <div class="coll-content">
                <h4>（4/7）转换 ST.2084 PQ 到 Bt.709</h4>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_HDR10_r2020_ST2084_UHD_24fps_1000nit.mov
-vf "format=yuv444p12le,
zscale=rin=tv:r=full:tin=smpte2084:min=bt2020nc:pin=bt2020,
zscale=transfer=linear,tonemap=hable:desat=3:peak=1000,
zscale=transfer=bt709:matrix=bt709:primaries=bt709,
format=yuv420p10le"
-color_primaries bt709 -color_trc bt709 -colorspace bt709 -c:v rawvideo -pix_fmt yuv420p10le -strict experimental
.\SolLevante_yuv444p10le_bt709.yuv
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（5/7）FFV1 编码中间源</button>
            <div class="coll-content">
                <h4>（5/7）FFV1 编码中间源</h4>
                <p>由于 SSIMULACRA2_rs 只能使用 LSMAS 解码，而 LSMAS 解码不支持 <code>.yuv</code> 文件，因此这些源需要经过加工才能使用（当然为了数据可靠，曾经完成的测试也一并要重做），如：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_HDR10_r2020_ST2084_UHD_24fps_1000nit.mov ^
-vf "format=yuv444p12le,
zscale=rin=tv:r=full:tin=smpte2084:min=bt2020nc:pin=bt2020,
zscale=transfer=linear,tonemap=hable:desat=3:peak=1000,
zscale=transfer=bt709:matrix=bt709:primaries=bt709,
format=yuv420p10le" ^
-color_primaries bt709 -color_trc bt709 -colorspace bt709 -c:v rawvideo -pix_fmt yuv420p10le -strict experimental ^
-c:v ffv1 -context 1 -level 3 -g 1 ^
-c:a copy ^
.\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le_1.mkv

[ffv1 @ 000002d8a6eecac0] high bits_per_raw_sample, forcing range coder
Output #0, matroska, to '.\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv':
  Metadata:
    encoder         : Lavf61.9.107
  Stream #0:0: Video: ffv1 (FFV1 / 0x31564646), yuv420p10le(tv, bt709, progressive), 3840x2160, q=2-31, 200 kb/s, 24 fps, 1k tbn
    Metadata:
      encoder         : Lavc61.33.102 ffv1
[out#0/matroska @ 000002d8a6efda80] video:28020018KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.001075%
frame= 6314 fps=6.6 q=-0.0 Lsize=28020319KiB time=00:04:23.08 bitrate=872508.5kbits/s speed=0.274x
                </code></pre>
                <p>对于 LSMAS 不认识的 RGB 色彩空间，需要在源上预先转换到 yuv420p：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_rgb.video+audio.mkv ^
-pix_fmt yuv420p ^
-c:v ffv1 -context 1 -level 3 -g 1 ^
-c:a copy ^
.\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv
                </code></pre>
            </div>
            <h4>（6/7）画质指标得分好坏定义</h4>
            <p>测试版块中，数据会以编码参数 + 部分编码信息 + 画质指标信息的方式呈现。部分编码信息记录速度和码率，画质指标信息记录各种画质指标检测的结果，分别为：</p>
            <ul>
                <li><b>XPSNR：</b>播放画质，仔细观看
                    <ul>
                        <li style="color:#31D87D">视觉无损：大于等于 45dB</li>
                        <li style="color:#92D050">优秀：大于等于 42dB</li>
                        <li style="color:#FFC000">良好：大于等于 38dB</li>
                        <li style="color:#C65911">达标：大于等于 32dB</li>
                    </ul>
                </li>
                <li><b>VMAF 4k：</b>播放画质，远距离观看/客厅电视/影院</li>
                <li><b>VMAF 1080p：</b>播放画质，中近距离观看/桌面电脑，相比 VMAF 4K 更加苛刻
                    <ul>
                        <li style="color:#31D87D">视觉无损：大于等于 95</li>
                        <li style="color:#92D050">优秀：大于等于 90</li>
                        <li style="color:#FFC000">良好：大于等于 80</li>
                        <li style="color:#C65911">达标：大于等于 70</li>
                    </ul>
                </li>
                <li><b>SSIMULACRA2_rs</b>暂停画质，仔细观看。分数说明见 <a href="https://github.com/cloudinary/ssimulacra2?tab=readme-ov-file#usage">Github/cloudinary</a>
                    <ul>
                        <li style="color:#31D87D">视觉无损：大于等于 90</li>
                        <li style="color:#92D050">优秀：大于等于 80</li>
                        <li style="color:#FFC000">良好：大于等于 70</li>
                        <li style="color:#C65911">达标：大于等于 60</li>
                    </ul>
                </li>
            </ul>
            <p class="text-gray-side">若衡量标准是以手机观看，则应将以上要求降低至少一个等级，如达标→良好。</p>
            <p class="text-gray-side">若任意测量中出现负值相关性，则并非是画面糊了那么简单，而更可能是错给了两条不相关的视频。</p>
            <p class="text-gray-side">若同视频不同参数下，SSIMULACRA 排位第 95% 的帧得分很高（95~100%）时，不一定代表画面真的更好，反而更可能是因为影片有很长的的黑场画面存在；同样地，图片加黑边时，由于此处的画面容易编解码，因此会变相的提高跑分。</p>
            <h4>（7/9）时间基对齐问题</h4>
            <p>任何偏差都会导致分数计算得分分布异常，画质指标分数大幅降低。以下是时间基（tiome base）不同的 XPSNR 跑分运行状态（VMAF 同样受影响）：</p>
            <pre><code class="text-smaller language-powershell">
...
n:   30  XPSNR y: 31.4411  XPSNR u: 39.5209  XPSNR v: 43.5832
n:   31  XPSNR y: 39.2656  XPSNR u: 42.1633  XPSNR v: 43.7381
n:   32  XPSNR y: 39.2400  XPSNR u: 41.9845  XPSNR v: 44.2400
n:   33  XPSNR y: 30.9163  XPSNR u: 39.0239  XPSNR v: 43.9099
n:   34  XPSNR y: 39.0955  XPSNR u: 42.0606  XPSNR v: 43.0219
n:   35  XPSNR y: 39.0476  XPSNR u: 42.1394  XPSNR v: 43.2114
n:   36  XPSNR y: 30.2405  XPSNR u: 38.9321  XPSNR v: 43.0232
n:   37  XPSNR y: 38.9831  XPSNR u: 42.4989  XPSNR v: 43.5781
n:   38  XPSNR y: 38.6513  XPSNR u: 41.6318  XPSNR v: 43.0612
n:   39  XPSNR y: 29.7290  XPSNR u: 38.5463  XPSNR v: 42.9741
n:   40  XPSNR y: 38.7836  XPSNR u: 41.5239  XPSNR v: 43.6419
n:   41  XPSNR y: 39.0867  XPSNR u: 42.5780  XPSNR v: 43.9764
n:   42  XPSNR y: 29.0951  XPSNR u: 39.2449  XPSNR v: 43.0782
n:   43  XPSNR y: 38.7849  XPSNR u: 42.2420  XPSNR v: 43.4116
n:   44  XPSNR y: 38.6417  XPSNR u: 41.7548  XPSNR v: 43.5794
n:   45  XPSNR y: 28.8629  XPSNR u: 38.2852  XPSNR v: 42.9271
n:   46  XPSNR y: 38.6981  XPSNR u: 42.0964  XPSNR v: 43.5600
n:   47  XPSNR y: 38.9387  XPSNR u: 42.7865  XPSNR v: 43.8799
n:   48  XPSNR y: 28.4371  XPSNR u: 38.5004  XPSNR v: 42.7532
n:   49  XPSNR y: 39.3768  XPSNR u: 43.8468  XPSNR v: 44.4209
...
            </code></pre>
            <p>同一个测试下，对齐时间基后的 XPSNR 跑分运行状态：</p>
            <pre><code class="text-smaller language-powershell">
...
n:   30  XPSNR y: 39.1067  XPSNR u: 41.6512  XPSNR v: 43.2158
n:   31  XPSNR y: 39.2656  XPSNR u: 42.1633  XPSNR v: 43.7381
n:   32  XPSNR y: 39.2400  XPSNR u: 41.9845  XPSNR v: 44.2400
n:   33  XPSNR y: 39.4594  XPSNR u: 43.2958  XPSNR v: 44.4781
n:   34  XPSNR y: 39.0955  XPSNR u: 42.0606  XPSNR v: 43.0219
n:   35  XPSNR y: 39.0476  XPSNR u: 42.1394  XPSNR v: 43.2114
n:   36  XPSNR y: 38.8075  XPSNR u: 41.5697  XPSNR v: 43.2691
n:   37  XPSNR y: 38.9831  XPSNR u: 42.4989  XPSNR v: 43.5781
n:   38  XPSNR y: 38.6513  XPSNR u: 41.6318  XPSNR v: 43.0612
n:   39  XPSNR y: 38.8316  XPSNR u: 42.1312  XPSNR v: 43.4734
n:   40  XPSNR y: 38.7836  XPSNR u: 41.5239  XPSNR v: 43.6419
n:   41  XPSNR y: 39.0867  XPSNR u: 42.5780  XPSNR v: 43.9764
n:   42  XPSNR y: 38.8047  XPSNR u: 41.9878  XPSNR v: 43.2527
n:   43  XPSNR y: 38.7849  XPSNR u: 42.2420  XPSNR v: 43.4116
n:   44  XPSNR y: 38.6417  XPSNR u: 41.7548  XPSNR v: 43.5794
n:   45  XPSNR y: 38.8838  XPSNR u: 42.8387  XPSNR v: 43.8657
n:   46  XPSNR y: 38.6981  XPSNR u: 42.0964  XPSNR v: 43.5600
n:   47  XPSNR y: 38.9387  XPSNR u: 42.7865  XPSNR v: 43.8799
n:   48  XPSNR y: 38.9772  XPSNR u: 42.5377  XPSNR v: 44.0830
n:   49  XPSNR y: 39.3768  XPSNR u: 43.8468  XPSNR v: 44.4209
...
            </code></pre>
            <p>未对齐与对齐的 XPSNR、VMAF 跑分结果（高分为正确），可以看到跑分偏差巨大：</p>
            <pre><code class="text-smaller">
XPSNR average, 14315 frames  y: 33.8192  u: 41.5568  v: 42.3078 (minimum: 33.8192)
XPSNR average, 14315 frames  y: 41.9978  u: 44.6105  v: 45.2615 (minimum: 41.9978)

VMAF 4k: 86.106435, VMAF 1080p: 79.426049
VMAF 4k: 99.561552, VMAF 1080p: 96.971028
            </code></pre>

            <h4>（8/9）XPSNR、VMAF 一般用法与时间基对齐</h4>
            <p>反之，如果没有 ffmpeg “DTS 未单调增加”报错或“not matching timebases ...” 警告，则使用普通写法即可：</p>
            <pre><code class="text-smaller language-powershell">
title XPSNR 跑分
ffmpeg -i .\源视频.mkv -i .\压缩后.ivf -lavfi xpsnr="stats_file=-" -f null -

title XPSNR 跑分并自动存入 D 盘文件夹（注意 outTxt 路径格式）
ffmpeg -i .\源视频.m2ts -i .\压缩后.ivf -lavfi xpsnr="stats_file=D\\:/\文件夹\/xpsnr-跑分.txt" -f null -

title 同上
set "source=.\源视频.m2ts"
set "lossy=.\压缩后.ivf"
set "outTXT=D\\:/\文件夹\/xpsnr-跑分.txt"
set "xpsnrCmd=xpsnr=stats_file="
ffmpeg -i %source% -i %lossy% -lavfi %xpsnrCmd%%outTXT% -f null -

title VMAF 跑分
ffmpeg -i .\源视频.mkv -i .\压缩后.ivf -lavfi libvmaf="model=version=vmaf_v0.6.1\\:name=vmaf_1080p|version=vmaf_4k_v0.6.1\\:name=vmaf_4k" -f null -

title VMAF 跑分并自动存入 D 盘文件夹（注意保存方法不再是滤镜内设置，而是 stdout）
ffmpeg -i .\源视频.mkv -i .\压缩后.ivf -lavfi libvmaf="model=version=vmaf_v0.6.1\\:name=vmaf_1080p|version=vmaf_4k_v0.6.1\\:name=vmaf_4k" -f null - > D:\文件夹\vmaf-跑分.txt 2>&1

title 同上
set "source=.\源视频.m2ts"
set "lossy=.\压缩后.ivf"
set "outputFile=D:\文件夹\vmaf-跑分.txt"
set "vmafCmd=libvmaf=model=version=vmaf_v0.6.1\\:name=vmaf_1080p|version=vmaf_4k_v0.6.1\\:name=vmaf_4k"
ffmpeg -i %source% -i %lossy% -lavfi "%vmafCmd%" -f null - > %outputFile% 2>&1
            </code></pre>
            <p>否则，在运行 XPSNR、VMAF 命令时，ffmpeg 会显示警告：</p>
            <pre><code class="text-smaller language-powershell">
[Parsed_xpsnr_2 @ 00000210b9e593c0] not matching timebases found between first input: 1/1000 and second input 1/24, results may be incorrect!

[Parsed_xpsnr_2 @ 0000020417c2ea00] not matching timebases found between first input: 1/90000 and second input 1001/24000, results may be incorrect!
            </code></pre>
            <p>由于时间基对齐错误对跑分的影响极大，因此出现警告时只能停止跑分。从警告内容，或者以下 ffprobe 命令可以得知这些视频的时间基：</p>
            <pre><code class="text-smaller language-powershell">
ffprobe.exe -v error -select_streams v:0 -show_entries stream=time_base -of default=noprint_wrappers=1:nokey=0 ".\视频.mkv"
            </code></pre>
            <p>例如，若得到 1/1000 与 1/24（尽管两者帧率同为 24fps），则对齐的时间基为二者积（或计算分数的最大公约数）：1/24000，因此设为：</p>
            <pre><code class="text-smaller language-powershell">
[0:v]setpts=N*(1/24000)[src]; [1:v]setpts=N*(1/24000)[enc];
            </code></pre>
            <p>而 XPSNR、VMAF 命令前添加这个 setpts 以及输入 [src][enc] 两个源即可：</p>
            <pre><code class="text-smaller language-powershell">
-lavfi "[0:v]setpts=N*(1/24000)[src]; [1:v]setpts=N*(1/24000)[enc]; [src][enc]xpsnr=stats_file=-"

ffmpeg -i .\源视频.mkv -i .\压缩后.ivf -lavfi "[0:v]setpts=N*(1/24000)[src]; [1:v]setpts=N*(1/24000)[enc]; [src][enc]xpsnr=stats_file=-" -f null -

-lavfi "[0:v]setpts=N*(1/24000)[src]; [1:v]setpts=N*(1/24000)[enc]; [src][enc]libvmaf=model=version=vmaf_v0.6.1\\:name=vmaf_1080p|version=vmaf_4k_v0.6.1\\:name=vmaf_4k"

ffmpeg -i .\源视频.mkv -i .\压缩后.ivf -lavfi "[0:v]setpts=N*(1/24000)[src]; [1:v]setpts=N*(1/24000)[enc]; [src][enc]libvmaf=model=version=vmaf_v0.6.1\\:name=vmaf_1080p|version=vmaf_4k_v0.6.1\\:name=vmaf_4k" -f null -
            </code></pre>
            <h5>对齐丢帧帧率/小数帧率时间基</h5>
            <p>若得到 1/90000（有些蓝光盘的 .m2ts 流）与 1001/24000（24fps 丢帧到 23.976），则因为第二个值而不能简单的计算分母积，而只能计算分数的最大公约数（这是丢帧帧率应该被淘汰的又一原因）：</p>
            <span class="text-blue-math overflow-auto">\[
                {GCD}\left(\frac{a}{b}, \frac{c}{d}\right)
                = \frac{{GCD}\left(a,c\right)}{{LCM}\left(b,d\right)}
            \]</span>
            <p class="text-side-gray">GCD：最大公约数；LCM：最小公倍数：</p>
            <span class="text-blue-math overflow-auto">\[
                {T}_{common} = {GCD}\left(\frac{1}{90000}, \frac{1001}{24000}\right)
            \]\[
                = \frac{{GCD}\left(1,1001\right)}{{LCM}\left(90000,24000\right)}
                = \frac{1}{360000}
            \]</span>

            <h4>（9/10）计算分数的最小公倍数</h4>
            <p>以下是一种快速的 PowerShell 算法，使用代码转换工具将其改成便于集成和使用的格式即可：</p>
            <pre><code class="text-smaller language-powershell">
# 最大公约数函数，参数和返回值均为双精度浮点数
function gcd{
    param([double]$a, [double]$b)
    if ($b -eq 0) { return $a }
    # 使用欧几里得算法递归地求最大公约数，
    # 每次用上一次的较小数 $b 和 $a % $b（余数）作为下一轮的参数，直到余数为零
    else { return gcd $b ($a % $b) }
}
# 最小公倍数函数，参数和返回值均为双精度浮点数
function lcm{
    param([double]$a, [double]$b)
    if ($a -eq 0 -and $b -eq 0) { return 0 }
    $z = gcd $a $b;
    return [Math]::Abs($a * $b) / $z;
}
# 计算分数的最大公约数，输入整数分子1，分母1，分子2，分母2
function fracGCD{
    param([int]$num1,[int]$denom1,[int]$num2,[int]$denom2)
    return [String](gcd $num1 $num2)+"/"+(lcm $denom1 $denom2)
}
# 初始化变量为双精度浮点数
[double]$a = 24
[double]$b = 1000
# 调用最小公倍数函数并输出结果
$result = lcm $a $b
Write-Host "a, b 的最小公倍数为: $result"
# 计算 1/90000 与 1001/24000 的最小公倍数
$result = fracGCD 1 90000 1001 24000
Write-Host "1/90000 与 1001/24000 的最大公约数为: $result"
            </code></pre>

            <h4>（10/10）批处理示例</h4>
            <p>以下批处理是为了满足多个要求而设：</p>
            <ul>
                <li>减少 ffmpeg 输出并关闭音频（对齐）</li>
                <li>根据情况使用不同的时间基设置</li>
                <li>减少重复，便于检修</li>
            </ul>
            <h5>XPSNR 批处理</h5>
            <pre><code class="text-smaller language-powershell">

chcp 65001

set "sourcePath=X:\源视频路径\"
set "lossyPath=X:\压缩视频路径\"
set "setptsCmdA=[0:v]setpts=N*(1/24000)[src]; [1:v]setpts=N*(1/24000)[enc]; [src][enc]"
set "setptsCmdB=[0:v]setpts=N*(1/6000)[src]; [1:v]setpts=N*(1/6000)[enc]; [src][enc]"
set "setptsCmdC=[0:v]setpts=N*(1/360000)[src]; [1:v]setpts=N*(1/360000)[enc]; [src][enc]"
set "xpsnrCmd=xpsnr=stats_file="

set "outputFile=X\\:/\导出测试结果路径\/xpsnr-视频1跑分-两万四千分之一.txt"
ffmpeg -hide_banner -an ^
-i "%sourcePath%源视频1.mkv" ^
-i "%lossyPath%压缩视频1.ivf" ^
-lavfi "%setptsCmdA%%xpsnrCmd%%outputFile%" -f null -

set "outputFile=X\\:/\导出测试结果路径\/xpsnr-视频2跑分-六千分之一.txt"
ffmpeg -hide_banner -an ^
-i "%sourcePath%源视频2.mov" ^
-i "%lossyPath%压缩视频2.ivf" ^
-lavfi "%setptsCmdB%%xpsnrCmd%%outputFile%" -f null -

set "outputFile=X\\:/\导出测试结果路径\/xpsnr-视频3跑分-三十六万分之一.txt"
ffmpeg -hide_banner -an ^
-i "%sourcePath%源视频3.m2ts" ^
-i "%lossyPath%压缩视频3.ivf" ^
-lavfi "%setptsCmdC%%xpsnrCmd%%outputFile%" -f null -

set "outputFile=X\\:/\导出测试结果路径\/xpsnr-视频4跑分-无对齐.txt"
ffmpeg -hide_banner -an ^
-i "%sourcePath%源视频4.m2ts" ^
-i "%lossyPath%压缩视频4.ivf" ^
-lavfi "%xpsnrCmd%%outputFile%" -f null -

pause
            </code></pre>
            <h5>VMAF 批处理</h5>
            <pre><code class="text-smaller language-powershell">

chcp 65001

set "sourcePath=X:\源视频路径\"
set "lossyPath=X:\压缩视频路径\"
set "setptsCmdA=[0:v]setpts=N*(1/24000)[src]; [1:v]setpts=N*(1/24000)[enc]; [src][enc]"
set "setptsCmdB=[0:v]setpts=N*(1/6000)[src]; [1:v]setpts=N*(1/6000)[enc]; [src][enc]"
set "setptsCmdC=[0:v]setpts=N*(1/360000)[src]; [1:v]setpts=N*(1/360000)[enc]; [src][enc]"
set "vmafCmd=libvmaf=model=version=vmaf_v0.6.1\\:name=vmaf_1080p|version=vmaf_4k_v0.6.1\\:name=vmaf_4k"

set "outputFile=X:\导出测试结果路径\vmaf-视频1跑分-两万四千之一.txt"
ffmpeg -hide_banner -an ^
-i "%sourcePath%源视频1.mkv" ^
-i "%lossyPath%压缩视频1.ivf" ^
-lavfi "%setptsCmdA%%vmafCmd%" -f null - > %outputFile% 2>&1

set "outputFile=X:\导出测试结果路径\vmaf-视频2跑分-六千分之一.txt"
ffmpeg -hide_banner -an ^
-i "%sourcePath%源视频2.mov" ^
-i "%lossyPath%压缩视频2.ivf" ^
-lavfi "%setptsCmdB%%vmafCmd%" -f null - > %outputFile% 2>&1

set "outputFile=X:\导出测试结果路径\vmaf-视频3跑分-三十六万分之一.txt"
ffmpeg -hide_banner -an ^
-i "%sourcePath%源视频3.m2ts" ^
-i "%lossyPath%压缩视频3.ivf" ^
-lavfi "%setptsCmdC%%vmafCmd%" -f null - > %outputFile% 2>&1

set "outputFile=X:\导出测试结果路径\vmaf-视频4跑分-无对齐.txt"
ffmpeg -hide_banner -an ^
-i "%sourcePath%源视频4.m2ts" ^
-i "%lossyPath%压缩视频4.ivf" ^
-lavfi "%vmafCmd%" -f null - > %outputFile% 2>&1

pause
            </code></pre>
            
            <h3>测试——基准测试对照组</h3>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/7）x265 v4.1——SolLevante</button>
            <div class="coll-content">
                <p><code>--crf 22</code>：</p>
                <pre><code class="text-smaller language-powershell">
x265 --profile main10 --high-tier --tu-intra-depth 4 --tu-inter-depth 4 --max-tu-size 16 --tskip --tskip-fast --me umh --subme 3 --merange 56 --weightb --max-merge 5 --early-skip --ref 3 --no-open-gop --min-keyint 5 --keyint 288 --fades --bframes 16 --b-adapt 2 --bframe-bias 20 --constrained-intra --b-intra --crf 22 --crqpoffs -4 --cbqpoffs -2 --ipratio 1.6 --pbratio 1.3 --cu-lossless --psy-rdoq 2.3 --rdoq-level 2 --hevc-aq --aq-strength 0.9 --qg-size 8 --rd 3 --limit-modes --limit-refs 1 --rskip 1 --rc-lookahead 60 --rect --amp --psy-rd 1.5 --splitrd-skip --rdpenalty 2 --deblock -1:0 --limit-sao --sao-non-deblock --input .\SolLevante_yuv420p10le_bt709.yuv --input-depth 10 --input-res 3840x2160 --input-csp i420 --fps 24 --output .\SolLevante_yuv420p10le_bt709_crf22.hevc

x265 [INFO]: frame I:     67, Avg QP:25.05  kb/s: 50564.78                      MB [647.82 MB]
x265 [INFO]: frame P:   1583, Avg QP:26.23  kb/s: 30733.05
x265 [INFO]: frame B:   4664, Avg QP:30.13  kb/s: 15442.59
x265 [INFO]: Weighted P-Frames: Y:5.3% UV:3.3%
x265 [INFO]: Weighted B-Frames: Y:10.9% UV:6.1%

encoded 6314 frames in 2322.18s (2.72 fps), 19648.80 kb/s, Avg QP:29.10

XPSNR average, 6314 frames  y: 20.9812  u: 38.0531  v: 35.0405 (minimum: 20.9812)
VMAF 4k: 98.125428, VMAF 1080p: 96.795521
SSIMULACRA2_rs: Mean: 55.88148851 Median: 52.56807147 Std Dev: 34.29008946 5th Percentile: -2.62235865 95th Percentile: 100.00000000
                </code></pre>
                <p><code>--crf 18</code>：</p>
                <pre><code class="text-smaller language-powershell">
x265 --profile main10 --high-tier --tu-intra-depth 4 --tu-inter-depth 4 --max-tu-size 16 --tskip --tskip-fast --me umh --subme 3 --merange 56 --weightb --max-merge 5 --early-skip --ref 3 --no-open-gop --min-keyint 5 --keyint 288 --fades --bframes 16 --b-adapt 2 --bframe-bias 20 --constrained-intra --b-intra --crf 18 --crqpoffs -4 --cbqpoffs -2 --ipratio 1.6 --pbratio 1.3 --cu-lossless --psy-rdoq 2.3 --rdoq-level 2 --hevc-aq --aq-strength 0.9 --qg-size 8 --rd 3 --limit-modes --limit-refs 1 --rskip 1 --rc-lookahead 60 --rect --amp --psy-rd 1.5 --splitrd-skip --rdpenalty 2 --deblock -1:0 --limit-sao --sao-non-deblock --input .\SolLevante_yuv420p10le_bt709.yuv --input-depth 10 --input-res 3840x2160 --input-csp i420 --fps 24 --output .\SolLevante_yuv420p10le_bt709_crf18.hevc

x265 [INFO]: frame I:     67, Avg QP:21.04  kb/s: 78567.86                      MB [1082.8 MB]
x265 [INFO]: frame P:   1583, Avg QP:21.97  kb/s: 49405.12
x265 [INFO]: frame B:   4664, Avg QP:26.06  kb/s: 26591.04
x265 [INFO]: Weighted P-Frames: Y:5.3% UV:3.3%
x265 [INFO]: Weighted B-Frames: Y:10.9% UV:6.1%

encoded 6314 frames in 2636.64s (2.39 fps), 32862.36 kb/s, Avg QP:24.98

XPSNR average, 6314 frames  y: 21.0524  u: 38.4039  v: 35.2750 (minimum: 21.0524)
VMAF 4k: 98.951545, VMAF 1080p: 98.200316
SSIMULACRA2_rs: Mean: 68.87327380 Median: 67.24602694 Std Dev: 23.64012811 5th Percentile: 28.23977369 95th Percentile: 99.82971151
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/7）x265 v4.1——Boat</button>
            <div class="coll-content">
                <p><code>--crf 22</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -c:v libx265 -pix_fmt yuv420p10le -profile:v main10 -x265-params "high-tier=1:ctu=64:tu-intra-depth=4:tu-inter-depth=4:limit-tu=1:rect=1:tskip=1:tskip-fast=1:me=star:subme=5:merange=56:weightb=1:ref=4:max-merge=5:open-gop=0:min-keyint=3:keyint=216:fades=1:bframes=8:b-adapt=2:analyze-src-pics=1:b-intra=1:crf=22:crqpoffs=-3:ipratio=1.2:pbratio=1.5:rdoq-level=2:aq-mode=4:aq-strength=1.1:qg-size=8:rd=5:limit-refs=0:rskip=0:rc-lookahead=43:psy-rd=1.6:deblock=0,-1:limit-sao=1:sao-non-deblock=1:selective-sao=3" -fps_mode passthrough -c:a copy .\Netflix_Boat_10bit_420_crf22.mp4

Metadata:
encoder         : Lavf61.9.104
Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p10le(tv, bt709, progressive), 4096x2160 [SAR 1:1 DAR 256:135], q=2-31, 60 fps, 15360 tbn (default)
Metadata:
      encoder         : Lavc61.31.100 libx265
      DURATION        : 00:00:05.000000000
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
[out#0/mp4 @ 000001d15db09f80] video:19026KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.037869%
frame=  300 fps=2.0 q=35.5 Lsize=   19034KiB time=00:00:04.96 bitrate=31394.1kbits/s speed=0.0339x
x265 [info]: frame I:      2, Avg QP:25.41  kb/s: 270732.48
x265 [info]: frame P:     71, Avg QP:25.97  kb/s: 98330.85
x265 [info]: frame B:    227, Avg QP:34.84  kb/s: 8054.49
x265 [info]: Weighted P-Frames: Y:0.0% UV:0.0%
x265 [info]: Weighted B-Frames: Y:0.0% UV:0.0%

encoded 300 frames in 145.91s (2.06 fps), 31171.09 kb/s, Avg QP:32.67

XPSNR average, 300 frames  y: 40.5607  u: 42.9254  v: 45.6857 (minimum: 40.5607)
VMAF 4k: 98.049573, VMAF 1080p: 98.374132
SSIMULACRA2_rs: Mean: 64.77780339 Median: 63.91098240 Std Dev: 3.68027547 5th Percentile: 60.04055450 95th Percentile: 71.22150529
                </code></pre>
                <p><code>--crf 18</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -c:v libx265 -pix_fmt yuv420p10le -profile:v main10 -x265-params "high-tier=1:ctu=64:tu-intra-depth=4:tu-inter-depth=4:limit-tu=1:rect=1:tskip=1:tskip-fast=1:me=star:subme=5:merange=56:weightb=1:ref=4:max-merge=5:open-gop=0:min-keyint=3:keyint=216:fades=1:bframes=8:b-adapt=2:analyze-src-pics=1:b-intra=1:crf=18:crqpoffs=-3:ipratio=1.2:pbratio=1.5:rdoq-level=2:aq-mode=4:aq-strength=1.1:qg-size=8:rd=5:limit-refs=0:rskip=0:rc-lookahead=43:psy-rd=1.6:deblock=0,-1:limit-sao=1:sao-non-deblock=1:selective-sao=3" -fps_mode passthrough -c:a copy .\Netflix_Boat_10bit_420_crf18.mp4

Metadata:
encoder         : Lavf61.9.104
Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p10le(tv, bt709, progressive), 4096x2160 [SAR 1:1 DAR 256:135], q=2-31, 60 fps, 15360 tbn (default)
Metadata:
      encoder         : Lavc61.31.100 libx265
      DURATION        : 00:00:05.000000000
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
[out#0/mp4 @ 000002bbab409f80] video:37130KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.020100%
frame=  300 fps=1.5 q=31.7 Lsize=   37137KiB time=00:00:04.96 bitrate=61253.8kbits/s speed=0.0255x
x265 [info]: frame I:      2, Avg QP:21.42  kb/s: 407498.16
x265 [info]: frame P:     71, Avg QP:21.61  kb/s: 195279.65
x265 [info]: frame B:    227, Avg QP:30.87  kb/s: 15724.78
x265 [info]: Weighted P-Frames: Y:0.0% UV:0.0%
x265 [info]: Weighted B-Frames: Y:0.0% UV:0.0%

encoded 300 frames in 194.19s (1.54 fps), 60831.26 kb/s, Avg QP:28.61

XPSNR average, 300 frames  y: 42.0499  u: 44.8382  v: 47.8922 (minimum: 42.0499)
VMAF 4k: 99.810258, VMAF 1080p: 99.810258
SSIMULACRA2_rs: Mean: 73.25259644 Median: 71.55939769 Std Dev: 3.68909897 5th Percentile: 69.44349186 95th Percentile: 79.86377007
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/7）x265 v4.1——WindAndNature</button>
            <div class="coll-content">
                <p><code>--crf 22</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -c:v libx265 -pix_fmt yuv420p10le -profile:v main10 -x265-params "high-tier=1:ctu=64:tu-intra-depth=4:tu-inter-depth=4:limit-tu=1:rect=1:tskip=1:tskip-fast=1:me=star:subme=5:merange=56:weightb=1:ref=4:max-merge=5:open-gop=0:min-keyint=3:keyint=540:fades=1:bframes=8:b-adapt=2:analyze-src-pics=1:b-intra=1:crf=22:crqpoffs=-3:ipratio=1.2:pbratio=1.5:rdoq-level=2:aq-mode=4:aq-strength=1.1:qg-size=8:rd=5:limit-refs=0:rskip=0:rc-lookahead=108:psy-rd=1.6:deblock=0,-1:limit-sao=1:sao-non-deblock=1:selective-sao=3" -fps_mode passthrough -c:a copy .\Netflix_WindAndNature_10bit_420_crf22.mp4

Metadata:
encoder         : Lavf61.9.104
Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p10le(tv, bt709, progressive), 4096x2160 [SAR 1:1 DAR 256:135], q=2-31, 60 fps, 15360 tbn (default)
Metadata:
  encoder         : Lavc61.31.100 libx265
  DURATION        : 00:00:19.984000000
Side data:
  cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
[out#0/mp4 @ 0000020fd5c5c980] video:25550KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.056499%
frame= 1199 fps=2.5 q=33.1 Lsize=   25564KiB time=00:00:19.95 bitrate=10497.4kbits/s speed=0.0422x
x265 [info]: frame I:      3, Avg QP:26.66  kb/s: 90267.84
x265 [info]: frame P:    159, Avg QP:25.88  kb/s: 39593.85
x265 [info]: frame B:   1037, Avg QP:32.70  kb/s: 5776.06
x265 [info]: Weighted P-Frames: Y:22.6% UV:22.6%
x265 [info]: Weighted B-Frames: Y:6.8% UV:4.1%

encoded 1199 frames in 472.65s (2.54 fps), 10472.07 kb/s, Avg QP:31.78

XPSNR average, 1199 frames  y: 39.8871  u: 42.1991  v: 42.3623 (minimum: 39.8871)
VMAF 4k: 94.730385, VMAF 1080p: 90.708962
SSIMULACRA2_rs: Mean: 61.03782816 Median: 62.22680342 Std Dev: 4.47912982 5th Percentile: 53.49027011 95th Percentile: 68.77075281
                </code></pre>
                <p><code>--crf 18</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -c:v libx265 -pix_fmt yuv420p10le -profile:v main10 -x265-params "high-tier=1:ctu=64:tu-intra-depth=4:tu-inter-depth=4:limit-tu=1:rect=1:tskip=1:tskip-fast=1:me=star:subme=5:merange=56:weightb=1:ref=4:max-merge=5:open-gop=0:min-keyint=3:keyint=540:fades=1:bframes=8:b-adapt=2:analyze-src-pics=1:b-intra=1:crf=18:crqpoffs=-3:ipratio=1.2:pbratio=1.5:rdoq-level=2:aq-mode=4:aq-strength=1.1:qg-size=8:rd=5:limit-refs=0:rskip=0:rc-lookahead=108:psy-rd=1.6:deblock=0,-1:limit-sao=1:sao-non-deblock=1:selective-sao=3" -fps_mode passthrough -c:a copy .\Netflix_WindAndNature_10bit_420_crf18.mp4

Metadata:
encoder         : Lavf61.9.104
Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p10le(tv, bt709, progressive), 4096x2160 [SAR 1:1 DAR 256:135], q=2-31, 60 fps, 15360 tbn (default)
Metadata:
      encoder         : Lavc61.31.100 libx265
      DURATION        : 00:00:19.984000000
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
[out#0/mp4 @ 00000251debbc980] video:52111KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.028151%
frame= 1199 fps=2.1 q=28.5 Lsize=   52126KiB time=00:00:19.95 bitrate=21404.3kbits/s speed=0.0345x
x265 [info]: frame I:      3, Avg QP:22.65  kb/s: 142820.32
x265 [info]: frame P:    159, Avg QP:21.83  kb/s: 87918.92
x265 [info]: frame B:   1037, Avg QP:28.39  kb/s: 10804.12
x265 [info]: Weighted P-Frames: Y:22.6% UV:22.6%
x265 [info]: Weighted B-Frames: Y:6.8% UV:4.1%

encoded 1199 frames in 578.40s (2.07 fps), 21360.67 kb/s, Avg QP:27.50

XPSNR average, 1199 frames  y: 40.9048  u: 43.5395  v: 43.4034 (minimum: 40.9048)
VMAF 4k: 96.493359, VMAF 1080p: 93.110238
SSIMULACRA2_rs: Mean: 68.23241143 Median: 68.96018756 Std Dev: 4.54572816 5th Percentile: 61.08936644 95th Percentile: 76.03682341
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/7）x265 v4.1——BigBuckBunny</button>
            <div class="coll-content">
                <p><code>--crf 22</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -c:v libx265 -profile:v main10 -x265-params "high-tier=1:ctu=64:tu-intra-depth=4:tu-inter-depth=4:limit-tu=1:rect=1:tskip=1:tskip-fast=1:me=star:subme=3:merange=48:weightb=1:ref=4:max-merge=5:open-gop=0:min-keyint=3:keyint=216:fades=1:bframes=8:b-adapt=2:analyze-src-pics=1:b-intra=1:crf=22:crqpoffs=-3:ipratio=1.2:pbratio=1.5:rdoq-level=2:aq-mode=4:aq-strength=1:qg-size=8:rd=5:limit-refs=0:rskip=0:rc-lookahead=44:psy-rd=1.6:deblock=0,-1:limit-sao=1:sao-non-deblock=1:selective-sao=3" -fps_mode passthrough -c:a copy .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf22.mp4

Metadata:
    encoder         : Lavf61.9.107
  Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p(tv, progressive), 1920x1080, q=2-31, 24 fps, 12288 tbn (default)
    Metadata:
      encoder         : Lavc61.33.102 libx265
      DURATION        : 00:09:56.459000000
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
  Stream #0:1: Audio: flac (fLaC / 0x43614C66), 48000 Hz, 5.1, s32 (24 bit) (default)
    Metadata:
      DURATION        : 00:09:56.461000000
[out#0/mp4 @ 000002a1ef83ae40] video:188010KiB audio:223380KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.067803%
frame=14315 fps=8.5 q=27.8 Lsize=  411669KiB time=00:09:56.37 bitrate=5654.8kbits/s speed=0.354x
x265 [info]: frame I:    166, Avg QP:22.74  kb/s: 23021.68
x265 [info]: frame P:   3342, Avg QP:22.79  kb/s: 7557.41
x265 [info]: frame B:  10807, Avg QP:30.21  kb/s: 728.68
x265 [info]: Weighted P-Frames: Y:5.4% UV:2.2%
x265 [info]: Weighted B-Frames: Y:3.0% UV:0.9%

encoded 14315 frames in 1686.80s (8.49 fps), 2581.44 kb/s, Avg QP:28.39

XPSNR average, 14315 frames  y: 40.4936  u: 42.5438  v: 43.8810 (minimum: 40.4936)
VMAF 4k: 99.195737, VMAF 1080p: 97.444827
SSIMULACRA2_rs: Mean: 77.79793375 Median: 78.10156956 Std Dev: 4.87145655 5th Percentile: 69.98188935 95th Percentile: 83.80652456
                </code></pre>
                <p><code>--crf 18</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -c:v libx265 -profile:v main10 -x265-params "high-tier=1:ctu=64:tu-intra-depth=4:tu-inter-depth=4:limit-tu=1:rect=1:tskip=1:tskip-fast=1:me=star:subme=3:merange=48:weightb=1:ref=4:max-merge=5:open-gop=0:min-keyint=3:keyint=216:fades=1:bframes=8:b-adapt=2:analyze-src-pics=1:b-intra=1:crf=18:crqpoffs=-3:ipratio=1.2:pbratio=1.5:rdoq-level=2:aq-mode=4:aq-strength=1:qg-size=8:rd=5:limit-refs=0:rskip=0:rc-lookahead=44:psy-rd=1.6:deblock=0,-1:limit-sao=1:sao-non-deblock=1:selective-sao=3" -fps_mode passthrough -c:a copy .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf18.mp4

Metadata:
encoder         : Lavf61.9.107
  Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p(tv, progressive), 1920x1080, q=2-31, 24 fps, 12288 tbn (default)
    Metadata:
      encoder         : Lavc61.33.102 libx265
      DURATION        : 00:09:56.459000000
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
  Stream #0:1: Audio: flac (fLaC / 0x43614C66), 48000 Hz, 5.1, s32 (24 bit) (default)
    Metadata:
      DURATION        : 00:09:56.461000000
[out#0/mp4 @ 000001af7844ae40] video:315671KiB audio:223380KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.051745%
frame=14315 fps=6.7 q=23.8 Lsize=  539330KiB time=00:09:56.37 bitrate=7408.4kbits/s speed=0.278x
x265 [info]: frame I:    166, Avg QP:18.73  kb/s: 33599.27
x265 [info]: frame P:   3342, Avg QP:18.64  kb/s: 12503.49
x265 [info]: frame B:  10807, Avg QP:26.18  kb/s: 1359.15
x265 [info]: Weighted P-Frames: Y:5.4% UV:2.2%
x265 [info]: Weighted B-Frames: Y:3.0% UV:0.9%

encoded 14315 frames in 2144.46s (6.68 fps), 4334.79 kb/s, Avg QP:24.33

VMAF 4k: 99.728842, VMAF 1080p: 98.184211
XPSNR average, 14315 frames  y: 42.1004  u: 44.3900  v: 45.5117 (minimum: 42.1004)
SSIMULACRA2_rs: Mean: 83.24602058 Median: 83.40918464 Std Dev: 3.43829355 5th Percentile: 78.01967156 95th Percentile: 87.57657407
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/7）x265 v4.1——ElephantsDream</button>
            <div class="coll-content">
                <p><code>--crf 22</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -c:v libx265 -profile:v main -x265-params "high-tier=1:ctu=64:tu-intra-depth=4:tu-inter-depth=4:limit-tu=1:rect=1:tskip=1:tskip-fast=1:me=star:subme=3:merange=48:weightb=1:ref=4:max-merge=5:open-gop=0:min-keyint=3:keyint=216:fades=1:bframes=8:b-adapt=2:analyze-src-pics=1:b-intra=1:crf=22:crqpoffs=-3:ipratio=1.2:pbratio=1.5:rdoq-level=2:aq-mode=4:aq-strength=1:qg-size=8:rd=5:limit-refs=0:rskip=0:rc-lookahead=44:psy-rd=1.6:deblock=0,-1:limit-sao=1:sao-non-deblock=1:selective-sao=3" -fps_mode passthrough -c:a copy .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf22.mp4

Metadata:
    encoder         : Lavf61.9.107
  Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p(tv, progressive), 1920x1080, q=2-31, 24 fps, 12288 tbn (default)
    Metadata:
      encoder         : Lavc61.33.102 libx265
      DURATION        : 00:10:53.792000000
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
  Stream #0:1: Audio: flac (fLaC / 0x43614C66), 48000 Hz, 5.1, s32 (24 bit) (default)
    Metadata:
      ENCODER         : Lavc58.84.100 flac
      DURATION        : 00:10:58.080000000
[out#0/mp4 @ 0000023a9d84c880] video:242759KiB audio:240232KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.063693%
frame=15691 fps=7.7 q=31.0 Lsize=  483299KiB time=00:10:53.70 bitrate=6056.5kbits/s speed=0.322x
x265 [info]: frame I:    166, Avg QP:23.38  kb/s: 14373.24
x265 [info]: frame P:   4279, Avg QP:23.62  kb/s: 6880.26
x265 [info]: frame B:  11246, Avg QP:29.96  kb/s: 1412.92
x265 [info]: Weighted P-Frames: Y:6.9% UV:1.9%
x265 [info]: Weighted B-Frames: Y:5.7% UV:1.0%

encoded 15691 frames in 2028.92s (7.73 fps), 3041.00 kb/s, Avg QP:28.16

XPSNR average, 15691 frames  y: 41.7030  u: 46.2944  v: 46.6380 (minimum: 41.7030)
VMAF 4k: 99.034930, VMAF 1080p: 97.568271
SSIMULACRA2_rs: Mean: 78.30652645, Median: 77.64769382, Std Dev: 8.84066902, 5th Percentile: 64.95131977, 95th Percentile: 95.54420489
                </code></pre>
                <p><code>--crf 18</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -c:v libx265 -profile:v main -x265-params "high-tier=1:ctu=64:tu-intra-depth=4:tu-inter-depth=4:limit-tu=1:rect=1:tskip=1:tskip-fast=1:me=star:subme=3:merange=48:weightb=1:ref=4:max-merge=5:open-gop=0:min-keyint=3:keyint=216:fades=1:bframes=8:b-adapt=2:analyze-src-pics=1:b-intra=1:crf=18:crqpoffs=-3:ipratio=1.2:pbratio=1.5:rdoq-level=2:aq-mode=4:aq-strength=1:qg-size=8:rd=5:limit-refs=0:rskip=0:rc-lookahead=44:psy-rd=1.6:deblock=0,-1:limit-sao=1:sao-non-deblock=1:selective-sao=3" -fps_mode passthrough -c:a copy .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf18.mp4

Metadata:
encoder         : Lavf61.9.107
  Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p(tv, progressive), 1920x1080, q=2-31, 24 fps, 12288 tbn (default)
    Metadata:
      encoder         : Lavc61.33.102 libx265
      DURATION        : 00:10:53.792000000
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
  Stream #0:1: Audio: flac (fLaC / 0x43614C66), 48000 Hz, 5.1, s32 (24 bit) (default)
    Metadata:
      ENCODER         : Lavc58.84.100 flac
      DURATION        : 00:10:58.080000000
[out#0/mp4 @ 00000192244e6100] video:408715KiB audio:240232KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.047404%
frame=15691 fps=6.1 q=27.0 Lsize=  649255KiB time=00:10:53.70 bitrate=8136.2kbits/s speed=0.254x
x265 [info]: frame I:    166, Avg QP:19.38  kb/s: 21604.46
x265 [info]: frame P:   4279, Avg QP:19.55  kb/s: 11078.26
x265 [info]: frame B:  11246, Avg QP:25.87  kb/s: 2610.21
x265 [info]: Weighted P-Frames: Y:6.9% UV:1.9%
x265 [info]: Weighted B-Frames: Y:5.7% UV:1.0%

encoded 15691 frames in 2569.35s (6.11 fps), 5120.43 kb/s, Avg QP:24.08

XPSNR average, 15691 frames  y: 43.6721  u: 47.7466  v: 48.1249 (minimum: 43.6721)
VMAF 4k: 99.658051, VMAF 1080p: 98.434386
SSIMULACRA2_rs: Mean: 84.12837569, Median: 83.64339310, Std Dev: 6.22898924, 5th Percentile: 74.46127664, 95th Percentile: 96.50134420
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（6/7）x265 v4.1——MAIDRAGON-S</button>
            <div class="coll-content">
                <p><code>--crf 22</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\TestFootage\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -c:v libx265 -pix_fmt yuv420p -profile:v main -x265-params "high-tier=1:tu-intra-depth=4:tu-inter-depth=4:max-tu-size=16:tskip=1:tskip-fast=1:me=umh:subme=3:merange=48:weightb=1:max-merge=5:early-skip=1:ref=3:open-gop=0:min-keyint=5:keyint=288:fades=1:bframes=16:b-adapt=2:bframe-bias=20:b-intra=1:crf=22:crqpoffs=-4:cbqpoffs=-2:ipratio=1.6:pbratio=1.3:cu-lossless=1:psy-rdoq=2.3:rdoq-level=2:hevc-aq=1:aq-strength=0.9:qg-size=8:rd=3:limit-modes=1:limit-refs=1:rskip=1:rc-lookahead=60:rect=1:amp=1:psy-rd=1.5:splitrd-skip=1:rdpenalty=2:deblock=-1,0:limit-sao=1:sao-non-deblock=1" -fps_mode passthrough -an .\MAIDRAGON-S_Vol.3_1920x1080_23.976fps_8bit_420_crf22.mp4

Metadata:
encoder         : Lavf61.9.104
Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p(tv, progressive), 1920x1080 [SAR 1:1 DAR 16:9], q=2-31, 23.98 fps, 24k tbn
Metadata:
      encoder         : Lavc61.31.100 libx265
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
[out#0/mp4 @ 00000176866bf8c0] video:337732KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.108592%
frame=34080 fps= 24 q=26.0 Lsize=  338099KiB time=00:23:41.33 bitrate=1948.7kbits/s speed=0.99x
x265 [info]: frame I:    581, Avg QP:22.14  kb/s: 20863.28
x265 [info]: frame P:   7169, Avg QP:25.13  kb/s: 5719.51
x265 [info]: frame B:  26330, Avg QP:30.79  kb/s: 500.71
x265 [info]: Weighted P-Frames: Y:4.1% UV:2.6%
x265 [info]: Weighted B-Frames: Y:3.2% UV:1.6%

encoded 34080 frames in 1436.25s (23.73 fps), 1945.67 kb/s, Avg QP:29.45

XPSNR average, 34080 frames  y: 40.8455  u: 42.8648  v: 43.3141 (minimum: 40.8455)
VMAF 4k: 98.989807, VMAF 1080p: 96.185890
SSIMULACRA2_rs: Mean: 73.91282871 Median: 77.92521321 Std Dev: 12.82405548 5th Percentile: 46.40877591 95th Percentile: 85.66813206
                </code></pre>
                <p><code>--crf 18</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\TestFootage\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -c:v libx265 -pix_fmt yuv420p -profile:v main -x265-params "high-tier=1:tu-intra-depth=4:tu-inter-depth=4:max-tu-size=16:tskip=1:tskip-fast=1:me=umh:subme=3:merange=48:weightb=1:max-merge=5:early-skip=1:ref=3:open-gop=0:min-keyint=5:keyint=288:fades=1:bframes=16:b-adapt=2:bframe-bias=20:b-intra=1:crf=18:crqpoffs=-4:cbqpoffs=-2:ipratio=1.6:pbratio=1.3:cu-lossless=1:psy-rdoq=2.3:rdoq-level=2:hevc-aq=1:aq-strength=0.9:qg-size=8:rd=3:limit-modes=1:limit-refs=1:rskip=1:rc-lookahead=60:rect=1:amp=1:psy-rd=1.5:splitrd-skip=1:rdpenalty=2:deblock=-1,0:limit-sao=1:sao-non-deblock=1" -fps_mode passthrough -an .\MAIDRAGON-S_Vol.3_1920x1080_23.976fps_8bit_420_crf18.mp4

Metadata:
encoder         : Lavf61.9.104
Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p(tv, progressive), 1920x1080 [SAR 1:1 DAR 16:9], q=2-31, 23.98 fps, 24k tbn
Metadata:
      encoder         : Lavc61.31.100 libx265
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
[out#0/mp4 @ 0000026d75b5f8c0] video:548860KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.067457%
frame=34080 fps= 21 q=22.0 Lsize=  549230KiB time=00:23:41.33 bitrate=3165.5kbits/s speed=0.878x
x265 [info]: frame I:    581, Avg QP:18.15  kb/s: 31412.56
x265 [info]: frame P:   7169, Avg QP:20.72  kb/s: 9317.84
x265 [info]: frame B:  26330, Avg QP:26.75  kb/s: 863.12
x265 [info]: Weighted P-Frames: Y:4.1% UV:2.6%
x265 [info]: Weighted B-Frames: Y:3.2% UV:1.6%

encoded 34080 frames in 1618.34s (21.06 fps), 3162.45 kb/s, Avg QP:25.34

XPSNR average, 34080 frames  y: 42.5171  u: 44.2124  v: 44.5470 (minimum: 42.5171)
VMAF 4k: 99.592478, VMAF 1080p: 97.058023
SSIMULACRA2_rs: Mean: 80.15751958 Median: 82.75859474 Std Dev: 8.38815893 5th Percentile: 62.41689237 95th Percentile: 88.08307654
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（7/7）x265 v4.1——HYOUKA</button>
            <div class="coll-content">
                <p><code>--crf 22</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -c:v libx265 -pix_fmt yuv420p -profile:v main -x265-params "high-tier=1:tu-intra-depth=4:tu-inter-depth=4:max-tu-size=16:tskip=1:tskip-fast=1:me=umh:subme=3:merange=48:weightb=1:max-merge=5:early-skip=1:ref=3:open-gop=0:min-keyint=5:keyint=288:fades=1:bframes=16:b-adapt=2:bframe-bias=20:b-intra=1:crf=22:crqpoffs=-4:cbqpoffs=-2:ipratio=1.6:pbratio=1.3:cu-lossless=1:psy-rdoq=2.3:rdoq-level=2:hevc-aq=1:aq-strength=0.9:qg-size=8:rd=3:limit-modes=1:limit-refs=1:rskip=1:rc-lookahead=60:rect=1:amp=1:psy-rd=1.5:splitrd-skip=1:rdpenalty=2:deblock=-1,0:limit-sao=1:sao-non-deblock=1" -fps_mode passthrough -an .\HYOUKA_Vol.4_1920x1080_23.976fps_8bit_420_crf22.mp4

Metadata:
encoder         : Lavf61.9.104
Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p(tv, progressive), 1920x1080 [SAR 1:1 DAR 16:9], q=2-31, 23.98 fps, 24k tbn
Metadata:
      encoder         : Lavc61.31.100 libx265
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
[out#0/mp4 @ 000001c440b205c0] video:156007KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.233448%
frame=36996 fps= 26 q=23.0 Lsize=  156372KiB time=00:25:42.95 bitrate= 830.2kbits/s speed= 1.1x
x265 [info]: frame I:    529, Avg QP:22.55  kb/s: 11556.74
x265 [info]: frame P:   5880, Avg QP:25.49  kb/s: 2907.35
x265 [info]: frame B:  30587, Avg QP:30.09  kb/s: 242.08
x265 [info]: Weighted P-Frames: Y:2.8% UV:1.0%
x265 [info]: Weighted B-Frames: Y:2.7% UV:0.4%

encoded 36996 frames in 1408.71s (26.26 fps), 827.47 kb/s, Avg QP:29.25

XPSNR average, 36996 frames  y: 39.3288  u: 42.4070  v: 42.9840 (minimum: 39.3288)
VMAF 4k: 98.861521, VMAF 1080p: 95.710301
SSIMULACRA2_rs: Mean: 74.36000528 Median: 75.52608593 Std Dev: 8.47076723 5th Percentile: 60.49981158 95th Percentile: 83.57375015
                </code></pre>
                <p><code>--crf 18</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -y -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -c:v libx265 -pix_fmt yuv420p -profile:v main -x265-params "high-tier=1:tu-intra-depth=4:tu-inter-depth=4:max-tu-size=16:tskip=1:tskip-fast=1:me=umh:subme=3:merange=48:weightb=1:max-merge=5:early-skip=1:ref=3:open-gop=0:min-keyint=5:keyint=288:fades=1:bframes=16:b-adapt=2:bframe-bias=20:b-intra=1:crf=18:crqpoffs=-4:cbqpoffs=-2:ipratio=1.6:pbratio=1.3:cu-lossless=1:psy-rdoq=2.3:rdoq-level=2:hevc-aq=1:aq-strength=0.9:qg-size=8:rd=3:limit-modes=1:limit-refs=1:rskip=1:rc-lookahead=60:rect=1:amp=1:psy-rd=1.5:splitrd-skip=1:rdpenalty=2:deblock=-1,0:limit-sao=1:sao-non-deblock=1" -fps_mode passthrough -an .\HYOUKA_Vol.4_1920x1080_23.976fps_8bit_420_crf18.mp4

Metadata:
encoder         : Lavf61.9.104
Stream #0:0: Video: hevc (hev1 / 0x31766568), yuv420p(tv, progressive), 1920x1080 [SAR 1:1 DAR 16:9], q=2-31, 23.98 fps, 24k tbn
Metadata:
      encoder         : Lavc61.31.100 libx265
    Side data:
      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A
[out#0/mp4 @ 000002bc553d05c0] video:260392KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:2KiB muxing overhead: 0.140495%
frame=36996 fps= 25 q=19.0 Lsize=  260757KiB time=00:25:42.95 bitrate=1384.4kbits/s speed=1.02x
x265 [info]: frame I:    529, Avg QP:18.62  kb/s: 17690.74
x265 [info]: frame P:   5880, Avg QP:21.03  kb/s: 5054.60
x265 [info]: frame B:  30587, Avg QP:26.06  kb/s: 393.50
x265 [info]: Weighted P-Frames: Y:2.8% UV:1.0%
x265 [info]: Weighted B-Frames: Y:2.7% UV:0.4%

encoded 36996 frames in 1505.87s (24.57 fps), 1381.65 kb/s, Avg QP:25.15

XPSNR average, 36996 frames  y: 40.4798  u: 43.4753  v: 43.8205 (minimum: 40.4798)
VMAF 4k: 99.462855, VMAF 1080p: 96.529797
SSIMULACRA2_rs: Mean: 79.68937613 Median: 80.29604784 Std Dev: 5.62411048 5th Percentile: 71.18435582 95th Percentile: 86.68939060
                </code></pre>
            </div>

            <h3>测试——SVT-AV1 基准测试</h3>
            <p>在尽可能贴近全部默认的用法上尝试基本功能。所有项目必须一直使用 CRF 30（中）、35（中高）两个强度、较长的 12 秒关键帧间隔、以及对应 x265 slow/veryslow 预设的 Preset 3，从而使得各种待测试的功能有一定的发力空间，并对应 x265 的 CRF 18、22。在实际使用中，这些值可以根据视频内容的复杂度略微或大幅降低，以满足更苛刻的画质、解码性能等需求。</p>
            <ol>
                <li>CRF 强度 30 与 35 的影响（画质略好于默认、默认）</li>
                <li>启用量化矩阵、以及启用全部矩阵还是默认的部分矩阵（默认关）的适用性</li>
                <li>非默认 <code>--tune</code> 参数值（默认为 PSNR）的适用性</li>
            </ol>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/22）SVT-AV1 v3.0——SolLevante</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 -b .\SolLevante_yuv420p10le_bt709_CRF35_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                495945952              15048.56 kbps

Channel 1
Average Speed:          4.334 fps
Total Encoding Time:    1456698 ms
Total Execution Time:   1457806 ms
Average Latency:        82314 ms
Max Latency:            176557 ms

XPSNR average, 6314 frames  y: 37.4796  u: 41.3010  v: 42.1299 (minimum: 37.4796)
VMAF 4k: 98.234294, VMAF 1080p: 96.876956
SSIMULACRA2_rs: Mean: 65.97162016 Median: 59.94357483 Std Dev: 23.20466288 5th Percentile: 32.53194259 95th Percentile: 100.00000000
                </code></pre>
                <p><code>--preset 3 --crf 30</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 -b .\SolLevante_yuv420p10le_bt709_CRF30_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                696100941              21280.89 kbps

Channel 1
Average Speed:          4.336 fps
Total Encoding Time:    1456120 ms
Total Execution Time:   1457182 ms
Average Latency:        82424 ms
Max Latency:            183572 ms

XPSNR average, 6314 frames  y: 37.8511  u: 41.6377  v: 42.6135 (minimum: 37.8511)
VMAF 4k: 98.615379, VMAF 1080p: 97.452872
SSIMULACRA2_rs: Mean: 72.01245585 Median: 66.82872302 Std Dev: 18.74429742 5th Percentile: 45.26125476 95th Percentile: 99.29705787
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/22）SVT-AV1 v3.0——SolLevante QM</button>
            <div class="coll-content">
                <p>启用量化矩阵，增加编解码难度：<code>--preset 3 --crf 35 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 -b .\SolLevante_yuv420p10le_bt709_CRF35_preset3_qm.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                485999453              15081.03 kbps

Channel 1
Average Speed:          4.377 fps
Total Encoding Time:    1441289 ms
Total Execution Time:   1442440 ms
Average Latency:        81542 ms
Max Latency:            170543 ms

XPSNR average, 6314 frames  y: 37.4825  u: 41.2973  v: 42.1271 (minimum: 37.4825)
VMAF 4k: 98.245816, VMAF 1080p: 96.897842
SSIMULACRA2_rs: Mean: 66.03889685 Median: 60.02430719 Std Dev: 23.13374066 5th Percentile: 32.57622116 95th Percentile: 98.68322379
                </code></pre>
                <p>启用全部量化矩阵，进一步增加编解码难度：<code>--preset 3 --crf 35 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 --qm-min 0 -b .\SolLevante_yuv420p10le_bt709_CRF35_preset3_qmMin0.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                485999453              14778.57 kbps

Channel 1
Average Speed:          4.379 fps
Total Encoding Time:    1441948 ms
Total Execution Time:   1443100 ms
Average Latency:        81579 ms
Max Latency:            170621 ms

XPSNR average, 6314 frames  y: 37.4555  u: 41.2608  v: 42.0718 (minimum: 37.4555)
VMAF 4k: 98.231956, VMAF 1080p: 96.875528
SSIMULACRA2_rs: Mean: 65.73858934 Median: 59.78007333 Std Dev: 23.31712901 5th Percentile: 32.03486931 95th Percentile: 98.68322379
                </code></pre>
                <p>启用量化矩阵，增加编解码难度：<code>--preset 3 --crf 30 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 -b .\SolLevante_yuv420p10le_bt709_CRF30_preset3_qm.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                696100941              21167.47 kbps

Channel 1
Average Speed:          4.333 fps
Total Encoding Time:    1457254 ms
Total Execution Time:   1458394 ms
Average Latency:        82586 ms
Max Latency:            182655 ms

XPSNR average, 6314 frames  y: 37.8514  u: 41.6337  v: 42.6076 (minimum: 37.8514)
VMAF 4k: 98.622843, VMAF 1080p: 97.462467
SSIMULACRA2_rs: Mean: 72.03421424 Median: 66.91038305 Std Dev: 18.70887673 5th Percentile: 45.24524990 95th Percentile: 100.00000000
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 -b .\SolLevante_yuv420p10le_bt709_CRF30_preset3_qmMin0.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                679827926              20672.63 kbps

Channel 1
Average Speed:          4.409 fps
Total Encoding Time:    1431988 ms
Total Execution Time:   1433144 ms
Average Latency:        81135 ms
Max Latency:            175083 ms

XPSNR average, 6314 frames  y: 37.8158  u: 41.5928  v: 42.5431 (minimum: 37.8158)
VMAF 4k: 98.601947, VMAF 1080p: 97.423990
SSIMULACRA2_rs: Mean: 71.61725400 Median: 66.48754073 Std Dev: 18.99833478 5th Percentile: 44.37356138 95th Percentile: 100.00000000
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/22）SVT-AV1 v3.0——SolLevante Tune</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 2 -b .\SolLevante_yuv420p10le_bt709_crf35_preset3_tuneSSIM.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                539763652              16413.47 kbps

Channel 1
Average Speed:          4.111 fps
Total Encoding Time:    1536046 ms
Total Execution Time:   1537104 ms
Average Latency:        76876 ms
Max Latency:            176111 ms

XPSNR average, 6314 frames  y: 31.4607  u: 41.8239  v: 39.4703 (minimum: 31.4607)
VMAF 4k: 98.078654, VMAF 1080p: 96.635140
SSIMULACRA2_rs: Mean: 65.28679182 Median: 59.20220066 Std Dev: 23.29595566 5th Percentile: 31.85868858 95th Percentile: 100.00000000
                </code></pre>
                <p><code>--preset 3 --crf 35 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 0 -b .\SolLevante_yuv420p10le_bt709_crf35_preset3_tuneVQ.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                504213067              15332.42 kbps

Channel 1
Average Speed:          4.399 fps
Total Encoding Time:    1435448 ms
Total Execution Time:   1436490 ms
Average Latency:        81034 ms
Max Latency:            176268 ms

XPSNR average, 6314 frames  y: 37.4686  u: 41.3226  v: 42.1316 (minimum: 37.4686)
VMAF 4k: 98.235196, VMAF 1080p: 96.859568
SSIMULACRA2_rs: Mean: 66.23793043 Median: 60.04863790 Std Dev: 23.02009876 5th Percentile: 32.76133609 95th Percentile: 98.81171438
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 -b .\SolLevante_yuv420p10le_bt709_crf35_preset3_tuneSSIM.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                657975207              20008.12 kbps

Channel 1
Average Speed:          4.383 fps
Total Encoding Time:    1440538 ms
Total Execution Time:   1441596 ms
Average Latency:        81376 ms

XPSNR average, 6314 frames  y: 37.3834  u: 41.2295  v: 42.0278 (minimum: 37.3834)
VMAF 4k: 98.078654, VMAF 1080p: 96.635140
SSIMULACRA2_rs: Mean: 71.49626144 Median: 66.18785330 Std Dev: 18.79315072 5th Percentile: 44.68539708 95th Percentile: 100.00000000
                </code></pre>
                <p>VQ：<code>--preset 3 --crf 30 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                712471110              21665.26 kbps

Channel 1
Average Speed:          4.432 fps
Total Encoding Time:    1424758 ms
Total Execution Time:   1425870 ms
Average Latency:        80551 ms
Max Latency:            177584 ms

XPSNR average, 6314 frames  y: 37.8410  u: 41.6606  v: 42.6222 (minimum: 37.8410)
VMAF 4k: 98.632120, VMAF 1080p: 97.439903
SSIMULACRA2_rs: Mean: 72.33149666 Median: 67.03434155 Std Dev: 18.54564401 5th Percentile: 45.65975990 95th Percentile: 100.00000000
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/22）SVT-AV1 v3.0——WindAndNature</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 -b .\WindAndNature_yuv420p10le_bt709_crf35_preset3.ivf

Metadata:
    encoder         : Lavf61.9.107
  Stream #0:0: Video: av1 (av01 / 0x31307661), yuv420p10le(tv, bt709, progressive), 4096x2160 [SAR 1:1 DAR 256:135], q=2-31, 60 fps, 15360 tbn (default)
    Metadata:
      encoder         : Lavc61.33.102 libsvtav1
      DURATION        : 00:00:19.984000000
[out#0/mp4 @ 00000206e666e5c0] video:16241KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.028303%
frame= 1199 fps=6.0 q=35.0 Lsize=   16245KiB time=00:00:19.96 bitrate=6665.2kbits/s speed= 0.1x

XPSNR average, 1199 frames  y: 37.3362  u: 43.4853  v: 43.1529 (minimum: 37.3362)
VMAF 4k: 96.113360, VMAF 1080p: 92.519165
SSIMULACRA2_rs: Mean: 65.63168941 Median: 67.48283309 Std Dev: 4.11945531 5th Percentile: 58.42780742 95th Percentile: 70.41150630
                </code></pre>
                <p><code>--preset 3 --crf 30</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -c:v libsvtav1 -preset 3 -crf 30 -svtav1-params "keyint=12s" -c:a copy .\WindAndNature_yuv420p10le_bt709_crf30_preset3.mp4

Metadata:
    encoder         : Lavf61.9.107
  Stream #0:0: Video: av1 (av01 / 0x31307661), yuv420p10le(tv, bt709, progressive), 4096x2160 [SAR 1:1 DAR 256:135], q=2-31, 60 fps, 15360 tbn (default)
    Metadata:
      encoder         : Lavc61.33.102 libsvtav1
      DURATION        : 00:00:19.984000000
[out#0/mp4 @ 00000122177de5c0] video:22568KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.020922%
frame= 1199 fps=5.3 q=30.0 Lsize=   22572KiB time=00:00:19.96 bitrate=9261.1kbits/s speed=0.0886x

XPSNR average, 1199 frames  y: 37.5399  u: 43.7761  v: 43.4111 (minimum: 37.5399)
VMAF 4k: 96.840150, VMAF 1080p: 93.501026
SSIMULACRA2_rs: Mean: 68.92250911Median: 70.75917283 Std Dev: 3.78970924 5th Percentile: 62.09646559 95th Percentile: 73.04270951
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（5/22）SVT-AV1 v3.0——WindAndNature QM</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --enable-qm</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 35 --enable-qm 1 --preset 3 --progress 2 -b .\WindAndNature_yuv420p10le_bt709_crf35_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        1199            60.00 fps                 16582480              6638.52 kbps

Channel 1
Average Speed:          5.606 fps
Total Encoding Time:    213860 ms
Total Execution Time:   214990 ms
Average Latency:        52045 ms
Max Latency:            74255 ms

XPSNR average, 1199 frames  y: 36.7024  u: 42.7301  v: 40.5724 (minimum: 36.7024)
VMAF 4k: 97.722582, VMAF 1080p: 94.621628
SSIMULACRA2_rs: Mean: 65.62441101 Median: 67.46571858 Std Dev: 4.12340782 5th Percentile: 58.31453649 95th Percentile: 70.38503641
                </code></pre>
                <p><code>--preset 3 --crf 35 --enable-qm --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 35 --enable-qm 1 --qm-min 0 --preset 3 --progress 2 -b .\WindAndNature_yuv420p10le_bt709_crf35_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        1199            60.00 fps                 16469762              6593.40 kbps

Channel 1
Average Speed:          5.555 fps
Total Encoding Time:    215838 ms
Total Execution Time:   216986 ms
Average Latency:        52440 ms
Max Latency:            74129 ms

XPSNR average, 1199 frames  y: 36.6962  u: 42.6603  v: 40.5092 (minimum: 36.6962)
VMAF 4k: 97.608784, VMAF 1080p: 94.481252
SSIMULACRA2_rs: Mean: 65.50754114 Median: 67.41629557 Std Dev: 4.14355522 5th Percentile: 58.20332960 95th Percentile: 70.29080931
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --enable-qm 1 --preset 3 --progress 2 -b .\WindAndNature_yuv420p10le_bt709_crf35_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        1199            60.00 fps                 22909500              9171.44 kbps

Channel 1
Average Speed:          5.076 fps
Total Encoding Time:    236192 ms
Total Execution Time:   237336 ms
Average Latency:        57271 ms
Max Latency:            81815 ms

XPSNR average, 1199 frames  y: 36.9286  u: 42.9716  v: 40.7229 (minimum: 36.9286)
VMAF 4k: 98.307189, VMAF 1080p: 95.420387
SSIMULACRA2_rs: Mean: 68.91905952 Median: 70.73052286 Std Dev: 3.79137116 5th Percentile: 62.10079590 95th Percentile: 73.08080131
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --enable-qm 1 --qm-min 0 --preset 3 --progress 2 -b .\WindAndNature_yuv420p10le_bt709_crf35_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        1199            60.00 fps                 22909500              9171.44 kbps

Channel 1
Average Speed:          5.046 fps
Total Encoding Time:    237610 ms
Total Execution Time:   238846 ms
Average Latency:        57575 ms
Max Latency:            81414 ms

XPSNR average, 1199 frames  y: 36.9126  u: 42.9124  v: 40.6718 (minimum: 36.9126)
VMAF 4k: 98.244725, VMAF 1080p: 95.348606
SSIMULACRA2_rs: Mean: 68.80260246 Median: 70.67784608 Std Dev: 3.83469802 5th Percentile: 61.91905432 95th Percentile: 73.02160275
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（6/22）SVT-AV1 v3.0——WindAndNature Tune</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -i .\WindAndNature_yuv420p10le_bt709_crf35_preset3_tuneVQ.ivf -lavfi libvmaf="model=version=vmaf_v0.6.1\\:name=vmaf_1080p|version=vmaf_4k_v0.6.1\\:name=vmaf_4k" -f null -

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        1199            60.00 fps                 17795549              7124.16 kbps

Channel 1
Average Speed:          5.623 fps
Total Encoding Time:    213218 ms
Total Execution Time:   214358 ms
Average Latency:        51687 ms
Max Latency:            73526 ms

XPSNR average, 1199 frames  y: 36.7241  u: 42.7446  v: 40.6557 (minimum: 36.7241)
VMAF 4k: 97.704765, VMAF 1080p: 94.601392
SSIMULACRA2_rs: Mean: 66.04194395 Median: 67.69334252 Std Dev: 4.21918608 5th Percentile: 58.67352770 95th Percentile: 70.90097115
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p - | .\SvtAv1EncApp -i - --keyint 12s --crf 30 --enable-qm 1 --qm-min 0 --preset 3 --progress 2 --tune 0 -b .\WindAndNature_yuv420p10le_bt709_crf30_preset3_tuneVQ.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        1199            60.00 fps                 25134483              10062.18 kbps

Channel 1
Average Speed:          5.125 fps
Total Encoding Time:    233934 ms
Total Execution Time:   235084 ms
Average Latency:        56692 ms
Max Latency:            80027 ms

XPSNR average, 1199 frames  y: 36.9218  u: 42.9713  v: 40.8042 (minimum: 36.9218)
VMAF 4k: 98.422313, VMAF 1080p: 95.579552
SSIMULACRA2_rs: Mean: 69.04057766 Median: 70.76173066 Std Dev: 4.03527187 5th Percentile: 61.63058503 95th Percentile: 73.41046502
                </code></pre>
                <p><code>--preset 3 --crf 35 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p - | .\SvtAv1EncApp -i - --keyint 12s --crf 30 --enable-qm 1 --qm-min 0 --preset 3 --progress 2 --tune 2 -b .\WindAndNature_yuv420p10le_bt709_crf30_preset3_tuneSSIM.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        1199            60.00 fps                 16432334              6578.42 kbps

Channel 1
Average Speed:          5.573 fps
Total Encoding Time:    215132 ms
Total Execution Time:   216324 ms
Average Latency:        52295 ms
Max Latency:            74032 ms

XPSNR average, 1199 frames  y: 36.6850  u: 42.6922  v: 40.5141 (minimum: 36.6850)
VMAF 4k: 97.549183, VMAF 1080p: 94.408432
SSIMULACRA2_rs: Mean: 65.70502123 Median: 67.36990713 Std Dev: 3.81579500 5th Percentile: 58.95460314 95th Percentile: 70.03019595
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p - | .\SvtAv1EncApp -i - --keyint 12s --crf 30 --enable-qm 1 --qm-min 0 --preset 3 --progress 2 --tune 2 -b .\WindAndNature_yuv420p10le_bt709_crf30_preset3_tuneSSIM.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        1199            60.00 fps                 22835760              9141.92 kbps

Channel 1
Average Speed:          5.174 fps
Total Encoding Time:    231714 ms
Total Execution Time:   232860 ms
Average Latency:        55913 ms
Max Latency:            79668 ms

XPSNR average, 1199 frames  y: 36.9026  u: 42.9481  v: 40.6723 (minimum: 36.9026)
VMAF 4k: 98.295810, VMAF 1080p: 95.415772
SSIMULACRA2_rs: Mean: 68.93928567 Median: 70.61041299 Std Dev: 3.54621458 5th Percentile: 62.56205008 95th Percentile: 72.72085333
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（7/22）SVT-AV1 v3.0——Netflix Boat</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --progress 2 -b .\Netflix_Boat_yuv420p10le_bt709_crf35_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 13942940              21798.79 kbps

Channel 1
Average Speed:          3.515 fps
Total Encoding Time:    85344 ms
Total Execution Time:   86698 ms
Average Latency:        46597 ms
Max Latency:            75421 ms

XPSNR average, 300 frames  y: 37.4548  u: 41.1061  v: 42.9362 (minimum: 37.4548)
VMAF 4k: 96.761755, VMAF 1080p: 97.272500
SSIMULACRA2_rs: Mean: 65.44279924 Median: 65.24821957 Std Dev: 1.86269647 5th Percentile: 62.76749146 95th Percentile: 68.60554732
                </code></pre>
                <p><code>--preset 3 --crf 30</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --progress 2 --tune 0 -b .\Netflix_Boat_yuv420p10le_bt709_crf30_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 18819560              30111.30 kbps

Channel 1
Average Speed:          3.398 fps
Total Encoding Time:    88290 ms
Total Execution Time:   89448 ms
Average Latency:        48355 ms
Max Latency:            78434 ms

XPSNR average, 300 frames  y: 37.7324  u: 41.3649  v: 43.2103 (minimum: 37.7324)
VMAF 4k: 98.453038, VMAF 1080p: 98.437675
SSIMULACRA2_rs: Mean: 70.46943646 Median: 70.32725873 Std Dev: 1.44849029 5th Percentile: 68.33790856 95th Percentile: 73.00295684
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（8/22）SVT-AV1 v3.0——Boat QM</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 35 --enable-qm 1 --preset 3 --progress 2 -b .\Netflix_Boat_yuv420p10le_bt709_crf35_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 13669704              21871.53 kbps

Channel 1
Average Speed:          3.512 fps
Total Encoding Time:    85422 ms
Total Execution Time:   86632 ms
Average Latency:        47233 ms
Max Latency:            75556 ms

XPSNR average, 300 frames  y: 37.4558  u: 41.0821  v: 42.9071 (minimum: 37.4558)
VMAF 4k: 96.808976, VMAF 1080p: 97.305344
SSIMULACRA2_rs: Mean: 65.51104289 Median: 65.27929578 Std Dev: 1.86209612 5th Percentile: 62.79561741 95th Percentile: 68.67732264
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --enable-qm 1 --preset 3 --progress 2 -b .\Netflix_Boat_yuv420p10le_bt709_crf30_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 18841936              30147.10 kbps

Channel 1
Average Speed:          3.368 fps
Total Encoding Time:    89064 ms
Total Execution Time:   90260 ms
Average Latency:        49036 ms
Max Latency:            79536 ms

XPSNR average, 300 frames  y: 37.7331  u: 41.3403  v: 43.1727 (minimum: 37.7331)
VMAF 4k: 98.490672, VMAF 1080p: 98.464479
SSIMULACRA2_rs: Mean: 70.48941736 Median: 70.34330051 Std Dev: 1.45603910 5th Percentile: 68.32600577 95th Percentile: 73.00726519
                </code></pre>
                <p><code>--preset 3 --crf 35 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 35 --enable-qm 1 --qm-min 0 --preset 3 --progress 2 -b .\Netflix_Boat_yuv420p10le_bt709_crf35_qmMin0_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 13422485              21475.98 kbps

Channel 1
Average Speed:          3.473 fps
Total Encoding Time:    86388 ms
Total Execution Time:   87572 ms
Average Latency:        47676 ms
Max Latency:            76437 ms

XPSNR average, 300 frames  y: 37.4014  u: 41.0142  v: 42.8161 (minimum: 37.4014)
VMAF 4k: 96.717327, VMAF 1080p: 97.243354
SSIMULACRA2_rs: Mean: 65.26716472 Median: 65.11628273 Std Dev: 1.81914745 5th Percentile: 62.62584510 95th Percentile: 68.37429589
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --enable-qm 1 --qm-min 0 --preset 3 --progress 2 -b .\Netflix_Boat_yuv420p10le_bt709_crf30_qmMin0_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 18436630              29498.61 kbps

Channel 1
Average Speed:          3.293 fps
Total Encoding Time:    91114 ms
Total Execution Time:   92276 ms
Average Latency:        50162 ms
Max Latency:            81030 ms

XPSNR average, 300 frames  y: 37.6784  u: 41.2721  v: 43.0866 (minimum: 37.6784)
VMAF 4k: 98.421012, VMAF 1080p: 98.412364
SSIMULACRA2_rs: Mean: 70.20741785 Median: 70.07957787 Std Dev: 1.37105614 5th Percentile: 68.14975116 95th Percentile: 72.58938147
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（9/22）SVT-AV1 v3.0——Boat Tune</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --progress 2 --tune 0 -b .\Netflix_Boat_yuv420p10le_bt709_crf35_tuneVQ_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 13942940              22308.70 kbps

Channel 1
Average Speed:          3.538 fps
Total Encoding Time:    84788 ms
Total Execution Time:   85964 ms
Average Latency:        46044 ms
Max Latency:            74289 ms

XPSNR average, 300 frames  y: 37.4666  u: 41.1177  v: 42.9250 (minimum: 37.4666)
VMAF 4k: 97.405106, VMAF 1080p: 97.781267
SSIMULACRA2_rs: Mean: 65.62472343 Median: 65.33376302 Std Dev: 2.05862478 5th Percentile: 62.92247971 95th Percentile: 68.71991106
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --progress 2 --tune 0 -b .\Netflix_Boat_yuv420p10le_bt709_crf35_tuneVQ_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 19558058              31292.89 kbps

Channel 1
Average Speed:          3.372 fps
Total Encoding Time:    88976 ms
Total Execution Time:   90144 ms
Average Latency:        48427 ms
Max Latency:            78907 ms

XPSNR average, 300 frames  y: 37.7378  u: 41.3707  v: 43.2131 (minimum: 37.7378)
VMAF 4k: 98.946131, VMAF 1080p: 98.855602
SSIMULACRA2_rs: Mean: 70.60364934 Median: 70.44573796 Std Dev: 1.64924424 5th Percentile: 68.31306315 95th Percentile: 73.43305347
                </code></pre>
                <p><code>--preset 3 --crf 35 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --progress 2 --tune 2 -b .\Netflix_Boat_yuv420p10le_bt709_crf35_tuneSSIM_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 13237107              21179.37 kbps

Channel 1
Average Speed:          3.449 fps
Total Encoding Time:    86972 ms
Total Execution Time:   88174 ms
Average Latency:        47998 ms
Max Latency:            77237 ms

XPSNR average, 300 frames  y: 37.4057  u: 41.0354  v: 42.8108 (minimum: 37.4057)
VMAF 4k: 96.396343, VMAF 1080p: 97.006433
SSIMULACRA2_rs: Mean: 64.66386301 Median: 64.46980413 Std Dev: 1.91379239 5th Percentile: 61.83743679 95th Percentile: 67.85317053
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --progress 2 --tune 2 -b .\Netflix_Boat_yuv420p10le_bt709_crf30_tuneSSIM_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
         300            60.00 fps                 18408379              29453.41 kbps

Channel 1
Average Speed:          3.360 fps
Total Encoding Time:    89276 ms
Total Execution Time:   90462 ms
Average Latency:        48900 ms
Max Latency:            79541 ms

XPSNR average, 300 frames  y: 37.7025  u: 41.2961  v: 43.1057 (minimum: 37.7025)
VMAF 4k: 98.218322, VMAF 1080p: 98.256601
SSIMULACRA2_rs: Mean: 69.94324986 Median: 69.84754035 Std Dev: 1.42894718 5th Percentile: 67.71075445 95th Percentile: 72.35572415
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（10/22）SVT-AV1 v3.0——BigBuckBunny</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | .\SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf35_preset3.ivf

Encoding frame 14315 1346.27 kbps 32.47 fps
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                100374592              1346.27 kbps

Channel 1
Average Speed:          32.473 fps
Total Encoding Time:    440834 ms
Total Execution Time:   441172 ms
Average Latency:        10543 ms
Max Latency:            20496 ms

XPSNR average, 14315 frames  y: 40.9029  u: 43.3569  v: 44.0441 (minimum: 40.9029)
VMAF 4K: 99.008969, VMAF 1080p: 97.128712
SSIMULACRA2_rs: Mean: 75.32415905 Median: 75.39024480 Std Dev: 6.96410086 5th Percentile: 63.93803446 95th Percentile: 85.70591457
                </code></pre>
                <p><code>--preset 3 --crf 30</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | .\SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf30_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                137432666              1843.32 kbps

Channel 1
Average Speed:          31.806 fps
Total Encoding Time:    450070 ms
Total Execution Time:   450386 ms
Average Latency:        10795 ms
Max Latency:            20098 ms

XPSNR average, 14315 frames  y: 41.7447  u: 44.1381  v: 44.7859 (minimum: 41.7447)
VMAF 4K: 99.407608, VMAF 1080p: 97.671552
SSIMULACRA2_rs: Mean: 78.85317925 Median: 78.87951009 Std Dev: 5.64017338 5th Percentile: 69.7591437695th Percentile: 87.17429615
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（11/22）SVT-AV1 v3.0——Big-Buck-Bunny QM</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf35_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                 98975837              1327.51 kbps

Channel 1
Average Speed:          32.462 fps
Total Encoding Time:    440976 ms
Total Execution Time:   441308 ms
Average Latency:        10562 ms
Max Latency:            20593 ms

XPSNR average, 14315 frames  y: 40.8312  u: 43.2288  v: 43.9582 (minimum: 40.8312)
VMAF 4K: 99.014436, VMAF 1080p: 97.145973
SSIMULACRA2_rs: Mean: 75.27920286 Median: 75.36589160 Std Dev: 6.91814465 5th Percentile: 63.95092010 95th Percentile: 85.45230956
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf30_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                134966115              1810.23 kbps

Channel 1
Average Speed:          31.701 fps
Total Encoding Time:    451570 ms
Total Execution Time:   451898 ms
Average Latency:        10844 ms
Max Latency:            20395 ms

XPSNR average, 14315 frames  y: 41.6559  u: 43.9722  v: 44.6733 (minimum: 41.6559)
VMAF 4K: 99.413037, VMAF 1080p: 97.691499
SSIMULACRA2_rs: Mean: 78.79998864 Median: 78.83792127 Std Dev: 5.60273973 5th Percentile: 69.77388681 95th Percentile: 87.09225295
                </code></pre>
                <p><code>--preset 3 --crf 35 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 --qm-min 0 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf35_qmMin0_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                 97348892              1305.69 kbps

Channel 1
Average Speed:          32.369 fps
Total Encoding Time:    442240 ms
Total Execution Time:   442582 ms
Average Latency:        10620 ms
Max Latency:            20319 ms

XPSNR average, 14315 frames  y: 40.5418  u: 42.9902  v: 43.7707 (minimum: 40.5418)
VMAF 4K: 98.929054, VMAF 1080p: 97.047796
SSIMULACRA2_rs: Mean: 74.87515728 Median: 74.97725064 Std Dev: 6.88201854 5th Percentile: 63.59227335 95th Percentile: 84.98997361
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 --qm-min 0 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf30_qmMin0_preset3.ivf

                    SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                131722647              1766.73 kbps

Channel 1
Average Speed:          31.602 fps
Total Encoding Time:    452982 ms
Total Execution Time:   453314 ms
Average Latency:        10892 ms
Max Latency:            20369 ms

XPSNR average, 14315 frames  y: 41.2944  u: 43.7038  v: 44.4423 (minimum: 41.2944)
VMAF 4K: 99.333118, VMAF 1080p: 97.598158
SSIMULACRA2_rs: Mean: 78.30231156 Median: 78.36263621 Std Dev: 5.57336865 5th Percentile: 69.29068078 95th Percentile: 86.43200391
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（12/22）SVT-AV1 v3.0——Big-Buck-Bunny Tune</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 0 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf35_tuneVQ_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                106818911              1432.71 kbps

Channel 1
Average Speed:          34.039 fps
Total Encoding Time:    420550 ms
Total Execution Time:   420892 ms
Average Latency:        10023 ms
Max Latency:            19538 ms

XPSNR average, 14315 frames  y: 40.9249  u: 43.5258  v: 44.0412 (minimum: 40.9249)
VMAF 4K: 99.019390, VMAF 1080p: 97.148717
SSIMULACRA2_rs: Mean: 75.77570949 Median: 75.86107014 Std Dev: 6.95487455 5th Percentile: 64.25930676 95th Percentile: 86.08970133
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf30_tuneVQ_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                145230445              1947.90 kbps

Channel 1
Average Speed:          33.204 fps
Total Encoding Time:    431122 ms
Total Execution Time:   431450 ms
Average Latency:        10313 ms
Max Latency:            19430 ms

XPSNR average, 14315 frames  y: 41.7399  u: 44.3139  v: 44.7807 (minimum: 41.7399)
VMAF 4K: 99.434136, VMAF 1080p: 97.707896
SSIMULACRA2_rs: Mean: 79.26591280 Median: 79.29272234 Std Dev: 5.60606982 5th Percentile: 70.15623321 95th Percentile: 87.64869908
                </code></pre>
                <p><code>--preset 3 --crf 35 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | .\SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 2 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf35_tuneSSIM_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                 97018725              1301.26 kbps

Channel 1
Average Speed:          31.926 fps
Total Encoding Time:    448388 ms
Total Execution Time:   448732 ms
Average Latency:        10698 ms
Max Latency:            20351 ms

XPSNR average, 14315 frames  y: 40.8252  u: 43.2435  v: 43.9304 (minimum: 40.8252)
VMAF 4K: 98.834626, VMAF 1080p: 96.901817
SSIMULACRA2_rs: Mean: 75.14899784 Median: 75.34139171 Std Dev: 6.90857273 5th Percentile: 63.89165676 95th Percentile: 85.37767059
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_crf30_tuneSSIM_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       14315            24.00 fps                132194899              1773.06 kbps

Channel 1
Average Speed:          31.300 fps
Total Encoding Time:    457356 ms
Total Execution Time:   457690 ms
Average Latency:        10947 ms
Max Latency:            20324 ms

XPSNR average, 14315 frames  y: 41.6677  u: 44.0184  v: 44.6708 (minimum: 41.6677)[Parsed_libvmaf_2 @ 000001d4543377c0]
VMAF 4K: 99.278835, VMAF 1080p: 97.492074
SSIMULACRA2_rs: Mean: 78.67407409 Median: 78.87376130 Std Dev: 5.62830977 5th Percentile: 69.61758813 95th Percentile: 86.97921263
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（13/22）SVT-AV1 v3.0——ElephantsDream</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf35_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 129126202		1580.03 kbps

Channel 1
Average Speed:		28.329 fps
Total Encoding Time:	553882 ms
Total Execution Time:	554216 ms
Average Latency:	12395 ms
Max Latency:		35052 ms

XPSNR average, 15691 frames  y: 41.3304  u: 46.6136  v: 46.2288 (minimum: 41.3304)
VMAF 4K: 98.670684, VMAF 1080p: 97.043196
SSIMULACRA2_rs: Mean: 73.73228925 Median: 73.37285235 Std Dev: 11.15518315 5th Percentile: 54.85785930 95th Percentile: 93.57457526
                </code></pre>
                <p><code>--preset 3 --crf 30</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 184180183		2253.69 kbps

Channel 1
Average Speed:		27.780 fps
Total Encoding Time:	564834 ms
Total Execution Time:	565188 ms
Average Latency:	12671 ms
Max Latency:		34505 ms

XPSNR average, 15691 frames  y: 42.4226  u: 47.2423  v: 46.9247 (minimum: 42.4226)
VMAF 4K: 99.192300, VMAF 1080p: 97.735401
SSIMULACRA2_rs: Mean: 77.95534397 Median: 77.60633320 Std Dev: 9.06659246 5th Percentile: 63.26160259 95th Percentile: 94.46343097
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（14/22）SVT-AV1 v3.0——ElephantsDream QM</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf35_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 128879607		1577.01 kbps

Channel 1
Average Speed:		28.297 fps
Total Encoding Time:	554502 ms
Total Execution Time:	554864 ms
Average Latency:	12420 ms
Max Latency:		35116 ms

XPSNR average, 15691 frames  y: 41.2986  u: 46.6074  v: 46.2146 (minimum: 41.2986)
VMAF 4K: 98.673540, VMAF 1080p: 97.050632
SSIMULACRA2_rs: Mean: 73.73402693 Median: 73.37710154 Std Dev: 11.11831836 5th Percentile: 54.97472344 95th Percentile: 93.56296734
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_qm_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 183193889		2241.62 kbps

Channel 1
Average Speed:		27.516 fps
Total Encoding Time:	570242 ms
Total Execution Time:	570604 ms
Average Latency:	12779 ms
Max Latency:		35105 ms

XPSNR average, 15691 frames  y: 42.3748  u: 47.2245  v: 46.8932 (minimum: 42.3748)
VMAF 4K: 99.192102, VMAF 1080p: 97.739201
SSIMULACRA2_rs: Mean: 77.92935682 Median: 77.58905525 Std Dev: 9.03994764 5th Percentile: 63.31099239 95th Percentile: 94.51506590
                </code></pre>
                <p><code>--preset 3 --crf 35 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 --qm-min 0 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf35_qmMin0_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 127077234		1554.96 kbps

Channel 1
Average Speed:		28.546 fps
Total Encoding Time:	549666 ms
Total Execution Time:	550004 ms
Average Latency:	12317 ms
Max Latency:		34404 ms

XPSNR average, 15691 frames  y: 41.1478  u: 46.5566  v: 46.1390 (minimum: 41.1478)
VMAF 4K: 98.637709, VMAF 1080p: 97.009951
SSIMULACRA2_rs: Mean: 73.45726871 Median: 73.05525303 Std Dev: 11.17768033 5th Percentile: 54.67047875 95th Percentile: 93.51371218
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 --qm-min 0 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_qmMin0_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 180017842		2202.75 kbps

Channel 1
Average Speed:		27.992 fps
Total Encoding Time:	560548 ms
Total Execution Time:	560878 ms
Average Latency:	12585 ms
Max Latency:		33609 ms

XPSNR average, 15691 frames  y: 42.1578  u: 47.1537  v: 46.7919 (minimum: 42.1578)
VMAF 4K: 99.150203, VMAF 1080p: 97.690037
SSIMULACRA2_rs: Mean: 77.57799079 Median: 77.16378592 Std Dev: 9.11892568 5th Percentile: 62.90816047 95th Percentile: 94.43395281
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（15/22）SVT-AV1 v3.0——ElephantsDream Tune</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 0 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf35_tuneVQ_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 135503631		1658.06 kbps

Channel 1
Average Speed:		28.784 fps
Total Encoding Time:	545136 ms
Total Execution Time:	545496 ms
Average Latency:	12166 ms
Max Latency:		34785 ms

XPSNR average, 15691 frames  y: 41.4123  u: 46.5467  v: 46.1661 (minimum: 41.4123)
VMAF 4K: 98.741928, VMAF 1080p: 97.135528
SSIMULACRA2_rs: Mean: 74.14842410 Median: 73.84100191 Std Dev: 10.98839947 5th Percentile: 55.40642910 95th Percentile: 93.51694390
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_tuneVQ_preset3.ivf
        
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 192130387		2350.97 kbps

Channel 1
Average Speed:		28.319 fps
Total Encoding Time:	554072 ms
Total Execution Time:	554416 ms
Average Latency:	12413 ms
Max Latency:		33819 ms

XPSNR average, 15691 frames  y: 42.4904  u: 47.1816  v: 46.8649 (minimum: 42.4904)
VMAF 4K: 99.252266, VMAF 1080p: 97.814671
SSIMULACRA2_rs: Mean: 78.28962734 Median: 77.96771217 Std Dev: 8.88251466 5th Percentile: 63.73580664 95th Percentile: 94.47657123
                </code></pre>
                <p><code>--preset 3 --crf 35 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 2 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf35_tuneSSIM_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 125701805		1538.13 kbps

Channel 1
Average Speed:		28.038 fps
Total Encoding Time:	559638 ms
Total Execution Time:	559974 ms
Average Latency:	12517 ms
Max Latency:		35104 ms

XPSNR average, 15691 frames  y: 42.3155  u: 47.1631  v: 46.8466 (minimum: 42.3155)
VMAF 4K: 99.059057, VMAF 1080p: 97.560952
SSIMULACRA2_rs: Mean: 73.52346418 Median: 73.17031873 Std Dev: 10.92597508 5th Percentile: 55.30870611 95th Percentile: 93.05800747
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_tuneSSIM_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 179319956		2194.22 kbps

Channel 1
Average Speed:		27.445 fps
Total Encoding Time:	571734 ms
Total Execution Time:	572062 ms
Average Latency:	12825 ms
Max Latency:		35179 ms

XPSNR average, 15691 frames  y: 41.2203  u: 46.5391  v: 46.1593 (minimum: 41.2203)
VMAF 4K: 98.492416, VMAF 1080p: 96.815940
SSIMULACRA2_rs: Mean: 77.76087565 Median: 77.42435303 Std Dev: 8.84153156 5th Percentile: 63.51118754 95th Percentile: 93.97271621
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（16/22）SVT-AV1 v3.0——MAIDRAGON-S</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf35_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 229128149		1289.57 kbps

Channel 1
Average Speed:		35.645 fps
Total Encoding Time:	956098 ms
Total Execution Time:	956438 ms
Average Latency:	9587 ms
Max Latency:		23299 ms

XPSNR average, 34080 frames  y: 42.3045  u: 43.5883  v: 43.7628 (minimum: 42.3045)
VMAF 4K: 99.244396, VMAF 1080p: 96.516280
SSIMULACRA2_rs: Mean: 77.79595955 Median: 80.76951847 Std Dev: 10.11701970 5th Percentile: 55.35706082 95th Percentile: 87.21367204
                </code></pre>
                <p><code>--preset 3 --crf 30</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf30_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 310395382		1746.96 kbps

Channel 1
Average Speed:		34.714 fps
Total Encoding Time:	981746 ms
Total Execution Time:	982074 ms
Average Latency:	9867 ms
Max Latency:		23064 ms

XPSNR average, 34080 frames  y: 43.2173  u: 44.2203  v: 44.3570 (minimum: 43.2173)
VMAF 4K: 99.539781, VMAF 1080p: 96.936797
SSIMULACRA2_rs: Mean: 80.72932330 Median: 83.21056950 Std Dev: 8.14238366 5th Percentile: 62.57713789 95th Percentile: 88.27199543
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（17/22）SVT-AV1 v3.0——MAIDRAGON-S QM</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf35_preset3_qm.ivf

                    SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       34080            23.98 fps                224669811              1264.48 kbps

Channel 1
Average Speed:          35.269 fps
Total Encoding Time:    966280 ms
Total Execution Time:   966594 ms
Average Latency:        9703 ms
Max Latency:            23187 ms

XPSNR average, 34080 frames  y: 42.2290  u: 43.4291  v: 43.6218 (minimum: 42.2290)
VMAF 4K: 99.240111, VMAF 1080p: 96.516206
SSIMULACRA2_rs: Mean: 77.69886550 Median: 80.69600714 Std Dev: 10.07073719 5th Percentile: 55.34029248 95th Percentile: 87.02358295
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf35_preset3_qmMin0.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       34080            23.98 fps                302278722              1701.28 kbps

Channel 1
Average Speed:          34.394 fps
Total Encoding Time:    990860 ms
Total Execution Time:   991192 ms
Average Latency:        9975 ms
Max Latency:            22972 ms

XPSNR average, 34080 frames  y: 43.1181  u: 44.0400  v: 44.1960 (minimum: 43.1181)
VMAF 4K: 99.651511, VMAF 1080p: 97.180459
SSIMULACRA2_rs: Mean: 80.59807135 Median: 83.09262696 Std Dev: 8.07536797 5th Percentile: 62.58511914 95th Percentile: 88.03572868
                </code></pre>
                <p><code>--preset 3 --crf 35 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 --qm-min 0 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf35_preset3_qmMin0.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       34080            23.98 fps                223526152              1258.04 kbps


Channel 1
Average Speed:          35.512 fps
Total Encoding Time:    959670 ms
Total Execution Time:   960008 ms
Average Latency:        9655 ms
Max Latency:            23401 ms

XPSNR average, 34080 frames  y: 41.9666  u: 43.1936  v: 43.4126 (minimum: 41.9666)
VMAF 4K: 99.197680, VMAF 1080p: 96.468397
SSIMULACRA2_rs: Mean: 77.31179694 Median: 80.33342245 Std Dev: 10.03786961 5th Percentile: 54.98487067 95th Percentile: 86.47179056
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg  -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 --qm-min 0 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf30_preset3_qmMin0.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       34080            23.98 fps                298304463              1678.91 kbps


Channel 1
Average Speed:          34.683 fps
Total Encoding Time:    982628 ms
Total Execution Time:   982950 ms
Average Latency:        9914 ms
Max Latency:            22521 ms

XPSNR average, 34080 frames  y: 42.7807  u: 43.7920  v: 43.9662 (minimum: 42.7807)
VMAF 4K: 99.499874, VMAF 1080p: 96.893528
SSIMULACRA2_rs: Mean: 80.13878722 Median: 82.67207598 Std Dev: 8.06846175 5th Percentile: 62.13033310 95th Percentile: 87.57267954
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（18/22）SVT-AV1 v3.0——MAIDRAGON-S Tune</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 0 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf35_preset3_tuneVQ.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 241383269		1358.55 kbps

Channel 1
Average Speed:		37.573 fps
Total Encoding Time:	907038 ms
Total Execution Time:	907382 ms
Average Latency:	9051 ms
Max Latency:		22549 ms

XPSNR average, 34080 frames  y: 42.2398  u: 43.6137  v: 43.7588 (minimum: 42.2398)
VMAF 4K: 99.168754, VMAF 1080p: 96.433004
SSIMULACRA2_rs: Mean: 78.18404438 Median: 81.09807098 Std Dev: 9.84990473 5th Percentile: 56.41780640 95th Percentile: 87.31498990
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf30_preset3_tuneVQ.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 327278175		1841.98 kbps

Channel 1
Average Speed:		36.461 fps
Total Encoding Time:	934688 ms
Total Execution Time:	935034 ms
Average Latency:	9360 ms
Max Latency:		23189 ms

XPSNR average, 34080 frames  y: 43.1374  u: 44.2474  v: 44.3534 (minimum: 43.1374)
VMAF 4K: 99.485086, VMAF 1080p: 96.874969
SSIMULACRA2_rs: Mean: 81.05760560 Median: 83.45341781 Std Dev: 7.86579295 5th Percentile: 63.52342983 95th Percentile: 88.37986377
                </code></pre>
                <p><code>--preset 3 --crf 35 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 2 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf35_preset3_tuneSSIM.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 216845087		1220.44 kbps

Channel 1
Average Speed:		34.559 fps
Total Encoding Time:	986132 ms
Total Execution Time:	986468 ms
Average Latency:	9884 ms
Max Latency:		23539 ms

XPSNR average, 34080 frames  y: 42.1163  u: 43.3465  v: 43.5296  =(minimum: 42.1163)
VMAF 4K: 99.087125, VMAF 1080p: 96.311458
SSIMULACRA2_rs: Mean: 77.31163552 Median: 79.89184789 Std Dev: 9.84733036 5th Percentile: 55.58016882 95th Percentile: 87.02450024
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 -b .\MAIDRAGON-S-23.976fps_8bit_yuv420_crf30_preset3_tuneSSIM.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 295880102		1665.26 kbps

Channel 1
Average Speed:		33.994 fps
Total Encoding Time:	1002516 ms
Total Execution Time:	1002870 ms
Average Latency:	10073 ms
Max Latency:		23448 ms

XPSNR average, 34080 frames  y: 43.0734  u: 44.0203  v: 44.1659 (minimum: 43.0734)
VMAF 4K: 86.009089, VMAF 1080p: 79.289779
SSIMULACRA2_rs: Mean: 80.37004198 Median: 82.49914773 Std Dev: 7.94219220 5th Percentile: 62.83002581 95th Percentile: 88.19626015
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（19/22）SVT-AV1 v3.0——HYOUKA</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 -b .\HYOUKA-23.976fps_8bit_yuv420_crf35_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                120742679              626.00 kbps

Channel 1
Average Speed:          44.830 fps
Total Encoding Time:    825260 ms
Total Execution Time:   825594 ms
Average Latency:        7581 ms
Max Latency:            23175 ms

XPSNR average, 36996 frames  y: 40.8253  u: 43.5643  v: 43.7323 (minimum: 40.8253)
VMAF 4K: 99.135122, VMAF 1080p: 96.076917
SSIMULACRA2_rs: Mean: 79.82507743 Median: 81.09452443 Std Dev: 6.55502720 5th Percentile: 67.96711951 95th Percentile: 86.41015394
                </code></pre>
                <p><code>--preset 3 --crf 30</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 -b .\HYOUKA-23.976fps_8bit_yuv420_crf30_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                163854463              849.51 kbps

Channel 1
Average Speed:          43.113 fps
Total Encoding Time:    858116 ms
Total Execution Time:   858460 ms
Average Latency:        7907 ms
Max Latency:            21213 ms

XPSNR average, 36996 frames  y: 41.3418  u: 43.9899  v: 44.1166 (minimum: 40.8253)
VMAF 4K: 99.416563, VMAF 1080p: 96.456901
SSIMULACRA2_rs: Mean: 82.03787385 Median: 83.02565519 Std Dev: 5.22592578 5th Percentile: 72.68777288 95th Percentile: 87.46544644
                </code></pre>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（20/22）SVT-AV1 v3.0——HYOUKA QM</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 -b .\HYOUKA-23.976fps_8bit_yuv420_crf35_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                118814985              616.00 kbps

Channel 1
Average Speed:          45.157 fps
Total Encoding Time:    819272 ms
Total Execution Time:   819602 ms
Average Latency:        7533 ms
Max Latency:            22795 ms

XPSNR average, 36996 frames  y: 40.8003  u: 43.5060  v: 43.6861 (minimum: 40.8003)
VMAF 4K: 99.136773, VMAF 1080p: 96.083268
SSIMULACRA2_rs: Mean: 79.80505612 Median: 81.06671569 Std Dev: 6.52002979 5th Percentile: 67.99861326 95th Percentile: 86.31858358
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3  --enable-qm 1 -b .\HYOUKA-23.976fps_8bit_yuv420_crf30_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                160124885              830.18 kbps

Channel 1
Average Speed:          43.246 fps
Total Encoding Time:    855468 ms
Total Execution Time:   855806 ms
Average Latency:        7896 ms
Max Latency:            22073 ms

XPSNR average, 36996 frames  y: 41.3132  u: 43.9222  v: 44.0566 (minimum: 41.3132)
VMAF 4K: 99.417401, VMAF 1080p: 96.463302
SSIMULACRA2_rs: Mean: 82.00116606 Median: 82.99097252 Std Dev: 5.19948680 5th Percentile: 72.65484942 95th Percentile: 87.35281267
                </code></pre>
                <p><code>--preset 3 --crf 35 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --enable-qm 1 -b .\HYOUKA-23.976fps_8bit_yuv420_crf35_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                116723071              605.16 kbps

Channel 1
Average Speed:          45.103 fps
Total Encoding Time:    820264 ms
Total Execution Time:   820608 ms
Average Latency:        7554 ms
Max Latency:            23381 ms

XPSNR average, 36996 frames  y: 40.6694  u: 43.4026  v: 43.5929 (minimum: 40.6694)
VMAF 4K: 99.077271, VMAF 1080p: 96.013092
SSIMULACRA2_rs: Mean: 79.57465176 Median: 80.79647596 Std Dev: 6.50993171 5th Percentile: 67.84670635 95th Percentile: 86.04946409
                </code></pre>

                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3  --enable-qm 1 -b .\HYOUKA-23.976fps_8bit_yuv420_crf30_preset3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                155745474              807.47 kbps

Channel 1
Average Speed:          43.430 fps
Total Encoding Time:    851860 ms
Total Execution Time:   852210 ms
Average Latency:        7874 ms
Max Latency:            21885 ms

XPSNR average, 36996 frames  y: 41.1678  u: 43.7995  v: 43.9495 (minimum: 41.1678)
VMAF 4K: 99.366585, VMAF 1080p: 96.402913
SSIMULACRA2_rs: Mean: 81.74212195 Median: 82.69693318 Std Dev: 5.20176841 5th Percentile: 72.40613868 95th Percentile: 87.02325300
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（21/22）SVT-AV1 v3.0——HYOUKA Tune</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 35 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 0 -b .\HYOUKA-23.976fps_8bit_yuv420_crf30_preset3_tuneVQ.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                128216536              664.75 kbps

Channel 1
Average Speed:          46.994 fps
Total Encoding Time:    787254 ms
Total Execution Time:   787636 ms
Average Latency:        7203 ms
Max Latency:            22723 ms

XPSNR average, 36996 frames  y: 40.7663  u: 43.5503  v: 43.7291 (minimum: 40.7663)
VMAF 4K: 99.083751, VMAF 1080p: 96.013682
SSIMULACRA2_rs: Mean: 80.11321607 Median: 81.29575302 Std Dev: 6.37928685 5th Percentile: 68.60815332 95th Percentile: 86.52427010
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 -b .\HYOUKA-23.976fps_8bit_yuv420_crf30_preset3_tuneVQ.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                174981394              907.20 kbps

Channel 1
Average Speed:          44.810 fps
Total Encoding Time:    825614 ms
Total Execution Time:   825974 ms
Average Latency:        7578 ms
Max Latency:            20879 ms

XPSNR average, 36996 frames  y: 41.2642  u: 43.9719  v: 44.1089 (minimum: 41.2642)
VMAF 4K: 99.372739, VMAF 1080p: 96.403405
SSIMULACRA2_rs: Mean: 82.24667640 Median: 83.14431623 Std Dev: 5.08056753 5th Percentile: 73.18248350 95th Percentile: 87.50851431
                </code></pre>
                <p><code>--preset 3 --crf 35 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 35 --preset 3 --tune 2 -b .\HYOUKA-23.976fps_8bit_yuv420_crf35_preset3_tuneSSIM.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                116585010              604.44 kbps

Channel 1
Average Speed:          44.168 fps
Total Encoding Time:    837622 ms
Total Execution Time:   837976 ms
Average Latency:        7695 ms
Max Latency:            23198 ms

XPSNR average, 36996 frames  y: 40.7484  u: 43.4579  v: 43.6360 (minimum: 40.7484)
VMAF 4K: 98.997302, VMAF 1080p: 95.897500
SSIMULACRA2_rs: Mean: 79.60067877 Median: 80.69420144 Std Dev: 6.47687427 5th Percentile: 67.82885960 95th Percentile: 86.27542652
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 -b .\HYOUKA-23.976fps_8bit_yuv420_crf30_preset3_tuneSSIM.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                158466339              821.58 kbps

Channel 1
Average Speed:          42.132 fps
Total Encoding Time:    878090 ms
Total Execution Time:   878464 ms
Average Latency:        8095 ms
Max Latency:            22030 ms

XPSNR average, 36996 frames  y: 41.2802  u: 43.8967  v: 44.0327 (minimum: 41.2802)
VMAF 4K: 99.317524, VMAF 1080p: 96.324076
SSIMULACRA2_rs: Mean: 81.85594740 Median: 82.74166944 Std Dev: 5.18134927 5th Percentile: 72.57400971 95th Percentile: 87.35136827
                </code></pre>
            </div>
            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr>
                        <th class="px-1 t-light-gray"><b>基准：</b></th>
                        <th class="px-1 t-light-gray" style="color:#31D87D">视无损</th>
                        <th class="px-1 t-light-gray" style="color:#92D050">优秀</th>
                        <th class="px-1 t-light-gray" style="color:#FFC000">良好</th>
                        <th class="px-1 t-light-gray" style="color:#C65911">达标</th>
                        <th class="px-1 t-light-gray" style="color:#541818">待达标</th>
                        <th class="px-1 t-light-gray"><b>排名：</b></th>
                        <th class="px-1 ace t-light-gray">冠军</th>
                        <th class="px-1 sec t-light-gray">亚军</th>
                        <th class="px-1 trd t-light-gray">季军</th>
                        <th class="px-1 t-light-gray" style="color:white;background-color:#FF7C80">落败犯规</th>
                    </tr>
                </thead>
            </table></div>

            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr class="border-lr">
                        <th colspan="4">基准测试</th>
                        <th class="px-1" colspan="3">XPSNR</th>
                        <th class="px-1" colspan="2">VMAF 0.6.1</th>
                        <th class="px-1" colspan="4">SSIMULACRA 2.1</th>
                    </tr>
                    <tr class="border-lr">
                        <th class="px-1">编码器</th>
                        <th class="px-1">编码选项</th>
                        <th class="px-1">速度 fps</th>
                        <th class="px-1">码率 kbps</th>
                        <th class="px-1">Y dB</th>
                        <th class="px-1">U dB</th>
                        <th class="px-1">V dB</th>
                        <th class="px-1">4k</th>
                        <th class="px-1">1080p</th>
                        <th class="px-1">均值</th>
                        <th class="px-1">中位</th>
                        <th class="px-1">第 5%</th>
                        <th class="px-1">第 95%</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="13"><b>Netflix Boat</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF22 Custom</td>
                        <td class="px-1">2.06</td>
                        <td class="px-1">31171.09</td>
                        <td class="px-1 sec" style="color:#FFC000">40.5607</td>
                        <td class="px-1 sec" style="color:#92D050">42.9254</td>
                        <td class="px-1 sec" style="color:#31D87D">45.6857</td>
                        <td class="px-1" style="color:#31D87D">98.049573</td>
                        <td class="px-1" style="color:#31D87D">98.374132</td>
                        <td class="px-1" style="color:#C65911">64.77780339</td>
                        <td class="px-1" style="color:#C65911">63.9109824</td>
                        <td class="px-1" style="color:#C65911">60.0405545</td>
                        <td class="px-1" style="color:#FFC000">71.22150529</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR P3</td>
                        <td class="px-1 trd">3.515</td>
                        <td class="px-1 trd">21798.79</td>
                        <td class="px-1" style="color:#C65911">37.4548</td>
                        <td class="px-1" style="color:#FFC000">41.1061</td>
                        <td class="px-1" style="color:#92D050">42.9362</td>
                        <td class="px-1" style="color:#31D87D">96.761755</td>
                        <td class="px-1" style="color:#31D87D">97.272500</td>
                        <td class="px-1" style="color:#C65911">65.44279924</td>
                        <td class="px-1" style="color:#C65911">65.24821957</td>
                        <td class="px-1" style="color:#C65911">62.76749146</td>
                        <td class="px-1" style="color:#C65911">68.60554732</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM P3</td>
                        <td class="px-1">3.512</td>
                        <td class="px-1">21871.53</td>
                        <td class="px-1" style="color:#C65911">37.4558</td>
                        <td class="px-1" style="color:#FFC000">41.0821</td>
                        <td class="px-1" style="color:#92D050">42.9071</td>
                        <td class="px-1" style="color:#31D87D">96.808976</td>
                        <td class="px-1" style="color:#31D87D">97.305344</td>
                        <td class="px-1" style="color:#C65911">65.51104289</td>
                        <td class="px-1" style="color:#C65911">65.27929578</td>
                        <td class="px-1" style="color:#C65911">62.79561741</td>
                        <td class="px-1" style="color:#C65911">68.67732264</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM0 P3</td>
                        <td class="px-1">3.473</td>
                        <td class="px-1 sec">21475.98</td>
                        <td class="px-1" style="color:#C65911">37.4014</td>
                        <td class="px-1" style="color:#FFC000">41.0142</td>
                        <td class="px-1" style="color:#92D050">42.8161</td>
                        <td class="px-1" style="color:#31D87D">96.717327</td>
                        <td class="px-1" style="color:#31D87D">97.243354</td>
                        <td class="px-1" style="color:#C65911">65.26716472</td>
                        <td class="px-1" style="color:#C65911">65.11628273</td>
                        <td class="px-1" style="color:#C65911">62.6258451</td>
                        <td class="px-1" style="color:#C65911">68.37429589</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 VQ P3</td>
                        <td class="px-1 ace">3.537</td>
                        <td class="px-1">22308.7</td>
                        <td class="px-1" style="color:#C65911">37.4666</td>
                        <td class="px-1" style="color:#FFC000">41.1177</td>
                        <td class="px-1" style="color:#92D050">42.9250</td>
                        <td class="px-1" style="color:#31D87D">97.405106</td>
                        <td class="px-1" style="color:#31D87D">97.781267</td>
                        <td class="px-1" style="color:#C65911">65.62472343</td>
                        <td class="px-1" style="color:#C65911">65.33376302</td>
                        <td class="px-1" style="color:#C65911">62.92247971</td>
                        <td class="px-1" style="color:#C65911">68.71991106</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 SSIM P3</td>
                        <td class="px-1">3.449</td>
                        <td class="px-1 ace">21179.37</td>
                        <td class="px-1" style="color:#C65911">37.4057</td>
                        <td class="px-1" style="color:#FFC000">41.0354</td>
                        <td class="px-1" style="color:#92D050">42.8108</td>
                        <td class="px-1" style="color:#31D87D">96.396343</td>
                        <td class="px-1" style="color:#31D87D">97.006433</td>
                        <td class="px-1" style="color:#C65911">64.66386301</td>
                        <td class="px-1" style="color:#C65911">64.46980413</td>
                        <td class="px-1" style="color:#C65911">61.83743679</td>
                        <td class="px-1" style="color:#C65911">67.85317053</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF18 Custom</td>
                        <td class="px-1">1.54</td>
                        <td class="px-1" style="color:#FFF;background-color:#FF7C80">60831.26</td>
                        <td class="px-1 ace" style="color:#92D050">42.0499</td>
                        <td class="px-1 ace" style="color:#92D050">44.8382</td>
                        <td class="px-1 ace" style="color:#31D87D">47.8922</td>
                        <td class="px-1 ace" style="color:#31D87D">99.810258</td>
                        <td class="px-1 ace" style="color:#31D87D">99.810258</td>
                        <td class="px-1 ace" style="color:#FFC000">73.25259644</td>
                        <td class="px-1 ace" style="color:#FFC000">71.55939769</td>
                        <td class="px-1 ace" style="color:#C65911">69.44349186</td>
                        <td class="px-1 ace" style="color:#FFCC00">79.86377007</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR P3</td>
                        <td class="px-1">3.35</td>
                        <td class="px-1">31292.89</td>
                        <td class="px-1" style="color:#C65911">37.7324</td>
                        <td class="px-1 trd" style="color:#FFC000">41.3649</td>
                        <td class="px-1 trd" style="color:#92D050">43.2103</td>
                        <td class="px-1" style="color:#31D87D">98.453038</td>
                        <td class="px-1" style="color:#31D87D">98.437675</td>
                        <td class="px-1 sec" style="color:#FFC000">70.60364934</td>
                        <td class="px-1 sec" style="color:#FFC000">70.44573796</td>
                        <td class="px-1" style="color:#C65911">68.31306315</td>
                        <td class="px-1 sec" style="color:#FFC000">73.43305347</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM P3</td>
                        <td class="px-1">3.368</td>
                        <td class="px-1">30147.1</td>
                        <td class="px-1 trd" style="color:#C65911">37.7331</td>
                        <td class="px-1" style="color:#FFC000">41.3403</td>
                        <td class="px-1" style="color:#92D050">43.1727</td>
                        <td class="px-1 trd" style="color:#31D87D">98.490672</td>
                        <td class="px-1 trd" style="color:#31D87D">98.464479</td>
                        <td class="px-1 trd" style="color:#FFC000">70.48941736</td>
                        <td class="px-1 trd" style="color:#FFC000">70.34330051</td>
                        <td class="px-1 trd" style="color:#C65911">68.32600577</td>
                        <td class="px-1 trd" style="color:#FFC000">73.00726519</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM0 P3</td>
                        <td class="px-1">3.293</td>
                        <td class="px-1">29498.61</td>
                        <td class="px-1" style="color:#C65911">37.6784</td>
                        <td class="px-1" style="color:#FFC000">41.2721</td>
                        <td class="px-1" style="color:#92D050">43.0866</td>
                        <td class="px-1" style="color:#31D87D">98.421012</td>
                        <td class="px-1" style="color:#31D87D">98.412364</td>
                        <td class="px-1" style="color:#FFC000">70.20741785</td>
                        <td class="px-1" style="color:#FFC000">70.07957787</td>
                        <td class="px-1" style="color:#C65911">68.14975116</td>
                        <td class="px-1" style="color:#FFC000">72.58938147</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 VQ P3</td>
                        <td class="px-1 sec">3.53</td>
                        <td class="px-1">22308.7</td>
                        <td class="px-1" style="color:#C65911">37.6784</td>
                        <td class="px-1" style="color:#FFC000">41.2721</td>
                        <td class="px-1" style="color:#92D050">43.0866</td>
                        <td class="px-1 sec" style="color:#31D87D">98.946131</td>
                        <td class="px-1 sec" style="color:#31D87D">98.855602</td>
                        <td class="px-1" style="color:#FFC000">70.46943646</td>
                        <td class="px-1" style="color:#FFC000">70.32725873</td>
                        <td class="px-1 sec" style="color:#C65911">68.33790856</td>
                        <td class="px-1" style="color:#FFC000">73.00295684</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 SSIM P3</td>
                        <td class="px-1">3.36</td>
                        <td class="px-1">29453.41</td>
                        <td class="px-1" style="color:#C65911">37.7025</td>
                        <td class="px-1" style="color:#FFC000">41.2961</td>
                        <td class="px-1" style="color:#92D050">43.1057</td>
                        <td class="px-1" style="color:#31D87D">98.218322</td>
                        <td class="px-1" style="color:#31D87D">98.256601</td>
                        <td class="px-1" style="color:#C65911">69.94324986</td>
                        <td class="px-1" style="color:#C65911">69.84754035</td>
                        <td class="px-1" style="color:#C65911">67.71075445</td>
                        <td class="px-1" style="color:#FFC000">72.35572415</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="13"><b>Netflix WindAndNature</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF22 Custom</td>
                        <td class="px-1">2.54</td>
                        <td class="px-1">10472.07</td>
                        <td class="px-1 sec" style="color:#FFC000">39.8871</td>
                        <td class="px-1" style="color:#92D050">42.1991</td>
                        <td class="px-1" style="color:#92D050">42.3623</td>
                        <td class="px-1" style="color:#31D87D">94.730385</td>
                        <td class="px-1" style="color:#92D050">90.708962</td>
                        <td class="px-1" style="color:#C65911">61.03782816</td>
                        <td class="px-1" style="color:#C65911">62.22680342</td>
                        <td class="px-1" style="color:#541818">53.49027011</td>
                        <td class="px-1" style="color:#C65911">68.77075281</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR P3</td>
                        <td class="px-1 ace">6</td>
                        <td class="px-1">6665.2</td>
                        <td class="px-1" style="color:#C65911">37.3362</td>
                        <td class="px-1 trd" style="color:#92D050">43.4853</td>
                        <td class="px-1 trd" style="color:#92D050">43.1529</td>
                        <td class="px-1" style="color:#31D87D">96.113360</td>
                        <td class="px-1" style="color:#92D050">92.519165</td>
                        <td class="px-1" style="color:#C65911">65.63168941</td>
                        <td class="px-1" style="color:#C65911">67.48283309</td>
                        <td class="px-1" style="color:#541818">58.42780742</td>
                        <td class="px-1" style="color:#FFC000">70.4115063</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM P3</td>
                        <td class="px-1 trd">5.606</td>
                        <td class="px-1 trd">6638.52</td>
                        <td class="px-1" style="color:#C65911">36.7024</td>
                        <td class="px-1" style="color:#92D050">42.7301</td>
                        <td class="px-1" style="color:#FFC000">40.5724</td>
                        <td class="px-1" style="color:#31D87D">97.722582</td>
                        <td class="px-1" style="color:#92D050">94.621628</td>
                        <td class="px-1" style="color:#C65911">65.62441101</td>
                        <td class="px-1" style="color:#C65911">67.46571858</td>
                        <td class="px-1" style="color:#541818">58.31453649</td>
                        <td class="px-1" style="color:#FFC000">70.38503641</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM0 P3</td>
                        <td class="px-1">5.555</td>
                        <td class="px-1 sec">6593.4</td>
                        <td class="px-1" style="color:#C65911">36.6962</td>
                        <td class="px-1" style="color:#92D050">42.6603</td>
                        <td class="px-1" style="color:#FFC000">40.5092</td>
                        <td class="px-1" style="color:#31D87D">97.608784</td>
                        <td class="px-1" style="color:#92D050">94.481252</td>
                        <td class="px-1" style="color:#C65911">65.50754114</td>
                        <td class="px-1" style="color:#C65911">67.41629557</td>
                        <td class="px-1" style="color:#541818">58.2033296</td>
                        <td class="px-1" style="color:#FFC000">70.29080931</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 VQ P3</td>
                        <td class="px-1 sec">5.623</td>
                        <td class="px-1">7124.16</td>
                        <td class="px-1" style="color:#C65911">36.7241</td>
                        <td class="px-1" style="color:#92D050">42.7446</td>
                        <td class="px-1" style="color:#FFC000">40.6557</td>
                        <td class="px-1" style="color:#31D87D">97.704765</td>
                        <td class="px-1" style="color:#92D050">94.601392</td>
                        <td class="px-1" style="color:#C65911">66.04194395</td>
                        <td class="px-1" style="color:#C65911">67.69334252</td>
                        <td class="px-1" style="color:#541818">58.6735277</td>
                        <td class="px-1" style="color:#FFC000">70.90097115</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 SSIM P3</td>
                        <td class="px-1">5.573</td>
                        <td class="px-1 ace">6578.42</td>
                        <td class="px-1" style="color:#C65911">36.6850</td>
                        <td class="px-1" style="color:#92D050">42.6922</td>
                        <td class="px-1" style="color:#FFC000">40.5141</td>
                        <td class="px-1" style="color:#31D87D">97.549183</td>
                        <td class="px-1" style="color:#92D050">94.408432</td>
                        <td class="px-1" style="color:#C65911">65.70502123</td>
                        <td class="px-1" style="color:#C65911">67.36990713</td>
                        <td class="px-1" style="color:#541818">58.95460314</td>
                        <td class="px-1" style="color:#FFC000">70.03019595</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF18 Custom</td>
                        <td class="px-1">2.07</td>
                        <td class="px-1">21360.67</td>
                        <td class="px-1 ace" style="color:#FFC000">40.9048</td>
                        <td class="px-1 sec" style="color:#92D050">43.5395</td>
                        <td class="px-1 sec" style="color:#92D050">43.4034</td>
                        <td class="px-1" style="color:#31D87D">96.493359</td>
                        <td class="px-1" style="color:#92D050">93.110238</td>
                        <td class="px-1" style="color:#C65911">68.23241143</td>
                        <td class="px-1" style="color:#C65911">68.96018756</td>
                        <td class="px-1" style="color:#C65911">61.08936644</td>
                        <td class="px-1 ace" style="color:#FFCC00">76.03682341</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR P3</td>
                        <td class="px-1">5.3</td>
                        <td class="px-1">9261.1</td>
                        <td class="px-1 trd" style="color:#C65911">37.5399</td>
                        <td class="px-1 ace" style="color:#92D050">43.7761</td>
                        <td class="px-1 ace" style="color:#92D050">43.4111</td>
                        <td class="px-1" style="color:#31D87D">96.840150</td>
                        <td class="px-1" style="color:#92D050">93.501026</td>
                        <td class="px-1 trd" style="color:#C65911">68.92250911</td>
                        <td class="px-1 sec" style="color:#FFC000">70.75917283</td>
                        <td class="px-1 trd" style="color:#C65911">62.09646559</td>
                        <td class="px-1" style="color:#FFC000">73.04270951</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM P3</td>
                        <td class="px-1">5.076</td>
                        <td class="px-1">9171.44</td>
                        <td class="px-1" style="color:#C65911">36.9286</td>
                        <td class="px-1" style="color:#92D050">42.9716</td>
                        <td class="px-1" style="color:#FFC000">40.7229</td>
                        <td class="px-1 sec" style="color:#31D87D">98.307189</td>
                        <td class="px-1 sec" style="color:#31D87D">95.420387</td>
                        <td class="px-1" style="color:#C65911">68.91905952</td>
                        <td class="px-1 trd" style="color:#FFC000">70.73052286</td>
                        <td class="px-1 sec" style="color:#C65911">62.1007959</td>
                        <td class="px-1 trd" style="color:#FFC000">73.08080131</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM0 P3</td>
                        <td class="px-1">5.046</td>
                        <td class="px-1">9171.44</td>
                        <td class="px-1" style="color:#C65911">36.9126</td>
                        <td class="px-1" style="color:#92D050">42.9124</td>
                        <td class="px-1" style="color:#FFC000">40.6718</td>
                        <td class="px-1" style="color:#31D87D">98.244725</td>
                        <td class="px-1" style="color:#31D87D">95.348606</td>
                        <td class="px-1" style="color:#C65911">68.80260246</td>
                        <td class="px-1" style="color:#FFC000">70.67784608</td>
                        <td class="px-1" style="color:#C65911">61.91905432</td>
                        <td class="px-1" style="color:#FFC000">73.02160275</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 VQ P3</td>
                        <td class="px-1">5.125</td>
                        <td class="px-1">10062.18</td>
                        <td class="px-1" style="color:#C65911">36.9218</td>
                        <td class="px-1" style="color:#92D050">42.9713</td>
                        <td class="px-1" style="color:#FFC000">40.8042</td>
                        <td class="px-1 ace" style="color:#31D87D">98.422313</td>
                        <td class="px-1 ace" style="color:#31D87D">95.579552</td>
                        <td class="px-1 ace" style="color:#C65911">69.04057766</td>
                        <td class="px-1 ace" style="color:#FFC000">70.76173066</td>
                        <td class="px-1" style="color:#C65911">61.63058503</td>
                        <td class="px-1 sec" style="color:#FFC000">73.41046502</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 SSIM P3</td>
                        <td class="px-1">5.174</td>
                        <td class="px-1">9141.92</td>
                        <td class="px-1" style="color:#C65911">36.9026</td>
                        <td class="px-1" style="color:#92D050">42.9481</td>
                        <td class="px-1" style="color:#FFC000">40.6723</td>
                        <td class="px-1 trd" style="color:#31D87D">98.295810</td>
                        <td class="px-1 trd" style="color:#31D87D">95.415772</td>
                        <td class="px-1 sec" style="color:#C65911">68.93928567</td>
                        <td class="px-1" style="color:#FFC000">70.61041299</td>
                        <td class="px-1 ace" style="color:#C65911">62.56205008</td>
                        <td class="px-1" style="color:#FFC000">72.72085333</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="13"><b>Blender Fundation BigBuckBunny</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF22 Custom</td>
                        <td class="px-1">8.49</td>
                        <td class="px-1">2581.44</td>
                        <td class="px-1" style="color:#FFC000">40.4936</td>
                        <td class="px-1" style="color:#92D050">42.5438</td>
                        <td class="px-1" style="color:#92D050">43.8810</td>
                        <td class="px-1" style="color:#31D87D">99.195737</td>
                        <td class="px-1" style="color:#31D87D">97.444827</td>
                        <td class="px-1" style="color:#FFC000">77.79793375</td>
                        <td class="px-1" style="color:#FFC000">78.10156956</td>
                        <td class="px-1 trd" style="color:#C65911">69.98188935</td>
                        <td class="px-1" style="color:#92D050">83.80652456</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR P3</td>
                        <td class="px-1 trd">32.473</td>
                        <td class="px-1">1346.27</td>
                        <td class="px-1" style="color:#FFC000">40.9029</td>
                        <td class="px-1" style="color:#92D050">43.3569</td>
                        <td class="px-1" style="color:#92D050">44.0441</td>
                        <td class="px-1" style="color:#31D87D">99.008969</td>
                        <td class="px-1" style="color:#31D87D">97.128712</td>
                        <td class="px-1" style="color:#FFC000">75.32415905</td>
                        <td class="px-1" style="color:#FFC000">75.3902448</td>
                        <td class="px-1" style="color:#C65911">63.93803446</td>
                        <td class="px-1" style="color:#92D050">85.70591457</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM P3</td>
                        <td class="px-1">32.462</td>
                        <td class="px-1 trd">1327.51</td>
                        <td class="px-1" style="color:#FFC000">40.8312</td>
                        <td class="px-1" style="color:#92D050">43.2288</td>
                        <td class="px-1" style="color:#92D050">43.9582</td>
                        <td class="px-1" style="color:#31D87D">99.014436</td>
                        <td class="px-1" style="color:#31D87D">97.145973</td>
                        <td class="px-1" style="color:#FFC000">75.27920286</td>
                        <td class="px-1" style="color:#FFC000">75.3658916</td>
                        <td class="px-1" style="color:#C65911">63.9509201</td>
                        <td class="px-1" style="color:#92D050">85.45230956</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM0 P3</td>
                        <td class="px-1">32.369</td>
                        <td class="px-1 sec">1305.69</td>
                        <td class="px-1" style="color:#FFC000">40.5418</td>
                        <td class="px-1" style="color:#92D050">42.9902</td>
                        <td class="px-1" style="color:#92D050">43.7707</td>
                        <td class="px-1" style="color:#31D87D">98.929054</td>
                        <td class="px-1" style="color:#31D87D">97.047796</td>
                        <td class="px-1" style="color:#FFC000">74.87515728</td>
                        <td class="px-1" style="color:#FFC000">74.97725064</td>
                        <td class="px-1" style="color:#C65911">63.59227335</td>
                        <td class="px-1" style="color:#92D050">84.98997361</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 VQ P3</td>
                        <td class="px-1 ace">34.039</td>
                        <td class="px-1">1432.71</td>
                        <td class="px-1" style="color:#FFC000">40.9249</td>
                        <td class="px-1" style="color:#92D050">43.5258</td>
                        <td class="px-1" style="color:#92D050">44.0412</td>
                        <td class="px-1" style="color:#31D87D">99.019390</td>
                        <td class="px-1" style="color:#31D87D">97.148717</td>
                        <td class="px-1" style="color:#FFC000">75.77570949</td>
                        <td class="px-1" style="color:#FFC000">75.86107014</td>
                        <td class="px-1" style="color:#C65911">64.25930676</td>
                        <td class="px-1" style="color:#92D050">86.08970133</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 SSIM P3</td>
                        <td class="px-1">31.926</td>
                        <td class="px-1 ace">1301.26</td>
                        <td class="px-1" style="color:#FFC000">40.8252</td>
                        <td class="px-1" style="color:#92D050">43.2435</td>
                        <td class="px-1" style="color:#92D050">43.9304</td>
                        <td class="px-1" style="color:#31D87D">98.834626</td>
                        <td class="px-1" style="color:#31D87D">96.901817</td>
                        <td class="px-1" style="color:#FFC000">75.14899784</td>
                        <td class="px-1" style="color:#FFC000">75.34139171</td>
                        <td class="px-1" style="color:#C65911">63.89165676</td>
                        <td class="px-1" style="color:#92D050">85.37767059</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF18 Custom</td>
                        <td class="px-1">6.68</td>
                        <td class="px-1">4334.79</td>
                        <td class="px-1 ace" style="color:#92D050">42.1004</td>
                        <td class="px-1 ace" style="color:#92D050">44.39</td>
                        <td class="px-1 ace" style="color:#31D87D">45.5117</td>
                        <td class="px-1 ace" style="color:#31D87D">99.728842</td>
                        <td class="px-1 ace" style="color:#31D87D">98.184211</td>
                        <td class="px-1 ace" style="color:#92D050">83.24602058</td>
                        <td class="px-1 ace" style="color:#92D050">83.40918464</td>
                        <td class="px-1 ace" style="color:#FFC000">78.01967156</td>
                        <td class="px-1 sec" style="color:#92D050">87.57657407</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR P3</td>
                        <td class="px-1">31.806</td>
                        <td class="px-1">1843.32</td>
                        <td class="px-1 sec" style="color:#FFC000">41.7447</td>
                        <td class="px-1 trd" style="color:#92D050">44.1381</td>
                        <td class="px-1 sec" style="color:#92D050">44.7859</td>
                        <td class="px-1" style="color:#31D87D">99.407608</td>
                        <td class="px-1" style="color:#31D87D">97.671552</td>
                        <td class="px-1 trd" style="color:#FFC000">78.85317925</td>
                        <td class="px-1 trd" style="color:#FFC000">78.87951009</td>
                        <td class="px-1" style="color:#C65911">69.75914376</td>
                        <td class="px-1 trd" style="color:#92D050">87.17429615</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM P3</td>
                        <td class="px-1">31.701</td>
                        <td class="px-1">1810.23</td>
                        <td class="px-1" style="color:#FFC000">41.6559</td>
                        <td class="px-1" style="color:#92D050">43.9722</td>
                        <td class="px-1" style="color:#92D050">44.6733</td>
                        <td class="px-1 trd" style="color:#31D87D">99.413037</td>
                        <td class="px-1 trd" style="color:#31D87D">97.691499</td>
                        <td class="px-1" style="color:#FFC000">78.79998864</td>
                        <td class="px-1" style="color:#FFC000">78.83792127</td>
                        <td class="px-1" style="color:#C65911">69.77388681</td>
                        <td class="px-1" style="color:#92D050">87.09225295</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM0 P3</td>
                        <td class="px-1">31.602</td>
                        <td class="px-1">1766.73</td>
                        <td class="px-1" style="color:#FFC000">41.2944</td>
                        <td class="px-1" style="color:#92D050">43.7038</td>
                        <td class="px-1" style="color:#92D050">44.4423</td>
                        <td class="px-1" style="color:#31D87D">99.333118</td>
                        <td class="px-1" style="color:#31D87D">97.598158</td>
                        <td class="px-1" style="color:#FFC000">78.30231156</td>
                        <td class="px-1" style="color:#FFC000">78.36263621</td>
                        <td class="px-1" style="color:#C65911">69.29068078</td>
                        <td class="px-1" style="color:#92D050">86.43200391</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 VQ P3</td>
                        <td class="px-1 sec">33.204</td>
                        <td class="px-1">1947.9</td>
                        <td class="px-1 trd" style="color:#FFC000">41.7399</td>
                        <td class="px-1 sec" style="color:#92D050">44.3139</td>
                        <td class="px-1 trd" style="color:#92D050">44.7807</td>
                        <td class="px-1 sec" style="color:#31D87D">99.434136</td>
                        <td class="px-1 sec" style="color:#31D87D">97.707896</td>
                        <td class="px-1 sec" style="color:#FFC000">79.2659128</td>
                        <td class="px-1 sec" style="color:#FFC000">79.29272234</td>
                        <td class="px-1 sec" style="color:#FFC000">70.15623321</td>
                        <td class="px-1 ace" style="color:#92D050">87.64869908</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 SSIM P3</td>
                        <td class="px-1">31.3</td>
                        <td class="px-1">1773.06</td>
                        <td class="px-1" style="color:#FFC000">41.6677</td>
                        <td class="px-1" style="color:#92D050">44.0184</td>
                        <td class="px-1" style="color:#92D050">44.6708</td>
                        <td class="px-1" style="color:#31D87D">99.278835</td>
                        <td class="px-1" style="color:#31D87D">97.492074</td>
                        <td class="px-1" style="color:#FFC000">78.67407409</td>
                        <td class="px-1" style="color:#FFC000">78.8737613</td>
                        <td class="px-1" style="color:#C65911">69.61758813</td>
                        <td class="px-1" style="color:#92D050">86.97921263</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="13"><b>Blender Fundation ElephantsDream</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF22 Custom</td>
                        <td class="px-1">7.73</td>
                        <td class="px-1">3041</td>
                        <td class="px-1" style="color:#FFC000">41.7030</td>
                        <td class="px-1" style="color:#31D87D">46.2944</td>
                        <td class="px-1" style="color:#31D87D">46.6380</td>
                        <td class="px-1" style="color:#31D87D">99.034930</td>
                        <td class="px-1" style="color:#31D87D">97.568271</td>
                        <td class="px-1" style="color:#FFC000">78.30652645</td>
                        <td class="px-1 sec" style="color:#FFC000">77.64769382</td>
                        <td class="px-1 sec" style="color:#C65911">64.95131977</td>
                        <td class="px-1" style="color:#31D87D">95.54420489</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR P3</td>
                        <td class="px-1">28.329</td>
                        <td class="px-1">1580.03</td>
                        <td class="px-1" style="color:#92D050">41.3304</td>
                        <td class="px-1" style="color:#31D87D">46.6136</td>
                        <td class="px-1" style="color:#31D87D">46.2288</td>
                        <td class="px-1" style="color:#31D87D">98.670684</td>
                        <td class="px-1" style="color:#31D87D">97.043196</td>
                        <td class="px-1" style="color:#FFC000">73.73228925</td>
                        <td class="px-1" style="color:#FFC000">73.37285235</td>
                        <td class="px-1" style="color:#541818">54.8578593</td>
                        <td class="px-1" style="color:#31D87D">93.57457526</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM P3</td>
                        <td class="px-1">28.297</td>
                        <td class="px-1">1577.01</td>
                        <td class="px-1" style="color:#92D050">41.2986</td>
                        <td class="px-1" style="color:#31D87D">46.6074</td>
                        <td class="px-1" style="color:#31D87D">46.2146</td>
                        <td class="px-1" style="color:#31D87D">98.673540</td>
                        <td class="px-1" style="color:#31D87D">97.050632</td>
                        <td class="px-1" style="color:#FFC000">73.73402693</td>
                        <td class="px-1" style="color:#FFC000">73.37710154</td>
                        <td class="px-1" style="color:#541818">54.97472344</td>
                        <td class="px-1" style="color:#31D87D">93.56296734</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM0 P3</td>
                        <td class="px-1 sec">28.546</td>
                        <td class="px-1 sec">1554.96</td>
                        <td class="px-1" style="color:#92D050">41.1478</td>
                        <td class="px-1" style="color:#31D87D">46.5566</td>
                        <td class="px-1" style="color:#31D87D">46.1390</td>
                        <td class="px-1" style="color:#31D87D">98.637709</td>
                        <td class="px-1" style="color:#31D87D">97.009951</td>
                        <td class="px-1" style="color:#FFC000">73.45726871</td>
                        <td class="px-1" style="color:#FFC000">73.05525303</td>
                        <td class="px-1" style="color:#541818">54.67047875</td>
                        <td class="px-1" style="color:#31D87D">93.51371218</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 VQ P3</td>
                        <td class="px-1 ace">28.784</td>
                        <td class="px-1 trd">1658.06</td>
                        <td class="px-1" style="color:#92D050">41.4123</td>
                        <td class="px-1" style="color:#31D87D">46.5467</td>
                        <td class="px-1" style="color:#31D87D">46.1661</td>
                        <td class="px-1" style="color:#31D87D">98.741928</td>
                        <td class="px-1" style="color:#31D87D">97.135528</td>
                        <td class="px-1" style="color:#FFC000">74.1484241</td>
                        <td class="px-1" style="color:#FFC000">73.84100191</td>
                        <td class="px-1" style="color:#541818">55.4064291</td>
                        <td class="px-1" style="color:#31D87D">93.5169439</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 SSIM P3</td>
                        <td class="px-1">28.038</td>
                        <td class="px-1 ace">1538.13</td>
                        <td class="px-1" style="color:#FFC000">41.2203</td>
                        <td class="px-1" style="color:#31D87D">46.5391</td>
                        <td class="px-1" style="color:#31D87D">46.1593</td>
                        <td class="px-1" style="color:#31D87D">98.492416</td>
                        <td class="px-1" style="color:#31D87D">96.815940</td>
                        <td class="px-1" style="color:#FFC000">73.52346418</td>
                        <td class="px-1" style="color:#FFC000">73.17031873</td>
                        <td class="px-1" style="color:#541818">55.30870611</td>
                        <td class="px-1" style="color:#31D87D">93.05800747</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF18 Custom</td>
                        <td class="px-1">6.11</td>
                        <td class="px-1">5120.43</td>
                        <td class="px-1" style="color:#92D050">43.6721</td>
                        <td class="px-1 ace" style="color:#31D87D">47.7466</td>
                        <td class="px-1 ace" style="color:#31D87D">48.1249</td>
                        <td class="px-1 ace" style="color:#31D87D">99.658051</td>
                        <td class="px-1 ace" style="color:#31D87D">98.434386</td>
                        <td class="px-1 ace" style="color:#92D050">84.12837569</td>
                        <td class="px-1 ace" style="color:#92D050">83.64339310</td>
                        <td class="px-1 ace" style="color:#FFC000">74.46127664</td>
                        <td class="px-1" style="color:#31D87D">96.50134420</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR P3</td>
                        <td class="px-1">27.78</td>
                        <td class="px-1">2253.69</td>
                        <td class="px-1 trd" style="color:#92D050">42.4226</td>
                        <td class="px-1 sec" style="color:#31D87D">47.2423</td>
                        <td class="px-1 sec" style="color:#31D87D">46.9247</td>
                        <td class="px-1" style="color:#31D87D">99.192300</td>
                        <td class="px-1" style="color:#31D87D">97.735401</td>
                        <td class="px-1 trd" style="color:#FFC000">77.95534397</td>
                        <td class="px-1" style="color:#FFC000">77.6063332</td>
                        <td class="px-1" style="color:#C65911">63.26160259</td>
                        <td class="px-1 sec" style="color:#31D87D">94.46343097</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM P3</td>
                        <td class="px-1">27.516</td>
                        <td class="px-1">2241.62</td>
                        <td class="px-1" style="color:#92D050">42.3748</td>
                        <td class="px-1" style="color:#31D87D">47.2245</td>
                        <td class="px-1" style="color:#31D87D">46.8932</td>
                        <td class="px-1 trd" style="color:#31D87D">99.192102</td>
                        <td class="px-1 trd" style="color:#31D87D">97.739201</td>
                        <td class="px-1" style="color:#FFC000">77.92935682</td>
                        <td class="px-1" style="color:#FFC000">77.58905525</td>
                        <td class="px-1" style="color:#C65911">63.31099239</td>
                        <td class="px-1 ace" style="color:#31D87D">94.5150659</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM0 P3</td>
                        <td class="px-1">27.992</td>
                        <td class="px-1">2202.75</td>
                        <td class="px-1" style="color:#92D050">42.1578</td>
                        <td class="px-1" style="color:#31D87D">47.1537</td>
                        <td class="px-1" style="color:#31D87D">46.7919</td>
                        <td class="px-1" style="color:#31D87D">99.150203</td>
                        <td class="px-1" style="color:#31D87D">97.690037</td>
                        <td class="px-1" style="color:#FFC000">77.57799079</td>
                        <td class="px-1" style="color:#FFC000">77.16378592</td>
                        <td class="px-1" style="color:#C65911">62.90816047</td>
                        <td class="px-1" style="color:#31D87D">94.43395281</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 VQ P3</td>
                        <td class="px-1 trd">28.319</td>
                        <td class="px-1">2350.97</td>
                        <td class="px-1" style="color:#92D050">42.4904</td>
                        <td class="px-1" style="color:#31D87D">47.1816</td>
                        <td class="px-1" style="color:#31D87D">46.8649</td>
                        <td class="px-1 sec" style="color:#31D87D">99.252266</td>
                        <td class="px-1 sec" style="color:#31D87D">97.814671</td>
                        <td class="px-1 sec" style="color:#FFC000">78.28962734</td>
                        <td class="px-1 trd" style="color:#FFC000">77.96771217</td>
                        <td class="px-1 trd" style="color:#C65911">63.73580664</td>
                        <td class="px-1 trd" style="color:#31D87D">94.47657123</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 SSIM P3</td>
                        <td class="px-1">27.445</td>
                        <td class="px-1">2194.22</td>
                        <td class="px-1" style="color:#92D050">42.3155</td>
                        <td class="px-1" style="color:#31D87D">47.1631</td>
                        <td class="px-1" style="color:#31D87D">46.8466</td>
                        <td class="px-1" style="color:#31D87D">99.059057</td>
                        <td class="px-1" style="color:#31D87D">97.560952</td>
                        <td class="px-1" style="color:#FFC000">77.76087565</td>
                        <td class="px-1" style="color:#FFC000">77.42435303</td>
                        <td class="px-1" style="color:#C65911">63.51118754</td>
                        <td class="px-1" style="color:#31D87D">93.97271621</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="13"><b>Netflix SolLevante</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF22 Custom</td>
                        <td class="px-1">2.73</td>
                        <td class="px-1">19648.8</td>
                        <td class="px-1" style="color:#541818">20.9812</td>
                        <td class="px-1" style="color:#FFC000">38.0531</td>
                        <td class="px-1" style="color:#C65911">35.0405</td>
                        <td class="px-1" style="color:#31D87D">98.125428</td>
                        <td class="px-1" style="color:#31D87D">96.795521</td>
                        <td class="px-1" style="color:#C65911">55.88148851</td>
                        <td class="px-1" style="color:#541818">52.56807147</td>
                        <td class="px-1" style="color:#FFF;background-color:#FF7C80">-2.62235865</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR P3</td>
                        <td class="px-1">4.334</td>
                        <td class="px-1 sec">15048.56</td>
                        <td class="px-1" style="color:#C65911">37.4796</td>
                        <td class="px-1" style="color:#FFC000">41.301</td>
                        <td class="px-1" style="color:#92D050">42.1299</td>
                        <td class="px-1" style="color:#31D87D">98.234294</td>
                        <td class="px-1" style="color:#31D87D">96.876956</td>
                        <td class="px-1" style="color:#C65911">65.97162016</td>
                        <td class="px-1" style="color:#541818">59.94357483</td>
                        <td class="px-1" style="color:#541818">32.53194259</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM P3</td>
                        <td class="px-1">4.379</td>
                        <td class="px-1 trd">15081.03</td>
                        <td class="px-1" style="color:#C65911">37.4825</td>
                        <td class="px-1" style="color:#FFC000">41.2973</td>
                        <td class="px-1" style="color:#92D050">42.1271</td>
                        <td class="px-1" style="color:#31D87D">98.245816</td>
                        <td class="px-1" style="color:#31D87D">96.897842</td>
                        <td class="px-1" style="color:#C65911">66.03889685</td>
                        <td class="px-1" style="color:#C65911">60.02430719</td>
                        <td class="px-1" style="color:#541818">32.57622116</td>
                        <td class="px-1" style="color:#31D87D">98.68322379</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM0 P3</td>
                        <td class="px-1">4.377</td>
                        <td class="px-1 ace">14778.57</td>
                        <td class="px-1" style="color:#C65911">37.4555</td>
                        <td class="px-1" style="color:#FFC000">41.2608</td>
                        <td class="px-1" style="color:#92D050">42.0718</td>
                        <td class="px-1" style="color:#31D87D">98.231956</td>
                        <td class="px-1" style="color:#31D87D">96.875528</td>
                        <td class="px-1" style="color:#C65911">65.73858934</td>
                        <td class="px-1" style="color:#541818">59.78007333</td>
                        <td class="px-1" style="color:#541818">32.03486931</td>
                        <td class="px-1" style="color:#31D87D">98.68322379</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 VQ P3</td>
                        <td class="px-1 trd">4.399</td>
                        <td class="px-1">15332.42</td>
                        <td class="px-1" style="color:#C65911">37.4686</td>
                        <td class="px-1" style="color:#FFC000">41.3226</td>
                        <td class="px-1" style="color:#92D050">42.1316</td>
                        <td class="px-1" style="color:#31D87D">98.235196</td>
                        <td class="px-1" style="color:#31D87D">96.859568</td>
                        <td class="px-1" style="color:#C65911">66.23793043</td>
                        <td class="px-1" style="color:#C65911">60.0486379</td>
                        <td class="px-1" style="color:#541818">32.76133609</td>
                        <td class="px-1" style="color:#31D87D">98.81171438</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 SSIM P3</td>
                        <td class="px-1">4.111</td>
                        <td class="px-1">16413.47</td>
                        <td class="px-1" style="color:#C65911">31.4607</td>
                        <td class="px-1 ace" style="color:#FFC000">41.8239</td>
                        <td class="px-1" style="color:#FFC000">39.4703</td>
                        <td class="px-1" style="color:#31D87D">98.078654</td>
                        <td class="px-1" style="color:#31D87D">96.63514</td>
                        <td class="px-1" style="color:#C65911">65.28679182</td>
                        <td class="px-1" style="color:#541818">59.20220066</td>
                        <td class="px-1" style="color:#541818">31.85868858</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF18 Custom</td>
                        <td class="px-1">2.39</td>
                        <td class="px-1">32862.36</td>
                        <td class="px-1" style="color:#541818">21.0524</td>
                        <td class="px-1" style="color:#FFC000">38.4039</td>
                        <td class="px-1" style="color:#C65911">35.275</td>
                        <td class="px-1 ace" style="color:#31D87D">98.951545</td>
                        <td class="px-1 ace" style="color:#31D87D">98.200316</td>
                        <td class="px-1" style="color:#C65911">68.8732738</td>
                        <td class="px-1 ace" style="color:#C65911">67.24602694</td>
                        <td class="px-1" style="color:#541818">28.23977369</td>
                        <td class="px-1 sec" style="color:#31D87D">99.82971151</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR P3</td>
                        <td class="px-1">4.336</td>
                        <td class="px-1">21280.89</td>
                        <td class="px-1 sec" style="color:#C65911">37.8511</td>
                        <td class="px-1 sec" style="color:#FFC000">41.6377</td>
                        <td class="px-1 ace" style="color:#92D050">42.6135</td>
                        <td class="px-1" style="color:#31D87D">98.615379</td>
                        <td class="px-1 trd" style="color:#31D87D">97.452872</td>
                        <td class="px-1 trd" style="color:#FFC000">72.01245585</td>
                        <td class="px-1" style="color:#C65911">66.82872302</td>
                        <td class="px-1 sec" style="color:#541818">45.26125476</td>
                        <td class="px-1 trd" style="color:#31D87D">99.29705787</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM P3</td>
                        <td class="px-1">4.333</td>
                        <td class="px-1">21167.47</td>
                        <td class="px-1 ace" style="color:#C65911">37.8514</td>
                        <td class="px-1 trd" style="color:#FFC000">41.6337</td>
                        <td class="px-1 sec" style="color:#92D050">42.6076</td>
                        <td class="px-1 trd" style="color:#31D87D">98.622843</td>
                        <td class="px-1 sec" style="color:#31D87D">97.462467</td>
                        <td class="px-1 sec" style="color:#FFC000">72.03421424</td>
                        <td class="px-1 trd" style="color:#C65911">66.91038305</td>
                        <td class="px-1 trd" style="color:#541818">45.2452499</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM0 P3</td>
                        <td class="px-1 sec">4.409</td>
                        <td class="px-1">20672.63</td>
                        <td class="px-1 trd" style="color:#C65911">37.8158</td>
                        <td class="px-1" style="color:#FFC000">41.5928</td>
                        <td class="px-1 trd" style="color:#92D050">42.5431</td>
                        <td class="px-1" style="color:#31D87D">98.601947</td>
                        <td class="px-1" style="color:#31D87D">97.42399</td>
                        <td class="px-1" style="color:#FFC000">71.617254</td>
                        <td class="px-1" style="color:#C65911">66.48754073</td>
                        <td class="px-1" style="color:#541818">44.37356138</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 VQ P3</td>
                        <td class="px-1 ace">4.432</td>
                        <td class="px-1">21665.26</td>
                        <td class="px-1" style="color:#C65911">37.4686</td>
                        <td class="px-1" style="color:#FFC000">41.3226</td>
                        <td class="px-1" style="color:#92D050">42.1316</td>
                        <td class="px-1 sec" style="color:#31D87D">98.63212</td>
                        <td class="px-1" style="color:#31D87D">97.439903</td>
                        <td class="px-1 ace" style="color:#FFC000">72.33149666</td>
                        <td class="px-1 sec" style="color:#C65911">67.03434155</td>
                        <td class="px-1 ace" style="color:#541818">45.6597599</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 SSIM P3</td>
                        <td class="px-1">4.383</td>
                        <td class="px-1">20008.12</td>
                        <td class="px-1" style="color:#C65911">37.3834</td>
                        <td class="px-1" style="color:#FFC000">41.2295</td>
                        <td class="px-1" style="color:#92D050">42.0278</td>
                        <td class="px-1" style="color:#31D87D">98.078654</td>
                        <td class="px-1" style="color:#31D87D">96.63514</td>
                        <td class="px-1" style="color:#FFC000">71.49626144</td>
                        <td class="px-1" style="color:#C65911">66.1878533</td>
                        <td class="px-1" style="color:#541818">44.68539708</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="13"><b>ドラゴン会. MAIDRAGON-S</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF22 Custom</td>
                        <td class="px-1">23.73</td>
                        <td class="px-1">1945.67</td>
                        <td class="px-1 sec" style="color:#FFC000">40.8455</td>
                        <td class="px-1 sec" style="color:#92D050">42.8648</td>
                        <td class="px-1 sec" style="color:#92D050">43.3141</td>
                        <td class="px-1" style="color:#31D87D">98.989807</td>
                        <td class="px-1" style="color:#31D87D">96.185890</td>
                        <td class="px-1" style="color:#FFC000">73.91282871</td>
                        <td class="px-1" style="color:#FFC000">77.92521321</td>
                        <td class="px-1" style="color:#541818">46.40877591</td>
                        <td class="px-1" style="color:#92D050">85.66813206</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR P3</td>
                        <td class="px-1 trd">35.645</td>
                        <td class="px-1">1289.57</td>
                        <td class="px-1" style="color:#92D050">42.3045</td>
                        <td class="px-1" style="color:#92D050">43.5883</td>
                        <td class="px-1" style="color:#92D050">43.7628</td>
                        <td class="px-1" style="color:#31D87D">99.244396</td>
                        <td class="px-1" style="color:#31D87D">96.516280</td>
                        <td class="px-1" style="color:#FFC000">77.79595955</td>
                        <td class="px-1" style="color:#92D050">80.76951847</td>
                        <td class="px-1" style="color:#541818">55.35706082</td>
                        <td class="px-1" style="color:#92D050">87.21367204</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM P3</td>
                        <td class="px-1">35.269</td>
                        <td class="px-1 trd">1264.48</td>
                        <td class="px-1" style="color:#92D050">42.2290</td>
                        <td class="px-1" style="color:#92D050">43.4291</td>
                        <td class="px-1" style="color:#92D050">43.6218</td>
                        <td class="px-1" style="color:#31D87D">99.240111</td>
                        <td class="px-1" style="color:#31D87D">96.516206</td>
                        <td class="px-1" style="color:#FFC000">77.6988655</td>
                        <td class="px-1" style="color:#92D050">80.69600714</td>
                        <td class="px-1" style="color:#541818">55.34029248</td>
                        <td class="px-1" style="color:#92D050">87.02358295</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR QM0 P3</td>
                        <td class="px-1">35.512</td>
                        <td class="px-1 sec">1258.04</td>
                        <td class="px-1" style="color:#FFC000">41.9666</td>
                        <td class="px-1" style="color:#92D050">43.1936</td>
                        <td class="px-1" style="color:#92D050">43.4126</td>
                        <td class="px-1" style="color:#31D87D">99.197680</td>
                        <td class="px-1" style="color:#31D87D">96.468397</td>
                        <td class="px-1" style="color:#FFC000">77.31179694</td>
                        <td class="px-1" style="color:#92D050">80.33342245</td>
                        <td class="px-1" style="color:#541818">54.98487067</td>
                        <td class="px-1" style="color:#92D050">86.47179056</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 VQ P3</td>
                        <td class="px-1 ace">37.573</td>
                        <td class="px-1">1358.55</td>
                        <td class="px-1" style="color:#92D050">42.2398</td>
                        <td class="px-1" style="color:#92D050">43.6137</td>
                        <td class="px-1" style="color:#92D050">43.7588</td>
                        <td class="px-1" style="color:#31D87D">99.197680</td>
                        <td class="px-1" style="color:#31D87D">96.468397</td>
                        <td class="px-1" style="color:#FFC000">78.18404438</td>
                        <td class="px-1" style="color:#92D050">81.09807098</td>
                        <td class="px-1" style="color:#541818">56.4178064</td>
                        <td class="px-1" style="color:#92D050">87.3149899</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 SSIM P3</td>
                        <td class="px-1">34.559</td>
                        <td class="px-1 ace">1220.44</td>
                        <td class="px-1" style="color:#92D050">42.1163</td>
                        <td class="px-1" style="color:#92D050">43.3465</td>
                        <td class="px-1" style="color:#92D050">43.5296</td>
                        <td class="px-1" style="color:#31D87D">99.087125</td>
                        <td class="px-1" style="color:#31D87D">96.311458</td>
                        <td class="px-1" style="color:#FFC000">77.31163552</td>
                        <td class="px-1" style="color:#FFC000">79.89184789</td>
                        <td class="px-1" style="color:#541818">55.58016882</td>
                        <td class="px-1" style="color:#92D050">87.02450024</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF18 Custom</td>
                        <td class="px-1">21.06</td>
                        <td class="px-1">3162.45</td>
                        <td class="px-1" style="color:#92D050">42.5171</td>
                        <td class="px-1 trd" style="color:#92D050">44.2124</td>
                        <td class="px-1 ace" style="color:#92D050">44.547</td>
                        <td class="px-1 sec" style="color:#31D87D">99.592478</td>
                        <td class="px-1 sec" style="color:#31D87D">97.058023</td>
                        <td class="px-1" style="color:#92D050">80.15751958</td>
                        <td class="px-1" style="color:#92D050">82.75859474</td>
                        <td class="px-1" style="color:#C65911">62.41689237</td>
                        <td class="px-1" style="color:#92D050">88.08307654</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR P3</td>
                        <td class="px-1">34.714</td>
                        <td class="px-1">1746.96</td>
                        <td class="px-1 ace" style="color:#92D050">43.2173</td>
                        <td class="px-1 sec" style="color:#92D050">44.2203</td>
                        <td class="px-1 sec" style="color:#92D050">44.3570</td>
                        <td class="px-1 trd" style="color:#31D87D">99.539781</td>
                        <td class="px-1 trd" style="color:#31D87D">96.936797</td>
                        <td class="px-1 sec" style="color:#92D050">80.7293233</td>
                        <td class="px-1 sec" style="color:#92D050">83.2105695</td>
                        <td class="px-1" style="color:#C65911">62.57713789</td>
                        <td class="px-1 sec" style="color:#92D050">88.27199543</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM P3</td>
                        <td class="px-1">34.394</td>
                        <td class="px-1">1701.28</td>
                        <td class="px-1 trd" style="color:#92D050">43.1181</td>
                        <td class="px-1" style="color:#92D050">44.04</td>
                        <td class="px-1" style="color:#92D050">44.1960</td>
                        <td class="px-1 ace" style="color:#31D87D">99.651511</td>
                        <td class="px-1 ace" style="color:#31D87D">97.180459</td>
                        <td class="px-1 trd" style="color:#92D050">80.59807135</td>
                        <td class="px-1 trd" style="color:#92D050">83.09262696</td>
                        <td class="px-1 trd" style="color:#C65911">62.58511914</td>
                        <td class="px-1" style="color:#92D050">88.03572868</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM0 P3</td>
                        <td class="px-1">34.683</td>
                        <td class="px-1">1678.91</td>
                        <td class="px-1" style="color:#92D050">42.7807</td>
                        <td class="px-1" style="color:#92D050">43.7920</td>
                        <td class="px-1" style="color:#92D050">43.9662</td>
                        <td class="px-1" style="color:#31D87D">99.499874</td>
                        <td class="px-1" style="color:#31D87D">96.893528</td>
                        <td class="px-1" style="color:#92D050">80.13878722</td>
                        <td class="px-1" style="color:#92D050">82.67207598</td>
                        <td class="px-1" style="color:#C65911">62.1303331</td>
                        <td class="px-1" style="color:#92D050">87.57267954</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 VQ P3</td>
                        <td class="px-1 sec">36.461</td>
                        <td class="px-1">1841.98</td>
                        <td class="px-1 sec" style="color:#92D050">43.1374</td>
                        <td class="px-1 ace" style="color:#92D050">44.2474</td>
                        <td class="px-1 trd" style="color:#92D050">44.3534</td>
                        <td class="px-1" style="color:#31D87D">99.485086</td>
                        <td class="px-1" style="color:#31D87D">96.874969</td>
                        <td class="px-1 ace" style="color:#92D050">81.0576056</td>
                        <td class="px-1 ace" style="color:#92D050">83.45341781</td>
                        <td class="px-1 ace" style="color:#C65911">63.52342983</td>
                        <td class="px-1 ace" style="color:#92D050">88.37986377</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 SSIM P3</td>
                        <td class="px-1">33.994</td>
                        <td class="px-1">1665.26</td>
                        <td class="px-1" style="color:#92D050">43.0734</td>
                        <td class="px-1" style="color:#92D050">44.0203</td>
                        <td class="px-1" style="color:#92D050">44.1659</td>
                        <td class="px-1" style="color:#31D87D">99.438195</td>
                        <td class="px-1" style="color:#31D87D">96.792498</td>
                        <td class="px-1" style="color:#92D050">80.37004198</td>
                        <td class="px-1" style="color:#92D050">82.49914773</td>
                        <td class="px-1 sec" style="color:#C65911">62.83002581</td>
                        <td class="px-1 trd" style="color:#92D050">88.19626015</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="13"><b>OB 会. HYOUKA</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF22 Custom</td>
                        <td class="px-1">26.26</td>
                        <td class="px-1">827.47</td>
                        <td class="px-1 sec" style="color:#FFC000">39.3288</td>
                        <td class="px-1 sec" style="color:#92D050">42.407</td>
                        <td class="px-1 sec" style="color:#92D050">42.984</td>
                        <td class="px-1" style="color:#31D87D">98.861521</td>
                        <td class="px-1" style="color:#31D87D">95.710301</td>
                        <td class="px-1" style="color:#FFC000">74.36000528</td>
                        <td class="px-1" style="color:#FFC000">75.52608593</td>
                        <td class="px-1" style="color:#C65911">60.49981158</td>
                        <td class="px-1" style="color:#92D050">83.57375015</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 PSNR P3</td>
                        <td class="px-1">44.83</td>
                        <td class="px-1">626</td>
                        <td class="px-1" style="color:#FFC000">40.8253</td>
                        <td class="px-1" style="color:#92D050">43.5643</td>
                        <td class="px-1" style="color:#92D050">43.7323</td>
                        <td class="px-1" style="color:#31D87D">99.135122</td>
                        <td class="px-1" style="color:#31D87D">96.076917</td>
                        <td class="px-1" style="color:#FFC000">79.82507743</td>
                        <td class="px-1" style="color:#92D050">81.09452443</td>
                        <td class="px-1" style="color:#C65911">67.96711951</td>
                        <td class="px-1" style="color:#92D050">86.41015394</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 QM P3</td>
                        <td class="px-1 sec">45.157</td>
                        <td class="px-1 trd">616</td>
                        <td class="px-1" style="color:#FFC000">40.8003</td>
                        <td class="px-1" style="color:#92D050">43.5060</td>
                        <td class="px-1" style="color:#92D050">43.6861</td>
                        <td class="px-1" style="color:#31D87D">99.136773</td>
                        <td class="px-1" style="color:#31D87D">96.083268</td>
                        <td class="px-1" style="color:#FFC000">79.80505612</td>
                        <td class="px-1" style="color:#92D050">81.06671569</td>
                        <td class="px-1" style="color:#C65911">67.99861326</td>
                        <td class="px-1" style="color:#92D050">86.31858358</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 QM0 P3</td>
                        <td class="px-1 trd">45.103</td>
                        <td class="px-1 sec">605.16</td>
                        <td class="px-1" style="color:#FFC000">40.6694</td>
                        <td class="px-1" style="color:#92D050">43.4026</td>
                        <td class="px-1" style="color:#92D050">43.5929</td>
                        <td class="px-1" style="color:#31D87D">99.077271</td>
                        <td class="px-1" style="color:#31D87D">96.013092</td>
                        <td class="px-1" style="color:#FFC000">79.57465176</td>
                        <td class="px-1" style="color:#92D050">80.79647596</td>
                        <td class="px-1" style="color:#C65911">67.84670635</td>
                        <td class="px-1" style="color:#92D050">86.04946409</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 VQ P3</td>
                        <td class="px-1 ace">46.994</td>
                        <td class="px-1">664.75</td>
                        <td class="px-1" style="color:#FFC000">40.7663</td>
                        <td class="px-1" style="color:#92D050">43.5503</td>
                        <td class="px-1" style="color:#92D050">43.7291</td>
                        <td class="px-1" style="color:#31D87D">99.083751</td>
                        <td class="px-1" style="color:#31D87D">96.013682</td>
                        <td class="px-1" style="color:#92D050">80.11321607</td>
                        <td class="px-1" style="color:#92D050">81.29575302</td>
                        <td class="px-1" style="color:#C65911">68.60815332</td>
                        <td class="px-1" style="color:#92D050">86.5242701</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF35 SSIM P3</td>
                        <td class="px-1">44.168</td>
                        <td class="px-1 ace">604.44</td>
                        <td class="px-1" style="color:#FFC000">40.7484</td>
                        <td class="px-1" style="color:#92D050">43.4579</td>
                        <td class="px-1" style="color:#92D050">43.6360</td>
                        <td class="px-1" style="color:#31D87D">98.997302</td>
                        <td class="px-1" style="color:#31D87D">95.897500</td>
                        <td class="px-1" style="color:#FFC000">79.60067877</td>
                        <td class="px-1" style="color:#92D050">80.69420144</td>
                        <td class="px-1" style="color:#C65911">67.8288596</td>
                        <td class="px-1" style="color:#92D050">86.27542652</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">x265</td>
                        <td class="px-1">CRF18 Custom</td>
                        <td class="px-1">24.57</td>
                        <td class="px-1">1381.65</td>
                        <td class="px-1" style="color:#FFC000">40.4798</td>
                        <td class="px-1" style="color:#92D050">43.4753</td>
                        <td class="px-1" style="color:#92D050">43.8205</td>
                        <td class="px-1 ace" style="color:#31D87D">99.462855</td>
                        <td class="px-1 ace" style="color:#31D87D">96.529797</td>
                        <td class="px-1" style="color:#FFC000">79.68937613</td>
                        <td class="px-1" style="color:#92D050">80.29604784</td>
                        <td class="px-1" style="color:#FFC000">71.18435582</td>
                        <td class="px-1" style="color:#92D050">86.6893906</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR P3</td>
                        <td class="px-1">43.113</td>
                        <td class="px-1">849.51</td>
                        <td class="px-1 ace" style="color:#FFC000">41.3418</td>
                        <td class="px-1 ace" style="color:#92D050">43.9899</td>
                        <td class="px-1 ace" style="color:#92D050">44.1166</td>
                        <td class="px-1 trd" style="color:#31D87D">99.416563</td>
                        <td class="px-1 trd" style="color:#31D87D">96.456901</td>
                        <td class="px-1 sec" style="color:#92D050">82.03787385</td>
                        <td class="px-1 sec" style="color:#92D050">83.02565519</td>
                        <td class="px-1 sec" style="color:#FFC000">72.68777288</td>
                        <td class="px-1 sec" style="color:#92D050">87.46544644</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM</td>
                        <td class="px-1">43.246</td>
                        <td class="px-1">830.18</td>
                        <td class="px-1 sec" style="color:#FFC000">41.3132</td>
                        <td class="px-1 trd" style="color:#92D050">43.9222</td>
                        <td class="px-1 trd" style="color:#92D050">44.0566</td>
                        <td class="px-1 sec" style="color:#31D87D">99.417401</td>
                        <td class="px-1 sec" style="color:#31D87D">96.463302</td>
                        <td class="px-1 trd" style="color:#92D050">82.00116606</td>
                        <td class="px-1 trd" style="color:#92D050">82.99097252</td>
                        <td class="px-1 trd" style="color:#FFC000">72.65484942</td>
                        <td class="px-1 trd" style="color:#92D050">87.35281267</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 PSNR QM0 P3</td>
                        <td class="px-1">43.43</td>
                        <td class="px-1">807.47</td>
                        <td class="px-1" style="color:#FFC000">41.1678</td>
                        <td class="px-1" style="color:#92D050">43.7995</td>
                        <td class="px-1" style="color:#92D050">43.9495</td>
                        <td class="px-1" style="color:#31D87D">99.366585</td>
                        <td class="px-1" style="color:#31D87D">96.402913</td>
                        <td class="px-1" style="color:#92D050">81.74212195</td>
                        <td class="px-1" style="color:#92D050">82.69693318</td>
                        <td class="px-1" style="color:#FFC000">72.40613868</td>
                        <td class="px-1" style="color:#92D050">87.023253</td>
                    </tr>
                    <tr class="border-bottom">
                        <td>SVTAV1</td>
                        <td class="px-1">CRF30 VQ P3</td>
                        <td class="px-1">44.81</td>
                        <td class="px-1">907.2</td>
                        <td class="px-1" style="color:#FFC000">41.2642</td>
                        <td class="px-1 sec" style="color:#92D050">43.9719</td>
                        <td class="px-1 sec" style="color:#92D050">44.1089</td>
                        <td class="px-1" style="color:#31D87D">99.372739</td>
                        <td class="px-1" style="color:#31D87D">96.403405</td>
                        <td class="px-1 ace" style="color:#92D050">82.2466764</td>
                        <td class="px-1 ace" style="color:#92D050">83.14431623</td>
                        <td class="px-1 ace" style="color:#FFC000">73.1824835</td>
                        <td class="px-1 ace" style="color:#92D050">87.50851431</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">SVT-AV1</td>
                        <td class="px-1">CRF30 SSIM P3</td>
                        <td class="px-1">42.132</td>
                        <td class="px-1">821.58</td>
                        <td class="px-1 trd" style="color:#FFC000">41.2802</td>
                        <td class="px-1" style="color:#92D050">43.8967</td>
                        <td class="px-1" style="color:#92D050">44.0327</td>
                        <td class="px-1" style="color:#31D87D">99.317524</td>
                        <td class="px-1" style="color:#31D87D">96.324076</td>
                        <td class="px-1" style="color:#92D050">81.8559474</td>
                        <td class="px-1" style="color:#92D050">82.74166944</td>
                        <td class="px-1" style="color:#FFC000">72.57400971</td>
                        <td class="px-1" style="color:#92D050">87.35136827</td>
                    </tr>
                </tbody>
            </table></div>
            <p class="text-gray-side">注：悬浮光标到单元格上方以查看完整小数</p>

            <h4>（22/22）SVT-AV1 基准测试分析</h4>
            <ol>
                <li>Tune VQ 明显提高了漫画材质动画片源的感知质量</li>
                <li>速度：
                    <ol class="text-smaller">
                        <li>除非动态信息复杂或分辨率超过 4k，SVT-AV1 Preset 3 在 x265 Preset Veryslow 时会根据片源分辨率快出 2~5 倍，x265 完败</li>
                        <li>SVT-AV1 Tune VQ 速度最快，其次是默认的 Tune PSNR，开启与关闭量化矩阵影响不大</li>
                        <li>上表的 fps 数字为平均值，而在 1920x1080 的漫画材质动画片源中，SVT-AV1 Preset 3 已经达到了 47 fps 的速度，是 x265 的 4~5 倍</li>
                    </ol>
                </li>
                <li>画质：
                    <ol class="text-smaller">
                        <li>x265 的播放画质（XPSNR）最高，但在其它指标下优势较小</li>
                        <li>x265 编码后的码率为 SVT-AV1 的 2~4 倍，但画质的差距不大，或者是两件编码器都给出视觉无损结果后失去比较意义</li>
                        <li>x265 CRF 22 出现了一次结构性失真状况（-2.62 相关），但 SVT-AV1 没有出现</li>
                        <li>在画面维持长期渐变/低对比度的情况下，x265 与 SVT-AV1 的画质差不多</li>
                        <li>SVT-AV1 Tune VQ 的综合画质得分最好，但在高动态场景下得分略差于 Tune PSNR</li>
                        <li>SVT-AV1 开启量化矩阵时，在漫画材质动画片源的 VMAF（播放画质、正常观看）、SSIMULACRA2.1（暂停画质、仔细观看）画质会提高</li>
                        <li>SVT-AV1 Tune PSNR（默认）在高动态场景下的画质得分最好，但综合上不高</li>
                        <li>无论画面类型，只要静态画面偏多，Tune VQ 就相比 Tune PSNR 有优势，否则 Tune PSNR 最好</li>
                        <li>动态信息越复杂，SVT-AV1 的画质优势越大；否则 x265 的画质优势更大</li>
                    </ol>
                </li>
                <li>码率：<span class="text-smaller">SVT-AV1 Preset 3 在 x265 Preset Veryslow 时码率只有后者的一半，x265 完败</span></li>
                <li>体验：
                    <ol class="text-smaller">
                        <li>SVT-AV1 实现了直接设定关键帧到秒数的配置，这使得设定参数更方便了</li>
                        <li>SVT-AV1 的默认进度条样式看起来像是出问题了，但实际上是正常的</li>
                        <li>SVT-AV1 在功能受限（preset 3 禁用多种帧间冗余，只使用默认量化优化）的情况下多次在速度，码率，画质上打平或超越了 x265 的自定义高参结果</li>
                    </ol>
                </li>
            </ol>

            <h3>测试——SVT-AV1 高暂停画质测试</h3>
            <p>即 Still-image tuning。</p>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）SVT-AV1 v3.0——SolLevante-高暂停画质选项</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 2 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 --qm-min 2 --tune 0 -b .\SolLevante_yuv420p10le_bt709_CRF30_qmMin2_Tune0.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                691552791              21029.16 kbps

Channel 1
Average Speed:          4.434 fps
Total Encoding Time:    1424006 ms
Total Execution Time:   1425096 ms
Average Latency:        80656 ms
Max Latency:            176001 ms

XPSNR average, 6314 frames  y: 37.8142  u: 41.6312  v: 42.5653 (minimum: 37.8142)
VMAF 4k: 98.626000, VMAF 1080p: 97.451733
SSIMULACRA2_rs: Mean: 71.52760837 Median: 66.53989790 Std Dev: 19.01065963 5th Percentile: 44.47004001 95th Percentile: 99.71058625
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 2 --tune 0 --enable-variance-boost 1 --variance-boost-strength 1 --variance-boost-curve 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 --qm-min 2 --tune 0 --enable-variance-boost 1 --variance-boost-curve 2 --variance-boost-strength 1 -b .\SolLevante_yuv420p10le_bt709_CRF30_qmMin2_Tune0_VarBoost2_BoostStrength1.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps                934195069              28407.58 kbps

Channel 1
Average Speed:          3.935 fps
Total Encoding Time:    1604714 ms
Total Execution Time:   1605766 ms
Average Latency:        91289 ms
Max Latency:            200428 ms

XPSNR average, 6314 frames  y: 38.1206  u: 41.9041  v: 42.9981 (minimum: 38.1206)
VMAF 4k: 98.787193, VMAF 1080p: 97.657617
SSIMULACRA2_rs: Mean: 77.11751053 Median: 73.30616969 Std Dev: 14.77053796 5th Percentile: 56.12591123 95th Percentile: 99.70758759
                </code></pre>

                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 2 --tune 0 --enable-variance-boost 1 --variance-boost-strength 2 --variance-boost-curve 2</code>（默认：variance-boost-strength 2）：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 --qm-min 2 --tune 0 --enable-variance-boost 1 --variance-boost-strength 2 --variance-boost-curve 2 -b .\SolLevante_yuv420p10le_bt709_CRF30_qmMin2_Tune0_VarBoostCurve2.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps               1054592259              32068.69 kbps

Channel 1
Average Speed:          3.783 fps
Total Encoding Time:    1669072 ms
Total Execution Time:   1670178 ms
Average Latency:        95345 ms
Max Latency:            206596 ms

XPSNR average, 6314 frames  y: 38.2139  u: 42.0063  v: 43.1546 (minimum: 38.2139)
VMAF 4k: 98.855014, VMAF 1080p: 97.758044
SSIMULACRA2_rs: Mean: 78.55870691 Median: 74.84582529 Std Dev: 13.70934750 5th Percentile: 59.02903995 95th Percentile: 100.00000000
                </code></pre> 
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 2 --tune 0 --enable-variance-boost 1 --variance-boost-strength 3</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 --qm-min 2 --tune 0 --enable-variance-boost 1 --variance-boost-strength 3 -b .\SolLevante_yuv420p10le_bt709_CRF30_qmMin2_Tune0_VarBoost_BoostStrength3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps               1003134687              30503.94 kbps

Channel 1
Average Speed:          3.715 fps
Total Encoding Time:    1699740 ms
Total Execution Time:   1700756 ms
Average Latency:        97186 ms
Max Latency:            212994 ms

XPSNR average, 6314 frames  y: 38.1868  u: 41.9916  v: 43.1142 (minimum: 38.1868)
VMAF 4k: 98.806389, VMAF 1080p: 97.692013
SSIMULACRA2_rs: Mean: 77.84789625 Median: 74.02788802 Std Dev: 14.29035779 5th Percentile: 57.78096614 95th Percentile: 100.00000000
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-variance-boost 1 --variance-boost-curve 2 --variance-boost-strength 3</code>（Tune 默认）：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-variance-boost 1 --variance-boost-curve 2 --variance-boost-strength 3 -b .\SolLevante_yuv420p10le_bt709_CRF30_qmMin2_VarBoost1_BoostCurve2_BoostStrength3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps               1244688788              37849.26 kbps

Channel 1
Average Speed:          3.680 fps
Total Encoding Time:    1715892 ms
Total Execution Time:   1716984 ms
Average Latency:        97946 ms
Max Latency:            217733 ms

XPSNR average, 6314 frames  y: 38.2583  u: 42.0998  v: 43.2996 (minimum: 38.2583)
VMAF 4k: 99.255388, VMAF 1080p: 98.668085
SSIMULACRA2_rs: Mean: 79.03375770 Median: 75.19569402 Std Dev: 13.30729640 5th Percentile: 60.18905311 95th Percentile: 100.00000000
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 2 --tune 0 --variance-octile 4</code>：结果与本轮首项完全一致</p>
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 2 --tune 0 --variance-octile 8</code>：结果与本轮首项完全一致</p>
                <p><code>--preset 3 --crf 30 --enable-qm 1 --qm-min 2 --tune 0 --variance-octile 2 --enable-variance-boost 1 --variance-boost-strength 2 --variance-boost-curve 2</code>（默认：variance-boost-strength 2）：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-qm 1 --qm-min 2 --tune 0 --variance-octile 2 --enable-variance-boost 1 --variance-boost-strength 2 --variance-boost-curve 2 -b .\SolLevante_yuv420p10le_bt709_CRF30_qmMin2_Tune0_.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps               1305987436              39713.27 kbps

Channel 1
Average Speed:          3.695 fps
Total Encoding Time:    1708864 ms
Total Execution Time:   1710030 ms
Average Latency:        97679 ms
Max Latency:            209255 ms

XPSNR average, 6314 frames  y: 38.4039  u: 42.2333  v: 43.4886 (minimum: 38.4039)
VMAF 4k: 98.995607, VMAF 1080p: 97.949086
SSIMULACRA2_rs: Mean: 80.73591880 Median: 77.06076447 Std Dev: 12.30163252 5th Percentile: 62.63733727 95th Percentile: 100.00000000
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --enable-variance-boost 1 --variance-boost-curve 2 --variance-boost-strength 3</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --enable-variance-boost 1 --variance-boost-curve 2 --variance-boost-strength 3 -b .\SolLevante_yuv420p10le_bt709_CRF30_qmMin2_Tune0_VarBoost_BoostCurve2_BoostStrength3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps               1484772034              45149.86 kbps

Channel 1
Average Speed:          3.597 fps
Total Encoding Time:    1755190 ms
Total Execution Time:   1756264 ms
Average Latency:        100118 ms
Max Latency:            219874 ms

XPSNR average, 6314 frames  y: 38.3074  u: 42.1168  v: 43.3133 (minimum: 38.3074)
VMAF 4k: 98.883611, VMAF 1080p: 97.775126
SSIMULACRA2_rs: 79.82330296 Median: 76.53311341 Std Dev: 12.67870103 5th Percentile: 61.14050056 95th Percentile: 99.69831884
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 2 --enable-variance-boost 1 --variance-boost-curve 2 --variance-boost-strength 3</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --variance-octile 2 --enable-variance-boost 1 --variance-boost-curve 2 --variance-boost-strength 3 -b .\SolLevante_yuv420p10le_bt709_CRF30_PSNR_VarOct2_VarBoost_BoostCurve2_BoostStrength3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
        6314            24.00 fps               1271444001              38662.85 kbps

Channel 1
Average Speed:          3.554 fps
Total Encoding Time:    1776600 ms
Total Execution Time:   1777736 ms
Average Latency:        101301 ms
Max Latency:            226049 ms

XPSNR average, 6314 frames  y: 38.3566  u: 42.2197  v: 43.4743 (minimum: 38.3566)
VMAF 4k: 98.993032, VMAF 1080p: 97.920108
SSIMULACRA2_rs: Mean: 79.07579506 Median: 75.54317772 Std Dev: 13.21970057 5th Percentile: 59.66073892 95th Percentile: 99.71539232
                </code></pre>
            </div>
            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr>
                        <th class="px-1 t-light-gray"><b>基准：</b></th>
                        <th class="px-1 t-light-gray" style="color:#31D87D">视无损</th>
                        <th class="px-1 t-light-gray" style="color:#92D050">优秀</th>
                        <th class="px-1 t-light-gray" style="color:#FFC000">良好</th>
                        <th class="px-1 t-light-gray" style="color:#C65911">达标</th>
                        <th class="px-1 t-light-gray" style="color:#541818">待达标</th>
                        <th class="px-1 t-light-gray"><b>排名：</b></th>
                        <th class="px-1 ace t-light-gray">冠军</th>
                        <th class="px-1 sec t-light-gray">亚军</th>
                        <th class="px-1 trd t-light-gray">季军</th>
                        <th class="px-1 t-light-gray" style="color:white;background-color:#FF7C80">落败犯规</th>
                    </tr>
                </thead>
            </table></div>

            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr class="border-lr">
                        <th colspan="3">高暂停画质选项测试</th>
                        <th class="px-1" colspan="3">XPSNR</th>
                        <th class="px-1" colspan="2">VMAF 0.6.1</th>
                        <th class="px-1" colspan="4">SSIMULACRA 2.1</th>
                    </tr>
                    <tr class="border-lr">
                        <th class="px-1">编码选项</th>
                        <th class="px-1">速度 fps</th>
                        <th class="px-1">码率 kbps</th>
                        <th class="px-1">Y dB</th>
                        <th class="px-1">U dB</th>
                        <th class="px-1">V dB</th>
                        <th class="px-1">4k</th>
                        <th class="px-1">1080p</th>
                        <th class="px-1">均值</th>
                        <th class="px-1">中位</th>
                        <th class="px-1">第 5%</th>
                        <th class="px-1">第 95%</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>Netflix SolLevante</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ QM2 P3</td>
                        <td class="px-1 ace">4.434</td>
                        <td class="px-1 ace">21029.16</td>
                        <td class="px-1" style="color:#C65911">37.8142</td>
                        <td class="px-1" style="color:#FFC000">41.6312</td>
                        <td class="px-1" style="color:#92D050">42.5653</td>
                        <td class="px-1" style="color:#31D87D">98.626000</td>
                        <td class="px-1" style="color:#31D87D">97.451733</td>
                        <td class="px-1" style="color:#FFC000">71.52760837</td>
                        <td class="px-1" style="color:#FFC000">66.53989790</td>
                        <td class="px-1" style="color:#541818">44.47004001</td>
                        <td class="px-1 trd" style="color:#31D87D">99.71058625</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ QM2 P3 VB-Curve2Strength1</td>
                        <td class="px-1 sec">3.935</td>
                        <td class="px-1 sec">28407.58</td>
                        <td class="px-1" style="color:#FFC000">38.1206</td>
                        <td class="px-1" style="color:#FFC000">41.9041</td>
                        <td class="px-1" style="color:#92D050">42.9981</td>
                        <td class="px-1" style="color:#31D87D">98.787193</td>
                        <td class="px-1" style="color:#31D87D">97.657617</td>
                        <td class="px-1" style="color:#FFC000">77.11751053</td>
                        <td class="px-1" style="color:#FFC000">73.02775126</td>
                        <td class="px-1" style="color:#541818">56.12591123</td>
                        <td class="px-1" style="color:#31D87D">99.70758759</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ QM2 P3 VB-Curve2Strength2</td>
                        <td class="px-1 trd">3.783</td>
                        <td class="px-1">32068.69</td>
                        <td class="px-1" style="color:#FFC000">38.2139</td>
                        <td class="px-1" style="color:#92D050">42.0063</td>
                        <td class="px-1" style="color:#92D050">43.1546</td>
                        <td class="px-1" style="color:#31D87D">98.855014</td>
                        <td class="px-1" style="color:#31D87D">97.758044</td>
                        <td class="px-1" style="color:#FFC000">78.75015548</td>
                        <td class="px-1" style="color:#FFC000">75.21661802</td>
                        <td class="px-1" style="color:#541818">59.31524830</td>
                        <td class="px-1" style="color:#31D87D">99.70655998</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 QM2 PSNR P3 VB-Strength3</td>
                        <td class="px-1">3.715</td>
                        <td class="px-1 trd">30503.94</td>
                        <td class="px-1" style="color:#FFCC00">38.1868</td>
                        <td class="px-1" style="color:#FFC000">41.9916</td>
                        <td class="px-1" style="color:#92D050">43.1142</td>
                        <td class="px-1" style="color:#31D87D">98.806389</td>
                        <td class="px-1" style="color:#31D87D">97.692013</td>
                        <td class="px-1" style="color:#FFC000">79.0337577</td>
                        <td class="px-1" style="color:#FFC000">75.19569402</td>
                        <td class="px-1 trd" style="color:#C65911">60.18905311</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ QM2 P3 VarOct2 VB-Curve2Strength2</td>
                        <td class="px-1">3.68</td>
                        <td class="px-1">37849.26</td>
                        <td class="px-1 trd" style="color:#FFCC00">38.2583</td>
                        <td class="px-1 trd" style="color:#92D050">42.0998</td>
                        <td class="px-1 trd" style="color:#92D050">43.2996</td>
                        <td class="px-1 ace" style="color:#31D87D">99.255388</td>
                        <td class="px-1 ace" style="color:#31D87D">98.668085</td>
                        <td class="px-1 ace" style="color:#92D050">80.73591880</td>
                        <td class="px-1 ace" style="color:#FFC000">77.06076447</td>
                        <td class="px-1 ace" style="color:#C65911">62.63733727</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 VarOct2 VB-Curve2Strength3</td>
                        <td class="px-1">3.597</td>
                        <td class="px-1" style="color:#FFF;background-color:#FF7C80">45149.86</td>
                        <td class="px-1 sec" style="color:#FFCC00">38.3074</td>
                        <td class="px-1 sec" style="color:#92D050">42.1168</td>
                        <td class="px-1 sec" style="color:#92D050">43.3133</td>
                        <td class="px-1 trd" style="color:#31D87D">98.883611</td>
                        <td class="px-1 trd" style="color:#31D87D">97.775126</td>
                        <td class="px-1 sec" style="color:#FFC000">79.82330296</td>
                        <td class="px-1 sec" style="color:#FFC000">76.53311341</td>
                        <td class="px-1 sec" style="color:#C65911">61.14050056</td>
                        <td class="px-1" style="color:#31D87D">99.69831884</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 VB-Curve2Strength3</td>
                        <td class="px-1">3.554</td>
                        <td class="px-1">38662.85</td>
                        <td class="px-1 ace" style="color:#FFC000">38.4039</td>
                        <td class="px-1 ace" style="color:#92D050">42.2333</td>
                        <td class="px-1 ace" style="color:#92D050">43.4886</td>
                        <td class="px-1 sec" style="color:#31D87D">98.993032</td>
                        <td class="px-1 sec" style="color:#31D87D">97.920108</td>
                        <td class="px-1 trd" style="color:#FFC000">79.07579506</td>
                        <td class="px-1 trd" style="color:#FFC000">75.54317772</td>
                        <td class="px-1" style="color:#C65911">59.66073892</td>
                        <td class="px-1 sec" style="color:#31D87D">99.71539232</td>
                    </tr>
                </tbody>
            </table></div>
            <p class="text-gray-side">注：悬浮光标到单元格上方以查看完整小数</p>
            <h4>（2/2）SVT-AV1 高暂停画质测试分析</h4>
            <ol>
                <li>注：这里的码率提升并非因为搜索不足等欠算情况限制，而是数据分析后得出“应该给予更多”的结论，码率相对地被分配到了有用之地</li>
                <li>使用 Varaince Boost 相关参数可以实现带来整体画质提升，但提升幅度最大位于 strength →1（打开）、到 2 上出现收益递减，反而没有启用 Boost Curve 2 的收益大（同样提升画质，但码率增加更少）</li>
                <li>Tune VQ 的画质综合看好于 PSNR，但码率也大幅提高，而且在动态信息复杂的画面中，Tune PSNR 比 Tune VQ 画质更好

                </li>
                <li>随着改用更激进的方差自适应量化增强（Variance Boost）设定，速度会下降，码率显著增加，整体画质上升</li>
                <li><code>--variance-boost-strength 3</code> 的增益不如 <code>--variance-boost-curve 2</code> 好</li>
            </ol>

            <h3>测试——SVT-AV1 时域降噪过滤测试</h3>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/2）SVT-AV1 v3.0——ElephantsDream-TF</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --enable-tf 2 --tf-strength 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-tf 2 --tf-strength 1 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_preset3_tf2-Strength1.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 187264735		2291.43 kbps

Channel 1
Average Speed:		27.095 fps
Total Encoding Time:	579110 ms
Total Execution Time:	579464 ms
Average Latency:	12984 ms
Max Latency:		35644 ms

XPSNR average, 15691 frames  y: 42.5085  u: 47.2551  v: 46.9452 (minimum: 42.5085)
VMAF 4k: 99.237146, VMAF 1080p: 97.795983
SSIMULACRA2_rs: Mean: 78.22777773 Median: 77.90825341 Std Dev: 9.02169880 5th Percentile: 63.48438667 95th Percentile: 94.69709169
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-tf 2 --tf-strength 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-tf 2 --tf-strength 2 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_preset3_tf2-Strength2.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 187348255		2292.45 kbps

Channel 1
Average Speed:		27.074 fps
Total Encoding Time:	579550 ms
Total Execution Time:	579938 ms
Average Latency:	12990 ms
Max Latency:		35438 ms

XPSNR average, 15691 frames  y: 42.5077  u: 47.2567  v: 46.9477 (minimum: 42.5077)
VMAF 4k: 99.238696, VMAF 1080p: 97.797929
SSIMULACRA2_rs: Mean: Mean: 78.22557615 Median: 77.90530599 Std Dev: 9.01950210 5th Percentile: 63.51705712 95th Percentile: 94.67345211
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-tf 2 --tf-strength 3</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-tf 2 --tf-strength 3 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_preset3_tf2-Strength3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 187286565		2291.70 kbps

Channel 1
Average Speed:		27.083 fps
Total Encoding Time:	579376 ms
Total Execution Time:	579720 ms
Average Latency:	12987 ms
Max Latency:		35645 ms

XPSNR average, 15691 frames  y: 42.5076  u: 47.2566  v: 46.9420 (minimum: 42.5076)
VMAF 4k: 99.235797, VMAF 1080p: 97.794291
SSIMULACRA2_rs: Mean: 78.22252190 Median: 77.91453155 Std Dev: 9.02118174 5th Percentile: 63.50577407 95th Percentile: 94.67894894
                </code></pre>
                <p><code>--preset 3 --crf 30 --enable-tf 2 --tf-strength 4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --enable-tf 2 --tf-strength 4 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_preset3_tf2-Strength4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 187340016		2292.35 kbps

Channel 1
Average Speed:		27.089 fps
Total Encoding Time:	579230 ms
Total Execution Time:	579684 ms
Average Latency:	12993 ms
Max Latency:		35463 ms

XPSNR average, 15691 frames  y: 42.5078  u: 47.2588  v: 46.9449 (minimum: 42.5078)
VMAF 4k: 99.234604, VMAF 1080p: 97.792817
SSIMULACRA2_rs: Mean: 78.22642014 Median: 77.90742740 Std Dev: 9.02076622 5th Percentile: 63.54598795 95th Percentile: 94.68495096
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --enable-tf 2 --tf-strength 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --enable-tf 2 --tf-strength 1 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_tuneVQ_preset3_tf2-Strength1.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 193999864		2373.84 kbps

Channel 1
Average Speed:		27.559 fps
Total Encoding Time:	569370 ms
Total Execution Time:	569814 ms
Average Latency:	12745 ms
Max Latency:		34960 ms

XPSNR average, 15691 frames  y: 42.5176  u: 47.1738  v: 46.8583 (minimum: 42.5176)
VMAF 4k: 99.279017, VMAF 1080p: 97.852608
SSIMULACRA2_rs: Mean: 78.34140551 Median: 78.02652168 Std Dev: 8.94275489 5th Percentile: 63.69285703 95th Percentile: 94.68040064
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --enable-tf 2 --tf-strength 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --enable-tf 2 --tf-strength 2 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_tuneVQ_preset3_tf2-Strength2.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 193934908		2373.05 kbps

Channel 1
Average Speed:		27.553 fps
Total Encoding Time:	569480 ms
Total Execution Time:	569806 ms
Average Latency:	12751 ms
Max Latency:		34618 ms

XPSNR average, 15691 frames  y: 42.5178  u: 47.1775  v: 46.8578 (minimum: 42.5178)
VMAF 4k: 99.277143, VMAF 1080p: 97.850885
SSIMULACRA2_rs: Mean: 78.34621137 Median: 78.03496570 Std Dev: 8.93514404 5th Percentile: 63.70885484 95th Percentile: 94.68040064
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --enable-tf 2 --tf-strength 3</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --enable-tf 2 --tf-strength 3 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_tuneVQ_preset3_tf2-Strength3.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 194037522		2374.30 kbps

Channel 1
Average Speed:		27.679 fps
Total Encoding Time:	566892 ms
Total Execution Time:	567246 ms
Average Latency:	12698 ms
Max Latency:		34187 ms

XPSNR average, 15691 frames  y: 42.5164  u: 47.1725  v: 46.8551 (minimum: 42.5164)
VMAF 4k: 99.276669, VMAF 1080p: 97.849802
SSIMULACRA2_rs: Mean: 78.34247749 Median: 78.03666873 Std Dev: 8.94058885 5th Percentile: 63.68956267 95th Percentile: 94.67801513
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --enable-tf 2 --tf-strength 4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --enable-tf 2 --tf-strength 4 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_crf30_tuneVQ_preset3_tf2-Strength4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 193994872		2373.78 kbps

Channel 1
Average Speed:		27.608 fps
Total Encoding Time:	568352 ms
Total Execution Time:	568696 ms
Average Latency:	12725 ms
Max Latency:		34603 ms

XPSNR average, 15691 frames  y: 42.5163  u: 47.1771  v: 46.8518 (minimum: 42.5163)
VMAF 4k: 99.276821, VMAF 1080p: 97.850148
SSIMULACRA2_rs: Mean: 78.34317414 Median: 78.04531049 Std Dev: 8.94038278 5th Percentile: 63.70302548 95th Percentile: 94.68040064
                </code></pre>
            </div>
            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr>
                        <th class="px-1 t-light-gray"><b>基准：</b></th>
                        <th class="px-1 t-light-gray" style="color:#31D87D">视无损</th>
                        <th class="px-1 t-light-gray" style="color:#92D050">优秀</th>
                        <th class="px-1 t-light-gray" style="color:#FFC000">良好</th>
                        <th class="px-1 t-light-gray" style="color:#C65911">达标</th>
                        <th class="px-1 t-light-gray" style="color:#541818">待达标</th>
                        <th class="px-1 t-light-gray"><b>排名：</b></th>
                        <th class="px-1 ace t-light-gray">冠军</th>
                        <th class="px-1 sec t-light-gray">亚军</th>
                        <th class="px-1 trd t-light-gray">季军</th>
                        <th class="px-1 t-light-gray" style="color:white;background-color:#FF7C80">落败犯规</th>
                    </tr>
                </thead>
            </table></div>

            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr class="border-lr">
                        <th colspan="3">时域降噪过滤测试</th>
                        <th class="px-1" colspan="3">XPSNR</th>
                        <th class="px-1" colspan="2">VMAF 0.6.1</th>
                        <th class="px-1" colspan="4">SSIMULACRA 2.1</th>
                    </tr>
                    <tr class="border-lr">
                        <th class="px-1">编码选项</th>
                        <th class="px-1">速度 fps</th>
                        <th class="px-1">码率 kbps</th>
                        <th class="px-1">Y dB</th>
                        <th class="px-1">U dB</th>
                        <th class="px-1">V dB</th>
                        <th class="px-1">4k</th>
                        <th class="px-1">1080p</th>
                        <th class="px-1">均值</th>
                        <th class="px-1">中位</th>
                        <th class="px-1">第 5%</th>
                        <th class="px-1">第 95%</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="13"><b>Blender F. ElephantsDream Tune PSNRq</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 TF2-Strength1</td>
                        <td class="ace px-1">27.095</td>
                        <td class="ace px-1">2291.43</td>
                        <td class="px-1 ace" style="color:#92D050">42.5085</td>
                        <td class="px-1" style="color:#31D87D">47.2551</td>
                        <td class="px-1" style="color:#31D87D">46.9452</td>
                        <td class="px-1" style="color:#31D87D">99.237146</td>
                        <td class="px-1" style="color:#31D87D">97.795983</td>
                        <td class="px-1 ace" style="color:#FFC000">78.22777773</td>
                        <td class="px-1" style="color:#FFC000">77.90825341</td>
                        <td class="px-1" style="color:#C65911">63.48438667</td>
                        <td class="px-1 ace" style="color:#31D87D">94.69709169</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 TF2-Strength2</td>
                        <td class="px-1">27.074</td>
                        <td class="px-1">2292.45</td>
                        <td class="px-1" style="color:#92D050">42.5077</td>
                        <td class="px-1" style="color:#31D87D">47.2567</td>
                        <td class="px-1 ace" style="color:#31D87D">46.9477</td>
                        <td class="px-1 ace" style="color:#31D87D">99.238696</td>
                        <td class="px-1 ace" style="color:#31D87D">97.797929</td>
                        <td class="px-1" style="color:#FFC000">78.22557615</td>
                        <td class="px-1" style="color:#FFC000">77.90530599</td>
                        <td class="px-1" style="color:#C65911">63.51705712</td>
                        <td class="px-1" style="color:#31D87D">94.67345211</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 TF2-Strength3</td>
                        <td class="px-1">27.083</td>
                        <td class="px-1">2291.70</td>
                        <td class="px-1" style="color:#92D050">42.5076</td>
                        <td class="px-1" style="color:#31D87D">47.2566</td>
                        <td class="px-1" style="color:#31D87D">46.9420</td>
                        <td class="px-1" style="color:#31D87D">99.235797</td>
                        <td class="px-1" style="color:#31D87D">97.794291</td>
                        <td class="px-1" style="color:#FFC000">78.22252190</td>
                        <td class="px-1 ace" style="color:#FFC000">77.91453155</td>
                        <td class="px-1" style="color:#C65911">63.50577407</td>
                        <td class="px-1" style="color:#31D87D">94.67894894</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 TF2-Strength4</td>
                        <td class="px-1">27.089</td>
                        <td class="px-1">2292.35</td>
                        <td class="px-1" style="color:#92D050">42.5078</td>
                        <td class="px-1 ace" style="color:#31D87D">47.2588</td>
                        <td class="px-1" style="color:#31D87D">46.9449</td>
                        <td class="px-1" style="color:#31D87D">99.234604</td>
                        <td class="px-1" style="color:#31D87D">97.792817</td>
                        <td class="px-1" style="color:#FFC000">78.22642014</td>
                        <td class="px-1" style="color:#FFC000">77.90742740</td>
                        <td class="px-1 ace" style="color:#C65911">63.54598795</td>
                        <td class="px-1" style="color:#31D87D">94.68495096</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="13"><b>Blender F. ElephantsDream Tune VQ</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 TF2-Strength1</td>
                        <td class="px-1">27.559</td>
                        <td class="px-1">2373.84</td>
                        <td class="px-1" style="color:#92D050">42.5176</td>
                        <td class="px-1" style="color:#31D87D">47.1738</td>
                        <td class="px-1 ace" style="color:#31D87D">46.8583</td>
                        <td class="px-1 ace" style="color:#31D87D">99.279017</td>
                        <td class="px-1 ace" style="color:#31D87D">97.852608</td>
                        <td class="px-1" style="color:#FFC000">78.34140551</td>
                        <td class="px-1" style="color:#FFC000">78.02652168</td>
                        <td class="px-1" style="color:#C65911">63.69285703</td>
                        <td class="px-1 ace" style="color:#31D87D">94.68040064</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 TF2-Strength2</td>
                        <td class="px-1">27.553</td>
                        <td class="px-1 ace">2373.05</td>
                        <td class="px-1 ace" style="color:#92D050">42.5178</td>
                        <td class="px-1 ace" style="color:#31D87D">47.1775</td>
                        <td class="px-1" style="color:#31D87D">46.8578</td>
                        <td class="px-1" style="color:#31D87D">99.277143</td>
                        <td class="px-1" style="color:#31D87D">97.850885</td>
                        <td class="px-1 ace" style="color:#FFC000">78.34621137</td>
                        <td class="px-1" style="color:#FFC000">78.03496570</td>
                        <td class="px-1 ace" style="color:#C65911">63.70885484</td>
                        <td class="px-1 ace" style="color:#31D87D">94.68040064</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 TF2-Strength3</td>
                        <td class="px-1 ace">27.679</td>
                        <td class="px-1">2374.30</td>
                        <td class="px-1" style="color:#92D050">42.5164</td>
                        <td class="px-1" style="color:#31D87D">47.1725</td>
                        <td class="px-1" style="color:#31D87D">46.8551</td>
                        <td class="px-1" style="color:#31D87D">99.276669</td>
                        <td class="px-1" style="color:#31D87D">97.849802</td>
                        <td class="px-1" style="color:#FFC000">78.34247749</td>
                        <td class="px-1" style="color:#FFC000">78.03666873</td>
                        <td class="px-1" style="color:#C65911">63.68956267</td>
                        <td class="px-1" style="color:#31D87D">94.67801513</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 TF2-Strength4</td>
                        <td class="px-1">27.608</td>
                        <td class="px-1">2373.78</td>
                        <td class="px-1" style="color:#92D050">42.5163</td>
                        <td class="px-1" style="color:#31D87D">47.1771</td>
                        <td class="px-1" style="color:#31D87D">46.8518</td>
                        <td class="px-1" style="color:#31D87D">99.276821</td>
                        <td class="px-1" style="color:#31D87D">97.850148</td>
                        <td class="px-1" style="color:#FFC000">78.34317414</td>
                        <td class="px-1 ace" style="color:#FFC000">78.04531049</td>
                        <td class="px-1" style="color:#C65911">63.70302548</td>
                        <td class="px-1 ace" style="color:#31D87D">94.68040064</td>
                    </tr>
                </tbody>
            </table></div>
            <h4>（2/2）SVT-AV1 时域降噪过滤分析</h4>
            <ol>
                <li>即使去掉 CRF30 PSNR、CRF30 VQ 两个基准结果，编码出的视频仍然是不分高下且差距极小</li>
                <li>在所有画质指标中，启用 <code>--enable-tf 2</code> 后都隐隐有些画质提升，但</li>
                <li>启用 <code>--enable-tf 2</code> 后，1920x1080 视频编码 fps 却下降了 0.707，而降低 CRF 非但能够达到同样的画质提升，并且不会拖累编码速度</li>
                <li>Elephants-Dream 片源包含了多种动态变化程度的场景，理论上只要有一个场景明显占优势，则测试的一系列选项就应当出现阶段性的上升/下降趋势，但跑分的变化忽高忽低，没有趋势</li>
            </ol>

            <h3>测试——SVT-AV1 胶片颗粒合成测试</h3>
            <p>观察 FGS 对胶片颗粒片源的还原程度。不包括将 FGS 用于降噪（<code>&#45;&#45;film-grain-denoise</code>）的场景。</p>

            <h4>（1/5）测试片源</h4>
            <ul>
                <li>普通：初代奥特曼 HD Remaster 2.0 1920x1080 23.976fps 8bit 420
                    <ul>
                        <li>片源含真胶片颗粒噪声，不含后期添加的伪胶片颗粒，以贴近理想工况</li>
                        <li>©株式会社円谷プロダクション</li>
                    </ul>
                </li>
            </ul>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/5）SVT-AV1 v3.0——Ultraman1-PSNR-FGS</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --tune 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 1 -b .\Ultraman1_crf30_preset3_tunePSNR.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 316918233		1669.85 kbps

Channel 1
Average Speed:		28.734 fps
Total Encoding Time:	1266902 ms
Total Execution Time:	1267234 ms
Average Latency:	12379 ms
Max Latency:		17555 ms

XPSNR average, 36403 frames  y: 38.1204  u: 36.5504  v: 41.9289 (minimum: 36.5504)
VMAF 4k: 97.738160, VMAF 1080p: 95.464609
SSIMULACRA2_rs: Mean: 53.36636097 Median: 53.61311143 5th Percentile: 38.06738244 95th Percentile: 70.01810194
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 1 --film-grain 1</code>（经过 2 次反复压制和测量，得到与前者完全相同的分数）：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 1 --film-grain 1 -b .\Ultraman1_crf30_preset3_tunePSNR_fg1.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 318162662		1676.41 kbps

Channel 1
Average Speed:		21.955 fps
Total Encoding Time:	1658036 ms
Total Execution Time:	1658382 ms
Average Latency:	16205 ms
Max Latency:		24333 ms

XPSNR average, 36403 frames  y: 38.1204  u: 36.5504  v: 41.9289 (minimum: 36.5504)
VMAF 4k: 97.738160, VMAF 1080p: 95.464609
SSIMULACRA2_rs: Mean: 53.36636097 Median: 53.61311143 Std Dev: 9.34304536 5th Percentile: 38.06738244 95th Percentile: 70.01810194
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 1 --film-grain 11</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 1 --film-grain 11 -b .\Ultraman1_crf30_preset3_tunePSNR_fg11.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 321332445		1693.11 kbps

Channel 1
Average Speed:		22.027 fps
Total Encoding Time:	1652640 ms
Total Execution Time:	1652962 ms
Average Latency:	16153 ms
Max Latency:		24457 ms

XPSNR average, 36403 frames  y: 36.5453  u: 35.3250  v: 39.5036 (minimum: 35.3250)
VMAF 4k: 97.430726, VMAF 1080p: 95.150845
SSIMULACRA2_rs: Mean: 52.02663259 Median: 52.22005542 Std Dev: 9.37747875 5th Percentile: 36.72168384 95th Percentile: 68.78530314
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 1 --film-grain 21</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 1 --film-grain 21 -b .\Ultraman1_crf30_preset3_tunePSNR_fg21.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 321728662		1695.20 kbps

Channel 1
Average Speed:		22.029 fps
Total Encoding Time:	1652470 ms
Total Execution Time:	1652810 ms
Average Latency:	16152 ms
Max Latency:		24498 ms

XPSNR average, 36403 frames  y: 35.5426  u: 34.1543  v: 39.0581 (minimum: 34.1543)
VMAF 4k: 97.235338, VMAF 1080p: 94.835942
SSIMULACRA2_rs: Mean: 49.62544972 Median: 49.86805064 Std Dev: 9.77985158 5th Percentile: 33.69016033 95th Percentile: 67.56729955
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 1 --film-grain 31</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 1 --film-grain 31 -b .\Ultraman1_crf30_preset3_tunePSNR_fg31.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 321841457		1695.79 kbps

Channel 1
Average Speed:		22.007 fps
Total Encoding Time:	1654172 ms
Total Execution Time:	1654562 ms
Average Latency:	16164 ms
Max Latency:		24477 ms

XPSNR average, 36403 frames  y: 34.7929  u: 33.5515  v: 38.8744 (minimum: 33.5515)
VMAF 4k: 97.018645, VMAF 1080p: 94.371972
SSIMULACRA2_rs: Mean: 46.73252160 Median: 46.97122122 Std Dev: 10.31346476 5th Percentile: 29.83598684 95th Percentile: 65.91101183
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 1 --film-grain 41</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 1 --film-grain 41 -b .\Ultraman1_crf30_preset3_tunePSNR_fg41.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 321864382		1695.91 kbps

Channel 1
Average Speed:		22.052 fps
Total Encoding Time:	1650808 ms
Total Execution Time:	1651226 ms
Average Latency:	16129 ms
Max Latency:		24425 ms

XPSNR average, 36403 frames  y: 34.3394  u: 33.2685  v: 38.7830 (minimum: 33.2685)
VMAF 4k: 96.762843, VMAF 1080p: 93.883978
SSIMULACRA2_rs: Mean: 44.27273142 Median: 44.12428627 Std Dev: 10.76909670 5th Percentile: 26.90948687 95th Percentile: 64.28934544
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 1 --film-grain 50</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 1 --film-grain 50 -b .\Ultraman1_crf30_preset3_tunePSNR_fg50.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 321868836		1695.93 kbps

Channel 1
Average Speed:		22.024 fps
Total Encoding Time:	1652896 ms
Total Execution Time:	1653330 ms
Average Latency:	16154 ms
Max Latency:		24494 ms

XPSNR average, 36403 frames  y: 34.1353  u: 33.1400  v: 38.7444 (minimum: 33.1400)
VMAF 4k: 96.582379, VMAF 1080p: 93.552727
SSIMULACRA2_rs: Mean: 42.76394562 Median: 42.31747622 Std Dev: 11.03823324 5th Percentile: 25.38934990 95th Percentile: 63.16879872
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/5）SVT-AV1 v3.0——Ultraman1-VQ-FGS</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --tune 0</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 -b .\Ultraman1_crf30_preset3_tuneVQ.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 390259160		2056.28 kbps

Channel 1
Average Speed:		28.810 fps
Total Encoding Time:	1263552 ms
Total Execution Time:	1263968 ms
Average Latency:	12306 ms
Max Latency:		18055 ms

XPSNR average, 36403 frames  y: 38.1717  u: 36.5926  v: 41.8143 (minimum: 36.5926)
VMAF 4k: 97.748236, VMAF 1080p: 95.534197
SSIMULACRA2_rs: Mean: 54.83524211 Median: 54.41993554 Std Dev: 8.66763291 5th Percentile: 41.58288237 95th Percentile: 70.84131535
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --film-grain 1</code>（经过 2 次反复压制和测量，得到与前者完全相同的分数）：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --film-grain 1 -b .\Ultraman1_crf30_preset3_tuneVQ_fg1.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36403            23.98 fps                391493765              2062.79 kbps

Channel 1
Average Speed:          22.209 fps
Total Encoding Time:    1639144 ms
Total Execution Time:   1639594 ms
Average Latency:        15993 ms
Max Latency:            23741 ms

XPSNR average, 36403 frames  y: 38.1717  u: 36.5926  v: 41.8143 (minimum: 36.5926)
VMAF 4k: 97.748236, VMAF 1080p: 95.534197
SSIMULACRA2_rs: Mean: 54.83524211 Median: 54.41993554 Std Dev: 8.66763291 5th Percentile: 41.58288237 95th Percentile: 70.84131535
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --film-grain 11</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --film-grain 11 -b .\Ultraman1_crf30_preset3_tuneVQ_fg11.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36403            23.98 fps                394668008              2079.51 kbps

Channel 1
Average Speed:          22.115 fps
Total Encoding Time:    1646090 ms
Total Execution Time:   1646434 ms
Average Latency:        16058 ms
Max Latency:            23908 ms

XPSNR average, 36403 frames  y: 36.5799  u: 35.3581  v: 39.4388 (minimum: 35.3581)
VMAF 4k: 97.464271, VMAF 1080p: 95.226487
SSIMULACRA2_rs: Mean: 53.45703914 Median: 53.01872083 Std Dev: 8.70676988 5th Percentile: 40.16894954 95th Percentile: 69.53730410
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --film-grain 21</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --film-grain 21 -b .\Ultraman1_crf30_preset3_tuneVQ_fg21.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 395064237		2081.60 kbps

Channel 1
Average Speed:		22.149 fps
Total Encoding Time:	1643546 ms
Total Execution Time:	1643882 ms
Average Latency:	16028 ms
Max Latency:		23919 ms

XPSNR average, 36403 frames  y: 35.5684  u: 34.1787  v: 38.9998 (minimum: 34.1787)
VMAF 4k: 97.262789, VMAF 1080p: 94.883521
SSIMULACRA2_rs: Mean: 50.99531869 Median: 50.63241591 Std Dev: 9.08637598 5th Percentile: 37.08947938 95th Percentile: 67.80717058
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --film-grain 31</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --film-grain 31 -b .\Ultraman1_crf30_preset3_tuneVQ_fg31.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 395177029		2082.20 kbps

Channel 1
Average Speed:		22.157 fps
Total Encoding Time:	1642990 ms
Total Execution Time:	1643366 ms
Average Latency:	16024 ms
Max Latency:		23924 ms

XPSNR average, 36403 frames  y: 34.8137  u: 33.5719  v: 38.8185 (minimum: 33.5719)
VMAF 4k: 97.033814, VMAF 1080p: 94.387931
SSIMULACRA2_rs: Mean: 48.03797050 Median: 47.79390298 Std Dev: 9.60530147 5th Percentile: 33.26269500 95th Percentile: 66.06963942
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --film-grain 41</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --film-grain 41 -b .\Ultraman1_crf30_preset3_tuneVQ_fg41.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 395199954		2082.32 kbps

Channel 1
Average Speed:		22.178 fps
Total Encoding Time:	1641378 ms
Total Execution Time:	1641798 ms
Average Latency:	16014 ms
Max Latency:		23839 ms

XPSNR average, 36403 frames  y: 34.3581  u: 33.2872  v: 38.7283 (minimum: 33.2872)
VMAF 4k: 96.766543, VMAF 1080p: 93.875865
SSIMULACRA2_rs: Mean: 45.53317193 Median: 44.99403922 Std Dev: 10.08795588 5th Percentile: 30.26585740 95th Percentile: 64.44994167
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 0 --film-grain 50</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 0 --film-grain 50 -b .\Ultraman1_crf30_preset3_tuneVQ_fg50.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 395204406		2082.34 kbps

Channel 1
Average Speed:		22.195 fps
Total Encoding Time:	1640178 ms
Total Execution Time:	1640588 ms
Average Latency:	15993 ms
Max Latency:		23924 ms

XPSNR average, 36403 frames  y: 34.1539  u: 33.1581  v: 38.6901 (minimum: 33.1581)
VMAF 4k: 96.580212, VMAF 1080p: 93.532338
SSIMULACRA2_rs: Mean: 44.00013351 Median: 43.23395239 Std Dev: 10.38802104 5th Percentile: 28.67493008 95th Percentile: 63.32191585
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/5）SVT-AV1 v3.0——Ultraman1-SSIM-FGS</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --tune 2</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 -b .\Ultraman1_crf30_preset3_tuneSSIM.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36403            23.98 fps                329752895              1737.48 kbps

Channel 1
Average Speed:          28.113 fps
Total Encoding Time:    1294898 ms
Total Execution Time:   1295248 ms
Average Latency:        12658 ms
Max Latency:            18755 ms

XPSNR average, 36403 frames  y: 38.1953  u: 36.5190  v: 41.8161 (minimum: 36.5190)
VMAF 4k: 97.656883, VMAF 1080p: 95.386084
SSIMULACRA2_rs: Mean: 54.10919247 Median: 54.33234161 Std Dev: 8.74666428 5th Percentile: 39.54388416 95th Percentile: 69.48821685
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2 --film-grain 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 --film-grain 1 -b .\Ultraman1_crf30_preset3_tuneSSIM_fg1.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 330999316		1744.04 kbps

Channel 1
Average Speed:		21.698 fps
Total Encoding Time:	1677690 ms
Total Execution Time:	1678030 ms
Average Latency:	16411 ms
Max Latency:		24998 ms

XPSNR average, 36403 frames  y: 38.1953  u: 36.5190  v: 41.8161 (minimum: 36.5190)
VMAF 4k: 97.656883, VMAF 1080p: 95.386084
SSIMULACRA2_rs: Mean: 54.10919247 Median: 54.33234161 Std Dev: 8.74666428 5th Percentile: 39.54388416 95th Percentile: 69.48821685
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2 --film-grain 11</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 --film-grain 11 -b .\Ultraman1_crf30_preset3_tuneSSIM_fg11.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 334168311		1760.74 kbps

Channel 1
Average Speed:		21.693 fps
Total Encoding Time:	1678098 ms
Total Execution Time:	1678426 ms
Average Latency:	16411 ms
Max Latency:		24663 ms

XPSNR average, 36403 frames  y: 36.5975  u: 35.3025  v: 39.4389 (minimum: 35.3025)
VMAF 4k: 97.348651, VMAF 1080p: 95.067241
SSIMULACRA2_rs: Mean: 52.75702301 Median: 52.94424333 Std Dev: 8.80849560 5th Percentile: 38.21905581 95th Percentile: 68.44942008
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2 --film-grain 21</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 --film-grain 21 -b .\Ultraman1_crf30_preset3_tuneSSIM_fg21.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 334564528		1762.83 kbps

Channel 1
Average Speed:		20.958 fps
Total Encoding Time:	1736928 ms
Total Execution Time:	1737262 ms
Average Latency:	16525 ms
Max Latency:		66932 ms

XPSNR average, 36403 frames  y: 35.5834  u: 34.1366  v: 39.0004 (minimum: 34.1366)
VMAF 4k: 97.149595, VMAF 1080p: 94.741050
SSIMULACRA2_rs: Mean: 50.32394820 Median: 50.50466871 Std Dev: 9.23091795 5th Percentile: 35.14961239 95th Percentile: 67.04853533
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2 --film-grain 31</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 --film-grain 31 -b .\Ultraman1_crf30_preset3_tuneSSIM_fg31.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 334677322		1763.42 kbps

Channel 1
Average Speed:		21.731 fps
Total Encoding Time:	1675164 ms
Total Execution Time:	1675582 ms
Average Latency:	16385 ms
Max Latency:		24566 ms

XPSNR average, 36403 frames  y: 34.8267  u: 33.5357  v: 38.8195 (minimum: 33.5357)
VMAF 4k: 96.929686, VMAF 1080p: 94.266828
SSIMULACRA2_rs: Mean: 47.39210271 Median: 47.51607786 Std Dev: 9.76784956 5th Percentile: 31.72506727 95th Percentile: 65.42500792
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2 --film-grain 41</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 --film-grain 41 -b .\Ultraman1_crf30_preset3_tuneSSIM_fg41.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 334700242		1763.54 kbps

Channel 1
Average Speed:		21.707 fps
Total Encoding Time:	1677042 ms
Total Execution Time:	1677376 ms
Average Latency:	16399 ms
Max Latency:		24576 ms

XPSNR average, 36403 frames  y: 34.3698  u: 33.2536  v: 38.7295 (minimum: 33.2536)
VMAF 4k: 96.672354, VMAF 1080p: 93.772334
SSIMULACRA2_rs: Mean: 44.90364237 Median: 44.67770204 Std Dev: 10.23623379 5th Percentile: 28.85350838 95th Percentile: 63.80731931
                </code></pre>
                <p><code>--preset 3 --crf 30 --tune 2 --film-grain 50</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Ultraman1.m2ts -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --crf 30 --preset 3 --tune 2 --film-grain 50 -b .\Ultraman1_crf30_preset3_tuneSSIM_fg50.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36403		23.98 fps		 334704696		1763.57 kbps

Channel 1
Average Speed:		21.716 fps
Total Encoding Time:	1676286 ms
Total Execution Time:	1676730 ms
Average Latency:	16398 ms
Max Latency:		24605 ms

XPSNR average, 36403 frames  y: 34.1650  u: 33.1257  v: 38.6915 (minimum: 33.1257)
VMAF 4k: 96.492425, VMAF 1080p: 93.439512
SSIMULACRA2_rs: Mean: 43.37989094 Median: 42.86187330 Std Dev: 10.52248577 5th Percentile: 27.33426194 95th Percentile: 62.78089483
                </code></pre>
            </div>
            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr>
                        <th class="px-1 t-light-gray"><b>基准：</b></th>
                        <th class="px-1 t-light-gray" style="color:#31D87D">视无损</th>
                        <th class="px-1 t-light-gray" style="color:#92D050">优秀</th>
                        <th class="px-1 t-light-gray" style="color:#FFC000">良好</th>
                        <th class="px-1 t-light-gray" style="color:#C65911">达标</th>
                        <th class="px-1 t-light-gray" style="color:#541818">待达标</th>
                        <th class="px-1 t-light-gray"><b>排名：</b></th>
                        <th class="px-1 ace t-light-gray">冠军</th>
                        <th class="px-1 sec t-light-gray">亚军</th>
                        <th class="px-1 trd t-light-gray">季军</th>
                        <th class="px-1 t-light-gray" style="color:white;background-color:#FF7C80">落败犯规</th>
                    </tr>
                </thead>
            </table></div>

            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr class="border-lr">
                        <th colspan="3">胶片颗粒合成测试</th>
                        <th class="px-1" colspan="3">XPSNR</th>
                        <th class="px-1" colspan="2">VMAF 0.6.1</th>
                        <th class="px-1" colspan="4">SSIMULACRA 2.1</th>
                    </tr>
                    <tr class="border-lr">
                        <th class="px-1">编码选项</th>
                        <th class="px-1">速度 fps</th>
                        <th class="px-1">码率 kbps</th>
                        <th class="px-1">Y dB</th>
                        <th class="px-1">U dB</th>
                        <th class="px-1">V dB</th>
                        <th class="px-1">4k</th>
                        <th class="px-1">1080p</th>
                        <th class="px-1">均值</th>
                        <th class="px-1">中位</th>
                        <th class="px-1">第 5%</th>
                        <th class="px-1">第 95%</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>円谷プロダクション Ultraman 1 Film Grain Synthesis (FGS) Tune PSNR</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3</td>
                        <td class="px-1 sec">28.734</td>
                        <td class="px-1 ace">1669.85</td>
                        <td class="px-1" style="color:#FFC000">38.1204</td>
                        <td class="px-1" style="color:#C65911">36.5504</td>
                        <td class="px-1" style="color:#FFC000">41.9289</td>
                        <td class="px-1" style="color:#31D87D">97.738160</td>
                        <td class="px-1" style="color:#31D87D">95.464609</td>
                        <td class="px-1" style="color:#541818">53.36636097</td>
                        <td class="px-1" style="color:#541818">53.61311143</td>
                        <td class="px-1" style="color:#541818">38.06738244</td>
                        <td class="px-1" style="color:#FFC000">70.01810194</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 FG1</td>
                        <td class="px-1">21.955</td>
                        <td class="px-1 sec">1676.41</td>
                        <td class="px-1" style="color:#FFC000">38.1204</td>
                        <td class="px-1" style="color:#C65911">36.5504</td>
                        <td class="px-1" style="color:#FFC000">41.9289</td>
                        <td class="px-1" style="color:#31D87D">97.738160</td>
                        <td class="px-1" style="color:#31D87D">95.464609</td>
                        <td class="px-1" style="color:#541818">53.36636097</td>
                        <td class="px-1" style="color:#541818">53.61311143</td>
                        <td class="px-1" style="color:#541818">38.06738244</td>
                        <td class="px-1" style="color:#FFC000">70.01810194</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 FG11</td>
                        <td class="px-1">22.027</td>
                        <td class="px-1 trd">1693.11</td>
                        <td class="px-1" style="color:#C65911">36.5453</td>
                        <td class="px-1" style="color:#C65911">35.3250</td>
                        <td class="px-1" style="color:#FFC000">39.5036</td>
                        <td class="px-1" style="color:#31D87D">97.430726</td>
                        <td class="px-1" style="color:#31D87D">95.150845</td>
                        <td class="px-1" style="color:#541818">52.02663259</td>
                        <td class="px-1" style="color:#541818">52.22005542</td>
                        <td class="px-1" style="color:#541818">36.72168384</td>
                        <td class="px-1" style="color:#C65911">68.78530314</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 FG21</td>
                        <td class="px-1">22.029</td>
                        <td class="px-1">1695.20</td>
                        <td class="px-1" style="color:#C65911">35.5426</td>
                        <td class="px-1" style="color:#C65911">34.1543</td>
                        <td class="px-1" style="color:#FFC000">39.0581</td>
                        <td class="px-1" style="color:#31D87D">97.235338</td>
                        <td class="px-1" style="color:#92D050">94.835942</td>
                        <td class="px-1" style="color:#541818">49.62544972</td>
                        <td class="px-1" style="color:#541818">49.86805064</td>
                        <td class="px-1" style="color:#541818">33.69016033</td>
                        <td class="px-1" style="color:#C65911">67.56729955</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 FG31</td>
                        <td class="px-1">22.007</td>
                        <td class="px-1">1695.79</td>
                        <td class="px-1" style="color:#C65911">34.7929</td>
                        <td class="px-1" style="color:#C65911">33.5515</td>
                        <td class="px-1" style="color:#FFC000">38.8744</td>
                        <td class="px-1" style="color:#31D87D">97.018645</td>
                        <td class="px-1" style="color:#92D050">94.371972</td>
                        <td class="px-1" style="color:#541818">46.73252160</td>
                        <td class="px-1" style="color:#541818">46.97122122</td>
                        <td class="px-1" style="color:#541818">29.83598684</td>
                        <td class="px-1" style="color:#C65911">65.91101183</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 FG41</td>
                        <td class="px-1">22.052</td>
                        <td class="px-1">1695.91</td>
                        <td class="px-1" style="color:#C65911">34.3394</td>
                        <td class="px-1" style="color:#C65911">33.2685</td>
                        <td class="px-1" style="color:#FFC000">38.7830</td>
                        <td class="px-1" style="color:#31D87D">96.762843</td>
                        <td class="px-1" style="color:#92D050">93.883978</td>
                        <td class="px-1" style="color:#541818">44.27273142</td>
                        <td class="px-1" style="color:#541818">44.12428627</td>
                        <td class="px-1" style="color:#541818">26.90948687</td>
                        <td class="px-1" style="color:#C65911">64.28934544</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 FG50</td>
                        <td class="px-1">22.024</td>
                        <td class="px-1">1695.93</td>
                        <td class="px-1" style="color:#C65911">34.1353</td>
                        <td class="px-1" style="color:#C65911">33.1400</td>
                        <td class="px-1" style="color:#FFC000">38.7444</td>
                        <td class="px-1" style="color:#31D87D">96.582379</td>
                        <td class="px-1" style="color:#92D050">93.552727</td>
                        <td class="px-1" style="color:#541818">42.76394562</td>
                        <td class="px-1" style="color:#541818">42.31747622</td>
                        <td class="px-1" style="color:#541818">25.38934990</td>
                        <td class="px-1" style="color:#C65911">63.16879872</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>円谷プロダクション Ultraman 1 Film Grain Synthesis (FGS) Tune VQ</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3</td>
                        <td class="px-1 ace">28.81</td>
                        <td class="px-1">2056.28</td>
                        <td class="px-1" style="color:#FFC000">38.1717</td>
                        <td class="px-1" style="color:#C65911">36.5926</td>
                        <td class="px-1" style="color:#FFC000">41.8143</td>
                        <td class="px-1" style="color:#31D87D">97.748236</td>
                        <td class="px-1" style="color:#31D87D">95.534197</td>
                        <td class="px-1" style="color:#541818">54.83524211</td>
                        <td class="px-1" style="color:#541818">54.41993554</td>
                        <td class="px-1" style="color:#541818">41.58288237</td>
                        <td class="px-1" style="color:#FFC000">70.84131535</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 FG1</td>
                        <td class="px-1">22.209</td>
                        <td class="px-1">2062.79</td>
                        <td class="px-1" style="color:#FFC000">38.1717</td>
                        <td class="px-1" style="color:#C65911">36.5926</td>
                        <td class="px-1" style="color:#FFC000">41.8143</td>
                        <td class="px-1" style="color:#31D87D">97.748236</td>
                        <td class="px-1" style="color:#31D87D">95.534197</td>
                        <td class="px-1" style="color:#541818">54.83524211</td>
                        <td class="px-1" style="color:#541818">54.41993554</td>
                        <td class="px-1" style="color:#541818">41.58288237</td>
                        <td class="px-1" style="color:#FFC000">70.84131535</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 FG11</td>
                        <td class="px-1">22.115</td>
                        <td class="px-1">2079.51</td>
                        <td class="px-1" style="color:#C65911">36.5799</td>
                        <td class="px-1" style="color:#C65911">35.3581</td>
                        <td class="px-1" style="color:#FFC000">39.4388</td>
                        <td class="px-1" style="color:#31D87D">97.464271</td>
                        <td class="px-1" style="color:#31D87D">95.226487</td>
                        <td class="px-1" style="color:#541818">53.45703914</td>
                        <td class="px-1" style="color:#541818">53.01872083</td>
                        <td class="px-1" style="color:#541818">40.16894954</td>
                        <td class="px-1" style="color:#C65911">69.53730410</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 FG21</td>
                        <td class="px-1">22.149</td>
                        <td class="px-1">2081.60</td>
                        <td class="px-1" style="color:#C65911">35.5684</td>
                        <td class="px-1" style="color:#C65911">34.1787</td>
                        <td class="px-1" style="color:#FFC000">38.9998</td>
                        <td class="px-1" style="color:#31D87D">97.262789</td>
                        <td class="px-1" style="color:#92D050">94.883521</td>
                        <td class="px-1" style="color:#541818">50.99531869</td>
                        <td class="px-1" style="color:#541818">50.63241591</td>
                        <td class="px-1" style="color:#541818">37.08947938</td>
                        <td class="px-1" style="color:#C65911">67.80717058</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 FG31</td>
                        <td class="px-1">22.157</td>
                        <td class="px-1">2082.20</td>
                        <td class="px-1" style="color:#C65911">34.8137</td>
                        <td class="px-1" style="color:#C65911">33.5719</td>
                        <td class="px-1" style="color:#FFC000">38.8185</td>
                        <td class="px-1" style="color:#31D87D">97.033814</td>
                        <td class="px-1" style="color:#92D050">94.387931</td>
                        <td class="px-1" style="color:#541818">48.03797050</td>
                        <td class="px-1" style="color:#541818">47.79390298</td>
                        <td class="px-1" style="color:#541818">33.26269500</td>
                        <td class="px-1" style="color:#C65911">66.06963942</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 FG41</td>
                        <td class="px-1">22.178</td>
                        <td class="px-1">2082.32</td>
                        <td class="px-1" style="color:#C65911">34.3581</td>
                        <td class="px-1" style="color:#C65911">33.2872</td>
                        <td class="px-1" style="color:#FFC000">38.7283</td>
                        <td class="px-1" style="color:#31D87D">96.766543</td>
                        <td class="px-1" style="color:#92D050">93.875865</td>
                        <td class="px-1" style="color:#541818">45.53317193</td>
                        <td class="px-1" style="color:#541818">44.99403922</td>
                        <td class="px-1" style="color:#541818">30.26585740</td>
                        <td class="px-1" style="color:#C65911">64.44994167</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 VQ P3 FG50</td>
                        <td class="px-1">22.195</td>
                        <td class="px-1">2082.34</td>
                        <td class="px-1" style="color:#C65911">34.1539</td>
                        <td class="px-1" style="color:#C65911">33.1581</td>
                        <td class="px-1" style="color:#FFC000">38.6901</td>
                        <td class="px-1" style="color:#31D87D">96.580212</td>
                        <td class="px-1" style="color:#92D050">93.532338</td>
                        <td class="px-1" style="color:#541818">44.00013351</td>
                        <td class="px-1" style="color:#541818">43.23395239</td>
                        <td class="px-1" style="color:#541818">28.67493008</td>
                        <td class="px-1" style="color:#C65911">63.32191585</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>円谷プロダクション Ultraman 1 Film Grain Synthesis (FGS) Tune SSIM</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 SSIM P3</td>
                        <td class="px-1 trd">28.113</td>
                        <td class="px-1">1737.48</td>
                        <td class="px-1" style="color:#FFC000">38.1953</td>
                        <td class="px-1" style="color:#C65911">36.5190</td>
                        <td class="px-1" style="color:#FFC000">41.8161</td>
                        <td class="px-1" style="color:#31D87D">97.656883</td>
                        <td class="px-1" style="color:#31D87D">95.386084</td>
                        <td class="px-1" style="color:#541818">54.10919247</td>
                        <td class="px-1" style="color:#541818">54.33234161</td>
                        <td class="px-1" style="color:#541818">39.54388416</td>
                        <td class="px-1" style="color:#C65911">69.48821685</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 SSIM P3 FG1</td>
                        <td class="px-1">21.698</td>
                        <td class="px-1">1744.04</td>
                        <td class="px-1" style="color:#FFC000">38.1953</td>
                        <td class="px-1" style="color:#C65911">36.5190</td>
                        <td class="px-1" style="color:#FFC000">41.8161</td>
                        <td class="px-1" style="color:#31D87D">97.656883</td>
                        <td class="px-1" style="color:#31D87D">95.386084</td>
                        <td class="px-1" style="color:#541818">54.10919247</td>
                        <td class="px-1" style="color:#541818">54.33234161</td>
                        <td class="px-1" style="color:#541818">39.54388416</td>
                        <td class="px-1" style="color:#C65911">69.48821685</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 SSIM P3 FG11</td>
                        <td class="px-1">21.693</td>
                        <td class="px-1">1760.74</td>
                        <td class="px-1" style="color:#C65911">36.5975</td>
                        <td class="px-1" style="color:#C65911">35.3025</td>
                        <td class="px-1" style="color:#FFC000">39.4389</td>
                        <td class="px-1" style="color:#31D87D">97.348651</td>
                        <td class="px-1" style="color:#31D87D">95.067241</td>
                        <td class="px-1" style="color:#541818">52.75702301</td>
                        <td class="px-1" style="color:#541818">52.94424333</td>
                        <td class="px-1" style="color:#541818">38.21905581</td>
                        <td class="px-1" style="color:#C65911">68.44942008</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 SSIM P3 FG21</td>
                        <td class="px-1">20.958</td>
                        <td class="px-1">1762.83</td>
                        <td class="px-1" style="color:#C65911">35.5834</td>
                        <td class="px-1" style="color:#C65911">34.1366</td>
                        <td class="px-1" style="color:#FFC000">39.0004</td>
                        <td class="px-1" style="color:#31D87D">97.149595</td>
                        <td class="px-1" style="color:#92D050">94.741050</td>
                        <td class="px-1" style="color:#541818">50.32394820</td>
                        <td class="px-1" style="color:#541818">50.50466871</td>
                        <td class="px-1" style="color:#541818">35.14961239</td>
                        <td class="px-1" style="color:#C65911">67.04853533</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 SSIM P3 FG31</td>
                        <td class="px-1">21.731</td>
                        <td class="px-1">1763.42</td>
                        <td class="px-1" style="color:#C65911">34.8267</td>
                        <td class="px-1" style="color:#C65911">33.5357</td>
                        <td class="px-1" style="color:#FFC000">38.8195</td>
                        <td class="px-1" style="color:#31D87D">96.929686</td>
                        <td class="px-1" style="color:#92D050">94.266828</td>
                        <td class="px-1" style="color:#541818">47.39210271</td>
                        <td class="px-1" style="color:#541818">47.51607786</td>
                        <td class="px-1" style="color:#541818">31.72506727</td>
                        <td class="px-1" style="color:#C65911">65.42500792</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 SSIM P3 FG41</td>
                        <td class="px-1">21.707</td>
                        <td class="px-1">1763.54</td>
                        <td class="px-1" style="color:#C65911">34.3698</td>
                        <td class="px-1" style="color:#C65911">33.2536</td>
                        <td class="px-1" style="color:#FFC000">38.7295</td>
                        <td class="px-1" style="color:#31D87D">96.672354</td>
                        <td class="px-1" style="color:#92D050">93.772334</td>
                        <td class="px-1" style="color:#541818">44.90364237</td>
                        <td class="px-1" style="color:#541818">44.67770204</td>
                        <td class="px-1" style="color:#541818">28.85350838</td>
                        <td class="px-1" style="color:#C65911">63.80731931</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 SSIM P3 FG50</td>
                        <td class="px-1">21.716</td>
                        <td class="px-1">1763.57</td>
                        <td class="px-1" style="color:#C65911">34.1650</td>
                        <td class="px-1" style="color:#C65911">33.1257</td>
                        <td class="px-1" style="color:#FFC000">38.6915</td>
                        <td class="px-1" style="color:#31D87D">96.492425</td>
                        <td class="px-1" style="color:#92D050">93.439512</td>
                        <td class="px-1" style="color:#541818">43.37989094</td>
                        <td class="px-1" style="color:#541818">42.86187330</td>
                        <td class="px-1" style="color:#541818">27.33426194</td>
                        <td class="px-1" style="color:#C65911">62.78089483</td>
                    </tr>
                </tbody>
            </table></div>
            <p class="text-gray-side">注：由于 FGS 本质上是噪点滤镜，因此“失真程度”不再代表画质</p>
            <p class="text-gray-side">注：悬浮光标到单元格上方以查看完整小数</p>

            <h4>（5/5）SVT-AV1 胶片颗粒合成分析</h4>
            <ol>
                <li>FGS 最低强度下无效，还会徒增码率</li>
                <li>不使用 FGS 时，时域降噪过滤（TF）以及其他编码功能会抹除噪点，这一点在表中分数中无法看出，但肉眼可以明显看出“FGS 强度越高，涂抹越少”的规律</li>
                <li>FGS 通过总结规律来复现噪点，因此尽管肉眼可见 <code>--film-grain &gt;=21</code> 时的编码结果与片源的噪声观感高度一致（远好于关闭），画质指标分数却在下降</li>
                <li>Tune PSNR 下在开启 FGS，并提高到 <code>--film-grain 21</code> 时，仍能通过肉眼观察到低对比度场景的微量涂抹痕迹，Tune VQ 下涂抹痕迹最隐蔽
                    <ul><li>“涂抹痕迹”指类似于“噪点分辨率降低，变得像色斑”的画面效果，推测是小噪点被平滑模糊，而大噪点还在</li></ul>
                </li>
            </ol>

            <h3>测试——SVT-AV1 大范围优化测试</h3>
            <p>降低启用 VAQ 的 Superblock 结构区分阈值、指定锐度优先的模式决策选项。</p>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/8）SVT-AV1 v3.0——SolLevante</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --sharpness -4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness -4 -b .\Encoding-SVTAV1-sharpness\SolLevante_yuv420p10le_bt709_sharpness-4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        6314		24.00 fps		 700233684		21293.14 kbps

Channel 1
Average Speed:		4.375 fps
Total Encoding Time:	1443290 ms
Total Execution Time:	1444524 ms
Average Latency:	81568 ms
Max Latency:		178620 ms

XPSNR average, 6314 frames  y: 37.8526  u: 41.6389  v: 42.6158 (minimum: 37.8526)
VMAF 4k: 98.617551, VMAF 1080p: 97.460014
SSIMULACRA2_rs: Mean: 71.39326874, Median: 66.46212194, Std Dev: 19.12876498, 5th Percentile: 44.23334100, 95th Percentile: 99.70832394
                </code></pre>
                <p><code>--preset 3 --crf 30 --sharpness 7</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness 7 -b .\Encoding-SVTAV1-sharpness\SolLevante_yuv420p10le_bt709_sharpness7.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        6314		24.00 fps		 880181393		26765.10 kbps

Channel 1
Average Speed:		4.300 fps
Total Encoding Time:	1468500 ms
Total Execution Time:	1469660 ms
Average Latency:	82979 ms
Max Latency:		188282 ms

XPSNR average, 6314 frames  y: 37.9283  u: 41.9407  v: 43.0179 (minimum: 37.9283)
VMAF 4k: 98.614205, VMAF 1080p: 97.442568
SSIMULACRA2_rs: Mean: 73.56907648, Median: 69.12810867, Std Dev: 17.62359176, 5th Percentile: 48.62165015, 95th Percentile: 99.67355643
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 4 -b .\SolLevante_yuv420p10le_bt709_varOct4_sharpness4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        6314		24.00 fps		 823815293		25051.08 kbps

Channel 1
Average Speed:		4.382 fps
Total Encoding Time:	1440998 ms
Total Execution Time:	1442210 ms
Average Latency:	81506 ms
Max Latency:		183859 ms

XPSNR average, 6314 frames  y: 37.9366  u: 41.8746  v: 42.9372 (minimum: 37.9366)
VMAF 4k: 98.648747, VMAF 1080p: 97.480696
SSIMULACRA2_rs: Mean: 73.59818290, Median: 69.05681942, Std Dev: 17.47662705, 5th Percentile: 49.11113058, 95th Percentile: 99.65378475
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 6</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\SolLevante_yuv420p10le_bt709_3840x2160_24fps_yuv420p10le.mkv -f yuv4mpegpipe -strict -1 - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 6 -b .\SolLevante_yuv420p10le_bt709_varOct4_sharpness6.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        6314		24.00 fps		 872171164		26521.52 kbps

Channel 1
Average Speed:		4.376 fps
Total Encoding Time:	1442708 ms
Total Execution Time:	1443780 ms
Average Latency:	81549 ms
Max Latency:		184788 ms

XPSNR average, 6314 frames  y: 37.9356  u: 41.9344  v: 43.0127 (minimum: 37.9356)
VMAF 4k: 98.617526, VMAF 1080p: 97.445262
SSIMULACRA2_rs: Mean: 73.64555984, Median: 69.16459719, Std Dev: 17.54444722, 5th Percentile: 48.84941258, 95th Percentile: 99.68029509
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/8）SVT-AV1 v3.0——Boat</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --sharpness -4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness -4 -b .\Encoding-SVTAV1-sharpness\Netflix_Boat_yuv420p10le_sharpness-4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
         300		60.00 fps		  18875392		30200.63 kbps

Channel 1
Average Speed:		3.393 fps
Total Encoding Time:	88424 ms
Total Execution Time:	89908 ms
Average Latency:	48790 ms
Max Latency:		78677 ms

XPSNR average, 300 frames  y: 37.7367  u: 41.3634  v: 43.2249 (minimum: 37.7367)
VMAF 4k: 98.496979, VMAF 1080p: 98.469081
SSIMULACRA2_rs: Mean: 70.53741946, Median: 70.38764815, Std Dev: 1.41955405, 5th Percentile: 68.47460552, 95th Percentile: 73.02422406
                </code></pre>
                <p><code>--preset 3 --crf 30 --sharpness 7</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness 7 -b .\Encoding-SVTAV1-sharpness\Netflix_Boat_yuv420p10le_sharpness7.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
         300		60.00 fps		  22626636		36202.62 kbps

Channel 1
Average Speed:		3.652 fps
Total Encoding Time:	82158 ms
Total Execution Time:	83322 ms
Average Latency:	45285 ms
Max Latency:		71822 ms

XPSNR average, 300 frames  y: 37.7489  u: 41.6589  v: 43.6475 (minimum: 37.7489)
VMAF 4k: 97.978343, VMAF 1080p: 98.109212
SSIMULACRA2_rs: Mean: 72.03051429, Median: 72.05892614, Std Dev: 1.75385215, 5th Percentile: 69.41311781, 95th Percentile: 74.86018379
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 4 -b .\Netflix_Boat_yuv420p10le_varOct4_sharpness4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
         300		60.00 fps		  21382861		34212.58 kbps

Channel 1
Average Speed:		3.597 fps
Total Encoding Time:	83410 ms
Total Execution Time:	84536 ms
Average Latency:	46079 ms
Max Latency:		73953 ms

XPSNR average, 300 frames  y: 37.7780  u: 41.6035  v: 43.5482 (minimum: 37.7780)
VMAF 4k: 98.351882, VMAF 1080p: 98.330377
SSIMULACRA2_rs: Mean: 72.40393052, Median: 72.42377592, Std Dev: 1.53203186, 5th Percentile: 70.10772502, 95th Percentile: 75.00945373
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 6</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_Boat_4096x2160_60fps_10bit_420.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict unofficial - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 6 -b .\Netflix_Boat_yuv420p10le_varOct4_sharpness6.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
         300		60.00 fps		  22411999		35859.20 kbps

Channel 1
Average Speed:		3.666 fps
Total Encoding Time:	81842 ms
Total Execution Time:	83012 ms
Average Latency:	45066 ms
Max Latency:		72274 ms

XPSNR average, 300 frames  y: 37.7574  u: 41.6517  v: 43.6419 (minimum: 37.7574)
VMAF 4k: 98.164098, VMAF 1080p: 98.055403
SSIMULACRA2_rs: Mean: 72.14692563, Median: 72.11854599, Std Dev: 1.72572335, 5th Percentile: 69.59369402, 95th Percentile: 74.93923985
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/8）SVT-AV1 v3.0——WindAndNature</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --sharpness -4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict -1 - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness -4 -b .\WindAndNature_sharpness-4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        1199		60.00 fps		  23161509		9272.33 kbps

Channel 1
Average Speed:		5.214 fps
Total Encoding Time:	229978 ms
Total Execution Time:	231406 ms
Average Latency:	55746 ms
Max Latency:		79839 ms

XPSNR average, 1199 frames  y: 36.9318  u: 42.9919  v: 40.7470 (minimum: 36.9318)
VMAF 4k: 98.381549, VMAF 1080p: 95.514520
SSIMULACRA2_rs: Mean: 68.95440678, Median: 70.74238004, Std Dev: 3.75860356, 5th Percentile: 62.19728635, 95th Percentile: 73.05469714
                </code></pre>
                <p><code>--preset 3 --crf 30 --sharpness 7</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict -1 - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness 7 -b .\WindAndNature_sharpness7.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        1199		60.00 fps		  28381634		11362.12 kbps

Channel 1
Average Speed:		4.903 fps
Total Encoding Time:	244538 ms
Total Execution Time:	245662 ms
Average Latency:	59378 ms
Max Latency:		84796 ms

XPSNR average, 1199 frames  y: 36.9136  u: 43.3211  v: 40.9821 (minimum: 36.9136)
VMAF 4k: 98.348606, VMAF 1080p: 95.461319
SSIMULACRA2_rs: Mean: 69.55518284, Median: 71.87262372, Std Dev: 4.51632497, 5th Percentile: 61.33852667, 95th Percentile: 74.12504793
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict -1 - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 4 -b .\WindAndNature_4096x2160_60fps_10bit_yuv420_varOct4_sharpness4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        1199		60.00 fps		  26780649		10721.19 kbps

Channel 1
Average Speed:		5.089 fps
Total Encoding Time:	235596 ms
Total Execution Time:	236980 ms
Average Latency:	57044 ms
Max Latency:		81474 ms

XPSNR average, 1199 frames  y: 36.9506  u: 43.2836  v: 40.9497 (minimum: 36.9506)
VMAF 4k: 98.436272, VMAF 1080p: 95.584718
SSIMULACRA2_rs: Mean: 69.93547059, Median: 72.02165699, Std Dev: 4.12987469, 5th Percentile: 62.49686317, 95th Percentile: 74.18941581
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 6</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Netflix_WindAndNature_4096x2160_60fps_10bit_420.video.mkv -f yuv4mpegpipe -pix_fmt yuv420p10le -strict -1 - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 6 -b .\WindAndNature_4096x2160_60fps_10bit_yuv420_varOct4_sharpness6.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        1199		60.00 fps		  28146449		11267.97 kbps

Channel 1
Average Speed:		5.024 fps
Total Encoding Time:	238676 ms
Total Execution Time:	239830 ms
Average Latency:	57884 ms
Max Latency:		82151 ms

XPSNR average, 1199 frames  y: 36.9230  u: 43.3215  v: 40.9769 (minimum: 36.9230)
VMAF 4k: 98.418351, VMAF 1080p: 95.550267
SSIMULACRA2_rs: Mean: 69.68736029, Median: 71.96413622, Std Dev: 4.43996726, 5th Percentile: 61.62786558, 95th Percentile: 74.19731887
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/8）SVT-AV1 v3.0——Big-Buck-Bunny</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --sharpness -4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness -4 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_sharpness-4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       14315		24.00 fps		 137597897		1845.53 kbps

Channel 1
Average Speed:		31.130 fps
Total Encoding Time:	459842 ms
Total Execution Time:	460226 ms
Average Latency:	11038 ms
Max Latency:		20587 ms

XPSNR average, 14315 frames  y: 41.7481  u: 44.1375  v: 44.7901 (minimum: 41.7481)
VMAF 4k: 99.409823, VMAF 1080p: 97.674849
SSIMULACRA2_rs: Mean: 78.87837612, Median: 78.92618400, Std Dev: 5.62310767, 5th Percentile: 69.82498734, 95th Percentile: 87.16717944
                </code></pre>
                <p><code>--preset 3 --crf 30 --sharpness 7</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness 7 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_sharpness7.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       14315		24.00 fps		 167281439		2243.66 kbps

Channel 1
Average Speed:		31.182 fps
Total Encoding Time:	459082 ms
Total Execution Time:	459442 ms
Average Latency:	11021 ms
Max Latency:		20700 ms

XPSNR average, 14315 frames  y: 41.9934  u: 44.6798  v: 45.3542 (minimum: 41.9934)
VMAF 4k: 99.442550, VMAF 1080p: 97.718648
SSIMULACRA2_rs: Mean: 80.10027427, Median: 80.33368144, Std Dev: 5.28446460, 5th Percentile: 71.22452404, 95th Percentile: 87.64426182
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 4 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_varOct4_sharpness4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       14315		24.00 fps		 158976017		2132.27 kbps

Channel 1
Average Speed:		31.819 fps
Total Encoding Time:	449884 ms
Total Execution Time:	450232 ms
Average Latency:	10787 ms
Max Latency:		20301 ms

XPSNR average, 14315 frames  y: 41.9978  u: 44.6105  v: 45.2615 (minimum: 41.9978)
VMAF 4k: 99.473124, VMAF 1080p: 97.763646
SSIMULACRA2_rs: Mean: 80.16393211, Median: 80.30066873, Std Dev: 5.16796143, 5th Percentile: 71.66992501, 95th Percentile: 87.64317683
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 6</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420p.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 6 -b .\Big-Buck-Bunny_1920x1080_24fps_8bit_yuv420_varOct4_sharpness6.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       14315		24.00 fps		 166249634		2229.82 kbps

Channel 1
Average Speed:		31.849 fps
Total Encoding Time:	449472 ms
Total Execution Time:	449816 ms
Average Latency:	10789 ms
Max Latency:		20106 ms

XPSNR average, 14315 frames  y: 42.0018  u: 44.6737  v: 45.3419 (minimum: 42.0018)
VMAF 4k: 99.449854, VMAF 1080p: 97.728519
SSIMULACRA2_rs: Mean: 80.15161320, Median: 80.37899632, Std Dev: 5.24311288, 5th Percentile: 71.41724127, 95th Percentile: 87.70318448
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（5/8）SVT-AV1 v3.0——ElephantsDream</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --sharpness -4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness -4 -b .\Elephants-Dream_sharpness-4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 184297737		2255.12 kbps

Channel 1
Average Speed:		27.179 fps
Total Encoding Time:	577320 ms
Total Execution Time:	577676 ms
Average Latency:	12956 ms
Max Latency:		35616 ms

XPSNR average, 15691 frames  y: 42.4261  u: 47.2401  v: 46.9269 (minimum: 42.4261)
VMAF 4k: 99.198864, VMAF 1080p: 97.743535
SSIMULACRA2_rs: Mean: 77.98601451, Median: 77.66520187, Std Dev: 9.04238615, 5th Percentile: 63.30624455, 95th Percentile: 94.50297387
                </code></pre>
                <p><code>--preset 3 --crf 30 --sharpness 7</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness 7 -b .\Elephants-Dream_sharpness7.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 224325880		2744.92 kbps

Channel 1
Average Speed:		26.993 fps
Total Encoding Time:	581310 ms
Total Execution Time:	581656 ms
Average Latency:	13052 ms
Max Latency:		35350 ms

XPSNR average, 15691 frames  y: 42.7494  u: 47.8512  v: 47.5722 (minimum: 42.7494)
VMAF 4k: 99.243406, VMAF 1080p: 97.801530
SSIMULACRA2_rs: Mean: 79.37981615, Median: 79.12843803, Std Dev: 8.43298267, 5th Percentile: 65.60445560, 95th Percentile: 94.55790120
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 4 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_varOct4_sharpness4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 212230205		2596.92 kbps

Channel 1
Average Speed:		27.659 fps
Total Encoding Time:	567304 ms
Total Execution Time:	567636 ms
Average Latency:	12716 ms
Max Latency:		34960 ms

XPSNR average, 15691 frames  y: 42.7320  u: 47.7134  v: 47.4411 (minimum: 42.7320)
VMAF 4k: 99.280471, VMAF 1080p: 97.853006
SSIMULACRA2_rs: Mean: 79.39059832, Median: 79.09108544, Std Dev: 8.35808579, 5th Percentile: 65.82060219, 95th Percentile: 94.60718743
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 6</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\Elephants-Dream_1920x1080_24fps_8bit_yuv420.mkv -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 6 -b .\Elephants-Dream_1920x1080_24fps_8bit_yuv420_varOct4_sharpness6.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 222594799		2723.74 kbps

Channel 1
Average Speed:		27.449 fps
Total Encoding Time:	571638 ms
Total Execution Time:	572058 ms
Average Latency:	12829 ms
Max Latency:		34474 ms

XPSNR average, 15691 frames  y: 42.7557  u: 47.8355  v: 47.5582 (minimum: 42.7557)
VMAF 4k: 99.249226, VMAF 1080p: 97.810048
SSIMULACRA2_rs: Mean: 79.43103579, Median: 79.17019473, Std Dev: 8.38901830, 5th Percentile: 65.75786270, 95th Percentile: 94.64559855
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（6/8）SVT-AV1 v3.0——MAINDRAGON-S</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --sharpness -4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness -4 -b .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps_8bit_yuv420_sharpness-4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 310728426		1748.83 kbps

Channel 1
Average Speed:		34.131 fps
Total Encoding Time:	998500 ms
Total Execution Time:	998900 ms
Average Latency:	10038 ms
Max Latency:		23203 ms

XPSNR average, 34080 frames  y: 43.2197  u: 44.2228  v: 44.3593 (minimum: 43.2197)
VMAF 4k: 99.542126, VMAF 1080p: 96.940731
SSIMULACRA2_rs: Mean: 80.75135291, Median: 83.23015219, Std Dev: 8.09634825, 5th Percentile: 62.76311131, 95th Percentile: 88.25091879
                </code></pre>
                <p><code>--preset 3 --crf 30 --sharpness 7</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness 7 -b .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps_8bit_yuv420_sharpness7.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 372159167		2094.58 kbps

Channel 1
Average Speed:		34.293 fps
Total Encoding Time:	993778 ms
Total Execution Time:	994198 ms
Average Latency:	9982 ms
Max Latency:		23508 ms

XPSNR average, 34080 frames  y: 43.3979  u: 44.5454  v: 44.6909  (minimum: 43.3979)
VMAF 4k: 99.556616, VMAF 1080p: 96.964112
SSIMULACRA2_rs: Mean: 81.54915159, Median: 83.93295163, Std Dev: 8.01001192, 5th Percentile: 63.38714191, 95th Percentile: 89.01016059
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 4 -b .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps_8bit_yuv420_varOct4_sharpness4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 356882060		2008.59 kbps

Channel 1
Average Speed:		34.811 fps
Total Encoding Time:	979014 ms
Total Execution Time:	979404 ms
Average Latency:	9837 ms
Max Latency:		22738 ms

XPSNR average, 34080 frames  y: 43.4176  u: 44.5330  v: 44.6729 (minimum: 43.4176)
VMAF 4k: 99.576204, VMAF 1080p: 96.993265
SSIMULACRA2_rs: Mean: 81.60664098, Median: 83.87342514, Std Dev: 7.71022348, 5th Percentile: 64.41000186, 95th Percentile: 88.89335786
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 6</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 6 -b .\MAIDRAGON-S-Vol.3-1920x1080-23.976fps_8bit_yuv420_varOct4_sharpness6.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 370668242		2086.19 kbps

Channel 1
Average Speed:		34.803 fps
Total Encoding Time:	979212 ms
Total Execution Time:	979554 ms
Average Latency:	9838 ms
Max Latency:		23101 ms

XPSNR average, 34080 frames  y: 43.4038  u: 44.5455  v: 44.6917 (minimum: 43.4038)
VMAF 4k: 99.561552, VMAF 1080p: 96.971028
SSIMULACRA2_rs: Mean: 81.58295017, Median: 83.93074174, Std Dev: 7.93248959, 5th Percentile: 63.63556010, 95th Percentile: 89.00044052
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（7/8）SVT-AV1 v3.0——HYOUKA</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --sharpness -4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness -4 -b .\HYOUKA_8bit_yuv420_sharpness-4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36996		23.98 fps		 163837972		849.43 kbps

Channel 1
Average Speed:		43.312 fps
Total Encoding Time:	854176 ms
Total Execution Time:	854518 ms
Average Latency:	7868 ms
Max Latency:		20980 ms

XPSNR average, 36996 frames  y: 41.3422  u: 43.9899  v: 44.1144 (minimum: 41.3422)
VMAF 4k: 99.417102, VMAF 1080p: 96.457463
SSIMULACRA2_rs: Mean: 82.03956196, Median: 83.02276494, Std Dev: 5.22218128, 5th Percentile: 72.70159427, 95th Percentile: 87.43146630
                </code></pre>
                <p><code>--preset 3 --crf 30 --sharpness 7</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --sharpness 7 -b .\HYOUKA_8bit_yuv420_sharpness7.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36996		23.98 fps		 199448550		1034.05 kbps

Channel 1
Average Speed:		42.666 fps
Total Encoding Time:	867110 ms
Total Execution Time:	867462 ms
Average Latency:	7994 ms
Max Latency:		22343 ms

XPSNR average, 36996 frames  y: 41.4302  u: 44.1618  v: 44.2773 (minimum: 41.4302)
VMAF 4k: 99.476968, VMAF 1080p: 96.714112
SSIMULACRA2_rs: Mean: 82.69596542, Median: 83.53691322, Std Dev: 4.84536568, 5th Percentile: 74.13583208, 95th Percentile: 87.73552867
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 4</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 4 -b .\ICECREAM_8bit_yuv420_varOct4_sharpness4.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                188280088              976.15 kbps

Channel 1
Average Speed:          43.785 fps
Total Encoding Time:    844940 ms
Total Execution Time:   845298 ms
Average Latency:        7786 ms
Max Latency:            21687 ms

XPSNR average, 36996 frames  y: 41.4313  u: 44.1557  v: 44.2669 (minimum: 41.4313)
VMAF 4k: 99.468693, VMAF 1080p: 96.530549
SSIMULACRA2_rs: Mean: 82.66629557, Median: 83.52790241, Std Dev: 4.84092372, 5th Percentile: 74.12805535, 95th Percentile: 87.74530647
                </code></pre>
                <p><code>--preset 3 --crf 30 --variance-octile 4 --sharpness 6</code>：</p>
                <pre><code class="text-smaller language-powershell">
ffmpeg -i .\HYOUKA-Vol.4-1920x1080-23.976fps-8bit-420.m2ts -f yuv4mpegpipe - | SvtAv1EncApp -i - --keyint 12s --preset 3 --crf 30 --variance-octile 4 --sharpness 6 -b .\ICECREAM_8bit_yuv420_varOct4_sharpness6.ivf

SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames            Frame Rate              Byte Count              Bitrate
       36996            23.98 fps                198141833              1027.28 kbps

Channel 1
Average Speed:          43.524 fps
Total Encoding Time:    850012 ms
Total Execution Time:   850358 ms
Average Latency:        7833 ms
Max Latency:            21529 ms

XPSNR average, 36996 frames  y: 41.4331  u: 44.1651  v: 44.2771 (minimum: 41.4331)
VMAF 4k: 99.468020, VMAF 1080p: 96.531517
SSIMULACRA2_rs: Mean: 82.71404144, Median: 83.55282859, Std Dev: 4.82887766, 5th Percentile: 74.20108975, 95th Percentile: 87.75174639
                </code></pre>
            </div>
            <h4>简化说明</h4>
            <p><code>--preset 3 --crf 30</code> 下，<code>--sharpness 4</code> 测试、<code>--variance-octile 2 --sharpness 4</code> 测试、<code>--variance-octile 4 --sharpness 4</code> 测试于所有视频体积、跑分结果完全一致；<code>--sharpness 6</code> 测试、<code>--variance-octile 2 --sharpness 6</code> 测试、<code>--variance-octile 4 --sharpness 6</code> 测试于所有视频体积、跑分结果完全一致，因此判断单独开启 VarOct 无效，且不再表中展示 VarOct 结果。</p>
            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr>
                        <th class="px-1 t-light-gray"><b>基准：</b></th>
                        <th class="px-1 t-light-gray" style="color:#31D87D">视无损</th>
                        <th class="px-1 t-light-gray" style="color:#92D050">优秀</th>
                        <th class="px-1 t-light-gray" style="color:#FFC000">良好</th>
                        <th class="px-1 t-light-gray" style="color:#C65911">达标</th>
                        <th class="px-1 t-light-gray" style="color:#541818">待达标</th>
                        <th class="px-1 t-light-gray"><b>排名：</b></th>
                        <th class="px-1 ace t-light-gray">冠军</th>
                        <th class="px-1 sec t-light-gray">亚军</th>
                        <th class="px-1 trd t-light-gray">季军</th>
                        <th class="px-1 t-light-gray" style="color:white;background-color:#FF7C80">落败犯规</th>
                    </tr>
                </thead>
            </table></div>

            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr class="border-lr">
                        <th colspan="3">大范围优化测试</th>
                        <th class="px-1" colspan="3">XPSNR</th>
                        <th class="px-1" colspan="2">VMAF 0.6.1</th>
                        <th class="px-1" colspan="4">SSIMULACRA 2.1</th>
                    </tr>
                    <tr class="border-lr">
                        <th class="px-1">编码选项</th>
                        <th class="px-1">速度 fps</th>
                        <th class="px-1">码率 kbps</th>
                        <th class="px-1">Y dB</th>
                        <th class="px-1">U dB</th>
                        <th class="px-1">V dB</th>
                        <th class="px-1">4k</th>
                        <th class="px-1">1080p</th>
                        <th class="px-1">均值</th>
                        <th class="px-1">中位</th>
                        <th class="px-1">第 5%</th>
                        <th class="px-1">第 95%</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>Netflix Boat</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp-4</td>
                        <td class="px-1">3.393</td>
                        <td class="px-1">30200.63</td>
                        <td class="px-1" style="color:#C65911">37.7367</td>
                        <td class="px-1" style="color:#FFC000">41.3634</td>
                        <td class="px-1" style="color:#92D050">43.2249</td>
                        <td class="px-1" style="color:#31D87D">98.496979</td>
                        <td class="px-1" style="color:#31D87D">98.469081</td>
                        <td class="px-1" style="color:#FFC000">70.53741946</td>
                        <td class="px-1" style="color:#FFC000">70.38764815</td>
                        <td class="px-1" style="color:#C65911">68.47460552</td>
                        <td class="px-1" style="color:#FFC000">73.02422406</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 PSNR QM0 P3</td>
                        <td class="px-1">3.293</td>
                        <td class="px-1">29498.61</td>
                        <td class="px-1" style="color:#C65911">32.2176</td>
                        <td class="px-1" style="color:#FFC000">40.7572</td>
                        <td class="px-1" style="color:#92D050">42.7955</td>
                        <td class="px-1" style="color:#31D87D">98.421012</td>
                        <td class="px-1" style="color:#31D87D">98.412364</td>
                        <td class="px-1" style="color:#FFC000">70.20741785</td>
                        <td class="px-1" style="color:#FFC000">70.07957787</td>
                        <td class="px-1" style="color:#C65911">68.14975116</td>
                        <td class="px-1" style="color:#FFC000">72.58938147</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 VQ P3</td>
                        <td class="px-1">3.53</td>
                        <td class="px-1">22308.7</td>
                        <td class="px-1" style="color:#C65911">32.2371</td>
                        <td class="px-1" style="color:#FFC000">40.8458</td>
                        <td class="px-1" style="color:#92D050">42.8932</td>
                        <td class="px-1 ace" style="color:#31D87D">98.946131</td>
                        <td class="px-1 ace" style="color:#31D87D">98.855602</td>
                        <td class="px-1" style="color:#FFC000">70.46943646</td>
                        <td class="px-1" style="color:#FFC000">70.32725873</td>
                        <td class="px-1" style="color:#C65911">68.33790856</td>
                        <td class="px-1" style="color:#FFC000">73.00295684</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp4</td>
                        <td class="px-1">3.597</td>
                        <td class="px-1">31292.89</td>
                        <td class="px-1 ace" style="color:#C65911">37.7780</td>
                        <td class="px-1" style="color:#FFC000">41.6035</td>
                        <td class="px-1" style="color:#92D050">43.5482</td>
                        <td class="px-1" style="color:#31D87D">98.351882</td>
                        <td class="px-1" style="color:#31D87D">98.330377</td>
                        <td class="px-1 ace" style="color:#FFC000">72.40393052</td>
                        <td class="px-1 ace" style="color:#FFC000">72.42377592</td>
                        <td class="px-1 ace" style="color:#C65911">70.10772502</td>
                        <td class="px-1 ace" style="color:#FFC000">75.00945373</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp6</td>
                        <td class="px-1 ace">3.666</td>
                        <td class="px-1">35859.2</td>
                        <td class="px-1" style="color:#C65911">37.7574</td>
                        <td class="px-1" style="color:#FFC000">41.6517</td>
                        <td class="px-1" style="color:#92D050">43.6419</td>
                        <td class="px-1" style="color:#31D87D">98.164098</td>
                        <td class="px-1" style="color:#31D87D">98.055403</td>
                        <td class="px-1" style="color:#FFC000">72.14692563</td>
                        <td class="px-1" style="color:#FFC000">72.11854599</td>
                        <td class="px-1" style="color:#C65911">69.59369402</td>
                        <td class="px-1" style="color:#FFC000">74.93923985</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp7</td>
                        <td class="px-1">3.535</td>
                        <td class="px-1">36202.62</td>
                        <td class="px-1" style="color:#C65911">37.7489</td>
                        <td class="px-1 ace" style="color:#FFC000">41.6589</td>
                        <td class="px-1 ace" style="color:#92D050">43.6475</td>
                        <td class="px-1" style="color:#31D87D">97.978343</td>
                        <td class="px-1" style="color:#31D87D">98.109212</td>
                        <td class="px-1" style="color:#FFC000">72.03051429</td>
                        <td class="px-1" style="color:#FFC000">72.05892614</td>
                        <td class="px-1" style="color:#C65911">69.41311781</td>
                        <td class="px-1" style="color:#FFC000">74.86018379</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>Netflix WindAndNature</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp-4</td>
                        <td class="px-1">5.214</td>
                        <td class="px-1">9272.33</td>
                        <td class="px-1" style="color:#C65911">36.9318</td>
                        <td class="px-1" style="color:#92D050">42.9919</td>
                        <td class="px-1" style="color:#FFC000">40.747</td>
                        <td class="px-1" style="color:#31D87D">98.381549</td>
                        <td class="px-1" style="color:#31D87D">95.514520</td>
                        <td class="px-1" style="color:#C65911">68.95440678</td>
                        <td class="px-1" style="color:#FFC000">70.74238004</td>
                        <td class="px-1" style="color:#C65911">62.19728635</td>
                        <td class="px-1" style="color:#FFC000">73.05469714</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 PSNR QM0 P3</td>
                        <td class="px-1">5.046</td>
                        <td class="px-1">9171.44</td>
                        <td class="px-1" style="color:#C65911">34.5935</td>
                        <td class="px-1" style="color:#92D050">42.6956</td>
                        <td class="px-1" style="color:#FFC000">40.593</td>
                        <td class="px-1" style="color:#31D87D">98.244725</td>
                        <td class="px-1" style="color:#31D87D">95.348606</td>
                        <td class="px-1" style="color:#C65911">68.80260246</td>
                        <td class="px-1" style="color:#FFC000">70.67784608</td>
                        <td class="px-1" style="color:#C65911">61.91905432</td>
                        <td class="px-1" style="color:#FFC000">73.02160275</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 VQ P3</td>
                        <td class="px-1 ace">5.125</td>
                        <td class="px-1">10062.18</td>
                        <td class="px-1" style="color:#C65911">34.5941</td>
                        <td class="px-1" style="color:#92D050">42.732</td>
                        <td class="px-1" style="color:#FFC000">40.7056</td>
                        <td class="px-1" style="color:#31D87D">98.422313</td>
                        <td class="px-1" style="color:#31D87D">95.579552</td>
                        <td class="px-1" style="color:#C65911">69.04057766</td>
                        <td class="px-1" style="color:#FFC000">70.76173066</td>
                        <td class="px-1" style="color:#C65911">61.63058503</td>
                        <td class="px-1" style="color:#FFC000">73.41046502</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp4</td>
                        <td class="px-1">5.089</td>
                        <td class="px-1">10721.19</td>
                        <td class="px-1 ace" style="color:#C65911">36.9506</td>
                        <td class="px-1" style="color:#92D050">43.2836</td>
                        <td class="px-1" style="color:#FFC000">40.9497</td>
                        <td class="px-1 ace" style="color:#31D87D">98.436272</td>
                        <td class="px-1 ace" style="color:#31D87D">95.584718</td>
                        <td class="px-1 ace" style="color:#C65911">69.93547059</td>
                        <td class="px-1 ace" style="color:#FFC000">72.02165699</td>
                        <td class="px-1 ace" style="color:#C65911">62.49686317</td>
                        <td class="px-1" style="color:#FFC000">74.18941581</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp6</td>
                        <td class="px-1">5.024</td>
                        <td class="px-1">11267.97</td>
                        <td class="px-1" style="color:#C65911">36.9230</td>
                        <td class="px-1 ace" style="color:#92D050">43.3215</td>
                        <td class="px-1" style="color:#FFC000">40.9769</td>
                        <td class="px-1" style="color:#31D87D">98.418351</td>
                        <td class="px-1" style="color:#31D87D">95.550267</td>
                        <td class="px-1" style="color:#C65911">69.68736029</td>
                        <td class="px-1" style="color:#FFC000">71.96413622</td>
                        <td class="px-1" style="color:#C65911">61.62786558</td>
                        <td class="px-1 ace" style="color:#FFC000">74.19731887</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp7</td>
                        <td class="px-1">4.903</td>
                        <td class="px-1">11362.12</td>
                        <td class="px-1" style="color:#C65911">36.9136</td>
                        <td class="px-1" style="color:#92D050">43.3211</td>
                        <td class="px-1 ace" style="color:#FFC000">40.9821</td>
                        <td class="px-1" style="color:#31D87D">98.348606</td>
                        <td class="px-1" style="color:#31D87D">95.461319</td>
                        <td class="px-1" style="color:#C65911">69.55518284</td>
                        <td class="px-1" style="color:#FFC000">71.87262372</td>
                        <td class="px-1" style="color:#C65911">61.33852667</td>
                        <td class="px-1" style="color:#FFC000">74.12504793</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>Blender Foundation BigBuckBunny</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp-4</td>
                        <td class="px-1">31.13</td>
                        <td class="px-1">1845.53</td>
                        <td class="px-1" style="color:#FFC000">41.7481</td>
                        <td class="px-1" style="color:#92D050">44.1375</td>
                        <td class="px-1" style="color:#92D050">44.7901</td>
                        <td class="px-1" style="color:#31D87D">99.409823</td>
                        <td class="px-1" style="color:#31D87D">97.674849</td>
                        <td class="px-1" style="color:#FFC000">78.87837612</td>
                        <td class="px-1" style="color:#FFC000">78.92618400</td>
                        <td class="px-1" style="color:#C65911">69.82498734</td>
                        <td class="px-1" style="color:#92D050">87.16717944</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 PSNR QM0 P3</td>
                        <td class="px-1">31.602</td>
                        <td class="px-1">1766.73</td>
                        <td class="px-1" style="color:#FFC000">41.2944</td>
                        <td class="px-1" style="color:#92D050">43.7038</td>
                        <td class="px-1" style="color:#92D050">44.4423</td>
                        <td class="px-1" style="color:#31D87D">99.333118</td>
                        <td class="px-1" style="color:#31D87D">97.598158</td>
                        <td class="px-1" style="color:#FFC000">78.30231156</td>
                        <td class="px-1" style="color:#FFC000">78.36263621</td>
                        <td class="px-1" style="color:#C65911">69.29068078</td>
                        <td class="px-1" style="color:#92D050">86.43200391</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 VQ P3</td>
                        <td class="px-1 ace">33.204</td>
                        <td class="px-1">1947.9</td>
                        <td class="px-1" style="color:#FFC000">41.7399</td>
                        <td class="px-1" style="color:#92D050">44.3139</td>
                        <td class="px-1" style="color:#92D050">44.7807</td>
                        <td class="px-1" style="color:#31D87D">99.434136</td>
                        <td class="px-1" style="color:#31D87D">97.707896</td>
                        <td class="px-1" style="color:#FFC000">79.2659128</td>
                        <td class="px-1" style="color:#FFC000">79.29272234</td>
                        <td class="px-1" style="color:#FFC000">70.15623321</td>
                        <td class="px-1" style="color:#92D050">87.64869908</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp4</td>
                        <td class="px-1">31.819</td>
                        <td class="px-1">2132.27</td>
                        <td class="px-1" style="color:#FFC000">41.9978</td>
                        <td class="px-1" style="color:#92D050">44.6105</td>
                        <td class="px-1" style="color:#31D87D">45.2615</td>
                        <td class="px-1 ace" style="color:#31D87D">99.473124</td>
                        <td class="px-1 ace" style="color:#31D87D">97.763646</td>
                        <td class="px-1 ace" style="color:#92D050">80.16393211</td>
                        <td class="px-1" style="color:#92D050">80.30066873</td>
                        <td class="px-1 ace" style="color:#FFC000">71.66992501</td>
                        <td class="px-1" style="color:#92D050">87.64317683</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp6</td>
                        <td class="px-1">31.849</td>
                        <td class="px-1">2229.82</td>
                        <td class="px-1 ace" style="color:#92D050">42.0018</td>
                        <td class="px-1" style="color:#92D050">44.6737</td>
                        <td class="px-1" style="color:#31D87D">45.3419</td>
                        <td class="px-1" style="color:#31D87D">99.449854</td>
                        <td class="px-1" style="color:#31D87D">97.728519</td>
                        <td class="px-1" style="color:#92D050">80.15161320</td>
                        <td class="px-1 ace" style="color:#92D050">80.37899632</td>
                        <td class="px-1" style="color:#FFC000">71.41724127</td>
                        <td class="px-1 ace" style="color:#92D050">87.70318448</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp7</td>
                        <td class="px-1">31.182</td>
                        <td class="px-1">2243.66</td>
                        <td class="px-1" style="color:#FFC000">41.9934</td>
                        <td class="px-1 ace" style="color:#92D050">44.6798</td>
                        <td class="px-1 ace" style="color:#31D87D">45.3542</td>
                        <td class="px-1" style="color:#31D87D">99.442550</td>
                        <td class="px-1" style="color:#31D87D">97.718648</td>
                        <td class="px-1" style="color:#92D050">80.10027427</td>
                        <td class="px-1" style="color:#92D050">80.33368144</td>
                        <td class="px-1" style="color:#FFC000">71.22452404</td>
                        <td class="px-1" style="color:#92D050">87.64426182</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>Blender Foundation ElephantsDream</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp-4</td>
                        <td class="px-1">27.179</td>
                        <td class="px-1">2255.12</td>
                        <td class="px-1" style="color:#92D050">42.4261</td>
                        <td class="px-1" style="color:#31D87D">47.2401</td>
                        <td class="px-1" style="color:#31D87D">46.9269</td>
                        <td class="px-1" style="color:#31D87D">99.198864</td>
                        <td class="px-1" style="color:#31D87D">97.743535</td>
                        <td class="px-1" style="color:#FFC000">77.98601451</td>
                        <td class="px-1" style="color:#FFC000">77.66520187</td>
                        <td class="px-1" style="color:#C65911">63.30624455</td>
                        <td class="px-1" style="color:#31D87D">94.50297387</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 PSNR QM0 P3</td>
                        <td class="px-1">27.992</td>
                        <td class="px-1">2202.75</td>
                        <td class="px-1" style="color:#92D050">42.1578</td>
                        <td class="px-1" style="color:#31D87D">47.1537</td>
                        <td class="px-1" style="color:#31D87D">46.7919</td>
                        <td class="px-1" style="color:#31D87D">99.150203</td>
                        <td class="px-1" style="color:#31D87D">97.690037</td>
                        <td class="px-1" style="color:#FFC000">77.57799079</td>
                        <td class="px-1" style="color:#FFC000">77.16378592</td>
                        <td class="px-1" style="color:#C65911">62.90816047</td>
                        <td class="px-1" style="color:#31D87D">94.43395281</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 VQ P3</td>
                        <td class="px-1 ace">28.319</td>
                        <td class="px-1">2350.97</td>
                        <td class="px-1" style="color:#92D050">42.4904</td>
                        <td class="px-1" style="color:#31D87D">47.1816</td>
                        <td class="px-1" style="color:#31D87D">46.8649</td>
                        <td class="px-1" style="color:#31D87D">99.252266</td>
                        <td class="px-1" style="color:#31D87D">97.814671</td>
                        <td class="px-1" style="color:#FFC000">78.28962734</td>
                        <td class="px-1" style="color:#FFC000">77.96771217</td>
                        <td class="px-1" style="color:#C65911">63.73580664</td>
                        <td class="px-1" style="color:#31D87D">94.47657123</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp4</td>
                        <td class="px-1">27.659</td>
                        <td class="px-1">2596.92</td>
                        <td class="px-1" style="color:#92D050">42.7320</td>
                        <td class="px-1" style="color:#31D87D">47.7134</td>
                        <td class="px-1" style="color:#31D87D">47.4411</td>
                        <td class="px-1 ace" style="color:#31D87D">99.280471</td>
                        <td class="px-1 ace" style="color:#31D87D">97.853006</td>
                        <td class="px-1" style="color:#FFC000">79.39059832</td>
                        <td class="px-1" style="color:#FFC000">79.09108544</td>
                        <td class="px-1 ace" style="color:#C65911">65.82060219</td>
                        <td class="px-1" style="color:#31D87D">94.60718743</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp6</td>
                        <td class="px-1">27.449</td>
                        <td class="px-1">2723.74</td>
                        <td class="px-1 ace" style="color:#92D050">42.7557</td>
                        <td class="px-1" style="color:#31D87D">47.8355</td>
                        <td class="px-1" style="color:#31D87D">47.5582</td>
                        <td class="px-1" style="color:#31D87D">99.249226</td>
                        <td class="px-1" style="color:#31D87D">97.810048</td>
                        <td class="px-1 ace" style="color:#FFC000">79.43103579</td>
                        <td class="px-1 ace" style="color:#FFC000">79.17019473</td>
                        <td class="px-1" style="color:#C65911">65.75786270</td>
                        <td class="px-1 ace" style="color:#31D87D">94.64559855</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp7</td>
                        <td class="px-1">26.993</td>
                        <td class="px-1">2744.92</td>
                        <td class="px-1" style="color:#92D050">42.7494</td>
                        <td class="px-1 ace" style="color:#31D87D">47.8512</td>
                        <td class="px-1 ace" style="color:#31D87D">47.5722</td>
                        <td class="px-1" style="color:#31D87D">99.243406</td>
                        <td class="px-1" style="color:#31D87D">97.801530</td>
                        <td class="px-1" style="color:#FFC000">79.37981615</td>
                        <td class="px-1" style="color:#FFC000">79.12843803</td>
                        <td class="px-1" style="color:#C65911">65.60445560</td>
                        <td class="px-1" style="color:#31D87D">94.55790120</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>Netflix SolLevante</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp-4</td>
                        <td class="px-1">4.375</td>
                        <td class="px-1">21293.14</td>
                        <td class="px-1" style="color:#C65911">37.8526</td>
                        <td class="px-1" style="color:#FFC000">41.6389</td>
                        <td class="px-1" style="color:#92D050">42.6158</td>
                        <td class="px-1" style="color:#31D87D">98.617551</td>
                        <td class="px-1" style="color:#31D87D">97.460014</td>
                        <td class="px-1" style="color:#FFC000">71.39326874</td>
                        <td class="px-1" style="color:#C65911">66.46212194</td>
                        <td class="px-1" style="color:#541818">44.23334100</td>
                        <td class="px-1" style="color:#31D87D">99.70832394</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 PSNR QM0 P3</td>
                        <td class="px-1">4.409</td>
                        <td class="px-1">20672.63</td>
                        <td class="px-1" style="color:#C65911">37.8158</td>
                        <td class="px-1" style="color:#FFC000">41.5928</td>
                        <td class="px-1" style="color:#92D050">42.5431</td>
                        <td class="px-1" style="color:#31D87D">98.601947</td>
                        <td class="px-1" style="color:#31D87D">97.42399</td>
                        <td class="px-1" style="color:#FFC000">71.617254</td>
                        <td class="px-1" style="color:#C65911">66.48754073</td>
                        <td class="px-1" style="color:#541818">44.37356138</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 VQ P3</td>
                        <td class="px-1 ace">4.432</td>
                        <td class="px-1">21665.26</td>
                        <td class="px-1" style="color:#C65911">37.4686</td>
                        <td class="px-1" style="color:#FFC000">41.3226</td>
                        <td class="px-1" style="color:#92D050">42.1316</td>
                        <td class="px-1" style="color:#31D87D">98.63212</td>
                        <td class="px-1" style="color:#31D87D">97.439903</td>
                        <td class="px-1" style="color:#FFC000">72.33149666</td>
                        <td class="px-1" style="color:#C65911">67.03434155</td>
                        <td class="px-1" style="color:#541818">45.6597599</td>
                        <td class="px-1 ace" style="color:#31D87D">100</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp4</td>
                        <td class="px-1">4.382</td>
                        <td class="px-1">25051.08</td>
                        <td class="px-1 ace" style="color:#C65911">37.9366</td>
                        <td class="px-1" style="color:#FFC000">41.8746</td>
                        <td class="px-1" style="color:#92D050">42.9372</td>
                        <td class="px-1 ace" style="color:#31D87D">99.280471</td>
                        <td class="px-1 ace" style="color:#31D87D">97.853006</td>
                        <td class="px-1" style="color:#FFC000">73.59818290</td>
                        <td class="px-1" style="color:#C65911">69.05681942</td>
                        <td class="px-1 ace" style="color:#541818">49.11113058</td>
                        <td class="px-1" style="color:#31D87D">99.65378475</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp6</td>
                        <td class="px-1">4.376</td>
                        <td class="px-1">26521.52</td>
                        <td class="px-1" style="color:#C65911">37.9356</td>
                        <td class="px-1" style="color:#FFC000">41.9344</td>
                        <td class="px-1" style="color:#92D050">43.0127</td>
                        <td class="px-1" style="color:#31D87D">98.617526</td>
                        <td class="px-1" style="color:#31D87D">97.445262</td>
                        <td class="px-1 ace" style="color:#FFC000">73.64555984</td>
                        <td class="px-1 ace" style="color:#C65911">69.16459719</td>
                        <td class="px-1" style="color:#541818">48.84941258</td>
                        <td class="px-1" style="color:#31D87D">99.68029509</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp7</td>
                        <td class="px-1">4.3</td>
                        <td class="px-1">26765.1</td>
                        <td class="px-1" style="color:#C65911">37.9283</td>
                        <td class="px-1 ace" style="color:#FFC000">41.9407</td>
                        <td class="px-1 ace" style="color:#92D050">43.0179</td>
                        <td class="px-1" style="color:#31D87D">98.614205</td>
                        <td class="px-1" style="color:#31D87D">97.442568</td>
                        <td class="px-1" style="color:#FFC000">73.56907648</td>
                        <td class="px-1" style="color:#C65911">69.12810867</td>
                        <td class="px-1" style="color:#541818">48.62165015</td>
                        <td class="px-1" style="color:#31D87D">99.67355643</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>ドラゴン会. MAIDRAGON-S</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp-4</td>
                        <td class="px-1">34.131</td>
                        <td class="px-1">1748.83</td>
                        <td class="px-1" style="color:#92D050">43.2197</td>
                        <td class="px-1" style="color:#92D050">44.2228</td>
                        <td class="px-1" style="color:#92D050">44.3593</td>
                        <td class="px-1" style="color:#31D87D">99.468693</td>
                        <td class="px-1" style="color:#31D87D">96.530549</td>
                        <td class="px-1" style="color:#92D050">80.75135291</td>
                        <td class="px-1" style="color:#92D050">83.23015219</td>
                        <td class="px-1" style="color:#C65911">62.76311131</td>
                        <td class="px-1" style="color:#92D050">88.25091879</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 PSNR QM0 P3</td>
                        <td class="px-1">34.683</td>
                        <td class="px-1">1678.91</td>
                        <td class="px-1" style="color:#92D050">43.3979</td>
                        <td class="px-1" style="color:#92D050">44.5454</td>
                        <td class="px-1" style="color:#92D050">44.6909</td>
                        <td class="px-1" style="color:#31D87D">99.499874</td>
                        <td class="px-1" style="color:#31D87D">96.893528</td>
                        <td class="px-1" style="color:#92D050">80.13878722</td>
                        <td class="px-1" style="color:#92D050">82.67207598</td>
                        <td class="px-1" style="color:#C65911">62.1303331</td>
                        <td class="px-1" style="color:#92D050">87.57267954</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 VQ P3</td>
                        <td class="px-1 ace">36.461</td>
                        <td class="px-1">1841.98</td>
                        <td class="px-1" style="color:#92D050">43.1374</td>
                        <td class="px-1" style="color:#92D050">44.2474</td>
                        <td class="px-1" style="color:#92D050">44.3534</td>
                        <td class="px-1" style="color:#31D87D">99.485086</td>
                        <td class="px-1" style="color:#31D87D">96.874969</td>
                        <td class="px-1" style="color:#92D050">81.0576056</td>
                        <td class="px-1" style="color:#92D050">83.45341781</td>
                        <td class="px-1" style="color:#C65911">63.52342983</td>
                        <td class="px-1" style="color:#92D050">88.37986377</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp4</td>
                        <td class="px-1">34.811</td>
                        <td class="px-1">2008.59</td>
                        <td class="px-1 ace" style="color:#92D050">43.4176</td>
                        <td class="px-1" style="color:#92D050">44.5330</td>
                        <td class="px-1" style="color:#92D050">44.6729</td>
                        <td class="px-1 ace" style="color:#31D87D">99.576204</td>
                        <td class="px-1 ace" style="color:#31D87D">96.993265</td>
                        <td class="px-1 ace" style="color:#92D050">81.60664098</td>
                        <td class="px-1" style="color:#92D050">83.87342514</td>
                        <td class="px-1 ace" style="color:#C65911">64.41000186</td>
                        <td class="px-1" style="color:#92D050">88.89335786</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp6</td>
                        <td class="px-1">34.803</td>
                        <td class="px-1">2086.19</td>
                        <td class="px-1" style="color:#92D050">43.4038</td>
                        <td class="px-1 ace" style="color:#92D050">44.5455</td>
                        <td class="px-1 ace" style="color:#92D050">44.6917</td>
                        <td class="px-1" style="color:#31D87D">99.561552,</td>
                        <td class="px-1" style="color:#31D87D">96.971028</td>
                        <td class="px-1" style="color:#92D050">81.58295017</td>
                        <td class="px-1" style="color:#92D050">83.93074174</td>
                        <td class="px-1" style="color:#C65911">63.63556010</td>
                        <td class="px-1" style="color:#92D050">89.00044052</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp7</td>
                        <td class="px-1">23.98</td>
                        <td class="px-1">2094.58</td>
                        <td class="px-1" style="color:#92D050">43.3781</td>
                        <td class="px-1" style="color:#92D050">44.0750</td>
                        <td class="px-1" style="color:#92D050">44.4807</td>
                        <td class="px-1" style="color:#31D87D">99.556616</td>
                        <td class="px-1" style="color:#31D87D">96.964112</td>
                        <td class="px-1" style="color:#92D050">81.54915159</td>
                        <td class="px-1 ace" style="color:#92D050">83.93295163</td>
                        <td class="px-1" style="color:#C65911">63.38714191</td>
                        <td class="px-1 ace" style="color:#92D050">89.01016059</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="12"><b>OB 会. HYOUKA</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp-4</td>
                        <td class="px-1">43.312</td>
                        <td class="px-1">849.43</td>
                        <td class="px-1" style="color:#FFC000">41.3422</td>
                        <td class="px-1" style="color:#92D050">43.9899</td>
                        <td class="px-1" style="color:#92D050">44.1144</td>
                        <td class="px-1" style="color:#31D87D">99.417102</td>
                        <td class="px-1" style="color:#31D87D">96.457463</td>
                        <td class="px-1" style="color:#92D050">82.03956196</td>
                        <td class="px-1" style="color:#92D050">83.02276494</td>
                        <td class="px-1" style="color:#FFC000">72.70159427</td>
                        <td class="px-1" style="color:#92D050">87.43146630</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 PSNR QM0 P3</td>
                        <td class="px-1">43.43</td>
                        <td class="px-1">807.47</td>
                        <td class="px-1" style="color:#FFC000">41.1678</td>
                        <td class="px-1" style="color:#92D050">43.7995</td>
                        <td class="px-1" style="color:#92D050">43.9495</td>
                        <td class="px-1" style="color:#31D87D">99.366585</td>
                        <td class="px-1" style="color:#31D87D">96.402913</td>
                        <td class="px-1" style="color:#92D050">81.74212195</td>
                        <td class="px-1" style="color:#92D050">82.69693318</td>
                        <td class="px-1" style="color:#FFC000">72.40613868</td>
                        <td class="px-1" style="color:#92D050">87.023253</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">~CRF30 VQ P3</td>
                        <td class="px-1 ace">44.81</td>
                        <td class="px-1">907.2</td>
                        <td class="px-1" style="color:#FFC000">41.2642</td>
                        <td class="px-1" style="color:#92D050">43.9719</td>
                        <td class="px-1" style="color:#92D050">44.1089</td>
                        <td class="px-1" style="color:#31D87D">99.372739</td>
                        <td class="px-1" style="color:#31D87D">96.403405</td>
                        <td class="px-1" style="color:#92D050">82.2466764</td>
                        <td class="px-1" style="color:#92D050">83.14431623</td>
                        <td class="px-1" style="color:#FFC000">73.1824835</td>
                        <td class="px-1" style="color:#92D050">87.50851431</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp4</td>
                        <td class="px-1">43.785</td>
                        <td class="px-1">976.15</td>
                        <td class="px-1" style="color:#FFC000">41.4313</td>
                        <td class="px-1" style="color:#92D050">44.1557</td>
                        <td class="px-1" style="color:#92D050">44.2669</td>
                        <td class="px-1" style="color:#31D87D">99.468693</td>
                        <td class="px-1" style="color:#31D87D">96.530549</td>
                        <td class="px-1" style="color:#92D050">82.66629557</td>
                        <td class="px-1 ace" style="color:#92D050">83.87342514</td>
                        <td class="px-1" style="color:#FFC000">74.12805535</td>
                        <td class="px-1" style="color:#92D050">87.74530647</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp6</td>
                        <td class="px-1">43.524</td>
                        <td class="px-1">1027.28</td>
                        <td class="px-1 ace" style="color:#FFC000">41.4331</td>
                        <td class="px-1 ace" style="color:#92D050">44.1651</td>
                        <td class="px-1" style="color:#92D050">44.2771</td>
                        <td class="px-1" style="color:#31D87D">99.468020</td>
                        <td class="px-1" style="color:#31D87D">96.531517</td>
                        <td class="px-1 ace" style="color:#92D050">82.71404144</td>
                        <td class="px-1" style="color:#92D050">83.55282859</td>
                        <td class="px-1 ace" style="color:#FFC000">74.20108975</td>
                        <td class="px-1 ace" style="color:#92D050">87.75174639</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 Sharp7</td>
                        <td class="px-1">42.666</td>
                        <td class="px-1">1034.05</td>
                        <td class="px-1" style="color:#FFC000">41.4302</td>
                        <td class="px-1" style="color:#92D050">44.1618</td>
                        <td class="px-1 ace" style="color:#92D050">44.2773</td>
                        <td class="px-1 ace" style="color:#31D87D">99.476968</td>
                        <td class="px-1 ace" style="color:#31D87D">96.714112</td>
                        <td class="px-1" style="color:#92D050">82.69596542</td>
                        <td class="px-1" style="color:#92D050">83.53691322</td>
                        <td class="px-1" style="color:#FFC000">74.13583208</td>
                        <td class="px-1" style="color:#92D050">87.73552867</td>
                    </tr>
                </tbody>
            </table>
            <h4>（8/8）SVT-AV1 大范围优化测试分析</h4>
            <ol class="text-smaller">
                <li>单独开启 Variance Octile 几乎无效，或在低强度（4）下完全无效</li>
                <li><code>--sharpness -4</code> 相比 <code>--qm-min 0</code> 与 <code>--tune 1 --sharpness 0</code>（默认）下的画质反而高一点，并且降低了码率；除此之外不如 <code>--tune 0 --sharpness 0</code> 的画质提升，不失为专注降低码率的有效选项</li>
                <li><code>--sharpness 0~4</code> 对码率的影响，以及画质的影响取决于片源；画质提升在 VMAF 中显得无效，低强度（0~4）相比其他参数可以有效提升暂停画质，因此可以用于搭配高暂停画质测试选项，但高强度下对码率的影响较大</li>
                <li><code>--sharpness 6~7</code> 在动态信息复杂的 3D 动画、漫画材质动画（富含锐利纹理场景）中画质提升显著（SSIMULACRA2.1 +5 分），除此之外提升不大（SSIMULACRA2.1 +1~3 分），但码率的增加又与画质的提升不相关（更类似于线性增加 5~10%）</li>
                <li><code>--sharpness 7</code> 相比 6 出现了副作用，码率照旧增加，但画质反而降低了（一定会复现，结合 -4 强度的现象，推测是遇到了码率分配受限的问题）</li>
            </ol>
            <h3>测试——SVT-AV1 GOP 长度测试</h3>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（1/8）SVT-AV1 v3.0——SolLevante</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -1 --keyint 12s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        6314		24.00 fps		 705479798		21452.66 kbps

Channel 1
Average Speed:		4.228 fps
Total Encoding Time:	1493438 ms
Total Execution Time:	1494512 ms
Average Latency:	84536 ms
Max Latency:		188483 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -5 --keyint 24s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        6314		24.00 fps		 703002016		21377.32 kbps

Channel 1
Average Speed:		3.831 fps
Total Encoding Time:	1648168 ms
Total Execution Time:	1649410 ms
Average Latency:	86778 ms
Max Latency:		207931 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -9 --keyint 36s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        6314		24.00 fps		 702472084		21361.20 kbps


Channel 1
Average Speed:		3.851 fps
Total Encoding Time:	1639582 ms
Total Execution Time:	1640754 ms
Average Latency:	84435 ms
Max Latency:		193014 ms
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（2/8）SVT-AV1 v3.0——Boat</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -1 --keyint 12s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
         300		60.00 fps		  19543119		31268.99 kbps

Channel 1
Average Speed:		3.013 fps
Total Encoding Time:	99578 ms
Total Execution Time:	100762 ms
Average Latency:	54872 ms
Max Latency:		90061 ms

                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -5 --keyint 24s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
         300		60.00 fps		  19658405		31453.45 kbps

Channel 1
Average Speed:		3.055 fps
Total Encoding Time:	98198 ms
Total Execution Time:	99376 ms
Average Latency:	54089 ms
Max Latency:		88161 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -9 --keyint 36s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
         300		60.00 fps		  19721444		31554.31 kbps

Channel 1
Average Speed:		3.008 fps
Total Encoding Time:	99718 ms
Total Execution Time:	100918 ms
Average Latency:	55182 ms
Max Latency:		89809 ms
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（3/8）SVT-AV1 v3.0——WindAndNature</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -1 --keyint 12s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        1199		60.00 fps		  24035315		9622.14 kbps

Channel 1
Average Speed:		5.061 fps
Total Encoding Time:	236904 ms
Total Execution Time:	238220 ms
Average Latency:	57427 ms
Max Latency:		81379 ms

                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -5 --keyint 24s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        1199		60.00 fps		  23900687		9568.25 kbps

Channel 1
Average Speed:		4.917 fps
Total Encoding Time:	243836 ms
Total Execution Time:	245042 ms
Average Latency:	56940 ms
Max Latency:		75642 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -9 --keyint 36s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
        1199		60.00 fps		  23962240		9592.89 kbps

Channel 1
Average Speed:		5.057 fps
Total Encoding Time:	237086 ms
Total Execution Time:	238356 ms
Average Latency:	55358 ms
Max Latency:		73008 ms
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（4/8）SVT-AV1 v3.0——Big-Buck-Bunny</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -1 --keyint 12s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       14315		24.00 fps		 140043253		1878.33 kbps

Channel 1
Average Speed:		28.897 fps
Total Encoding Time:	495388 ms
Total Execution Time:	495730 ms
Average Latency:	11849 ms
Max Latency:		22103 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -5 --keyint 24s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       14315		24.00 fps		 137248105		1840.84 kbps

Channel 1
Average Speed:		24.964 fps
Total Encoding Time:	573430 ms
Total Execution Time:	573834 ms
Average Latency:	12829 ms
Max Latency:		24383 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -9 --keyint 36s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       14315		24.00 fps		 136363695		1828.98 kbps

Channel 1
Average Speed:		23.925 fps
Total Encoding Time:	598318 ms
Total Execution Time:	598730 ms
Average Latency:	13226 ms
Max Latency:		24711 ms
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（5/8）SVT-AV1 v3.0——ElephantsDream</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -1 --keyint 12s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 187511375		2294.45 kbps

Channel 1
Average Speed:		27.124 fps
Total Encoding Time:	578494 ms
Total Execution Time:	578840 ms
Average Latency:	12976 ms
Max Latency:		35314 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -5 --keyint 24s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 184895611		2262.44 kbps

Channel 1
Average Speed:		24.100 fps
Total Encoding Time:	651078 ms
Total Execution Time:	651408 ms
Average Latency:	13596 ms
Max Latency:		35055 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -9 --keyint 36s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       15691		24.00 fps		 184413826		2256.55 kbps

Channel 1
Average Speed:		23.102 fps
Total Encoding Time:	679200 ms
Total Execution Time:	679558 ms
Average Latency:	13828 ms
Max Latency:		32531 ms
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（6/8）SVT-AV1 v3.0——MAINDRAGON-S</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -1 --keyint 12s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 318086337		1790.25 kbps

Channel 1
Average Speed:		32.629 fps
Total Encoding Time:	1044482 ms
Total Execution Time:	1044842 ms
Average Latency:	10485 ms
Max Latency:		25680 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -5 --keyint 24s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 312606787		1759.41 kbps

Channel 1
Average Speed:		26.522 fps
Total Encoding Time:	1284986 ms
Total Execution Time:	1285316 ms
Average Latency:	12192 ms
Max Latency:		30838 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -9 --keyint 36s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       34080		23.98 fps		 313101987		1762.19 kbps

Channel 1
Average Speed:		25.198 fps
Total Encoding Time:	1352464 ms
Total Execution Time:	1352844 ms
Average Latency:	12575 ms
Max Latency:		30203 ms
                </code></pre>
            </div>
            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：（7/8）SVT-AV1 v3.0——HYOUKA</button>
            <div class="coll-content">
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -1 --keyint 12s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36996		23.98 fps		 168658485		874.42 kbps

Channel 1
Average Speed:		39.458 fps
Total Encoding Time:	937612 ms
Total Execution Time:	937984 ms
Average Latency:	8607 ms
Max Latency:		22800 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -5 --keyint 24s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36996		23.98 fps		 165180845		856.39 kbps

Channel 1
Average Speed:		34.534 fps
Total Encoding Time:	1071294 ms
Total Execution Time:	1071620 ms
Average Latency:	9351 ms
Max Latency:		22497 ms
                </code></pre>
                <p><code>--preset 3 --crf 30 --hierarchical-levels 5 --use-fixed-qindex-offsets 2 --key-frame-qindex-offset -9 --keyint 36s --enable-tf 2 --scd 1</code>：</p>
                <pre><code class="text-smaller language-powershell">
SUMMARY --------------------------------- Channel 1  --------------------------------
Total Frames		Frame Rate		Byte Count		Bitrate
       36996		23.98 fps		 165827530		859.74 kbps

Channel 1
Average Speed:		32.754 fps
Total Encoding Time:	1129504 ms
Total Execution Time:	1129826 ms
Average Latency:	9663 ms
Max Latency:		27642 ms
                </code></pre>
            </div>
            <div class="overflow-auto mt-3"><table class="table-center text-smaller two-decimals">
                <thead>
                    <tr class="border-lr">
                        <th colspan="3">GOP 长度测试</th>
                    </tr>
                    <tr class="border-lr">
                        <th class="px-1">编码选项</th>
                        <th class="px-1">速度 fps</th>
                        <th class="px-1">码率 kbps</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="3"><b>Netflix Boat</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-1 keyint12s</td>
                        <td class="px-1">3.013</td>
                        <td class="px-1">31268.99</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-5 keyint24s</td>
                        <td class="px-1">3.055</td>
                        <td class="px-1">31453.45</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-9 keyint36s</td>
                        <td class="px-1">3.008</td>
                        <td class="px-1">31554.31</td>
                    </tr>
                    
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="3"><b>Netflix WindAndNature</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-1 keyint12s</td>
                        <td class="px-1">5.061</td>
                        <td class="px-1">9622.14</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-5 keyint24s</td>
                        <td class="px-1">4.917</td>
                        <td class="px-1">9568.25</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-9 keyint36s</td>
                        <td class="px-1">5.057</td>
                        <td class="px-1">9592.89</td>
                    </tr>

                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="3"><b>Blender Foundation BigBuckBunny</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-1 keyint12s</td>
                        <td class="px-1">28.897</td>
                        <td class="px-1">1878.33</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-5 keyint24s</td>
                        <td class="px-1">24.964</td>
                        <td class="px-1">1840.84</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-9 keyint36s</td>
                        <td class="px-1">23.925</td>
                        <td class="px-1">1828.98</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="3"><b>Blender Foundation ElephantsDream</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-1 keyint12s</td>
                        <td class="px-1">27.124</td>
                        <td class="px-1">2294.45</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-5 keyint24s</td>
                        <td class="px-1">24.1</td>
                        <td class="px-1">2262.44</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-9 keyint36s</td>
                        <td class="px-1">23.102</td>
                        <td class="px-1">2256.55</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="3"><b>Netflix SolLevante</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-1 keyint12s</td>
                        <td class="px-1">4.228</td>
                        <td class="px-1">21452.66</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-5 keyint24s</td>
                        <td class="px-1">3.831</td>
                        <td class="px-1">21377.32</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-9 keyint36s</td>
                        <td class="px-1">3.851</td>
                        <td class="px-1">21361.20</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="3"><b>ドラゴン会. MAIDRAGON-S</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-1 keyint12s</td>
                        <td class="px-1">32.629</td>
                        <td class="px-1">1790.25</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-5 keyint24s</td>
                        <td class="px-1">26.522</td>
                        <td class="px-1">1759.41</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-9 keyint36s</td>
                        <td class="px-1">25.198</td>
                        <td class="px-1">1762.19</td>
                    </tr>
                    <tr class="text-smaller">
                        <td class="align-items-center t-light-gray" colspan="3"><b>OB 会. HYOUKA</b></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-1 keyint12s</td>
                        <td class="px-1">39.458</td>
                        <td class="px-1">874.42</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-5 keyint24s</td>
                        <td class="px-1">34.534</td>
                        <td class="px-1">856.39</td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-1">CRF30 PSNR P3 HierLvl5 FixedQoffs2 KQoffs-9 keyint36s</td>
                        <td class="px-1">32.754</td>
                        <td class="px-1">859.74</td>
                    </tr>
                </tbody>
            </table>
            <h4>（8/8）SVT-AV1 GOP 长度测试分析</h4>
            <p>尽管 AV1 编码器有强大的帧间参考系统，但在压缩 24 秒、36 秒（2 倍、3 倍）关键帧间隔时没能起到显著或有效的提升。在简单（动漫材质动画，3D 动画）场景的压缩率提升在 2%；复杂片源中则因为关键帧过长出现了码率反增的副作用。因此“大幅提高 GOP 长度、开启最高的分层预测结构层数、并降低关键帧量化强度”被证明无效，也不需要进行画质跑分了。</p>

            <h2 id="h2-19">附录：下载</h2>

            <h3>下载——SVT-AV1 编码器</h3>
            <p>可以选择直接使用最新版 ffmpeg 内置的 libsvtav1，或下载本教程中测试所编译的 SVT-AV1 v3.0，或自行下载 Github 仓库以及 Visual Studio 等工具编译。</p>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：下载——CI/CD 版 SVT-AV1</button>
            <div class="coll-content">
                <h4>（1/2）下载 CI/CD 版</h4>
                <p>CI/CD 指持续整合与开发，此处代表 GitHub Actions、Pipelines 代码整合辅助以及自动编译。由于 SVT-AV1 没有发布正式版下载途径，所以 CI/CD 版就是最新；CI/CD 版的主要用途是检查代码能不能正常编译为程序，且相比于常规意义上（经过人工检验后发布）的正式版有一定“Beta 测试”性质（未完全测试的新功能、新缺陷、未注明的变更、参数值调整、内部版本号、runtime 错误），其可靠性需要用户自行适应。</p>
                <p>在 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/pipelines?page=1&scope=all&ref=master&username=hassount&source=schedule&status=success">Gitlab pipelines</a> 列表中，找最新（顶部）显示为已通过的 Daily Run 计划，其右侧的“操作”分栏点击展开，填写“Release”过滤，然后根据当前操作系统下载编译好的压缩包，x86-64 系统下为压缩包中的 <code>SvtAv1Enc.dll</code>、<code>SvtAv1EncApp.exe</code>。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：下载——Windows 手动编译 SVT-AV1 编码器</button>
            <div class="coll-content">
                <h4>（2/2）手动编译</h4>
                <ol>
                    <li>安装 Visual Studio <a href="https://www.visualstudio.com/vs/older-downloads/">2017</a>、<a href="https://visualstudio.microsoft.com/downloads/">2019 或新版本</a></li>
                    <li>打开 Visual Studio 后，选择使用 C++ 桌面应用开发组件
                        <ul><li>若窗口不见，则从主窗口顶部栏的工具（Tools）——获取工具和功能（Get tools and features）中打开</li></ul>
                    </li>
                    <li>下载 <a href="https://github.com/Kitware/CMake/releases/download/v3.24.2/cmake-3.24.2-windows-x86_64.msi">CMake</a> 并安装在默认路径（<code>C:\Program Files\CMake</code>）</li>
                    <li>下载 <a href="https://www.nasm.us/pub/nasm/releasebuilds/2.16.03/win64/nasm-2.16.03-win64.zip">NASM</a> 压缩包并将其中的 nasm.exe 移动到系统环境变量（PATH）录入的位置（如 <code>C:\Windows\System32</code> 中）</li>
                    <li>将 SVT-AV1 项目<a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/archive/master/SVT-AV1-master.zip">打包下载</a>并解压</li>
                    <li>运行解压项目中的 <code>*-master/Build/windows/build.bat</code></li>
                    <li>将 <code>*-master\Bin\Debug</code> 中找到 <code>SvtAv1EncApp.exe</code>、<code>SvtAv1Enc.dll</code> 拷贝到需要的位置，然后通过 <code>SvtAv1EncApp.exe -v</code> 命令检查</li>
                </ol>
                <p>SVT-AV1 编码器的官方推荐下载和编译流程，见 <a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/Build-Guide.md">Build Guide</a>，<a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/blob/master/Docs/ARM-Build-Guide.md?ref_type=heads">ARM（aarch64）Build Guide</a>：</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">点击展开/折叠内容：下载——Windows+LLVM 手动编译 SVT-AV1-PSY、SVT-AV1 编码器</button>
            <div class="coll-content">
                <p class="text-gray-side">警告：本内容未经验证，建议直接阅读原文：<a href="https://discord.com/channels/992019264959676448/1253334764920766505">discord/AV1 weeb edition/scripts-tools-and-guides</a>。</p>
                <h4>（1/4）下载并安装编译工具</h4>
                <ol>
                    <li><b>LLVM</b>：<a href="https://github.com/llvm/llvm-project/releases/latest">github.com/llvm/llvm-project/releases/latest</a></li>
                    <li><b>Microsoft C++ Build Tools</b>：<a href="https://visualstudio.microsoft.com/visual-cpp-build-tools">visualstudio.microsoft.com/visual-cpp-build-tools</a>
                        <ul>
                            <li>下载并运行安装程序，选择“Desktop development with C++”</li>
                            <li>打开一个记事本，将实际安装位置路径拷贝进去</li>
                            <li>仅安装 MSVC 和最新的 Windows 10 / Windows 11 SDK</li>
                        </ul>
                    </li>
                    <li><b>nasm</b>：<a href="https://www.nasm.us/pub/nasm/releasebuilds/?C=M;O=D">nasm.us/pub/nasm/releasebuilds/?C=M;O=D</a></li>
                    <li><b>CMake</b>；<a href="https://github.com/Kitware/CMake/releases">github.com/Kitware/CMake/releases</a></li>
                    <li><b>Git</b>（可选）：<a href="https://git-scm.com/download/win">git-scm.com/download/win</a></li>
                </ol>

                <h4>（2/4）获取源码</h4>
                <p>若照上面安装了 Git，则打开 Git Bash，并使用下方命令下载，否则在 Github/gianno-rosato 下载 ZIP，并带着 svt-av1-psy 目录解压到下载路径。</p>
                <pre><code class="text-smaller language-powershell hljs">
cd &lt;下载路径&gt;
git clone --depth 50 https://github.com/gianni-rosato/svt-av1-psy.git
cd svt-av1-psy
                </code></pre>
                <p class="text-red-emph">注意：后续所有命令须在 Windows CMD 中运行，<b>不要</b>使用 PowerShell。</p>

                <h4>（3/4）编译步骤</h4>
                <p>启用 UTF-8 CMD 窗口：</p>
                <pre><code class="text-smaller language-powershell hljs">
chcp 65001
                </code></pre>
                <p>在先前下载的 VS Build Tools 路径中运行 vcvars64.bat 环境配置脚本（根据实际安装位置调整）：</p>
                <pre><code class="text-smaller language-powershell hljs">
call "C:\Program Files (x86)\Microsoft Visual Studio\2022\BuildTools\VC\Auxiliary\Build\vcvars64.bat"
                </code></pre>
                <p>在同一 CMD 窗口中，指定两个变量以定义使用 Clang-CL 编译器：</p>
                <pre><code class="text-smaller language-powershell hljs">
set "CC=clang-cl"
set "CXX=clang-cl"
                </code></pre>
                <p>用 CMake 生成 Ninja 项目并配置编译选项（根据压制电脑的 CPU 架构进行调整）：</p>
                <ul>
                    <li><code class="code-bold">-flto</code>：启用全程序链接时优化（Link‑Time Optimization）</li>
                    <li><code class="code-bold">-DCMAKE_BUILD_TYPE=Release</code>、<code class="code-bold">/DNDEBUG</code>：编译发布（Release）而非调试（Debug）版本</li>
                    <li><code class="code-bold">/clang:-02</code>：Clang-CL 编译器的优化等级设置</li>
                    <li><code class="code-bold">-DENABLE_AVX512=OFF</code>：禁用 AVX-512 指令集，推荐为支持差或不支持的 CPU 关闭</li>
                    <li><code class="code-bold">-DSVT_AV1_LTO=OFF</code>：使用 <code class="code-bold">-flto</code> 做上位替代，因此关闭</li>
                    <li><code class="code-bold">-march=native</code>：自动根据当前 CPU 架构优化性能
                        <ul><li>有测试表明 <code class="code-bold">-march=znver2</code> 在 ZEN3 架构的 CPU 上比 <code class="code-bold">-march=znver3</code> 快，但这可能是边界条件</li></ul>
                    </li>
                </ul>
                <pre><code class="text-smaller language-powershell hljs">
cmake --fresh -B svt_build -G Ninja \
  -DBUILD_SHARED_LIBS=OFF \
  -DENABLE_AVX512=OFF \
  -DSVT_AV1_LTO=OFF \
  -DCMAKE_CXX_FLAGS_RELEASE="-flto /DNDEBUG /clang:-O2 -march=native" \
  -DCMAKE_C_FLAGS_RELEASE="-flto /DNDEBUG /clang:-O2 -march=native"
                </code></pre>
                <p>最后使用 Ninja 编译：</p>
                <pre><code class="text-smaller language-powershell hljs">
ninja -C svt_build
                </code></pre>
                <h4>（4/4）完整编译命令</h4>
                <p>CMD 命令整体（使用 CMD 原生的 ^ 换行）：</p>
                <pre><code class="text-smaller language-powershell hljs">
chcp 65001

set "CC=clang-cl"
set "CXX=clang-cl"
set "SvtAv1PsyGitPath=指定 SVT-AV1 项目源码路径（目录下有 CMakeLists.txt）"
set "vcvars64Path=指定 VS Build Tools 路径，如 C:\Program Files (x86)\Microsoft Visual Studio\2022\BuildTools\VC\Auxiliary\Build"

cd "%SvtAv1PsyGitPath%"
call "%vcvars64Path%\vcvars64.bat"

cmake --fresh -B svt_build -G Ninja ^
-DCMAKE_BUILD_TYPE=Release ^
-DBUILD_SHARED_LIBS=OFF ^
-DENABLE_AVX512=ON ^
-DSVT_AV1_LTO=OFF ^
-DCMAKE_CXX_FLAGS_RELEASE="-flto /DNDEBUG /clang:-O2 -march=native" ^
-DCMAKE_C_FLAGS_RELEASE="-flto /DNDEBUG /clang:-O2 -march=native"

ninja -C svt_build
                </code></pre>
            </div>

            <!--失败：<h4>（2/2）Windows Docker Desktop 编译</h4>-->
            <h3>下载——基本工具</h3>
            <table class="table-center">
                <tbody>
                    <tr class="border-bottom">
                        <th class="px-3 t-light-gray"><a href="http://ffmpeg.org/download.html">ffmpeg</a></th>
                        <td class="px-1">强大的 CLI 开源视音频处理工具，已内置 libsvtav1</td>
                    </tr>
                    <tr class="border-bottom">
                        <th class="px-3 t-light-gray"><a href="https://mpv.io/installation/">mpv</a></th>
                        <td class="px-1">开源，支持便携的现代视频视频播放器。见<a href="https://nazorip.site/archives/1052/">安装与配置</a>教程</td>
                    </tr>
                    <tr class="border-bottom">
                        <th class="px-3 t-light-gray"><a href="https://www.voukoder.org/">Voukoder</a></th>
                        <td class="px-1">开源 Premiere Vegas After Effects 压制导出插件，分为 Voukoder 和 V-Connector 两部分</td>
                    </tr>
                    <tr class="border-bottom">
                        <th class="px-3 t-light-gray"><a href="https://obsproject.com/zh-cn/download">OBS</a></th>
                        <td class="px-1">强大的开源直播框架和软件，设置略比传统录屏软件复杂，但效果也更好</td>
                    </tr>
                    <tr class="border-bottom">
                        <th class="px-3 t-light-gray"><a href="https://mediaarea.net/zh-CN/MediaInfo">MediaInfo</a></th>
                        <td class="px-1">开源的 GUI 媒体元数据/视音频格式读取器，用于配置正确的压制参数</td>
                    </tr>
                    <tr>
                        <th class="px-3 t-light-gray"><a href="http://ffmpeg.org/download.html">ffprobe</a></th>
                        <td class="px-1">CLI 视音频格式读取器，若检测所得信息与 MediaInfo 所异，则优先参考 ffprobe<br>见<a href="https://nazorip.site/archives/169/">基本使用</a>，以及<a href="https://nazorip.site/archives/1068/">搭配 Excel 的视频数据可视化</a>教程
                        </td>
                    </tr>
                </tbody>
            </table>

            <h3>下载——编译 SSIMULACRA 官方版</h3>
            <p>SSIMULACRA 的官方项目中只有在 Debian 的编译示例，Windows 系统下虽然可以调用 Windows Subsystem for Linux（WSL），但编译后仍然是 Linux 应用。因此这里分为两种编译方法，以便今后参考。</p>
            <button type="button" class="collapsible border-main rounded-3 mt-3">（1/2）使用 WSL 编译 Linux 可执行文件</button>
            <div class="coll-content">
                <h4>（1/2）使用 WSL 编译 Linux 可执行文件</h4>
                <ol>
                    <li>在控制面板——程序——启用或关闭 Windows 功能中，勾选“适用于 Linux 的 Windows 子系统”（需重启）</li>
                    <li><b>重启后，在 PowerShell 窗口中安装 Debian 系统：</b>
                        <ul><li><code>wsl --install Debian</code></li></ul>
                    </li>
                    <li><b>在 PowerShell 窗口运行 WSL（需创建 Linux 用户名和密码）：</b>
                        <ul><li><code>wsl</code></li></ul>
                    </li>
                    <li><b>更新 Debian 子系统：</b>
                        <ul><li><code>sudo apt update && sudo apt upgrade -y</code></li></ul>
                    </li>
                    <li>安装编译 Linux 可执行文件所需工具：
                        <ul>
                            <li><code>sudo apt install build-essential libhwy-dev liblcms2-dev libjpeg62-turbo-dev libpng-dev cmake ninja-build -y</code></li>
                        </ul>
                    </li>
                    <li>下载原项目 zip，并解压文件夹（ssimulacra2-main）到 <code>C:\Users\&lt;用户名&gt;</code> 下</li>
                    <li><b>拷贝到 Debian 本地目录：</b>
                        <ul><li><code>cp -R /mnt/c/Users/&lt;用户名&gt;/ssimulacra2-main /home/&lt;Debian 用户名&gt;/</code></li></ul>
                    </li>
                    <li><b>移动到 Debian 本地目录：</b>
                        <ul><li><code>cd /home/&lt;Debian 用户名&gt;/</code></li></ul>
                    </li>
                    <li><b>为所有项目内文件添加执行权限：</b>
                        <ul><li><code>chmod -R u+x /ssimulacra2-main</code></li></ul>
                    </li>
                    <li><b>运行编译脚本，得到 Linux 可执行文件：</b>
                        <ul><li><code>./ssimulacra2-main/build_ssimulacra</code></li></ul>
                    </li>
                    <li><b>安装并检查 Linux 可执行文件编译结果：</b>
                        <ul>
                            <li><code>sudo apt install file -y && file ./ssimulacra2</code></li>
                            <li><code>./ssimulacra2: ELF 64-bit LSB pie executable, x86-64, version 1 (GNU/Linux), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=5b0e4edcd5a35d87c0c0d6dd4b9c69335c623724, for GNU/Linux 3.2.0, stripped</code></li>
                        </ul>
                    </li>
                </ol>
                <p>注：移除并删除该子系统可通过 <code>wsl --unregister Debian</code> 命令完成。</p>
            </div>

            <button type="button" class="collapsible border-main rounded-3 mt-3">（2/2）编译 Windows 可执行文件</button>
            <div class="coll-content">
                <h4>（2/2）编译 Windows 可执行文件</h4>
                <ol>
                    <li>下载并安装用于编译 Windows 的 <a href="https://www.msys2.org/">MSYS2</a></li>
                    <li><b>安装后打开 MSYS2 并运行更新：</b>
                        <ul>
                            <li><code>pacman -Syu</code></li>
                            <li>如果提示关闭，则关闭后双击安装路径下的 mingw64.exe 重新打开，然后继续更新：</li>
                            <li><code>pacman -Su</code></li>
                        </ul>
                    </li>
                    <li>双击 mingw64.exe 打开命令窗口</li>
                    <li><b>mingw64.exe 命令窗口中，安装编译 Windows 可执行文件所需工具：</b>
                        <ul><li><code>pacman -S mingw-w64-x86_64-gcc mingw-w64-x86_64-cmake mingw-w64-x86_64-ninja git mingw-w64-x86_64-highway mingw-w64-x86_64-lcms2 -y</code></li></ul>
                    </li>
                    <li><b>mingw64.exe 命令窗口中，移动到 ssimulacra2-main 项目路径</b>
                        <ul><li><code>cd /&lt;盘符字母&gt;/&lt;路径&gt;/ssimulacra2-main</code></li></ul>
                    </li>
                    <li><b>创建并移动到编译文件夹</b>
                        <ul><li><code>mkdir build-win && cd build-win</code></li></ul>
                    </li>
                    <li><b>编译 Windows 可执行文件：</b>
                        <ul>
                            <li><code>cmake ../src -G Ninja -DCMAKE_C_COMPILER=x86_64-w64-mingw32-gcc -DCMAKE_CXX_COMPILER=x86_64-w64-mingw32-g++</code></li>
                            <li><code>ninja</code></li>
                        </ul>
                    </li>
                    <li>将 <code>ssimulacra2-main/build-win/ssimulacra2.exe</code> 拷贝到需要的路径中</li>
                    <li>将前几步所下载的一些动态链接库从 <code>&lt;MSYS2 安装位置&gt;\msys64\mingw64\bin</code> 拷贝到 <code>ssimulacra2.exe</code> 的新路径中：
                        <ul>
                            <li><code>libhwy.dll</code></li>
                            <li><code>libjpeg-8</code></li>
                            <li><code>liblcms2-2.dll</code></li>
                            <li><code>libgcc_s_seh-1.dll</code></li>
                            <li><code>libjpeg-8</code></li>
                            <li><code>libstdc++-6.dll</code></li>
                            <li><code>libpng16-16.dll</code></li>
                            <li><code>libstdc++-6.dll</code></li>
                            <li><code>libwinpthread-1.dll</code></li>
                            <li><code>zlib1.dll</code></li>
                        </ul>
                    </li>
                </ol>
            </div>
            <p>使用以下命令测试编译出的程序是否正常运行：</p>
            <pre><code class="text-smaller language-powershell">
ssimulacra2.exe .\原画.png .\压缩.png
            </code></pre>

            <h3>下载——SSIMULACRA2_rs</h3>
            <p>详见：<a href="https://github.com/rust-av/ssimulacra2_bin">GitHub/rust-av</a></p>
            <button type="button" class="collapsible border-main rounded-3 mt-3">（1/1）Windows 安装流程</button>
            <div class="coll-content">
                <ol>
                    <li>安装 <a href="https://rustup.rs/">rustup</a>（编译环境）</li>
                    <li>完整安装 <a href="th/vapoursynth/releases">VapourSynth</a>（ssimulacra_rs 依赖），必须安装到 <code>C:\Program Files\VapourSynth</code> 并选择“Install for all users”
                        <ul><li>此处打开时会报错，并提示特定的 Python 版本要求</li></ul>
                    </li>
                    <li>完整安装 VapourSynth 要求的 <a href="https://www.python.org/">Python</a> 环境版本，必须以管理员身份运行，并在自定义安装中选择“Install for all users”（VapourSynth 依赖）</li>
                    <li>检查 <code>C:\Program Files\VapourSynth\sdk\lib64</code> 路径存在，并且含有 <code>vapoursynth.lib</code>。否则卸载 Python 和 VapourSynth，并仔细阅读并正确完成安装</li>
                    <li>PowerShell 中运行 <code>cargo install ssimulacra2_rs</code> 完成安装，过程中不应该有任何报错</li>
                    <li>将 <code>C:\Users\&lt;用户名&gt;\.cargo\bin\ssimulacra2_rs.exe</code> 拷贝到工作路径，便以卸载 rustup</li>
                    <li>下载 <a href="https://github.com/AkarinVS/L-SMASH-Works/releases">LSMAS 解码器</a>，随意根据缓存文件路径设定选择版本：
                        <ul>
                            <li>官方设定：<code>cachedir=""</code>，命令行窗口当前路径，Windows 默认为 C 盘 </li>
                            <li>cwd 设定：<code>cachedir="."</code>，即当前命令行路径（本教程的测试环节将使用这个）</li>
                            <li>tmp 设定：<code>cachedir=%TEMP%</code>，操作系统指定缓存盘，Windows 一般为 C 盘 </li>
                        </ul>
                    </li>
                    <li>解压并拷贝下载的 <code>LSMASHSource.dll</code>、<code>LSMASHSource.pyd</code>到 VapourSynth 插件目录下 <code>C:\Program Files\VapourSynth\plugins\</code></li>
                </ol>
            </div>
            <p>注：ssimulacra2_rs 在 PowerShell 中无法正常打印信息，需要使用 CMD 运行；LSMAS 缓存文件代表“O__&lt;视频文件名&gt;.lwi” 索引文件，这些文件在运行后不会被删除，下次在相同缓存路径解码相同视频时可以自动跳过，或造成更新后信息与缓存不符的错误。</p>
            
            <h3>下载——SSIMULACRA2 Vapoursynth-HIP</h3>
            <p>一款支持使用英伟达和 AMD 显卡计算 SSIMULACRA、Butteraugli 的动态链接库，支持直接以自带的 FFVSHIP 使用，或在 VapourSynth 内调用。下载与使用，参数推荐值，VaporSynth 使用方法等详情见 <a href="https://github.com/Line-fr/Vship">Github/Line-fr</a>。在测试中，虽然速度大幅提高，但所得分数相比基于 CPU 的 ssimulacra2_rs 平均偏移了 -0.3，这个偏差足以影响上表中的前三排名，故不在本教程中采用。</p>
            <p class="text-gray-side">注：若两组人分别压制了同一片源，则使用 ssimulacra2_rs 计算画质的组得分更高，使用 vship 计算画质的组得分更低而败。</p>

            <h4>直接使用流程</h4>
            <p>此处仍然需要随便提供 <code class="code-bold">--source</code>、<code class="code-bold">--encoded</code> 两个源才能使用 <code class="code-bold">-list-gpu</code> 命令，否则报错，但无大碍。</p>
            <pre><code class="text-smaller language-powershell">
FFVship.exe -s .\源视频 -e .\压缩后 --list-gpu
            </code></pre>
            <p>得到显卡编号后运行</p>
            <pre><code class="text-smaller language-powershell">
FFVship.exe -s .\源视频 -e .\压缩后 -m SSIMULACRA2 --gpu-id &lt;显卡编号&gt; -t 2 -g 3
            </code></pre>
            
            <h2 id="h2-20">参考文献</h2>
            <h3>参考——AV1 编码标准</h3>
            <table class="table-center mb-3">
                <thead>
                    <tr class="border-bottom">
                        <th>网页</th>
                        <th>链接</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-bottom">
                        <td class="px-3">AOMedia AV1 Codec</td>
                        <td class="px-3"><a href="https://martchus.dyn.f3l.de/doc/aom/encoder_guide.html">martchus.dyn.f3l.de</a></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-3">AV1 Bitstream & Decoding Process</td>
                        <td class="px-3"><a href="https://aomediacodec.github.io/av1-spec">aomediacodec.github.io</a></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-3">SVT-AV1 Docs</td>
                        <td class="px-3"><a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/tree/master/Docs/">gitlab.com</a></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-3">Mozilla aom AV1 Github</td>
                        <td class="px-3"><a href="https://github.com/mozilla/aom/tree/46b7bb243b39929c02d6decc1bdb2e39e11540d6/av1/common">github.com/mozilla</a></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-3">Wikidocs AV1 Video Codec</td>
                        <td class="px-3"><a href="https://wikidocs.net/70860">wikidocs.net</a></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-3">AV1 (DAV1D) 解码详解</td>
                        <td class="px-3"><a href="https://lazybing.github.io/blog/categories/av1">lazybing.github.io</a></td>
                    </tr>
                    <tr class="border-bottom">
                        <td class="px-3">AV1 Decoder Model</td>
                        <td class="px-3"><a href="https://norkin.org/research/av1_decoder_model/index.html">norkin.org</a></td>
                    </tr>
                    <tr class="border-bottom">
                        <th>PDF</th>
                        <th></th>
                    </tr>
                    <tr class="border-bottom">
                        <td>CWG-B078[o]_v1 - Tool Description</td>
                        <td><a href="https://aomedia.org/docs/AV1_ToolDescription_v11-clean.pdf">aomedia.org</a></td>
                    </tr>
                    <tr class="border-bottom">
                        <td>An Overview of Coding Tools in AV1</td>
                        <td><a href="https://www.researchgate.net/publication/339456633_An_Overview_of_Coding_Tools_in_AV1_the_First_Video_Codec_from_the_Alliance_for_Open_Media">www.researchgate.net</a></td>
                    </tr>
                    <tr class="border-bottom">
                        <td>A Technical Overview of AV1 (IEEE)</td>
                        <td><a href="https://ieeexplore.ieee.org/document/9363937">ieeexplore.ieee.org</a></td>
                    </tr>
                    <tr>
                        <td>A Technical Overview of AV1 (arxiv)</td>
                        <td><a href="https://arxiv.org/abs/2008.06091">arxiv.org</a></td>
                    </tr>
                </tbody>
            </table>

            <h3>参考——SVT-AV1 编码器</h3>
            <p>见官方文档：<a href="https://gitlab.com/AOMediaCodec/SVT-AV1/-/tree/master/Docs">GitLab</a>。编码步骤详解在在 <code>tree/master/Docs</code> 目录有独立的 Markdown 文档（包括关联细节的详解），如果没有则是在 svt-av1-user-guide、svt-av1-encoder-design 文档中。可以通过 VSCode 的文件夹搜索功能来快速查找；如果还是找不到，则该内容可能位于源代码的注释中，同样可以用 VSCode 的文件夹搜索功能来快速查找。</p>
        </div>

        <!-- Footer -->
        <footer class="py-3 my-4 align-items-center border-top">
            <p>联系：
                <a href='https://github.com/iAvoe/'>Github</a>，
                <a href='https://github.com/iAvoe/av1-web-tutorial/issues'>Github Issues</a>，
                <a href='https://jq.qq.com/?_wv=1027&k=5YJFXyf'>QQ 群：691892901</a>
            </p>
            &#x24B8; iAvoe，2025
        </footer>
	</body>
</html>